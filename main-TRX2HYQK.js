var Nv=Object.defineProperty,kv=Object.defineProperties;var Rv=Object.getOwnPropertyDescriptors;var Lp=Object.getOwnPropertySymbols;var Ov=Object.prototype.hasOwnProperty,Fv=Object.prototype.propertyIsEnumerable;var Bp=(t,e,n)=>e in t?Nv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,B=(t,e)=>{for(var n in e||={})Ov.call(e,n)&&Bp(t,n,e[n]);if(Lp)for(var n of Lp(e))Fv.call(e,n)&&Bp(t,n,e[n]);return t},z=(t,e)=>kv(t,Rv(e));var et=null,cr=!1,sl=1,Vv=null,st=Symbol("SIGNAL");function te(t){let e=et;return et=t,e}function ur(){return et}var mo={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ti(t){if(cr)throw new Error("");if(et===null)return;et.consumerOnSignalRead(t);let e=et.producersTail;if(e!==void 0&&e.producer===t)return;let n,o=et.recomputing;if(o&&(n=e!==void 0?e.nextProducer:et.producers,n!==void 0&&n.producer===t)){et.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===et&&(!o||Bv(i,et)))return;let r=ho(et),s={producer:t,consumer:et,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};et.producersTail=s,e!==void 0?e.nextProducer=s:et.producers=s,r&&qp(t,s)}function Up(){sl++}function al(t){if(!(ho(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===sl)){if(!t.producerMustRecompute(t)&&!oi(t)){rl(t);return}t.producerRecomputeValue(t),rl(t)}}function ll(t){if(t.consumers===void 0)return;let e=cr;cr=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let o=n.consumer;o.dirty||Lv(o)}}finally{cr=e}}function cl(){return et?.consumerAllowSignalWrites!==!1}function Lv(t){t.dirty=!0,ll(t),t.consumerMarkedDirty?.(t)}function rl(t){t.dirty=!1,t.lastCleanEpoch=sl}function go(t){return t&&Hp(t),te(t)}function Hp(t){t.producersTail=void 0,t.recomputing=!0}function ni(t,e){te(e),t&&Gp(t)}function Gp(t){t.recomputing=!1;let e=t.producersTail,n=e!==void 0?e.nextProducer:t.producers;if(n!==void 0){if(ho(t))do n=dl(n);while(n!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function oi(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,o=e.lastReadVersion;if(o!==n.version||(al(n),o!==n.version))return!0}return!1}function Vn(t){if(ho(t)){let e=t.producers;for(;e!==void 0;)e=dl(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function qp(t,e){let n=t.consumersTail,o=ho(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!o)for(let i=t.producers;i!==void 0;i=i.nextProducer)qp(i.producer,i)}function dl(t){let e=t.producer,n=t.nextProducer,o=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,o!==void 0?o.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=o;else if(e.consumers=o,!ho(e)){let r=e.producers;for(;r!==void 0;)r=dl(r)}return n}function ho(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function ul(t){Vv?.(t)}function Bv(t,e){let n=e.producersTail;if(n!==void 0){let o=e.producers;do{if(o===t)return!0;if(o===n)break;o=o.nextProducer}while(o!==void 0)}return!1}function pl(t,e){return Object.is(t,e)}function pr(t,e){let n=Object.create(Uv);n.computation=t,e!==void 0&&(n.equal=e);let o=()=>{if(al(n),ti(n),n.value===dr)throw n.error;return n.value};return o[st]=n,ul(n),o}var ol=Symbol("UNSET"),il=Symbol("COMPUTING"),dr=Symbol("ERRORED"),Uv=z(B({},mo),{value:ol,dirty:!0,error:null,equal:pl,kind:"computed",producerMustRecompute(t){return t.value===ol||t.value===il},producerRecomputeValue(t){if(t.value===il)throw new Error("");let e=t.value;t.value=il;let n=go(t),o,i=!1;try{o=t.computation(),te(null),i=e!==ol&&e!==dr&&o!==dr&&t.equal(e,o)}catch(r){o=dr,t.error=r}finally{ni(t,n)}if(i){t.value=e;return}t.value=o,t.version++}});function Hv(){throw new Error}var $p=Hv;function zp(t){$p(t)}function fl(t){$p=t}var Gv=null;function ml(t,e){let n=Object.create(fr);n.value=t,e!==void 0&&(n.equal=e);let o=()=>Wp(n);return o[st]=n,ul(n),[o,s=>ii(n,s),s=>Yp(n,s)]}function Wp(t){return ti(t),t.value}function ii(t,e){cl()||zp(t),t.equal(t.value,e)||(t.value=e,qv(t))}function Yp(t,e){cl()||zp(t),ii(t,e(t.value))}var fr=z(B({},mo),{equal:pl,value:void 0,kind:"signal"});function qv(t){t.version++,Up(),ll(t),Gv?.(t)}function gl(t){let e=te(null);try{return t()}finally{te(e)}}var hl=z(B({},mo),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function vl(t){if(t.dirty=!1,t.version>0&&!oi(t))return;t.version++;let e=go(t);try{t.cleanup(),t.fn()}finally{ni(t,e)}}function Se(t){return typeof t=="function"}function mr(t){let n=t(o=>{Error.call(o),o.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var gr=mr(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((o,i)=>`${i+1}) ${o.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function ri(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var nt=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let r of n)r.remove(this);else n.remove(this);let{initialTeardown:o}=this;if(Se(o))try{o()}catch(r){e=r instanceof gr?r.errors:[r]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let r of i)try{Jp(r)}catch(s){e=e??[],s instanceof gr?e=[...e,...s.errors]:e.push(s)}}if(e)throw new gr(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Jp(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&ri(n,e)}remove(e){let{_finalizers:n}=this;n&&ri(n,e),e instanceof t&&e._removeParent(this)}};nt.EMPTY=(()=>{let t=new nt;return t.closed=!0,t})();var _l=nt.EMPTY;function hr(t){return t instanceof nt||t&&"closed"in t&&Se(t.remove)&&Se(t.add)&&Se(t.unsubscribe)}function Jp(t){Se(t)?t():t.unsubscribe()}var wt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var vo={setTimeout(t,e,...n){let{delegate:o}=vo;return o?.setTimeout?o.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=vo;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function vr(t){vo.setTimeout(()=>{let{onUnhandledError:e}=wt;if(e)e(t);else throw t})}function yl(){}var jp=Cl("C",void 0,void 0);function Zp(t){return Cl("E",void 0,t)}function Kp(t){return Cl("N",t,void 0)}function Cl(t,e,n){return{kind:t,value:e,error:n}}var Ln=null;function _o(t){if(wt.useDeprecatedSynchronousErrorHandling){let e=!Ln;if(e&&(Ln={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:o}=Ln;if(Ln=null,n)throw o}}else t()}function Qp(t){wt.useDeprecatedSynchronousErrorHandling&&Ln&&(Ln.errorThrown=!0,Ln.error=t)}var Bn=class extends nt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,hr(e)&&e.add(this)):this.destination=Wv}static create(e,n,o){return new yo(e,n,o)}next(e){this.isStopped?Sl(Kp(e),this):this._next(e)}error(e){this.isStopped?Sl(Zp(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Sl(jp,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},$v=Function.prototype.bind;function bl(t,e){return $v.call(t,e)}var El=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(o){_r(o)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(o){_r(o)}else _r(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){_r(n)}}},yo=class extends Bn{constructor(e,n,o){super();let i;if(Se(e)||!e)i={next:e??void 0,error:n??void 0,complete:o??void 0};else{let r;this&&wt.useDeprecatedNextContext?(r=Object.create(e),r.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&bl(e.next,r),error:e.error&&bl(e.error,r),complete:e.complete&&bl(e.complete,r)}):i=e}this.destination=new El(i)}};function _r(t){wt.useDeprecatedSynchronousErrorHandling?Qp(t):vr(t)}function zv(t){throw t}function Sl(t,e){let{onStoppedNotification:n}=wt;n&&vo.setTimeout(()=>n(t,e))}var Wv={closed:!0,next:yl,error:zv,complete:yl};var Co=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Xp(t){return t}function ef(t){return t.length===0?Xp:t.length===1?t[0]:function(n){return t.reduce((o,i)=>i(o),n)}}var $e=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let o=new t;return o.source=this,o.operator=n,o}subscribe(n,o,i){let r=Jv(n)?n:new yo(n,o,i);return _o(()=>{let{operator:s,source:l}=this;r.add(s?s.call(r,l):l?this._subscribe(r):this._trySubscribe(r))}),r}_trySubscribe(n){try{return this._subscribe(n)}catch(o){n.error(o)}}forEach(n,o){return o=tf(o),new o((i,r)=>{let s=new yo({next:l=>{try{n(l)}catch(d){r(d),s.unsubscribe()}},error:r,complete:i});this.subscribe(s)})}_subscribe(n){var o;return(o=this.source)===null||o===void 0?void 0:o.subscribe(n)}[Co](){return this}pipe(...n){return ef(n)(this)}toPromise(n){return n=tf(n),new n((o,i)=>{let r;this.subscribe(s=>r=s,s=>i(s),()=>o(r))})}}return t.create=e=>new t(e),t})();function tf(t){var e;return(e=t??wt.Promise)!==null&&e!==void 0?e:Promise}function Yv(t){return t&&Se(t.next)&&Se(t.error)&&Se(t.complete)}function Jv(t){return t&&t instanceof Bn||Yv(t)&&hr(t)}function jv(t){return Se(t?.lift)}function bo(t){return e=>{if(jv(e))return e.lift(function(n){try{return t(n,this)}catch(o){this.error(o)}});throw new TypeError("Unable to lift unknown Observable type")}}function So(t,e,n,o,i){return new Ml(t,e,n,o,i)}var Ml=class extends Bn{constructor(e,n,o,i,r,s){super(e),this.onFinalize=r,this.shouldUnsubscribe=s,this._next=n?function(l){try{n(l)}catch(d){e.error(d)}}:super._next,this._error=i?function(l){try{i(l)}catch(d){e.error(d)}finally{this.unsubscribe()}}:super._error,this._complete=o?function(){try{o()}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var nf=mr(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var xt=(()=>{class t extends $e{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let o=new yr(this,this);return o.operator=n,o}_throwIfClosed(){if(this.closed)throw new nf}next(n){_o(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let o of this.currentObservers)o.next(n)}})}error(n){_o(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:o}=this;for(;o.length;)o.shift().error(n)}})}complete(){_o(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:o,isStopped:i,observers:r}=this;return o||i?_l:(this.currentObservers=null,r.push(n),new nt(()=>{this.currentObservers=null,ri(r,n)}))}_checkFinalizedStatuses(n){let{hasError:o,thrownError:i,isStopped:r}=this;o?n.error(i):r&&n.complete()}asObservable(){let n=new $e;return n.source=this,n}}return t.create=(e,n)=>new yr(e,n),t})(),yr=class extends xt{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,o;(o=(n=this.destination)===null||n===void 0?void 0:n.next)===null||o===void 0||o.call(n,e)}error(e){var n,o;(o=(n=this.destination)===null||n===void 0?void 0:n.error)===null||o===void 0||o.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,o;return(o=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&o!==void 0?o:_l}};var si=class extends xt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:o}=this;if(e)throw n;return this._throwIfClosed(),o}next(e){super.next(this._value=e)}};function Zv(t){return t[t.length-1]}function of(t){return Se(Zv(t))?t.pop():void 0}function sf(t,e,n,o){function i(r){return r instanceof n?r:new n(function(s){s(r)})}return new(n||(n=Promise))(function(r,s){function l(f){try{u(o.next(f))}catch(v){s(v)}}function d(f){try{u(o.throw(f))}catch(v){s(v)}}function u(f){f.done?r(f.value):i(f.value).then(l,d)}u((o=o.apply(t,e||[])).next())})}function rf(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Un(t){return this instanceof Un?(this.v=t,this):new Un(t)}function af(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(t,e||[]),i,r=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(S){return function(D){return Promise.resolve(D).then(S,v)}}function l(S,D){o[S]&&(i[S]=function(V){return new Promise(function(q,$){r.push([S,V,q,$])>1||d(S,V)})},D&&(i[S]=D(i[S])))}function d(S,D){try{u(o[S](D))}catch(V){_(r[0][3],V)}}function u(S){S.value instanceof Un?Promise.resolve(S.value.v).then(f,v):_(r[0][2],S)}function f(S){d("next",S)}function v(S){d("throw",S)}function _(S,D){S(D),r.shift(),r.length&&d(r[0][0],r[0][1])}}function lf(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof rf=="function"?rf(t):t[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(r){n[r]=t[r]&&function(s){return new Promise(function(l,d){s=t[r](s),i(l,d,s.done,s.value)})}}function i(r,s,l,d){Promise.resolve(d).then(function(u){r({value:u,done:l})},s)}}var Cr=t=>t&&typeof t.length=="number"&&typeof t!="function";function br(t){return Se(t?.then)}function Sr(t){return Se(t[Co])}function Er(t){return Symbol.asyncIterator&&Se(t?.[Symbol.asyncIterator])}function Mr(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Kv(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var wr=Kv();function xr(t){return Se(t?.[wr])}function Ir(t){return af(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:o,done:i}=yield Un(n.read());if(i)return yield Un(void 0);yield yield Un(o)}}finally{n.releaseLock()}})}function Tr(t){return Se(t?.getReader)}function yn(t){if(t instanceof $e)return t;if(t!=null){if(Sr(t))return Qv(t);if(Cr(t))return Xv(t);if(br(t))return e_(t);if(Er(t))return cf(t);if(xr(t))return t_(t);if(Tr(t))return n_(t)}throw Mr(t)}function Qv(t){return new $e(e=>{let n=t[Co]();if(Se(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Xv(t){return new $e(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function e_(t){return new $e(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,vr)})}function t_(t){return new $e(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function cf(t){return new $e(e=>{o_(t,e).catch(n=>e.error(n))})}function n_(t){return cf(Ir(t))}function o_(t,e){var n,o,i,r;return sf(this,void 0,void 0,function*(){try{for(n=lf(t);o=yield n.next(),!o.done;){let s=o.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{o&&!o.done&&(r=n.return)&&(yield r.call(n))}finally{if(i)throw i.error}}e.complete()})}function zt(t,e,n,o=0,i=!1){let r=e.schedule(function(){n(),i?t.add(this.schedule(null,o)):this.unsubscribe()},o);if(t.add(r),!i)return r}function Pr(t,e=0){return bo((n,o)=>{n.subscribe(So(o,i=>zt(o,t,()=>o.next(i),e),()=>zt(o,t,()=>o.complete(),e),i=>zt(o,t,()=>o.error(i),e)))})}function Dr(t,e=0){return bo((n,o)=>{o.add(t.schedule(()=>n.subscribe(o),e))})}function df(t,e){return yn(t).pipe(Dr(e),Pr(e))}function uf(t,e){return yn(t).pipe(Dr(e),Pr(e))}function pf(t,e){return new $e(n=>{let o=0;return e.schedule(function(){o===t.length?n.complete():(n.next(t[o++]),n.closed||this.schedule())})})}function ff(t,e){return new $e(n=>{let o;return zt(n,e,()=>{o=t[wr](),zt(n,e,()=>{let i,r;try{({value:i,done:r}=o.next())}catch(s){n.error(s);return}r?n.complete():n.next(i)},0,!0)}),()=>Se(o?.return)&&o.return()})}function Ar(t,e){if(!t)throw new Error("Iterable cannot be null");return new $e(n=>{zt(n,e,()=>{let o=t[Symbol.asyncIterator]();zt(n,e,()=>{o.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function mf(t,e){return Ar(Ir(t),e)}function gf(t,e){if(t!=null){if(Sr(t))return df(t,e);if(Cr(t))return pf(t,e);if(br(t))return uf(t,e);if(Er(t))return Ar(t,e);if(xr(t))return ff(t,e);if(Tr(t))return mf(t,e)}throw Mr(t)}function wl(t,e){return e?gf(t,e):yn(t)}function Hn(t,e){return bo((n,o)=>{let i=0;n.subscribe(So(o,r=>{o.next(t.call(e,r,i++))}))})}var{isArray:i_}=Array;function r_(t,e){return i_(e)?t(...e):t(e)}function hf(t){return Hn(e=>r_(t,e))}var{isArray:s_}=Array,{getPrototypeOf:a_,prototype:l_,keys:c_}=Object;function vf(t){if(t.length===1){let e=t[0];if(s_(e))return{args:e,keys:null};if(d_(e)){let n=c_(e);return{args:n.map(o=>e[o]),keys:n}}}return{args:t,keys:null}}function d_(t){return t&&typeof t=="object"&&a_(t)===l_}function _f(t,e){return t.reduce((n,o,i)=>(n[o]=e[i],n),{})}function xl(...t){let e=of(t),{args:n,keys:o}=vf(t),i=new $e(r=>{let{length:s}=n;if(!s){r.complete();return}let l=new Array(s),d=s,u=s;for(let f=0;f<s;f++){let v=!1;yn(n[f]).subscribe(So(r,_=>{v||(v=!0,u--),l[f]=_},()=>d--,void 0,()=>{(!d||!v)&&(u||r.next(o?_f(o,l):l),r.complete())}))}});return e?i.pipe(hf(e)):i}var Il;function Nr(){return Il}function Wt(t){let e=Il;return Il=t,e}var yf=Symbol("NotFound");function Eo(t){return t===yf||t?.name==="\u0275NotFound"}var Lr="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",ie=class extends Error{code;constructor(e,n){super(wo(e,n)),this.code=e}};function u_(t){return`NG0${Math.abs(t)}`}function wo(t,e){return`${u_(t)}${e?": "+e:""}`}var wn=globalThis;function Te(t){for(let e in t)if(t[e]===Te)return e;throw Error("")}function Mf(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Cn(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(Cn).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let o=n.indexOf(`
`);return o>=0?n.slice(0,o):n}function Ul(t,e){return t?e?`${t} ${e}`:t:e||""}var p_=Te({__forward_ref__:Te});function ft(t){return t.__forward_ref__=ft,t.toString=function(){return Cn(this())},t}function Xe(t){return Hl(t)?t():t}function Hl(t){return typeof t=="function"&&t.hasOwnProperty(p_)&&t.__forward_ref__===ft}function fe(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Wn(t){return{providers:t.providers||[],imports:t.imports||[]}}function Br(t){return f_(t,Ur)}function f_(t,e){return t.hasOwnProperty(e)&&t[e]||null}function m_(t){let e=t?.[Ur]??null;return e||null}function Pl(t){return t&&t.hasOwnProperty(Rr)?t[Rr]:null}var Ur=Te({\u0275prov:Te}),Rr=Te({\u0275inj:Te}),ge=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=fe({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Gl(t){return t&&!!t.\u0275providers}var ql=Te({\u0275cmp:Te}),$l=Te({\u0275dir:Te}),zl=Te({\u0275pipe:Te});var li=Te({\u0275fac:Te}),Yn=Te({__NG_ELEMENT_ID__:Te}),Cf=Te({__NG_ENV_ID__:Te});function Yt(t){return typeof t=="string"?t:t==null?"":String(t)}function wf(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Yt(t)}var xf=Te({ngErrorCode:Te}),g_=Te({ngErrorMessage:Te}),h_=Te({ngTokenPath:Te});function Wl(t,e){return If("",-200,e)}function Hr(t,e){throw new ie(-201,!1)}function If(t,e,n){let o=new ie(e,t);return o[xf]=e,o[g_]=t,n&&(o[h_]=n),o}function v_(t){return t[xf]}var Dl;function Tf(){return Dl}function ot(t){let e=Dl;return Dl=t,e}function Yl(t,e,n){let o=Br(t);if(o&&o.providedIn=="root")return o.value===void 0?o.value=o.factory():o.value;if(n&8)return null;if(e!==void 0)return e;Hr(t,"Injector")}var __={},Gn=__,y_="__NG_DI_FLAG__",Al=class{injector;constructor(e){this.injector=e}retrieve(e,n){let o=qn(n)||0;try{return this.injector.get(e,o&8?null:Gn,o)}catch(i){if(Eo(i))return i;throw i}}};function C_(t,e=0){let n=Nr();if(n===void 0)throw new ie(-203,!1);if(n===null)return Yl(t,void 0,e);{let o=b_(e),i=n.retrieve(t,o);if(Eo(i)){if(o.optional)return null;throw i}return i}}function ye(t,e=0){return(Tf()||C_)(Xe(t),e)}function w(t,e){return ye(t,qn(e))}function qn(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function b_(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function Nl(t){let e=[];for(let n=0;n<t.length;n++){let o=Xe(t[n]);if(Array.isArray(o)){if(o.length===0)throw new ie(900,!1);let i,r=0;for(let s=0;s<o.length;s++){let l=o[s],d=S_(l);typeof d=="number"?d===-1?i=l.token:r|=d:i=l}e.push(ye(i,r))}else e.push(ye(o))}return e}function S_(t){return t[y_]}function bn(t,e){let n=t.hasOwnProperty(li);return n?t[li]:null}function Pf(t,e,n){if(t.length!==e.length)return!1;for(let o=0;o<t.length;o++){let i=t[o],r=e[o];if(n&&(i=n(i),r=n(r)),r!==i)return!1}return!0}function Df(t){return t.flat(Number.POSITIVE_INFINITY)}function Gr(t,e){t.forEach(n=>Array.isArray(n)?Gr(n,e):e(n))}function Jl(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function mi(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Af(t,e,n,o){let i=t.length;if(i==e)t.push(n,o);else if(i===1)t.push(o,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let r=i-2;t[i]=t[r],i--}t[e]=n,t[e+1]=o}}function Nf(t,e,n){let o=xo(t,e);return o>=0?t[o|1]=n:(o=~o,Af(t,o,e,n)),o}function qr(t,e){let n=xo(t,e);if(n>=0)return t[n|1]}function xo(t,e){return E_(t,e,1)}function E_(t,e,n){let o=0,i=t.length>>n;for(;i!==o;){let r=o+(i-o>>1),s=t[r<<n];if(e===s)return r<<n;s>e?i=r:o=r+1}return~(i<<n)}var xn={},ut=[],Io=new ge(""),jl=new ge("",-1),Zl=new ge(""),ci=class{get(e,n=Gn){if(n===Gn){let i=If("",-201);throw i.name="\u0275NotFound",i}return n}};function Jn(t){return t[ql]||null}function Kl(t){return t[$l]||null}function kf(t){return t[zl]||null}function $r(t){return{\u0275providers:t}}function Rf(...t){return{\u0275providers:Ql(!0,t),\u0275fromNgModule:!0}}function Ql(t,...e){let n=[],o=new Set,i,r=s=>{n.push(s)};return Gr(e,s=>{let l=s;Or(l,r,[],o)&&(i||=[],i.push(l))}),i!==void 0&&Of(i,r),n}function Of(t,e){for(let n=0;n<t.length;n++){let{ngModule:o,providers:i}=t[n];Xl(i,r=>{e(r,o)})}}function Or(t,e,n,o){if(t=Xe(t),!t)return!1;let i=null,r=Pl(t),s=!r&&Jn(t);if(!r&&!s){let d=t.ngModule;if(r=Pl(d),r)i=d;else return!1}else{if(s&&!s.standalone)return!1;i=t}let l=o.has(i);if(s){if(l)return!1;if(o.add(i),s.dependencies){let d=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of d)Or(u,e,n,o)}}else if(r){if(r.imports!=null&&!l){o.add(i);let u;try{Gr(r.imports,f=>{Or(f,e,n,o)&&(u||=[],u.push(f))})}finally{}u!==void 0&&Of(u,e)}if(!l){let u=bn(i)||(()=>new i);e({provide:i,useFactory:u,deps:ut},i),e({provide:Zl,useValue:i,multi:!0},i),e({provide:Io,useValue:()=>ye(i),multi:!0},i)}let d=r.providers;if(d!=null&&!l){let u=t;Xl(d,f=>{e(f,u)})}}else return!1;return i!==t&&t.providers!==void 0}function Xl(t,e){for(let n of t)Gl(n)&&(n=n.\u0275providers),Array.isArray(n)?Xl(n,e):e(n)}var M_=Te({provide:String,useValue:Te});function Ff(t){return t!==null&&typeof t=="object"&&M_ in t}function w_(t){return!!(t&&t.useExisting)}function x_(t){return!!(t&&t.useFactory)}function $n(t){return typeof t=="function"}function Vf(t){return!!t.useClass}var gi=new ge(""),kr={},bf={},Tl;function hi(){return Tl===void 0&&(Tl=new ci),Tl}var It=class{},zn=class extends It{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,o,i){super(),this.parent=n,this.source=o,this.scopes=i,Rl(e,s=>this.processProvider(s)),this.records.set(jl,Mo(void 0,this)),i.has("environment")&&this.records.set(It,Mo(void 0,this));let r=this.records.get(gi);r!=null&&typeof r.value=="string"&&this.scopes.add(r.value),this.injectorDefTypes=new Set(this.get(Zl,ut,{self:!0}))}retrieve(e,n){let o=qn(n)||0;try{return this.get(e,Gn,o)}catch(i){if(Eo(i))return i;throw i}}destroy(){ai(this),this._destroyed=!0;let e=te(null);try{for(let o of this._ngOnDestroyHooks)o.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let o of n)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),te(e)}}onDestroy(e){return ai(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){ai(this);let n=Wt(this),o=ot(void 0),i;try{return e()}finally{Wt(n),ot(o)}}get(e,n=Gn,o){if(ai(this),e.hasOwnProperty(Cf))return e[Cf](this);let i=qn(o),r,s=Wt(this),l=ot(void 0);try{if(!(i&4)){let u=this.records.get(e);if(u===void 0){let f=A_(e)&&Br(e);f&&this.injectableDefInScope(f)?u=Mo(kl(e),kr):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u,i)}let d=i&2?hi():this.parent;return n=i&8&&n===Gn?null:n,d.get(e,n)}catch(d){let u=v_(d);throw u===-200||u===-201?new ie(u,null):d}finally{ot(l),Wt(s)}}resolveInjectorInitializers(){let e=te(null),n=Wt(this),o=ot(void 0),i;try{let r=this.get(Io,ut,{self:!0});for(let s of r)s()}finally{Wt(n),ot(o),te(e)}}toString(){let e=[],n=this.records;for(let o of n.keys())e.push(Cn(o));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Xe(e);let n=$n(e)?e:Xe(e&&e.provide),o=T_(e);if(!$n(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Mo(void 0,kr,!0),i.factory=()=>Nl(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,o)}hydrate(e,n,o){let i=te(null);try{if(n.value===bf)throw Wl(Cn(e));return n.value===kr&&(n.value=bf,n.value=n.factory(void 0,o)),typeof n.value=="object"&&n.value&&D_(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{te(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Xe(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function kl(t){let e=Br(t),n=e!==null?e.factory:bn(t);if(n!==null)return n;if(t instanceof ge)throw new ie(204,!1);if(t instanceof Function)return I_(t);throw new ie(204,!1)}function I_(t){if(t.length>0)throw new ie(204,!1);let n=m_(t);return n!==null?()=>n.factory(t):()=>new t}function T_(t){if(Ff(t))return Mo(void 0,t.useValue);{let e=ec(t);return Mo(e,kr)}}function ec(t,e,n){let o;if($n(t)){let i=Xe(t);return bn(i)||kl(i)}else if(Ff(t))o=()=>Xe(t.useValue);else if(x_(t))o=()=>t.useFactory(...Nl(t.deps||[]));else if(w_(t))o=(i,r)=>ye(Xe(t.useExisting),r!==void 0&&r&8?8:void 0);else{let i=Xe(t&&(t.useClass||t.provide));if(P_(t))o=()=>new i(...Nl(t.deps));else return bn(i)||kl(i)}return o}function ai(t){if(t.destroyed)throw new ie(205,!1)}function Mo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function P_(t){return!!t.deps}function D_(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function A_(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function Rl(t,e){for(let n of t)Array.isArray(n)?Rl(n,e):n&&Gl(n)?Rl(n.\u0275providers,e):e(n)}function zr(t,e){let n;t instanceof zn?(ai(t),n=t):n=new Al(t);let o,i=Wt(n),r=ot(void 0);try{return e()}finally{Wt(i),ot(r)}}function Lf(){return Tf()!==void 0||Nr()!=null}var Tt=0,ne=1,re=2,Je=3,_t=4,yt=5,To=6,Po=7,ze=8,cn=9,Jt=10,Le=11,Do=12,tc=13,jn=14,mt=15,In=16,Zn=17,jt=18,vi=19,nc=20,ln=21,Wr=22,Sn=23,gt=24,Kn=25,Qn=26,He=27,Bf=1,oc=6,Tn=7,_i=8,Xn=9,Ge=10;function Zt(t){return Array.isArray(t)&&typeof t[Bf]=="object"}function Pt(t){return Array.isArray(t)&&t[Bf]===!0}function ic(t){return(t.flags&4)!==0}function Pn(t){return t.componentOffset>-1}function Yr(t){return(t.flags&1)===1}function Kt(t){return!!t.template}function Ao(t){return(t[re]&512)!==0}function eo(t){return(t[re]&256)===256}var rc="svg",Uf="math";function Ct(t){for(;Array.isArray(t);)t=t[Tt];return t}function sc(t,e){return Ct(e[t])}function Dt(t,e){return Ct(e[t.index])}function yi(t,e){return t.data[e]}function Jr(t,e){return t[e]}function Ci(t,e,n,o){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=o}function bt(t,e){let n=e[t];return Zt(n)?n:n[Tt]}function Hf(t){return(t[re]&4)===4}function jr(t){return(t[re]&128)===128}function Gf(t){return Pt(t[Je])}function Qt(t,e){return e==null?null:t[e]}function ac(t){t[Zn]=0}function lc(t){t[re]&1024||(t[re]|=1024,jr(t)&&to(t))}function qf(t,e){for(;t>0;)e=e[jn],t--;return e}function bi(t){return!!(t[re]&9216||t[gt]?.dirty)}function Zr(t){t[Jt].changeDetectionScheduler?.notify(8),t[re]&64&&(t[re]|=1024),bi(t)&&to(t)}function to(t){t[Jt].changeDetectionScheduler?.notify(0);let e=En(t);for(;e!==null&&!(e[re]&8192||(e[re]|=8192,!jr(e)));)e=En(e)}function cc(t,e){if(eo(t))throw new ie(911,!1);t[ln]===null&&(t[ln]=[]),t[ln].push(e)}function $f(t,e){if(t[ln]===null)return;let n=t[ln].indexOf(e);n!==-1&&t[ln].splice(n,1)}function En(t){let e=t[Je];return Pt(e)?e[Je]:e}function dc(t){return t[Po]??=[]}function uc(t){return t.cleanup??=[]}function zf(t,e,n,o){let i=dc(e);i.push(n),t.firstCreatePass&&uc(t).push(o,i.length-1)}var ce={lFrame:rm(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Ol=!1;function Wf(){return ce.lFrame.elementDepthCount}function Yf(){ce.lFrame.elementDepthCount++}function pc(){ce.lFrame.elementDepthCount--}function Jf(){return ce.bindingsEnabled}function jf(){return ce.skipHydrationRootTNode!==null}function fc(t){return ce.skipHydrationRootTNode===t}function mc(){ce.skipHydrationRootTNode=null}function se(){return ce.lFrame.lView}function Ye(){return ce.lFrame.tView}function I(t){return ce.lFrame.contextLView=t,t[ze]}function T(t){return ce.lFrame.contextLView=null,t}function rt(){let t=gc();for(;t!==null&&t.type===64;)t=t.parent;return t}function gc(){return ce.lFrame.currentTNode}function Zf(){let t=ce.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function no(t,e){let n=ce.lFrame;n.currentTNode=t,n.isParent=e}function hc(){return ce.lFrame.isParent}function Kf(){ce.lFrame.isParent=!1}function Qf(){return ce.lFrame.contextLView}function vc(){return Ol}function di(t){let e=Ol;return Ol=t,e}function Si(){let t=ce.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function _c(){return ce.lFrame.bindingIndex}function Xf(t){return ce.lFrame.bindingIndex=t}function oo(){return ce.lFrame.bindingIndex++}function Kr(t){let e=ce.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function em(){return ce.lFrame.inI18n}function tm(t,e){let n=ce.lFrame;n.bindingIndex=n.bindingRootIndex=t,Qr(e)}function nm(){return ce.lFrame.currentDirectiveIndex}function Qr(t){ce.lFrame.currentDirectiveIndex=t}function om(t){let e=ce.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function yc(){return ce.lFrame.currentQueryIndex}function Xr(t){ce.lFrame.currentQueryIndex=t}function N_(t){let e=t[ne];return e.type===2?e.declTNode:e.type===1?t[yt]:null}function Cc(t,e,n){if(n&4){let i=e,r=t;for(;i=i.parent,i===null&&!(n&1);)if(i=N_(r),i===null||(r=r[jn],i.type&10))break;if(i===null)return!1;e=i,t=r}let o=ce.lFrame=im();return o.currentTNode=e,o.lView=t,!0}function es(t){let e=im(),n=t[ne];ce.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function im(){let t=ce.lFrame,e=t===null?null:t.child;return e===null?rm(t):e}function rm(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function sm(){let t=ce.lFrame;return ce.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var bc=sm;function ts(){let t=sm();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function am(t){return(ce.lFrame.contextLView=qf(t,ce.lFrame.contextLView))[ze]}function At(){return ce.lFrame.selectedIndex}function Dn(t){ce.lFrame.selectedIndex=t}function ns(){let t=ce.lFrame;return yi(t.tView,t.selectedIndex)}function U(){ce.lFrame.currentNamespace=rc}function J(){k_()}function k_(){ce.lFrame.currentNamespace=null}function lm(){return ce.lFrame.currentNamespace}var cm=!0;function os(){return cm}function is(t){cm=t}function Fl(t,e=null,n=null,o){let i=dm(t,e,n,o);return i.resolveInjectorInitializers(),i}function dm(t,e=null,n=null,o,i=new Set){let r=[n||ut,Rf(t)];return o=o||(typeof t=="object"?void 0:Cn(t)),new zn(r,e||hi(),o||null,i)}var it=class t{static THROW_IF_NOT_FOUND=Gn;static NULL=new ci;static create(e,n){if(Array.isArray(e))return Fl({name:""},n,e,"");{let o=e.name??"";return Fl({name:o},e.parent,e.providers,o)}}static \u0275prov=fe({token:t,providedIn:"any",factory:()=>ye(jl)});static __NG_ELEMENT_ID__=-1},Nt=new ge(""),Xt=(()=>{class t{static __NG_ELEMENT_ID__=R_;static __NG_ENV_ID__=n=>n}return t})(),Fr=class extends Xt{_lView;constructor(e){super(),this._lView=e}get destroyed(){return eo(this._lView)}onDestroy(e){let n=this._lView;return cc(n,e),()=>$f(n,e)}};function R_(){return new Fr(se())}var um=!1,No=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new si(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new $e(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=fe({token:t,providedIn:"root",factory:()=>new t})}return t})(),Vl=class extends xt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,Lf()&&(this.destroyRef=w(Xt,{optional:!0})??void 0,this.pendingTasks=w(No,{optional:!0})??void 0)}emit(e){let n=te(null);try{super.next(e)}finally{te(n)}}subscribe(e,n,o){let i=e,r=n||(()=>null),s=o;if(e&&typeof e=="object"){let d=e;i=d.next?.bind(d),r=d.error?.bind(d),s=d.complete?.bind(d)}this.__isAsync&&(r=this.wrapInTimeout(r),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let l=super.subscribe({next:i,error:r,complete:s});return e instanceof nt&&e.add(l),l}wrapInTimeout(e){return n=>{let o=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{o!==void 0&&this.pendingTasks?.remove(o)}})}}},at=Vl;function ui(...t){}function Sc(t){let e,n;function o(){t=ui;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),o()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),o()})),()=>o()}function Ec(t){return queueMicrotask(()=>t()),()=>{t=ui}}var Mc="isAngularZone",pi=Mc+"_ID",O_=0,pt=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new at(!1);onMicrotaskEmpty=new at(!1);onStable=new at(!1);onError=new at(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:r=um}=e;if(typeof Zone>"u")throw new ie(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&o,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=r,L_(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Mc)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new ie(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new ie(909,!1)}run(e,n,o){return this._inner.run(e,n,o)}runTask(e,n,o,i){let r=this._inner,s=r.scheduleEventTask("NgZoneEvent: "+i,e,F_,ui,ui);try{return r.runTask(s,n,o)}finally{r.cancelTask(s)}}runGuarded(e,n,o){return this._inner.runGuarded(e,n,o)}runOutsideAngular(e){return this._outer.run(e)}},F_={};function wc(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function V_(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){Sc(()=>{t.callbackScheduled=!1,Ll(t),t.isCheckStableRunning=!0,wc(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Ll(t)}function L_(t){let e=()=>{V_(t)},n=O_++;t._inner=t._inner.fork({name:"angular",properties:{[Mc]:!0,[pi]:n,[pi+n]:!0},onInvokeTask:(o,i,r,s,l,d)=>{if(B_(d))return o.invokeTask(r,s,l,d);try{return Sf(t),o.invokeTask(r,s,l,d)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),Ef(t)}},onInvoke:(o,i,r,s,l,d,u)=>{try{return Sf(t),o.invoke(r,s,l,d,u)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!U_(d)&&e(),Ef(t)}},onHasTask:(o,i,r,s)=>{o.hasTask(r,s),i===r&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Ll(t),wc(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(o,i,r,s)=>(o.handleError(r,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Ll(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function Sf(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Ef(t){t._nesting--,wc(t)}var fi=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new at;onMicrotaskEmpty=new at;onStable=new at;onError=new at;run(e,n,o){return e.apply(n,o)}runGuarded(e,n,o){return e.apply(n,o)}runOutsideAngular(e){return e()}runTask(e,n,o,i){return e.apply(n,o)}};function B_(t){return pm(t,"__ignore_ng_zone__")}function U_(t){return pm(t,"__scheduler_tick__")}function pm(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var vt=class{_console=console;handleError(e){this._console.error("ERROR",e)}},ko=new ge("",{factory:()=>{let t=w(pt),e=w(It),n;return o=>{t.runOutsideAngular(()=>{e.destroyed&&!n?setTimeout(()=>{throw o}):(n??=e.get(vt),n.handleError(o))})}}}),fm={provide:Io,useValue:()=>{let t=w(vt,{optional:!0})},multi:!0};function R(t,e){let[n,o,i]=ml(t,e?.equal),r=n,s=r[st];return r.set=o,r.update=i,r.asReadonly=xc.bind(r),r}function xc(){let t=this[st];if(t.readonlyFn===void 0){let e=()=>this();e[st]=t,t.readonlyFn=e}return t.readonlyFn}var Ei=(()=>{class t{view;node;constructor(n,o){this.view=n,this.node=o}static __NG_ELEMENT_ID__=H_}return t})();function H_(){return new Ei(se(),rt())}var Mn=class{},Mi=new ge("",{factory:()=>!0});var Ic=new ge("");var rs=(()=>{class t{static \u0275prov=fe({token:t,providedIn:"root",factory:()=>new Bl})}return t})(),Bl=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,o=this.queues.get(n);o.has(e)&&(o.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let o=this.queues.get(n);o.has(e)||o.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,o]of this.queues)n===null?e||=this.flushQueue(o):e||=n.run(()=>this.flushQueue(o));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let o of e)o.dirty&&(this.dirtyEffectCount--,n=!0,o.run());return n}},Vr=class{[st];constructor(e){this[st]=e}destroy(){this[st].destroy()}};function We(t,e){let n=e?.injector??w(it),o=e?.manualCleanup!==!0?n.get(Xt):null,i,r=n.get(Ei,null,{optional:!0}),s=n.get(Mn);return r!==null?(i=$_(r.view,s,t),o instanceof Fr&&o._lView===r.view&&(o=null)):i=z_(t,n.get(rs),s),i.injector=n,o!==null&&(i.onDestroyFn=o.onDestroy(()=>i.destroy())),new Vr(i)}var mm=z(B({},hl),{cleanupFns:void 0,zone:null,onDestroyFn:ui,run(){let t=di(!1);try{vl(this)}finally{di(t)}},cleanup(){if(!this.cleanupFns?.length)return;let t=te(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],te(t)}}}),G_=z(B({},mm),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){Vn(this),this.onDestroyFn(),this.cleanup(),this.scheduler.remove(this)}}),q_=z(B({},mm),{consumerMarkedDirty(){this.view[re]|=8192,to(this.view),this.notifier.notify(13)},destroy(){Vn(this),this.onDestroyFn(),this.cleanup(),this.view[Sn]?.delete(this)}});function $_(t,e,n){let o=Object.create(q_);return o.view=t,o.zone=typeof Zone<"u"?Zone.current:null,o.notifier=e,o.fn=gm(o,n),t[Sn]??=new Set,t[Sn].add(o),o.consumerMarkedDirty(o),o}function z_(t,e,n){let o=Object.create(G_);return o.fn=gm(o,t),o.scheduler=e,o.notifier=n,o.zone=typeof Zone<"u"?Zone.current:null,o.scheduler.add(o),o.notifier.notify(12),o}function gm(t,e){return()=>{e(n=>(t.cleanupFns??=[]).push(n))}}function kt(t){return gl(t)}function Oi(t){return{toString:t}.toString()}function X_(t){return typeof t=="function"}function Ym(t,e,n,o){e!==null?e.applyValueToInputSignal(e,o):t[n]=o}var gs=class{previousValue;currentValue;firstChange;constructor(e,n,o){this.previousValue=e,this.currentValue=n,this.firstChange=o}isFirstChange(){return this.firstChange}},Ds=(()=>{let t=()=>Jm;return t.ngInherit=!0,t})();function Jm(t){return t.type.prototype.ngOnChanges&&(t.setInput=ty),ey}function ey(){let t=Zm(this),e=t?.current;if(e){let n=t.previous;if(n===xn)t.previous=e;else for(let o in e)n[o]=e[o];t.current=null,this.ngOnChanges(e)}}function ty(t,e,n,o,i){let r=this.declaredInputs[o],s=Zm(t)||ny(t,{previous:xn,current:null}),l=s.current||(s.current={}),d=s.previous,u=d[r];l[r]=new gs(u&&u.currentValue,n,d===xn),Ym(t,e,i,n)}var jm="__ngSimpleChanges__";function Zm(t){return t[jm]||null}function ny(t,e){return t[jm]=e}var hm=[];var xe=function(t,e=null,n){for(let o=0;o<hm.length;o++){let i=hm[o];i(t,e,n)}};function oy(t,e,n){let{ngOnChanges:o,ngOnInit:i,ngDoCheck:r}=e.type.prototype;if(o){let s=Jm(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),r&&((n.preOrderHooks??=[]).push(t,r),(n.preOrderCheckHooks??=[]).push(t,r))}function iy(t,e){for(let n=e.directiveStart,o=e.directiveEnd;n<o;n++){let r=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:l,ngAfterViewInit:d,ngAfterViewChecked:u,ngOnDestroy:f}=r;s&&(t.contentHooks??=[]).push(-n,s),l&&((t.contentHooks??=[]).push(n,l),(t.contentCheckHooks??=[]).push(n,l)),d&&(t.viewHooks??=[]).push(-n,d),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),f!=null&&(t.destroyHooks??=[]).push(n,f)}}function ds(t,e,n){Km(t,e,3,n)}function us(t,e,n,o){(t[re]&3)===n&&Km(t,e,n,o)}function Tc(t,e){let n=t[re];(n&3)===e&&(n&=16383,n+=1,t[re]=n)}function Km(t,e,n,o){let i=o!==void 0?t[Zn]&65535:0,r=o??-1,s=e.length-1,l=0;for(let d=i;d<s;d++)if(typeof e[d+1]=="number"){if(l=e[d],o!=null&&l>=o)break}else e[d]<0&&(t[Zn]+=65536),(l<r||r==-1)&&(ry(t,n,e,d),t[Zn]=(t[Zn]&4294901760)+d+2),d++}function vm(t,e){xe(4,t,e);let n=te(null);try{e.call(t)}finally{te(n),xe(5,t,e)}}function ry(t,e,n,o){let i=n[o]<0,r=n[o+1],s=i?-n[o]:n[o],l=t[s];i?t[re]>>14<t[Zn]>>16&&(t[re]&3)===e&&(t[re]+=16384,vm(l,r)):vm(l,r)}var Oo=-1,ro=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,o,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=o}};function sy(t){return(t.flags&8)!==0}function ay(t){return(t.flags&16)!==0}function ly(t,e,n){let o=0;for(;o<n.length;){let i=n[o];if(typeof i=="number"){if(i!==0)break;o++;let r=n[o++],s=n[o++],l=n[o++];t.setAttribute(e,s,l,r)}else{let r=i,s=n[++o];dy(r)?t.setProperty(e,r,s):t.setAttribute(e,r,s),o++}}return o}function cy(t){return t===3||t===4||t===6}function dy(t){return t.charCodeAt(0)===64}function Fo(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let o=0;o<e.length;o++){let i=e[o];typeof i=="number"?n=i:n===0||(n===-1||n===2?_m(t,n,i,null,e[++o]):_m(t,n,i,null,null))}}return t}function _m(t,e,n,o,i){let r=0,s=t.length;if(e===-1)s=-1;else for(;r<t.length;){let l=t[r++];if(typeof l=="number"){if(l===e){s=-1;break}else if(l>e){s=r-1;break}}}for(;r<t.length;){let l=t[r];if(typeof l=="number")break;if(l===n){i!==null&&(t[r+1]=i);return}r++,i!==null&&r++}s!==-1&&(t.splice(s,0,e),r=s+1),t.splice(r++,0,n),i!==null&&t.splice(r++,0,i)}function Qm(t){return t!==Oo}function hs(t){return t&32767}function uy(t){return t>>16}function vs(t,e){let n=uy(t),o=e;for(;n>0;)o=o[jn],n--;return o}var Lc=!0;function _s(t){let e=Lc;return Lc=t,e}var py=256,Xm=py-1,eg=5,fy=0,en={};function my(t,e,n){let o;typeof n=="string"?o=n.charCodeAt(0)||0:n.hasOwnProperty(Yn)&&(o=n[Yn]),o==null&&(o=n[Yn]=fy++);let i=o&Xm,r=1<<i;e.data[t+(i>>eg)]|=r}function ys(t,e){let n=tg(t,e);if(n!==-1)return n;let o=e[ne];o.firstCreatePass&&(t.injectorIndex=e.length,Pc(o.data,t),Pc(e,null),Pc(o.blueprint,null));let i=Sd(t,e),r=t.injectorIndex;if(Qm(i)){let s=hs(i),l=vs(i,e),d=l[ne].data;for(let u=0;u<8;u++)e[r+u]=l[s+u]|d[s+u]}return e[r+8]=i,r}function Pc(t,e){t.push(0,0,0,0,0,0,0,0,e)}function tg(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Sd(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,o=null,i=e;for(;i!==null;){if(o=sg(i),o===null)return Oo;if(n++,i=i[jn],o.injectorIndex!==-1)return o.injectorIndex|n<<16}return Oo}function Bc(t,e,n){my(t,e,n)}function ng(t,e,n){if(n&8||t!==void 0)return t;Hr(e,"NodeInjector")}function og(t,e,n,o){if(n&8&&o===void 0&&(o=null),(n&3)===0){let i=t[cn],r=ot(void 0);try{return i?i.get(e,o,n&8):Yl(e,o,n&8)}finally{ot(r)}}return ng(o,e,n)}function ig(t,e,n,o=0,i){if(t!==null){if(e[re]&2048&&!(o&2)){let s=_y(t,e,n,o,en);if(s!==en)return s}let r=rg(t,e,n,o,en);if(r!==en)return r}return og(e,n,o,i)}function rg(t,e,n,o,i){let r=hy(n);if(typeof r=="function"){if(!Cc(e,t,o))return o&1?ng(i,n,o):og(e,n,o,i);try{let s;if(s=r(o),s==null&&!(o&8))Hr(n);else return s}finally{bc()}}else if(typeof r=="number"){let s=null,l=tg(t,e),d=Oo,u=o&1?e[mt][yt]:null;for((l===-1||o&4)&&(d=l===-1?Sd(t,e):e[l+8],d===Oo||!Cm(o,!1)?l=-1:(s=e[ne],l=hs(d),e=vs(d,e)));l!==-1;){let f=e[ne];if(ym(r,l,f.data)){let v=gy(l,e,n,s,o,u);if(v!==en)return v}d=e[l+8],d!==Oo&&Cm(o,e[ne].data[l+8]===u)&&ym(r,l,e)?(s=f,l=hs(d),e=vs(d,e)):l=-1}}return i}function gy(t,e,n,o,i,r){let s=e[ne],l=s.data[t+8],d=o==null?Pn(l)&&Lc:o!=s&&(l.type&3)!==0,u=i&1&&r===l,f=ps(l,s,n,d,u);return f!==null?Ii(e,s,f,l,i):en}function ps(t,e,n,o,i){let r=t.providerIndexes,s=e.data,l=r&1048575,d=t.directiveStart,u=t.directiveEnd,f=r>>20,v=o?l:l+f,_=i?l+f:u;for(let S=v;S<_;S++){let D=s[S];if(S<d&&n===D||S>=d&&D.type===n)return S}if(i){let S=s[d];if(S&&Kt(S)&&S.type===n)return d}return null}function Ii(t,e,n,o,i){let r=t[n],s=e.data;if(r instanceof ro){let l=r;if(l.resolving){let S=wf(s[n]);throw Wl(S)}let d=_s(l.canSeeViewProviders);l.resolving=!0;let u=s[n].type||s[n],f,v=l.injectImpl?ot(l.injectImpl):null,_=Cc(t,o,0);try{r=t[n]=l.factory(void 0,i,s,t,o),e.firstCreatePass&&n>=o.directiveStart&&oy(n,s[n],e)}finally{v!==null&&ot(v),_s(d),l.resolving=!1,bc()}}return r}function hy(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Yn)?t[Yn]:void 0;return typeof e=="number"?e>=0?e&Xm:vy:e}function ym(t,e,n){let o=1<<t;return!!(n[e+(t>>eg)]&o)}function Cm(t,e){return!(t&2)&&!(t&1&&e)}var io=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,o){return ig(this._tNode,this._lView,e,qn(o),n)}};function vy(){return new io(rt(),se())}function Nn(t){return Oi(()=>{let e=t.prototype.constructor,n=e[li]||Uc(e),o=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==o;){let r=i[li]||Uc(i);if(r&&r!==n)return r;i=Object.getPrototypeOf(i)}return r=>new r})}function Uc(t){return Hl(t)?()=>{let e=Uc(Xe(t));return e&&e()}:bn(t)}function _y(t,e,n,o,i){let r=t,s=e;for(;r!==null&&s!==null&&s[re]&2048&&!Ao(s);){let l=rg(r,s,n,o|2,en);if(l!==en)return l;let d=r.parent;if(!d){let u=s[nc];if(u){let f=u.get(n,en,o);if(f!==en)return f}d=sg(s),s=s[jn]}r=d}return i}function sg(t){let e=t[ne],n=e.type;return n===2?e.declTNode:n===1?t[yt]:null}function yy(){return Bo(rt(),se())}function Bo(t,e){return new tn(Dt(t,e))}var tn=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=yy}return t})();function Cy(t){return t instanceof tn?t.nativeElement:t}function by(){return this._results[Symbol.iterator]()}var Cs=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new xt}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let o=Df(e);(this._changesDetected=!Pf(this._results,o,n))&&(this._results=o,this.length=o.length,this.last=o[this.length-1],this.first=o[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=by};function ag(t){return(t.flags&128)===128}var Ed=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(Ed||{}),lg=new Map,Sy=0;function Ey(){return Sy++}function My(t){lg.set(t[vi],t)}function Hc(t){lg.delete(t[vi])}var bm="__ngContext__";function Vo(t,e){Zt(e)?(t[bm]=e[vi],My(e)):t[bm]=e}function cg(t){return ug(t[Do])}function dg(t){return ug(t[_t])}function ug(t){for(;t!==null&&!Pt(t);)t=t[_t];return t}var Gc;function Md(t){Gc=t}function pg(){if(Gc!==void 0)return Gc;if(typeof document<"u")return document;throw new ie(210,!1)}var As=new ge("",{factory:()=>wy}),wy="ng";var Ns=new ge(""),Fi=new ge("",{providedIn:"platform",factory:()=>"unknown"});var ks=new ge("",{factory:()=>pg().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var fg="r";var mg="di";var gg=!1,hg=new ge("",{factory:()=>gg});var xy=(t,e,n,o)=>{};function Iy(t,e,n,o){xy(t,e,n,o)}function wd(t){return(t.flags&32)===32}var Ty=()=>null;function vg(t,e,n=!1){return Ty(t,e,n)}function _g(t,e){let n=t.contentQueries;if(n!==null){let o=te(null);try{for(let i=0;i<n.length;i+=2){let r=n[i],s=n[i+1];if(s!==-1){let l=t.data[s];Xr(r),l.contentQueries(2,e[s],s)}}}finally{te(o)}}}function qc(t,e,n){Xr(0);let o=te(null);try{e(t,n)}finally{te(o)}}function yg(t,e,n){if(ic(e)){let o=te(null);try{let i=e.directiveStart,r=e.directiveEnd;for(let s=i;s<r;s++){let l=t.data[s];if(l.contentQueries){let d=n[s];l.contentQueries(1,d,s)}}}finally{te(o)}}}var Ot=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t[t.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",t})(Ot||{}),ss;function Py(){if(ss===void 0&&(ss=null,wn.trustedTypes))try{ss=wn.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return ss}function Rs(t){return Py()?.createHTML(t)||t}var as;function Dy(){if(as===void 0&&(as=null,wn.trustedTypes))try{as=wn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return as}function Sm(t){return Dy()?.createScriptURL(t)||t}var dn=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Lr})`}},$c=class extends dn{getTypeName(){return"HTML"}},zc=class extends dn{getTypeName(){return"Style"}},Wc=class extends dn{getTypeName(){return"Script"}},Yc=class extends dn{getTypeName(){return"URL"}},Jc=class extends dn{getTypeName(){return"ResourceURL"}};function nn(t){return t instanceof dn?t.changingThisBreaksApplicationSecurity:t}function fn(t,e){let n=Cg(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Lr})`)}return n===e}function Cg(t){return t instanceof dn&&t.getTypeName()||null}function xd(t){return new $c(t)}function Id(t){return new zc(t)}function Td(t){return new Wc(t)}function Pd(t){return new Yc(t)}function Dd(t){return new Jc(t)}function Ay(t){let e=new Zc(t);return Ny()?new jc(e):e}var jc=class{inertDocumentHelper;constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let n=new window.DOMParser().parseFromString(Rs(e),"text/html").body;return n===null?this.inertDocumentHelper.getInertBodyElement(e):(n.firstChild?.remove(),n)}catch{return null}}},Zc=class{defaultDoc;inertDocument;constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let n=this.inertDocument.createElement("template");return n.innerHTML=Rs(e),n}};function Ny(){try{return!!new window.DOMParser().parseFromString(Rs(""),"text/html")}catch{return!1}}var ky=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Vi(t){return t=String(t),t.match(ky)?t:"unsafe:"+t}function mn(t){let e={};for(let n of t.split(","))e[n]=!0;return e}function Li(...t){let e={};for(let n of t)for(let o in n)n.hasOwnProperty(o)&&(e[o]=!0);return e}var bg=mn("area,br,col,hr,img,wbr"),Sg=mn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Eg=mn("rp,rt"),Ry=Li(Eg,Sg),Oy=Li(Sg,mn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Fy=Li(Eg,mn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Em=Li(bg,Oy,Fy,Ry),Mg=mn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Vy=mn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ly=mn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),By=Li(Mg,Vy,Ly),Uy=mn("script,style,template"),Kc=class{sanitizedSomething=!1;buf=[];sanitizeChildren(e){let n=e.firstChild,o=!0,i=[];for(;n;){if(n.nodeType===Node.ELEMENT_NODE?o=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,o&&n.firstChild){i.push(n),n=qy(n);continue}for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let r=Gy(n);if(r){n=r;break}n=i.pop()}}return this.buf.join("")}startElement(e){let n=Mm(e).toLowerCase();if(!Em.hasOwnProperty(n))return this.sanitizedSomething=!0,!Uy.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);let o=e.attributes;for(let i=0;i<o.length;i++){let r=o.item(i),s=r.name,l=s.toLowerCase();if(!By.hasOwnProperty(l)){this.sanitizedSomething=!0;continue}let d=r.value;Mg[l]&&(d=Vi(d)),this.buf.push(" ",s,'="',wm(d),'"')}return this.buf.push(">"),!0}endElement(e){let n=Mm(e).toLowerCase();Em.hasOwnProperty(n)&&!bg.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(wm(e))}};function Hy(t,e){return(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function Gy(t){let e=t.nextSibling;if(e&&t!==e.previousSibling)throw wg(e);return e}function qy(t){let e=t.firstChild;if(e&&Hy(t,e))throw wg(e);return e}function Mm(t){let e=t.nodeName;return typeof e=="string"?e:"FORM"}function wg(t){return new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`)}var $y=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,zy=/([^\#-~ |!])/g;function wm(t){return t.replace(/&/g,"&amp;").replace($y,function(e){let n=e.charCodeAt(0),o=e.charCodeAt(1);return"&#"+((n-55296)*1024+(o-56320)+65536)+";"}).replace(zy,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var ls;function Ad(t,e){let n=null;try{ls=ls||Ay(t);let o=e?String(e):"";n=ls.getInertBodyElement(o);let i=5,r=o;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,o=r,r=n.innerHTML,n=ls.getInertBodyElement(o)}while(o!==r);let l=new Kc().sanitizeChildren(xm(n)||n);return Rs(l)}finally{if(n){let o=xm(n)||n;for(;o.firstChild;)o.firstChild.remove()}}}function xm(t){return"content"in t&&Wy(t)?t.content:null}function Wy(t){return t.nodeType===Node.ELEMENT_NODE&&t.nodeName==="TEMPLATE"}var Vt=(function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t})(Vt||{});function qe(t){let e=xg();return e?e.sanitize(Vt.URL,t)||"":fn(t,"URL")?nn(t):Vi(Yt(t))}function Nd(t){let e=xg();if(e)return Sm(e.sanitize(Vt.RESOURCE_URL,t)||"");if(fn(t,"ResourceURL"))return Sm(nn(t));throw new ie(904,!1)}function xg(){let t=se();return t&&t[Jt].sanitizer}function Yy(t,e,n){let o=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let r=e.length;if(i+r===o||t.charCodeAt(i+r)<=32)return i}n=i+1}}var Ig="ng-template";function Jy(t,e,n,o){let i=0;if(o){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Yy(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(kd(t))return!1;if(i=e.indexOf(1,i),i>-1){let r;for(;++i<e.length&&typeof(r=e[i])=="string";)if(r.toLowerCase()===n)return!0}return!1}function kd(t){return t.type===4&&t.value!==Ig}function jy(t,e,n){let o=t.type===4&&!n?Ig:t.value;return e===o}function Zy(t,e,n){let o=4,i=t.attrs,r=i!==null?Xy(i):0,s=!1;for(let l=0;l<e.length;l++){let d=e[l];if(typeof d=="number"){if(!s&&!Rt(o)&&!Rt(d))return!1;if(s&&Rt(d))continue;s=!1,o=d|o&1;continue}if(!s)if(o&4){if(o=2|o&1,d!==""&&!jy(t,d,n)||d===""&&e.length===1){if(Rt(o))return!1;s=!0}}else if(o&8){if(i===null||!Jy(t,i,d,n)){if(Rt(o))return!1;s=!0}}else{let u=e[++l],f=Ky(d,i,kd(t),n);if(f===-1){if(Rt(o))return!1;s=!0;continue}if(u!==""){let v;if(f>r?v="":v=i[f+1].toLowerCase(),o&2&&u!==v){if(Rt(o))return!1;s=!0}}}}return Rt(o)||s}function Rt(t){return(t&1)===0}function Ky(t,e,n,o){if(e===null)return-1;let i=0;if(o||!n){let r=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)r=!0;else if(s===1||s===2){let l=e[++i];for(;typeof l=="string";)l=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=r?1:2}return-1}else return e1(e,t)}function Qy(t,e,n=!1){for(let o=0;o<e.length;o++)if(Zy(t,e[o],n))return!0;return!1}function Xy(t){for(let e=0;e<t.length;e++){let n=t[e];if(cy(n))return e}return t.length}function e1(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let o=t[n];if(typeof o=="number")return-1;if(o===e)return n;n++}return-1}function Im(t,e){return t?":not("+e.trim()+")":e}function t1(t){let e=t[0],n=1,o=2,i="",r=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(o&2){let l=t[++n];i+="["+s+(l.length>0?'="'+l+'"':"")+"]"}else o&8?i+="."+s:o&4&&(i+=" "+s);else i!==""&&!Rt(s)&&(e+=Im(r,i),i=""),o=s,r=r||!Rt(o);n++}return i!==""&&(e+=Im(r,i)),e}function n1(t){return t.map(t1).join(",")}function o1(t){let e=[],n=[],o=1,i=2;for(;o<t.length;){let r=t[o];if(typeof r=="string")i===2?r!==""&&e.push(r,t[++o]):i===8&&n.push(r);else{if(!Rt(i))break;i=r}o++}return n.length&&e.push(1,...n),e}var lt={};function i1(t,e){return t.createText(e)}function r1(t,e,n){t.setValue(e,n)}function Tg(t,e,n){return t.createElement(e,n)}function bs(t,e,n,o,i){t.insertBefore(e,n,o,i)}function Pg(t,e,n){t.appendChild(e,n)}function Tm(t,e,n,o,i){o!==null?bs(t,e,n,o,i):Pg(t,e,n)}function Dg(t,e,n,o){t.removeChild(null,e,n,o)}function s1(t,e,n){t.setAttribute(e,"style",n)}function a1(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Ag(t,e,n){let{mergedAttrs:o,classes:i,styles:r}=n;o!==null&&ly(t,e,o),i!==null&&a1(t,e,i),r!==null&&s1(t,e,r)}function Rd(t,e,n,o,i,r,s,l,d,u,f){let v=He+o,_=v+i,S=l1(v,_),D=typeof u=="function"?u():u;return S[ne]={type:t,blueprint:S,template:n,queries:null,viewQuery:l,declTNode:e,data:S.slice().fill(null,v),bindingStartIndex:v,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof r=="function"?r():r,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:d,consts:D,incompleteFirstPass:!1,ssrId:f}}function l1(t,e){let n=[];for(let o=0;o<e;o++)n.push(o<t?null:lt);return n}function c1(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Rd(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Od(t,e,n,o,i,r,s,l,d,u,f){let v=e.blueprint.slice();return v[Tt]=i,v[re]=o|4|128|8|64|1024,(u!==null||t&&t[re]&2048)&&(v[re]|=2048),ac(v),v[Je]=v[jn]=t,v[ze]=n,v[Jt]=s||t&&t[Jt],v[Le]=l||t&&t[Le],v[cn]=d||t&&t[cn]||null,v[yt]=r,v[vi]=Ey(),v[To]=f,v[nc]=u,v[mt]=e.type==2?t[mt]:v,v}function d1(t,e,n){let o=Dt(e,t),i=c1(n),r=t[Jt].rendererFactory,s=Fd(t,Od(t,i,null,Ng(n),o,e,null,r.createRenderer(o,n),null,null,null));return t[e.index]=s}function Ng(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function kg(t,e,n,o){if(n===0)return-1;let i=e.length;for(let r=0;r<n;r++)e.push(o),t.blueprint.push(o),t.data.push(null);return i}function Fd(t,e){return t[Do]?t[tc][_t]=e:t[Do]=e,t[tc]=e,e}function p(t=1){Rg(Ye(),se(),At()+t,!1)}function Rg(t,e,n,o){if(!o)if((e[re]&3)===3){let r=t.preOrderCheckHooks;r!==null&&ds(e,r,n)}else{let r=t.preOrderHooks;r!==null&&us(e,r,0,n)}Dn(n)}var Os=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(Os||{});function Qc(t,e,n,o){let i=te(null);try{let[r,s,l]=t.inputs[n],d=null;(s&Os.SignalBased)!==0&&(d=e[r][st]),d!==null&&d.transformFn!==void 0?o=d.transformFn(o):l!==null&&(o=l.call(e,o)),t.setInput!==null?t.setInput(e,d,o,n,r):Ym(e,d,r,o)}finally{te(i)}}var un=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(un||{}),u1;function Vd(t,e){return u1(t,e)}var so=new Set,Fs=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(Fs||{}),lo=new ge(""),Pm=new Set;function gn(t){Pm.has(t)||(Pm.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var Ld=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=fe({token:t,providedIn:"root",factory:()=>new t})}return t})(),Og=[0,1,2,3],Fg=(()=>{class t{ngZone=w(pt);scheduler=w(Mn);errorHandler=w(vt,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){w(lo,{optional:!0})}execute(){let n=this.sequences.size>0;n&&xe(16),this.executing=!0;for(let o of Og)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[o]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let r=i.hooks[o];return r(i.pipelinedValue)},i.snapshot))}catch(r){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let o of this.sequences)o.afterRun(),o.once&&(this.sequences.delete(o),o.destroy());for(let o of this.deferredRegistrations)this.sequences.add(o);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&xe(17)}register(n){let{view:o}=n;o!==void 0?((o[Kn]??=[]).push(n),to(o),o[re]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,o){return o?o.run(Fs.AFTER_NEXT_RENDER,n):n()}static \u0275prov=fe({token:t,providedIn:"root",factory:()=>new t})}return t})(),Ss=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,n,o,i,r,s=null){this.impl=e,this.hooks=n,this.view=o,this.once=i,this.snapshot=s,this.unregisterOnDestroy=r?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Kn];e&&(this.view[Kn]=e.filter(n=>n!==this))}};function Bd(t,e){let n=e?.injector??w(it);return gn("NgAfterNextRender"),f1(t,n,e,!0)}function p1(t){return t instanceof Function?[void 0,void 0,t,void 0]:[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function f1(t,e,n,o){let i=e.get(Ld);i.impl??=e.get(Fg);let r=e.get(lo,null,{optional:!0}),s=n?.manualCleanup!==!0?e.get(Xt):null,l=e.get(Ei,null,{optional:!0}),d=new Ss(i.impl,p1(t),l?.view,o,s,r?.snapshot(null));return i.impl.register(d),d}var Vg=new ge("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function Lg(t,e,n){let o=t.get(Vg);if(Array.isArray(e))for(let i of e)o.queue.add(i),n?.detachedLeaveAnimationFns?.push(i);else o.queue.add(e),n?.detachedLeaveAnimationFns?.push(e);o.scheduler&&o.scheduler(t)}function m1(t,e){let n=t.get(Vg);if(e.detachedLeaveAnimationFns){for(let o of e.detachedLeaveAnimationFns)n.queue.delete(o);e.detachedLeaveAnimationFns=void 0}}function g1(t,e){for(let[n,o]of e)Lg(t,o.animateFns)}function Dm(t,e,n,o){let i=t?.[Qn]?.enter;e!==null&&i&&i.has(n.index)&&g1(o,i)}function Ro(t,e,n,o,i,r,s,l){if(i!=null){let d,u=!1;Pt(i)?d=i:Zt(i)&&(u=!0,i=i[Tt]);let f=Ct(i);t===0&&o!==null?(Dm(l,o,r,n),s==null?Pg(e,o,f):bs(e,o,f,s||null,!0)):t===1&&o!==null?(Dm(l,o,r,n),bs(e,o,f,s||null,!0)):t===2?Am(l,r,n,v=>{Dg(e,f,u,v)}):t===3&&Am(l,r,n,()=>{e.destroyNode(f)}),d!=null&&T1(e,t,n,d,r,o,s)}}function h1(t,e){Bg(t,e),e[Tt]=null,e[yt]=null}function v1(t,e,n,o,i,r){o[Tt]=i,o[yt]=e,Ls(t,o,n,1,i,r)}function Bg(t,e){e[Jt].changeDetectionScheduler?.notify(9),Ls(t,e,e[Le],2,null,null)}function _1(t){let e=t[Do];if(!e)return Dc(t[ne],t);for(;e;){let n=null;if(Zt(e))n=e[Do];else{let o=e[Ge];o&&(n=o)}if(!n){for(;e&&!e[_t]&&e!==t;)Zt(e)&&Dc(e[ne],e),e=e[Je];e===null&&(e=t),Zt(e)&&Dc(e[ne],e),n=e&&e[_t]}e=n}}function Ud(t,e){let n=t[Xn],o=n.indexOf(e);n.splice(o,1)}function Vs(t,e){if(eo(e))return;let n=e[Le];n.destroyNode&&Ls(t,e,n,3,null,null),_1(e)}function Dc(t,e){if(eo(e))return;let n=te(null);try{e[re]&=-129,e[re]|=256,e[gt]&&Vn(e[gt]),b1(t,e),C1(t,e),e[ne].type===1&&e[Le].destroy();let o=e[In];if(o!==null&&Pt(e[Je])){o!==e[Je]&&Ud(o,e);let i=e[jt];i!==null&&i.detachView(t)}Hc(e)}finally{te(n)}}function Am(t,e,n,o){let i=t?.[Qn];if(i==null||i.leave==null||!i.leave.has(e.index))return o(!1);t&&so.add(t),Lg(n,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),l=[];if(s){for(let d=0;d<s.animateFns.length;d++){let u=s.animateFns[d],{promise:f}=u();l.push(f)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(l),y1(t,o)}else t&&so.delete(t),o(!1)},i)}function y1(t,e){let n=t[Qn]?.running;if(n){n.then(()=>{t[Qn].running=void 0,so.delete(t),e(!0)});return}e(!1)}function C1(t,e){let n=t.cleanup,o=e[Po];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let l=n[s+3];l>=0?o[l]():o[-l].unsubscribe(),s+=2}else{let l=o[n[s+1]];n[s].call(l)}o!==null&&(e[Po]=null);let i=e[ln];if(i!==null){e[ln]=null;for(let s=0;s<i.length;s++){let l=i[s];l()}}let r=e[Sn];if(r!==null){e[Sn]=null;for(let s of r)s.destroy()}}function b1(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let o=0;o<n.length;o+=2){let i=e[n[o]];if(!(i instanceof ro)){let r=n[o+1];if(Array.isArray(r))for(let s=0;s<r.length;s+=2){let l=i[r[s]],d=r[s+1];xe(4,l,d);try{d.call(l)}finally{xe(5,l,d)}}else{xe(4,i,r);try{r.call(i)}finally{xe(5,i,r)}}}}}function S1(t,e,n){return E1(t,e.parent,n)}function E1(t,e,n){let o=e;for(;o!==null&&o.type&168;)e=o,o=e.parent;if(o===null)return n[Tt];if(Pn(o)){let{encapsulation:i}=t.data[o.directiveStart+o.componentOffset];if(i===Ot.None||i===Ot.Emulated)return null}return Dt(o,n)}function M1(t,e,n){return x1(t,e,n)}function w1(t,e,n){return t.type&40?Dt(t,n):null}var x1=w1,Nm;function Hd(t,e,n,o){let i=S1(t,o,e),r=e[Le],s=o.parent||e[yt],l=M1(s,o,e);if(i!=null)if(Array.isArray(n))for(let d=0;d<n.length;d++)Tm(r,i,n[d],l,!1);else Tm(r,i,n,l,!1);Nm!==void 0&&Nm(r,o,e,n,i)}function wi(t,e){if(e!==null){let n=e.type;if(n&3)return Dt(e,t);if(n&4)return Xc(-1,t[e.index]);if(n&8){let o=e.child;if(o!==null)return wi(t,o);{let i=t[e.index];return Pt(i)?Xc(-1,i):Ct(i)}}else{if(n&128)return wi(t,e.next);if(n&32)return Vd(e,t)()||Ct(t[e.index]);{let o=Ug(t,e);if(o!==null){if(Array.isArray(o))return o[0];let i=En(t[mt]);return wi(i,o)}else return wi(t,e.next)}}}return null}function Ug(t,e){if(e!==null){let o=t[mt][yt],i=e.projection;return o.projection[i]}return null}function Xc(t,e){let n=Ge+t+1;if(n<e.length){let o=e[n],i=o[ne].firstChild;if(i!==null)return wi(o,i)}return e[Tn]}function Gd(t,e,n,o,i,r,s){for(;n!=null;){let l=o[cn];if(n.type===128){n=n.next;continue}let d=o[n.index],u=n.type;if(s&&e===0&&(d&&Vo(Ct(d),o),n.flags|=2),!wd(n))if(u&8)Gd(t,e,n.child,o,i,r,!1),Ro(e,t,l,i,d,n,r,o);else if(u&32){let f=Vd(n,o),v;for(;v=f();)Ro(e,t,l,i,v,n,r,o);Ro(e,t,l,i,d,n,r,o)}else u&16?I1(t,e,o,n,i,r):Ro(e,t,l,i,d,n,r,o);n=s?n.projectionNext:n.next}}function Ls(t,e,n,o,i,r){Gd(n,o,t.firstChild,e,i,r,!1)}function I1(t,e,n,o,i,r){let s=n[mt],d=s[yt].projection[o.projection];if(Array.isArray(d))for(let u=0;u<d.length;u++){let f=d[u];Ro(e,t,n[cn],i,f,o,r,n)}else{let u=d,f=s[Je];ag(o)&&(u.flags|=128),Gd(t,e,u,f,i,r,!0)}}function T1(t,e,n,o,i,r,s){let l=o[Tn],d=Ct(o);l!==d&&Ro(e,t,n,r,l,i,s);for(let u=Ge;u<o.length;u++){let f=o[u];Ls(f[ne],f,t,e,r,l)}}function P1(t,e,n,o,i){if(e)i?t.addClass(n,o):t.removeClass(n,o);else{let r=o.indexOf("-")===-1?void 0:un.DashCase;i==null?t.removeStyle(n,o,r):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),r|=un.Important),t.setStyle(n,o,i,r))}}function Hg(t,e,n,o,i){let r=At(),s=o&2;try{Dn(-1),s&&e.length>He&&Rg(t,e,He,!1),xe(s?2:0,i,n),n(o,i)}finally{Dn(r),xe(s?3:1,i,n)}}function Gg(t,e,n){F1(t,e,n),(n.flags&64)===64&&V1(t,e,n)}function qd(t,e,n=Dt){let o=e.localNames;if(o!==null){let i=e.index+1;for(let r=0;r<o.length;r+=2){let s=o[r+1],l=s===-1?n(e,t):t[s];t[i++]=l}}}function D1(t,e,n,o){let r=o.get(hg,gg)||n===Ot.ShadowDom||n===Ot.ExperimentalIsolatedShadowDom,s=t.selectRootElement(e,r);return A1(s),s}function A1(t){N1(t)}var N1=()=>null;function k1(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function R1(t,e,n,o,i,r){let s=e[ne];if($d(t,s,e,n,o)){Pn(t)&&O1(e,t.index);return}t.type&3&&(n=k1(n)),qg(t,e,n,o,i,r)}function qg(t,e,n,o,i,r){if(t.type&3){let s=Dt(t,e);o=r!=null?r(o,t.value||"",n):o,i.setProperty(s,n,o)}else t.type&12}function O1(t,e){let n=bt(e,t);n[re]&16||(n[re]|=64)}function F1(t,e,n){let o=n.directiveStart,i=n.directiveEnd;Pn(n)&&d1(e,n,t.data[o+n.componentOffset]),t.firstCreatePass||ys(n,e);let r=n.initialInputs;for(let s=o;s<i;s++){let l=t.data[s],d=Ii(e,t,s,n);if(Vo(d,e),r!==null&&G1(e,s-o,d,l,n,r),Kt(l)){let u=bt(n.index,e);u[ze]=Ii(e,t,s,n)}}}function V1(t,e,n){let o=n.directiveStart,i=n.directiveEnd,r=n.index,s=nm();try{Dn(r);for(let l=o;l<i;l++){let d=t.data[l],u=e[l];Qr(l),(d.hostBindings!==null||d.hostVars!==0||d.hostAttrs!==null)&&L1(d,u)}}finally{Dn(-1),Qr(s)}}function L1(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function B1(t,e){let n=t.directiveRegistry,o=null;if(n)for(let i=0;i<n.length;i++){let r=n[i];Qy(e,r.selectors,!1)&&(o??=[],Kt(r)?o.unshift(r):o.push(r))}return o}function U1(t,e,n,o,i,r){let s=Dt(t,e);H1(e[Le],s,r,t.value,n,o,i)}function H1(t,e,n,o,i,r,s){if(r==null)t.removeAttribute(e,i,n);else{let l=s==null?Yt(r):s(r,o||"",i);t.setAttribute(e,i,l,n)}}function G1(t,e,n,o,i,r){let s=r[e];if(s!==null)for(let l=0;l<s.length;l+=2){let d=s[l],u=s[l+1];Qc(o,n,d,u)}}function $g(t,e,n,o,i){let r=He+n,s=e[ne],l=i(s,e,t,o,n);e[r]=l,no(t,!0);let d=t.type===2;return d?(Ag(e[Le],l,t),(Wf()===0||Yr(t))&&Vo(l,e),Yf()):Vo(l,e),os()&&(!d||!wd(t))&&Hd(s,e,l,t),t}function zg(t){let e=t;return hc()?Kf():(e=e.parent,no(e,!1)),e}function q1(t,e){let n=t[cn];if(!n)return;let o;try{o=n.get(ko,null)}catch{o=null}o?.(e)}function $d(t,e,n,o,i){let r=t.inputs?.[o],s=t.hostDirectiveInputs?.[o],l=!1;if(s)for(let d=0;d<s.length;d+=2){let u=s[d],f=s[d+1],v=e.data[u];Qc(v,n[u],f,i),l=!0}if(r)for(let d of r){let u=n[d],f=e.data[d];Qc(f,u,o,i),l=!0}return l}function $1(t,e){let n=bt(e,t),o=n[ne];z1(o,n);let i=n[Tt];i!==null&&n[To]===null&&(n[To]=vg(i,n[cn])),xe(18),zd(o,n,n[ze]),xe(19,n[ze])}function z1(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function zd(t,e,n){es(e);try{let o=t.viewQuery;o!==null&&qc(1,o,n);let i=t.template;i!==null&&Hg(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[jt]?.finishViewCreation(t),t.staticContentQueries&&_g(t,e),t.staticViewQueries&&qc(2,t.viewQuery,n);let r=t.components;r!==null&&W1(e,r)}catch(o){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),o}finally{e[re]&=-5,ts()}}function W1(t,e){for(let n=0;n<e.length;n++)$1(t,e[n])}function Bs(t,e,n,o){let i=te(null);try{let r=e.tView,l=t[re]&4096?4096:16,d=Od(t,r,n,l,null,e,null,null,o?.injector??null,o?.embeddedViewInjector??null,o?.dehydratedView??null),u=t[e.index];d[In]=u;let f=t[jt];return f!==null&&(d[jt]=f.createEmbeddedView(r)),zd(r,d,n),d}finally{te(i)}}function Ti(t,e){return!e||e.firstChild===null||ag(t)}function Pi(t,e,n,o,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let r=e[n.index];r!==null&&o.push(Ct(r)),Pt(r)&&Wg(r,o);let s=n.type;if(s&8)Pi(t,e,n.child,o);else if(s&32){let l=Vd(n,e),d;for(;d=l();)o.push(d)}else if(s&16){let l=Ug(e,n);if(Array.isArray(l))o.push(...l);else{let d=En(e[mt]);Pi(d[ne],d,l,o,!0)}}n=i?n.projectionNext:n.next}return o}function Wg(t,e){for(let n=Ge;n<t.length;n++){let o=t[n],i=o[ne].firstChild;i!==null&&Pi(o[ne],o,i,e)}t[Tn]!==t[Tt]&&e.push(t[Tn])}function Yg(t){if(t[Kn]!==null){for(let e of t[Kn])e.impl.addSequence(e);t[Kn].length=0}}var Jg=[];function Y1(t){return t[gt]??J1(t)}function J1(t){let e=Jg.pop()??Object.create(Z1);return e.lView=t,e}function j1(t){t.lView[gt]!==t&&(t.lView=null,Jg.push(t))}var Z1=z(B({},mo),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{to(t.lView)},consumerOnSignalRead(){this.lView[gt]=this}});function K1(t){let e=t[gt]??Object.create(Q1);return e.lView=t,e}var Q1=z(B({},mo),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=En(t.lView);for(;e&&!jg(e[ne]);)e=En(e);e&&lc(e)},consumerOnSignalRead(){this.lView[gt]=this}});function jg(t){return t.type!==2}function Zg(t){if(t[Sn]===null)return;let e=!0;for(;e;){let n=!1;for(let o of t[Sn])o.dirty&&(n=!0,o.zone===null||Zone.current===o.zone?o.run():o.zone.run(()=>o.run()));e=n&&!!(t[re]&8192)}}var X1=100;function Kg(t,e=0){let o=t[Jt].rendererFactory,i=!1;i||o.begin?.();try{eC(t,e)}finally{i||o.end?.()}}function eC(t,e){let n=vc();try{di(!0),ed(t,e);let o=0;for(;bi(t);){if(o===X1)throw new ie(103,!1);o++,ed(t,1)}}finally{di(n)}}function tC(t,e,n,o){if(eo(e))return;let i=e[re],r=!1,s=!1;es(e);let l=!0,d=null,u=null;r||(jg(t)?(u=Y1(e),d=go(u)):ur()===null?(l=!1,u=K1(e),d=go(u)):e[gt]&&(Vn(e[gt]),e[gt]=null));try{ac(e),Xf(t.bindingStartIndex),n!==null&&Hg(t,e,n,2,o);let f=(i&3)===3;if(!r)if(f){let S=t.preOrderCheckHooks;S!==null&&ds(e,S,null)}else{let S=t.preOrderHooks;S!==null&&us(e,S,0,null),Tc(e,0)}if(s||nC(e),Zg(e),Qg(e,0),t.contentQueries!==null&&_g(t,e),!r)if(f){let S=t.contentCheckHooks;S!==null&&ds(e,S)}else{let S=t.contentHooks;S!==null&&us(e,S,1),Tc(e,1)}iC(t,e);let v=t.components;v!==null&&eh(e,v,0);let _=t.viewQuery;if(_!==null&&qc(2,_,o),!r)if(f){let S=t.viewCheckHooks;S!==null&&ds(e,S)}else{let S=t.viewHooks;S!==null&&us(e,S,2),Tc(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Wr]){for(let S of e[Wr])S();e[Wr]=null}r||(Yg(e),e[re]&=-73)}catch(f){throw r||to(e),f}finally{u!==null&&(ni(u,d),l&&j1(u)),ts()}}function Qg(t,e){for(let n=cg(t);n!==null;n=dg(n))for(let o=Ge;o<n.length;o++){let i=n[o];Xg(i,e)}}function nC(t){for(let e=cg(t);e!==null;e=dg(e)){if(!(e[re]&2))continue;let n=e[Xn];for(let o=0;o<n.length;o++){let i=n[o];lc(i)}}}function oC(t,e,n){xe(18);let o=bt(e,t);Xg(o,n),xe(19,o[ze])}function Xg(t,e){jr(t)&&ed(t,e)}function ed(t,e){let o=t[ne],i=t[re],r=t[gt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(r?.dirty&&oi(r)),s||=!1,r&&(r.dirty=!1),t[re]&=-9217,s)tC(o,t,o.template,t[ze]);else if(i&8192){let l=te(null);try{Zg(t),Qg(t,1);let d=o.components;d!==null&&eh(t,d,1),Yg(t)}finally{te(l)}}}function eh(t,e,n){for(let o=0;o<e.length;o++)oC(t,e[o],n)}function iC(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let o=0;o<n.length;o++){let i=n[o];if(i<0)Dn(~i);else{let r=i,s=n[++o],l=n[++o];tm(s,r);let d=e[r];xe(24,d),l(2,d),xe(25,d)}}}finally{Dn(-1)}}function Wd(t,e){let n=vc()?64:1088;for(t[Jt].changeDetectionScheduler?.notify(e);t;){t[re]|=n;let o=En(t);if(Ao(t)&&!o)return t;t=o}return null}function th(t,e,n,o){return[t,!0,0,e,null,o,null,n,null,null]}function nh(t,e){let n=Ge+e;if(n<t.length)return t[n]}function Us(t,e,n,o=!0){let i=e[ne];if(rC(i,e,t,n),o){let s=Xc(n,t),l=e[Le],d=l.parentNode(t[Tn]);d!==null&&v1(i,t[yt],l,e,d,s)}let r=e[To];r!==null&&r.firstChild!==null&&(r.firstChild=null)}function oh(t,e){let n=Di(t,e);return n!==void 0&&Vs(n[ne],n),n}function Di(t,e){if(t.length<=Ge)return;let n=Ge+e,o=t[n];if(o){let i=o[In];i!==null&&i!==t&&Ud(i,o),e>0&&(t[n-1][_t]=o[_t]);let r=mi(t,Ge+e);h1(o[ne],o);let s=r[jt];s!==null&&s.detachView(r[ne]),o[Je]=null,o[_t]=null,o[re]&=-129}return o}function rC(t,e,n,o){let i=Ge+o,r=n.length;o>0&&(n[i-1][_t]=e),o<r-Ge?(e[_t]=n[i],Jl(n,Ge+o,e)):(n.push(e),e[_t]=null),e[Je]=n;let s=e[In];s!==null&&n!==s&&ih(s,e);let l=e[jt];l!==null&&l.insertView(t),Zr(e),e[re]|=128}function ih(t,e){let n=t[Xn],o=e[Je];if(Zt(o))t[re]|=2;else{let i=o[Je][mt];e[mt]!==i&&(t[re]|=2)}n===null?t[Xn]=[e]:n.push(e)}var An=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[ne];return Pi(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[ze]}set context(e){this._lView[ze]=e}get destroyed(){return eo(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Je];if(Pt(e)){let n=e[_i],o=n?n.indexOf(this):-1;o>-1&&(Di(e,o),mi(n,o))}this._attachedToViewContainer=!1}Vs(this._lView[ne],this._lView)}onDestroy(e){cc(this._lView,e)}markForCheck(){Wd(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[re]&=-129}reattach(){Zr(this._lView),this._lView[re]|=128}detectChanges(){this._lView[re]|=1024,Kg(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ie(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Ao(this._lView),n=this._lView[In];n!==null&&!e&&Ud(n,this._lView),Bg(this._lView[ne],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ie(902,!1);this._appRef=e;let n=Ao(this._lView),o=this._lView[In];o!==null&&!n&&ih(o,this._lView),Zr(this._lView)}};var Ai=(()=>{class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=sC;constructor(n,o,i){this._declarationLView=n,this._declarationTContainer=o,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,o){return this.createEmbeddedViewImpl(n,o)}createEmbeddedViewImpl(n,o,i){let r=Bs(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:o,dehydratedView:i});return new An(r)}}return t})();function sC(){return Yd(rt(),se())}function Yd(t,e){return t.type&4?new Ai(e,t,Bo(t,e)):null}function Bi(t,e,n,o,i){let r=t.data[e];if(r===null)r=aC(t,e,n,o,i),em()&&(r.flags|=32);else if(r.type&64){r.type=n,r.value=o,r.attrs=i;let s=Zf();r.injectorIndex=s===null?-1:s.injectorIndex}return no(r,!0),r}function aC(t,e,n,o,i){let r=gc(),s=hc(),l=s?r:r&&r.parent,d=t.data[e]=cC(t,l,n,e,o,i);return lC(t,d,r,s),d}function lC(t,e,n,o){t.firstChild===null&&(t.firstChild=e),n!==null&&(o?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function cC(t,e,n,o,i,r){let s=e?e.injectorIndex:-1,l=0;return jf()&&(l|=128),{type:n,index:o,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:l,providerIndexes:0,value:i,attrs:r,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function dC(t){let e=t[oc]??[],o=t[Je][Le],i=[];for(let r of e)r.data[mg]!==void 0?i.push(r):uC(r,o);t[oc]=i}function uC(t,e){let n=0,o=t.firstChild;if(o){let i=t.data[fg];for(;n<i;){let r=o.nextSibling;Dg(e,o,!1),o=r,n++}}}var pC=()=>null,fC=()=>null;function td(t,e){return pC(t,e)}function rh(t,e,n){return fC(t,e,n)}var sh=class{},Hs=class{},nd=class{resolveComponentFactory(e){throw new ie(917,!1)}},Gs=class{static NULL=new nd},pn=class{},kn=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>mC()}return t})();function mC(){let t=se(),e=rt(),n=bt(e.index,t);return(Zt(n)?n:t)[Le]}var ah=(()=>{class t{static \u0275prov=fe({token:t,providedIn:"root",factory:()=>null})}return t})();var fs={},od=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,o){let i=this.injector.get(e,fs,o);return i!==fs||n===fs?i:this.parentInjector.get(e,n,o)}};function Es(t,e,n){let o=n?t.styles:null,i=n?t.classes:null,r=0;if(e!==null)for(let s=0;s<e.length;s++){let l=e[s];if(typeof l=="number")r=l;else if(r==1)i=Ul(i,l);else if(r==2){let d=l,u=e[++s];o=Ul(o,d+": "+u+";")}}n?t.styles=o:t.stylesWithoutHost=o,n?t.classes=i:t.classesWithoutHost=i}function Pe(t,e=0){let n=se();if(n===null)return ye(t,e);let o=rt();return ig(o,n,Xe(t),e)}function gC(t,e,n,o,i){let r=o===null?null:{"":-1},s=i(t,n);if(s!==null){let l=s,d=null,u=null;for(let f of s)if(f.resolveHostDirectives!==null){[l,d,u]=f.resolveHostDirectives(s);break}_C(t,e,n,l,r,d,u)}r!==null&&o!==null&&hC(n,o,r)}function hC(t,e,n){let o=t.localNames=[];for(let i=0;i<e.length;i+=2){let r=n[e[i+1]];if(r==null)throw new ie(-301,!1);o.push(e[i],r)}}function vC(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function _C(t,e,n,o,i,r,s){let l=o.length,d=!1;for(let _=0;_<l;_++){let S=o[_];!d&&Kt(S)&&(d=!0,vC(t,n,_)),Bc(ys(n,e),t,S.type)}MC(n,t.data.length,l);for(let _=0;_<l;_++){let S=o[_];S.providersResolver&&S.providersResolver(S)}let u=!1,f=!1,v=kg(t,e,l,null);l>0&&(n.directiveToIndex=new Map);for(let _=0;_<l;_++){let S=o[_];if(n.mergedAttrs=Fo(n.mergedAttrs,S.hostAttrs),CC(t,n,e,v,S),EC(v,S,i),s!==null&&s.has(S)){let[V,q]=s.get(S);n.directiveToIndex.set(S.type,[v,V+n.directiveStart,q+n.directiveStart])}else(r===null||!r.has(S))&&n.directiveToIndex.set(S.type,v);S.contentQueries!==null&&(n.flags|=4),(S.hostBindings!==null||S.hostAttrs!==null||S.hostVars!==0)&&(n.flags|=64);let D=S.type.prototype;!u&&(D.ngOnChanges||D.ngOnInit||D.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),u=!0),!f&&(D.ngOnChanges||D.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),f=!0),v++}yC(t,n,r)}function yC(t,e,n){for(let o=e.directiveStart;o<e.directiveEnd;o++){let i=t.data[o];if(n===null||!n.has(i))km(0,e,i,o),km(1,e,i,o),Om(e,o,!1);else{let r=n.get(i);Rm(0,e,r,o),Rm(1,e,r,o),Om(e,o,!0)}}}function km(t,e,n,o){let i=t===0?n.inputs:n.outputs;for(let r in i)if(i.hasOwnProperty(r)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[r]??=[],s[r].push(o),lh(e,r)}}function Rm(t,e,n,o){let i=t===0?n.inputs:n.outputs;for(let r in i)if(i.hasOwnProperty(r)){let s=i[r],l;t===0?l=e.hostDirectiveInputs??={}:l=e.hostDirectiveOutputs??={},l[s]??=[],l[s].push(o,r),lh(e,s)}}function lh(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function Om(t,e,n){let{attrs:o,inputs:i,hostDirectiveInputs:r}=t;if(o===null||!n&&i===null||n&&r===null||kd(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,l=0;for(;l<o.length;){let d=o[l];if(d===0){l+=4;continue}else if(d===5){l+=2;continue}else if(typeof d=="number")break;if(!n&&i.hasOwnProperty(d)){let u=i[d];for(let f of u)if(f===e){s??=[],s.push(d,o[l+1]);break}}else if(n&&r.hasOwnProperty(d)){let u=r[d];for(let f=0;f<u.length;f+=2)if(u[f]===e){s??=[],s.push(u[f+1],o[l+1]);break}}l+=2}t.initialInputs??=[],t.initialInputs.push(s)}function CC(t,e,n,o,i){t.data[o]=i;let r=i.factory||(i.factory=bn(i.type,!0)),s=new ro(r,Kt(i),Pe,null);t.blueprint[o]=s,n[o]=s,bC(t,e,o,kg(t,n,i.hostVars,lt),i)}function bC(t,e,n,o,i){let r=i.hostBindings;if(r){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let l=~e.index;SC(s)!=l&&s.push(l),s.push(n,o,r)}}function SC(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function EC(t,e,n){if(n){if(e.exportAs)for(let o=0;o<e.exportAs.length;o++)n[e.exportAs[o]]=t;Kt(e)&&(n[""]=t)}}function MC(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function ch(t,e,n,o,i,r,s,l){let d=e[ne],u=d.consts,f=Qt(u,s),v=Bi(d,t,n,o,f);return r&&gC(d,e,v,Qt(u,l),i),v.mergedAttrs=Fo(v.mergedAttrs,v.attrs),v.attrs!==null&&Es(v,v.attrs,!1),v.mergedAttrs!==null&&Es(v,v.mergedAttrs,!0),d.queries!==null&&d.queries.elementStart(d,v),v}function dh(t,e){iy(t,e),ic(e)&&t.queries.elementEnd(e)}function wC(t,e,n,o,i,r){let s=e.consts,l=Qt(s,i),d=Bi(e,t,n,o,l);if(d.mergedAttrs=Fo(d.mergedAttrs,d.attrs),r!=null){let u=Qt(s,r);d.localNames=[];for(let f=0;f<u.length;f+=2)d.localNames.push(u[f],-1)}return d.attrs!==null&&Es(d,d.attrs,!1),d.mergedAttrs!==null&&Es(d,d.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,d),d}function uh(t,e,n){return t[e]=n}function Ft(t,e,n){if(n===lt)return!1;let o=t[e];return Object.is(o,n)?!1:(t[e]=n,!0)}function Jd(t,e,n,o){let i=Ft(t,e,n);return Ft(t,e+1,o)||i}function xC(t,e,n,o,i){let r=Jd(t,e,n,o);return Ft(t,e+2,i)||r}function ms(t,e,n){return function o(i){let r=Pn(t)?bt(t.index,e):e;Wd(r,5);let s=e[ze],l=Fm(e,s,n,i),d=o.__ngNextListenerFn__;for(;d;)l=Fm(e,s,d,i)&&l,d=d.__ngNextListenerFn__;return l}}function Fm(t,e,n,o){let i=te(null);try{return xe(6,e,n),n(o)!==!1}catch(r){return q1(t,r),!1}finally{xe(7,e,n),te(i)}}function ph(t,e,n,o,i,r,s,l){let d=Yr(t),u=!1,f=null;if(!o&&d&&(f=TC(e,n,r,t.index)),f!==null){let v=f.__ngLastListenerFn__||f;v.__ngNextListenerFn__=s,f.__ngLastListenerFn__=s,u=!0}else{let v=Dt(t,n),_=o?o(v):v;Iy(n,_,r,l);let S=i.listen(_,r,l);if(!IC(r)){let D=o?V=>o(Ct(V[t.index])):t.index;fh(D,e,n,r,l,S,!1)}}return u}function IC(t){return t.startsWith("animation")||t.startsWith("transition")}function TC(t,e,n,o){let i=t.cleanup;if(i!=null)for(let r=0;r<i.length-1;r+=2){let s=i[r];if(s===n&&i[r+1]===o){let l=e[Po],d=i[r+2];return l&&l.length>d?l[d]:null}typeof s=="string"&&(r+=2)}return null}function fh(t,e,n,o,i,r,s){let l=e.firstCreatePass?uc(e):null,d=dc(n),u=d.length;d.push(i,r),l&&l.push(o,t,u,(u+1)*(s?-1:1))}function Vm(t,e,n,o,i,r){let s=e[n],l=e[ne],u=l.data[n].outputs[o],v=s[u].subscribe(r);fh(t.index,l,e,i,r,v,!0)}var id=Symbol("BINDING");var rd=class extends Gs{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Jn(e);return new Ni(n,this.ngModule)}};function PC(t){return Object.keys(t).map(e=>{let[n,o,i]=t[e],r={propName:n,templateName:e,isSignal:(o&Os.SignalBased)!==0};return i&&(r.transform=i),r})}function DC(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function AC(t,e,n){let o=e instanceof It?e:e?.injector;return o&&t.getStandaloneInjector!==null&&(o=t.getStandaloneInjector(o)||o),o?new od(n,o):n}function NC(t){let e=t.get(pn,null);if(e===null)throw new ie(407,!1);let n=t.get(ah,null),o=t.get(Mn,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:o,ngReflect:!1}}function kC(t,e){let n=mh(t);return Tg(e,n,n==="svg"?rc:n==="math"?Uf:null)}function mh(t){return(t.selectors[0][0]||"div").toLowerCase()}var Ni=class extends Hs{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=PC(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=DC(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=n1(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,o,i,r,s){xe(22);let l=te(null);try{let d=this.componentDef,u=RC(o,d,s,r),f=AC(d,i||this.ngModule,e),v=NC(f),_=v.rendererFactory.createRenderer(null,d),S=o?D1(_,o,d.encapsulation,f):kC(d,_),D=s?.some(Lm)||r?.some($=>typeof $!="function"&&$.bindings.some(Lm)),V=Od(null,u,null,512|Ng(d),null,null,v,_,f,null,vg(S,f,!0));V[He]=S,es(V);let q=null;try{let $=ch(He,V,2,"#host",()=>u.directiveRegistry,!0,0);Ag(_,S,$),Vo(S,V),Gg(u,V,$),yg(u,$,V),dh(u,$),n!==void 0&&FC($,this.ngContentSelectors,n),q=bt($.index,V),V[ze]=q[ze],zd(u,V,null)}catch($){throw q!==null&&Hc(q),Hc(V),$}finally{xe(23),ts()}return new Ms(this.componentType,V,!!D)}finally{te(l)}}};function RC(t,e,n,o){let i=t?["ng-version","21.0.0"]:o1(e.selectors[0]),r=null,s=null,l=0;if(n)for(let f of n)l+=f[id].requiredVars,f.create&&(f.targetIdx=0,(r??=[]).push(f)),f.update&&(f.targetIdx=0,(s??=[]).push(f));if(o)for(let f=0;f<o.length;f++){let v=o[f];if(typeof v!="function")for(let _ of v.bindings){l+=_[id].requiredVars;let S=f+1;_.create&&(_.targetIdx=S,(r??=[]).push(_)),_.update&&(_.targetIdx=S,(s??=[]).push(_))}}let d=[e];if(o)for(let f of o){let v=typeof f=="function"?f:f.type,_=Kl(v);d.push(_)}return Rd(0,null,OC(r,s),1,l,d,null,null,null,[i],null)}function OC(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let o of t)o.create();if(n&2&&e)for(let o of e)o.update()}}function Lm(t){let e=t[id].kind;return e==="input"||e==="twoWay"}var Ms=class extends sh{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,o){super(),this._rootLView=n,this._hasInputBindings=o,this._tNode=yi(n[ne],He),this.location=Bo(this._tNode,n),this.instance=bt(this._tNode.index,n)[ze],this.hostView=this.changeDetectorRef=new An(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let o=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,r=$d(o,i[ne],i,e,n);this.previousInputValues.set(e,n);let s=bt(o.index,i);Wd(s,1)}get injector(){return new io(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function FC(t,e,n){let o=t.projection=[];for(let i=0;i<e.length;i++){let r=n[i];o.push(r!=null&&r.length?Array.from(r):null)}}var qs=(()=>{class t{static __NG_ELEMENT_ID__=VC}return t})();function VC(){let t=rt();return hh(t,se())}var LC=qs,gh=class extends LC{_lContainer;_hostTNode;_hostLView;constructor(e,n,o){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=o}get element(){return Bo(this._hostTNode,this._hostLView)}get injector(){return new io(this._hostTNode,this._hostLView)}get parentInjector(){let e=Sd(this._hostTNode,this._hostLView);if(Qm(e)){let n=vs(e,this._hostLView),o=hs(e),i=n[ne].data[o+8];return new io(i,n)}else return new io(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=Bm(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Ge}createEmbeddedView(e,n,o){let i,r;typeof o=="number"?i=o:o!=null&&(i=o.index,r=o.injector);let s=td(this._lContainer,e.ssrId),l=e.createEmbeddedViewImpl(n||{},r,s);return this.insertImpl(l,i,Ti(this._hostTNode,s)),l}createComponent(e,n,o,i,r,s,l){let d=e&&!X_(e),u;if(d)u=n;else{let q=n||{};u=q.index,o=q.injector,i=q.projectableNodes,r=q.environmentInjector||q.ngModuleRef,s=q.directives,l=q.bindings}let f=d?e:new Ni(Jn(e)),v=o||this.parentInjector;if(!r&&f.ngModule==null){let $=(d?v:this.parentInjector).get(It,null);$&&(r=$)}let _=Jn(f.componentType??{}),S=td(this._lContainer,_?.id??null),D=S?.firstChild??null,V=f.create(v,i,D,r,s,l);return this.insertImpl(V.hostView,u,Ti(this._hostTNode,S)),V}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,o){let i=e._lView;if(Gf(i)){let l=this.indexOf(e);if(l!==-1)this.detach(l);else{let d=i[Je],u=new gh(d,d[yt],d[Je]);u.detach(u.indexOf(e))}}let r=this._adjustIndex(n),s=this._lContainer;return Us(s,i,r,o),e.attachToViewContainerRef(),Jl(Ac(s),r,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=Bm(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),o=Di(this._lContainer,n);o&&(mi(Ac(this._lContainer),n),Vs(o[ne],o))}detach(e){let n=this._adjustIndex(e,-1),o=Di(this._lContainer,n);return o&&mi(Ac(this._lContainer),n)!=null?new An(o):null}_adjustIndex(e,n=0){return e??this.length+n}};function Bm(t){return t[_i]}function Ac(t){return t[_i]||(t[_i]=[])}function hh(t,e){let n,o=e[t.index];return Pt(o)?n=o:(n=th(o,e,null,t),e[t.index]=n,Fd(e,n)),UC(n,e,t,o),new gh(n,t,e)}function BC(t,e){let n=t[Le],o=n.createComment(""),i=Dt(e,t),r=n.parentNode(i);return bs(n,r,o,n.nextSibling(i),!1),o}var UC=qC,HC=()=>!1;function GC(t,e,n){return HC(t,e,n)}function qC(t,e,n,o){if(t[Tn])return;let i;n.type&8?i=Ct(o):i=BC(e,n),t[Tn]=i}var sd=class t{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},ad=class t{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let o=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let r=0;r<o;r++){let s=n.getByIndex(r),l=this.queries[s.indexInDeclarationView];i.push(l.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)jd(e,n).matches!==null&&this.queries[n].setDirty()}},ld=class{flags;read;predicate;constructor(e,n,o=null){this.flags=n,this.read=o,typeof e=="string"?this.predicate=KC(e):this.predicate=e}},cd=class t{queries;constructor(e=[]){this.queries=e}elementStart(e,n){for(let o=0;o<this.queries.length;o++)this.queries[o].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let o=0;o<this.length;o++){let i=n!==null?n.length:0,r=this.getByIndex(o).embeddedTView(e,i);r&&(r.indexInDeclarationView=o,n!==null?n.push(r):n=[r])}return n!==null?new t(n):null}template(e,n){for(let o=0;o<this.queries.length;o++)this.queries[o].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},dd=class t{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,n=-1){this.metadata=e,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,o=e.parent;for(;o!==null&&o.type&8&&o.index!==n;)o=o.parent;return n===(o!==null?o.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let o=this.metadata.predicate;if(Array.isArray(o))for(let i=0;i<o.length;i++){let r=o[i];this.matchTNodeWithReadOption(e,n,$C(n,r)),this.matchTNodeWithReadOption(e,n,ps(n,e,r,!1,!1))}else o===Ai?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,ps(n,e,o,!1,!1))}matchTNodeWithReadOption(e,n,o){if(o!==null){let i=this.metadata.read;if(i!==null)if(i===tn||i===qs||i===Ai&&n.type&4)this.addMatch(n.index,-2);else{let r=ps(n,e,i,!1,!1);r!==null&&this.addMatch(n.index,r)}else this.addMatch(n.index,o)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function $C(t,e){let n=t.localNames;if(n!==null){for(let o=0;o<n.length;o+=2)if(n[o]===e)return n[o+1]}return null}function zC(t,e){return t.type&11?Bo(t,e):t.type&4?Yd(t,e):null}function WC(t,e,n,o){return n===-1?zC(e,t):n===-2?YC(t,e,o):Ii(t,t[ne],n,e)}function YC(t,e,n){if(n===tn)return Bo(e,t);if(n===Ai)return Yd(e,t);if(n===qs)return hh(e,t)}function vh(t,e,n,o){let i=e[jt].queries[o];if(i.matches===null){let r=t.data,s=n.matches,l=[];for(let d=0;s!==null&&d<s.length;d+=2){let u=s[d];if(u<0)l.push(null);else{let f=r[u];l.push(WC(e,f,s[d+1],n.metadata.read))}}i.matches=l}return i.matches}function ud(t,e,n,o){let i=t.queries.getByIndex(n),r=i.matches;if(r!==null){let s=vh(t,e,i,n);for(let l=0;l<r.length;l+=2){let d=r[l];if(d>0)o.push(s[l/2]);else{let u=r[l+1],f=e[-d];for(let v=Ge;v<f.length;v++){let _=f[v];_[In]===_[Je]&&ud(_[ne],_,u,o)}if(f[Xn]!==null){let v=f[Xn];for(let _=0;_<v.length;_++){let S=v[_];ud(S[ne],S,u,o)}}}}}return o}function JC(t,e){return t[jt].queries[e].queryList}function jC(t,e,n){let o=new Cs((n&4)===4);return zf(t,e,o,o.destroy),(e[jt]??=new ad).queries.push(new sd(o))-1}function ZC(t,e,n){let o=Ye();return o.firstCreatePass&&(QC(o,new ld(t,e,n),-1),(e&2)===2&&(o.staticViewQueries=!0)),jC(o,se(),e)}function KC(t){return t.split(",").map(e=>e.trim())}function QC(t,e,n){t.queries===null&&(t.queries=new cd),t.queries.track(new dd(e,n))}function jd(t,e){return t.queries.getByIndex(e)}function XC(t,e){let n=t[ne],o=jd(n,e);return o.crossesNgTemplate?ud(n,t,e,[]):vh(n,t,o,e)}var ws=class{};var ki=class extends ws{injector;componentFactoryResolver=new rd(this);instance=null;constructor(e){super();let n=new zn([...e.providers,{provide:ws,useValue:this},{provide:Gs,useValue:this.componentFactoryResolver}],e.parent||hi(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function _h(t,e,n=null){return new ki({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var eb=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let o=Ql(!1,n.type),i=o.length>0?_h([o],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=fe({token:t,providedIn:"environment",factory:()=>new t(ye(It))})}return t})();function ee(t){return Oi(()=>{let e=yh(t),n=z(B({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Ed.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(eb).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Ot.Emulated,styles:t.styles||ut,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&gn("NgStandalone"),Ch(n);let o=t.dependencies;return n.directiveDefs=Um(o,tb),n.pipeDefs=Um(o,kf),n.id=ib(n),n})}function tb(t){return Jn(t)||Kl(t)}function Uo(t){return Oi(()=>({type:t.type,bootstrap:t.bootstrap||ut,declarations:t.declarations||ut,imports:t.imports||ut,exports:t.exports||ut,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function nb(t,e){if(t==null)return xn;let n={};for(let o in t)if(t.hasOwnProperty(o)){let i=t[o],r,s,l,d;Array.isArray(i)?(l=i[0],r=i[1],s=i[2]??r,d=i[3]||null):(r=i,s=i,l=Os.None,d=null),n[r]=[o,l,d],e[r]=s}return n}function ob(t){if(t==null)return xn;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function Ze(t){return Oi(()=>{let e=yh(t);return Ch(e),e})}function Zd(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function yh(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||xn,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||ut,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:nb(t.inputs,e),outputs:ob(t.outputs),debugInfo:null}}function Ch(t){t.features?.forEach(e=>e(t))}function Um(t,e){return t?()=>{let n=typeof t=="function"?t():t,o=[];for(let i of n){let r=e(i);r!==null&&o.push(r)}return o}:null}function ib(t){let e=0,n=typeof t.consts=="function"?"":t.consts,o=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let r of o.join("|"))e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function rb(t){return Object.getPrototypeOf(t.prototype).constructor}function ct(t){let e=rb(t.type),n=!0,o=[t];for(;e;){let i;if(Kt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ie(903,!1);i=e.\u0275dir}if(i){if(n){o.push(i);let s=t;s.inputs=Nc(t.inputs),s.declaredInputs=Nc(t.declaredInputs),s.outputs=Nc(t.outputs);let l=i.hostBindings;l&&db(t,l);let d=i.viewQuery,u=i.contentQueries;if(d&&lb(t,d),u&&cb(t,u),sb(t,i),Mf(t.outputs,i.outputs),Kt(i)&&i.data.animation){let f=t.data;f.animation=(f.animation||[]).concat(i.data.animation)}}let r=i.features;if(r)for(let s=0;s<r.length;s++){let l=r[s];l&&l.ngInherit&&l(t),l===ct&&(n=!1)}}e=Object.getPrototypeOf(e)}ab(o)}function sb(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let o=e.inputs[n];o!==void 0&&(t.inputs[n]=o,t.declaredInputs[n]=e.declaredInputs[n])}}function ab(t){let e=0,n=null;for(let o=t.length-1;o>=0;o--){let i=t[o];i.hostVars=e+=i.hostVars,i.hostAttrs=Fo(i.hostAttrs,n=Fo(n,i.hostAttrs))}}function Nc(t){return t===xn?{}:t===ut?[]:t}function lb(t,e){let n=t.viewQuery;n?t.viewQuery=(o,i)=>{e(o,i),n(o,i)}:t.viewQuery=e}function cb(t,e){let n=t.contentQueries;n?t.contentQueries=(o,i,r)=>{e(o,i,r),n(o,i,r)}:t.contentQueries=e}function db(t,e){let n=t.hostBindings;n?t.hostBindings=(o,i)=>{e(o,i),n(o,i)}:t.hostBindings=e}function ub(t,e,n,o,i,r,s,l){if(n.firstCreatePass){t.mergedAttrs=Fo(t.mergedAttrs,t.attrs);let f=t.tView=Rd(2,t,i,r,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),f.queries=n.queries.embeddedTView(t))}l&&(t.flags|=l),no(t,!1);let d=pb(n,e,t,o);os()&&Hd(n,e,d,t),Vo(d,e);let u=th(d,e,d,t);e[o+He]=u,Fd(e,u),GC(u,t,e)}function xs(t,e,n,o,i,r,s,l,d,u,f){let v=n+He,_;if(e.firstCreatePass){if(_=Bi(e,v,4,s||null,l||null),u!=null){let S=Qt(e.consts,u);_.localNames=[];for(let D=0;D<S.length;D+=2)_.localNames.push(S[D],-1)}}else _=e.data[v];return ub(_,t,e,n,o,i,r,d),u!=null&&qd(t,_,f),_}var pb=fb;function fb(t,e,n,o){return is(!0),e[Le].createComment("")}var Kd=new ge("");function Ui(t){return!!t&&typeof t.then=="function"}function bh(t){return!!t&&typeof t.subscribe=="function"}var Sh=new ge("");var Qd=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,o)=>{this.resolve=n,this.reject=o});appInits=w(Sh,{optional:!0})??[];injector=w(it);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let r=zr(this.injector,i);if(Ui(r))n.push(r);else if(bh(r)){let s=new Promise((l,d)=>{r.subscribe({complete:l,error:d})});n.push(s)}}let o=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{o()}).catch(i=>{this.reject(i)}),n.length===0&&o(),this.initialized=!0}static \u0275fac=function(o){return new(o||t)};static \u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Eh=new ge("");function Mh(){fl(()=>{let t="";throw new ie(600,t)})}function wh(t){return t.isBoundToModule}var mb=10;var co=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=w(ko);afterRenderManager=w(Ld);zonelessEnabled=w(Mi);rootEffectScheduler=w(rs);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new xt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=w(No);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Hn(n=>!n))}constructor(){w(lo,{optional:!0})}whenStable(){let n;return new Promise(o=>{n=this.isStable.subscribe({next:i=>{i&&o()}})}).finally(()=>{n.unsubscribe()})}_injector=w(It);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,o){return this.bootstrapImpl(n,o)}bootstrapImpl(n,o,i=it.NULL){return this._injector.get(pt).run(()=>{xe(10);let s=n instanceof Hs;if(!this._injector.get(Qd).done){let D="";throw new ie(405,D)}let d;s?d=n:d=this._injector.get(Gs).resolveComponentFactory(n),this.componentTypes.push(d.componentType);let u=wh(d)?void 0:this._injector.get(ws),f=o||d.selector,v=d.create(i,[],f,u),_=v.location.nativeElement,S=v.injector.get(Kd,null);return S?.registerApplication(_),v.onDestroy(()=>{this.detachView(v.hostView),xi(this.components,v),S?.unregisterApplication(_)}),this._loadComponent(v),xe(11,v),v})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){xe(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Fs.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new ie(101,!1);let n=te(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,te(n),this.afterTick.next(),xe(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(pn,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<mb;)xe(14),this.synchronizeOnce(),xe(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let o=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!o&&!bi(i))continue;let r=o&&!this.zonelessEnabled?0:1;Kg(i,r),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>bi(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let o=n;this._views.push(o),o.attachToAppRef(this)}detachView(n){let o=n;xi(this._views,o),o.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(Eh,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>xi(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new ie(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(o){return new(o||t)};static \u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function xi(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function St(t,e,n,o){let i=se(),r=oo();if(Ft(i,r,e)){let s=Ye(),l=ns();U1(l,i,t,e,n,o)}return St}var s5=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var pd=class{destroy(e){}updateValue(e,n){}swap(e,n){let o=Math.min(e,n),i=Math.max(e,n),r=this.detach(i);if(i-o>1){let s=this.detach(o);this.attach(o,r),this.attach(i,s)}else this.attach(o,r)}move(e,n){this.attach(n,this.detach(e))}};function kc(t,e,n,o,i){return t===n&&Object.is(e,o)?1:Object.is(i(t,e),i(n,o))?-1:0}function gb(t,e,n,o){let i,r,s=0,l=t.length-1,d=void 0;if(Array.isArray(e)){te(o);let u=e.length-1;for(te(null);s<=l&&s<=u;){let f=t.at(s),v=e[s],_=kc(s,f,s,v,n);if(_!==0){_<0&&t.updateValue(s,v),s++;continue}let S=t.at(l),D=e[u],V=kc(l,S,u,D,n);if(V!==0){V<0&&t.updateValue(l,D),l--,u--;continue}let q=n(s,f),$=n(l,S),Q=n(s,v);if(Object.is(Q,$)){let Y=n(u,D);Object.is(Y,q)?(t.swap(s,l),t.updateValue(l,D),u--,l--):t.move(l,s),t.updateValue(s,v),s++;continue}if(i??=new Is,r??=Gm(t,s,l,n),fd(t,i,s,Q))t.updateValue(s,v),s++,l++;else if(r.has(Q))i.set(q,t.detach(s)),l--;else{let Y=t.create(s,e[s]);t.attach(s,Y),s++,l++}}for(;s<=u;)Hm(t,i,n,s,e[s]),s++}else if(e!=null){te(o);let u=e[Symbol.iterator]();te(null);let f=u.next();for(;!f.done&&s<=l;){let v=t.at(s),_=f.value,S=kc(s,v,s,_,n);if(S!==0)S<0&&t.updateValue(s,_),s++,f=u.next();else{i??=new Is,r??=Gm(t,s,l,n);let D=n(s,_);if(fd(t,i,s,D))t.updateValue(s,_),s++,l++,f=u.next();else if(!r.has(D))t.attach(s,t.create(s,_)),s++,l++,f=u.next();else{let V=n(s,v);i.set(V,t.detach(s)),l--}}}for(;!f.done;)Hm(t,i,n,t.length,f.value),f=u.next()}for(;s<=l;)t.destroy(t.detach(l--));i?.forEach(u=>{t.destroy(u)})}function fd(t,e,n,o){return e!==void 0&&e.has(o)?(t.attach(n,e.get(o)),e.delete(o),!0):!1}function Hm(t,e,n,o,i){if(fd(t,e,o,n(o,i)))t.updateValue(o,i);else{let r=t.create(o,i);t.attach(o,r)}}function Gm(t,e,n,o){let i=new Set;for(let r=e;r<=n;r++)i.add(o(r,t.at(r)));return i}var Is=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let o=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(o);)o=i.get(o);i.set(o,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,o]of this.kvMap)if(e(o,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(o);)o=i.get(o),e(o,n)}}};function O(t,e,n,o,i,r,s,l){gn("NgControlFlow");let d=se(),u=Ye(),f=Qt(u.consts,r);return xs(d,u,t,e,n,o,i,f,256,s,l),Xd}function Xd(t,e,n,o,i,r,s,l){gn("NgControlFlow");let d=se(),u=Ye(),f=Qt(u.consts,r);return xs(d,u,t,e,n,o,i,f,512,s,l),Xd}function F(t,e){gn("NgControlFlow");let n=se(),o=oo(),i=n[o]!==lt?n[o]:-1,r=i!==-1?Ts(n,He+i):void 0,s=0;if(Ft(n,o,t)){let l=te(null);try{if(r!==void 0&&oh(r,s),t!==-1){let d=He+t,u=Ts(n,d),f=vd(n[ne],d),v=rh(u,f,n),_=Bs(n,f,e,{dehydratedView:v});Us(u,_,s,Ti(f,v))}}finally{te(l)}}else if(r!==void 0){let l=nh(r,s);l!==void 0&&(l[ze]=e)}}var md=class{lContainer;$implicit;$index;constructor(e,n,o){this.lContainer=e,this.$implicit=n,this.$index=o}get $count(){return this.lContainer.length-Ge}};function Hi(t,e){return e}var gd=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,o){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=o}};function Z(t,e,n,o,i,r,s,l,d,u,f,v,_){gn("NgControlFlow");let S=se(),D=Ye(),V=d!==void 0,q=se(),$=l?s.bind(q[mt][ze]):s,Q=new gd(V,$);q[He+t]=Q,xs(S,D,t+1,e,n,o,i,Qt(D.consts,r),256),V&&xs(S,D,t+2,d,u,f,v,Qt(D.consts,_),512)}var hd=class extends pd{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,o){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=o}get length(){return this.lContainer.length-Ge}at(e){return this.getLView(e)[ze].$implicit}attach(e,n){let o=n[To];this.needsIndexUpdate||=e!==this.length,Us(this.lContainer,n,e,Ti(this.templateTNode,o)),hb(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,vb(this.lContainer,e),_b(this.lContainer,e)}create(e,n){let o=td(this.lContainer,this.templateTNode.tView.ssrId),i=Bs(this.hostLView,this.templateTNode,new md(this.lContainer,n,e),{dehydratedView:o});return this.operationsCounter?.recordCreate(),i}destroy(e){Vs(e[ne],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[ze].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[ze].$index=e}getLView(e){return yb(this.lContainer,e)}};function K(t){let e=te(null),n=At();try{let o=se(),i=o[ne],r=o[n],s=n+1,l=Ts(o,s);if(r.liveCollection===void 0){let u=vd(i,s);r.liveCollection=new hd(l,o,u)}else r.liveCollection.reset();let d=r.liveCollection;if(gb(d,t,r.trackByFn,e),d.updateIndexes(),r.hasEmptyBlock){let u=oo(),f=d.length===0;if(Ft(o,u,f)){let v=n+2,_=Ts(o,v);if(f){let S=vd(i,v),D=rh(_,S,o),V=Bs(o,S,void 0,{dehydratedView:D});Us(_,V,0,Ti(S,D))}else i.firstUpdatePass&&dC(_),oh(_,0)}}}finally{te(e)}}function Ts(t,e){return t[e]}function hb(t,e){if(t.length<=Ge)return;let n=Ge+e,o=t[n],i=o?o[Qn]:void 0;if(o&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let r=o[cn];m1(r,i),so.delete(o),i.detachedLeaveAnimationFns=void 0}}function vb(t,e){if(t.length<=Ge)return;let n=Ge+e,o=t[n],i=o?o[Qn]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function _b(t,e){return Di(t,e)}function yb(t,e){return nh(t,e)}function vd(t,e){return yi(t,e)}function A(t,e,n){let o=se(),i=oo();if(Ft(o,i,e)){let r=Ye(),s=ns();R1(s,o,t,e,o[Le],n)}return A}function qm(t,e,n,o,i){$d(e,t,n,i?"class":"style",o)}function m(t,e,n,o){let i=se(),r=i[ne],s=t+He,l=r.firstCreatePass?ch(s,i,2,e,B1,Jf(),n,o):r.data[s];if($g(l,i,t,e,xh),Yr(l)){let d=i[ne];Gg(d,i,l),yg(d,l,i)}return o!=null&&qd(i,l),m}function g(){let t=Ye(),e=rt(),n=zg(e);return t.firstCreatePass&&dh(t,n),fc(n)&&mc(),pc(),n.classesWithoutHost!=null&&sy(n)&&qm(t,n,se(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&ay(n)&&qm(t,n,se(),n.stylesWithoutHost,!1),g}function k(t,e,n,o){return m(t,e,n,o),g(),k}function x(t,e,n,o){let i=se(),r=i[ne],s=t+He,l=r.firstCreatePass?wC(s,r,2,e,n,o):r.data[s];return $g(l,i,t,e,xh),o!=null&&qd(i,l),x}function P(){let t=rt(),e=zg(t);return fc(e)&&mc(),pc(),P}function ve(t,e,n,o){return x(t,e,n,o),P(),ve}var xh=(t,e,n,o,i)=>(is(!0),Tg(e[Le],o,lm()));function G(){return se()}function ht(t,e,n){let o=se(),i=oo();if(Ft(o,i,e)){let r=Ye(),s=ns();qg(s,o,t,e,o[Le],n)}return ht}var Gi="en-US";var Cb=Gi;function Ih(t){typeof t=="string"&&(Cb=t.toLowerCase().replace(/_/g,"-"))}function M(t,e,n){let o=se(),i=Ye(),r=rt();return bb(i,o,o[Le],r,t,e,n),M}function ke(t,e,n){let o=se(),i=Ye(),r=rt();return(r.type&3||n)&&ph(r,i,o,n,o[Le],t,e,ms(r,o,e)),ke}function bb(t,e,n,o,i,r,s){let l=!0,d=null;if((o.type&3||s)&&(d??=ms(o,e,r),ph(o,t,e,s,n,i,r,d)&&(l=!1)),l){let u=o.outputs?.[i],f=o.hostDirectiveOutputs?.[i];if(f&&f.length)for(let v=0;v<f.length;v+=2){let _=f[v],S=f[v+1];d??=ms(o,e,r),Vm(o,e,_,S,i,d)}if(u&&u.length)for(let v of u)d??=ms(o,e,r),Vm(o,e,v,i,i,d)}}function E(t=1){return am(t)}function Lt(t,e,n){ZC(t,e,n)}function Bt(t){let e=se(),n=Ye(),o=yc();Xr(o+1);let i=jd(n,o);if(t.dirty&&Hf(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let r=XC(e,o);t.reset(r,Cy),t.notifyOnChanges()}return!0}return!1}function Ut(){return JC(se(),yc())}function cs(t,e){return t<<17|e<<2}function ao(t){return t>>17&32767}function Sb(t){return(t&2)==2}function Eb(t,e){return t&131071|e<<17}function _d(t){return t|2}function Lo(t){return(t&131068)>>2}function Rc(t,e){return t&-131069|e<<2}function Mb(t){return(t&1)===1}function yd(t){return t|1}function wb(t,e,n,o,i,r){let s=r?e.classBindings:e.styleBindings,l=ao(s),d=Lo(s);t[o]=n;let u=!1,f;if(Array.isArray(n)){let v=n;f=v[1],(f===null||xo(v,f)>0)&&(u=!0)}else f=n;if(i)if(d!==0){let _=ao(t[l+1]);t[o+1]=cs(_,l),_!==0&&(t[_+1]=Rc(t[_+1],o)),t[l+1]=Eb(t[l+1],o)}else t[o+1]=cs(l,0),l!==0&&(t[l+1]=Rc(t[l+1],o)),l=o;else t[o+1]=cs(d,0),l===0?l=o:t[d+1]=Rc(t[d+1],o),d=o;u&&(t[o+1]=_d(t[o+1])),$m(t,f,o,!0),$m(t,f,o,!1),xb(e,f,t,o,r),s=cs(l,d),r?e.classBindings=s:e.styleBindings=s}function xb(t,e,n,o,i){let r=i?t.residualClasses:t.residualStyles;r!=null&&typeof e=="string"&&xo(r,e)>=0&&(n[o+1]=yd(n[o+1]))}function $m(t,e,n,o){let i=t[n+1],r=e===null,s=o?ao(i):Lo(i),l=!1;for(;s!==0&&(l===!1||r);){let d=t[s],u=t[s+1];Ib(d,e)&&(l=!0,t[s+1]=o?yd(u):_d(u)),s=o?ao(u):Lo(u)}l&&(t[n+1]=o?_d(i):yd(i))}function Ib(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?xo(t,e)>=0:!1}function j(t,e){return Tb(t,e,null,!0),j}function Tb(t,e,n,o){let i=se(),r=Ye(),s=Kr(2);if(r.firstUpdatePass&&Db(r,t,s,o),e!==lt&&Ft(i,s,e)){let l=r.data[At()];Ob(r,l,i,i[Le],t,i[s+1]=Fb(e,n),o,s)}}function Pb(t,e){return e>=t.expandoStartIndex}function Db(t,e,n,o){let i=t.data;if(i[n+1]===null){let r=i[At()],s=Pb(t,n);Vb(r,o)&&e===null&&!s&&(e=!1),e=Ab(i,r,e,o),wb(i,r,e,n,s,o)}}function Ab(t,e,n,o){let i=om(t),r=o?e.residualClasses:e.residualStyles;if(i===null)(o?e.classBindings:e.styleBindings)===0&&(n=Oc(null,t,e,n,o),n=Ri(n,e.attrs,o),r=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=Oc(i,t,e,n,o),r===null){let d=Nb(t,e,o);d!==void 0&&Array.isArray(d)&&(d=Oc(null,t,e,d[1],o),d=Ri(d,e.attrs,o),kb(t,e,o,d))}else r=Rb(t,e,o)}return r!==void 0&&(o?e.residualClasses=r:e.residualStyles=r),n}function Nb(t,e,n){let o=n?e.classBindings:e.styleBindings;if(Lo(o)!==0)return t[ao(o)]}function kb(t,e,n,o){let i=n?e.classBindings:e.styleBindings;t[ao(i)]=o}function Rb(t,e,n){let o,i=e.directiveEnd;for(let r=1+e.directiveStylingLast;r<i;r++){let s=t[r].hostAttrs;o=Ri(o,s,n)}return Ri(o,e.attrs,n)}function Oc(t,e,n,o,i){let r=null,s=n.directiveEnd,l=n.directiveStylingLast;for(l===-1?l=n.directiveStart:l++;l<s&&(r=e[l],o=Ri(o,r.hostAttrs,i),r!==t);)l++;return t!==null&&(n.directiveStylingLast=l),o}function Ri(t,e,n){let o=n?1:2,i=-1;if(e!==null)for(let r=0;r<e.length;r++){let s=e[r];typeof s=="number"?i=s:i===o&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),Nf(t,s,n?!0:e[++r]))}return t===void 0?null:t}function Ob(t,e,n,o,i,r,s,l){if(!(e.type&3))return;let d=t.data,u=d[l+1],f=Mb(u)?zm(d,e,n,i,Lo(u),s):void 0;if(!Ps(f)){Ps(r)||Sb(u)&&(r=zm(d,null,n,i,l,s));let v=sc(At(),n);P1(o,s,v,i,r)}}function zm(t,e,n,o,i,r){let s=e===null,l;for(;i>0;){let d=t[i],u=Array.isArray(d),f=u?d[1]:d,v=f===null,_=n[i+1];_===lt&&(_=v?ut:void 0);let S=v?qr(_,o):f===o?_:void 0;if(u&&!Ps(S)&&(S=qr(d,o)),Ps(S)&&(l=S,s))return l;let D=t[i+1];i=s?ao(D):Lo(D)}if(e!==null){let d=r?e.residualClasses:e.residualStyles;d!=null&&(l=qr(d,o))}return l}function Ps(t){return t!==void 0}function Fb(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Cn(nn(t)))),t}function Vb(t,e){return(t.flags&(e?8:16))!==0}function h(t,e=""){let n=se(),o=Ye(),i=t+He,r=o.firstCreatePass?Bi(o,i,1,e,null):o.data[i],s=Lb(o,n,r,e,t);n[i]=s,os()&&Hd(o,n,s,r),no(r,!1)}var Lb=(t,e,n,o,i)=>(is(!0),i1(e[Le],o));function Th(t,e,n,o=""){return Ft(t,oo(),n)?e+Yt(n)+o:lt}function Bb(t,e,n,o,i,r=""){let s=_c(),l=Jd(t,s,n,i);return Kr(2),l?e+Yt(n)+o+Yt(i)+r:lt}function Ub(t,e,n,o,i,r,s,l=""){let d=_c(),u=xC(t,d,n,i,s);return Kr(3),u?e+Yt(n)+o+Yt(i)+r+Yt(s)+l:lt}function b(t){return N("",t),b}function N(t,e,n){let o=se(),i=Th(o,t,e,n);return i!==lt&&eu(o,At(),i),N}function Ce(t,e,n,o,i){let r=se(),s=Bb(r,t,e,n,o,i);return s!==lt&&eu(r,At(),s),Ce}function qi(t,e,n,o,i,r,s){let l=se(),d=Ub(l,t,e,n,o,i,r,s);return d!==lt&&eu(l,At(),d),qi}function eu(t,e,n){let o=sc(e,t);r1(t[Le],o,n)}var Ph={};function uo(t){let e=Ye(),n=se(),o=t+He,i=Bi(e,o,128,null,null);return no(i,!1),Ci(e,n,o,Ph),uo}function Ho(t){gn("NgLet");let e=Ye(),n=se(),o=At();return Ci(e,n,o,t),t}function po(t){let e=Qf(),n=Jr(e,He+t);if(n===Ph)throw new ie(314,!1);return n}function tu(t,e,n=""){return Th(se(),t,e,n)}function Hb(t,e,n){let o=Ye();if(o.firstCreatePass){let i=Kt(t);Cd(n,o.data,o.blueprint,i,!0),Cd(e,o.data,o.blueprint,i,!1)}}function Cd(t,e,n,o,i){if(t=Xe(t),Array.isArray(t))for(let r=0;r<t.length;r++)Cd(t[r],e,n,o,i);else{let r=Ye(),s=se(),l=rt(),d=$n(t)?t:Xe(t.provide),u=ec(t),f=l.providerIndexes&1048575,v=l.directiveStart,_=l.providerIndexes>>20;if($n(t)||!t.multi){let S=new ro(u,i,Pe,null),D=Vc(d,e,i?f:f+_,v);D===-1?(Bc(ys(l,s),r,d),Fc(r,t,e.length),e.push(d),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),n.push(S),s.push(S)):(n[D]=S,s[D]=S)}else{let S=Vc(d,e,f+_,v),D=Vc(d,e,f,f+_),V=S>=0&&n[S],q=D>=0&&n[D];if(i&&!q||!i&&!V){Bc(ys(l,s),r,d);let $=$b(i?qb:Gb,n.length,i,o,u,t);!i&&q&&(n[D].providerFactory=$),Fc(r,t,e.length,0),e.push(d),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),n.push($),s.push($)}else{let $=Dh(n[i?D:S],u,!i&&o);Fc(r,t,S>-1?S:D,$)}!i&&o&&q&&n[D].componentProviders++}}}function Fc(t,e,n,o){let i=$n(e),r=Vf(e);if(i||r){let d=(r?Xe(e.useClass):e).prototype.ngOnDestroy;if(d){let u=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let f=u.indexOf(n);f===-1?u.push(n,[o,d]):u[f+1].push(o,d)}else u.push(n,d)}}}function Dh(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Vc(t,e,n,o){for(let i=n;i<o;i++)if(e[i]===t)return i;return-1}function Gb(t,e,n,o,i){return bd(this.multi,[])}function qb(t,e,n,o,i){let r=this.multi,s;if(this.providerFactory){let l=this.providerFactory.componentProviders,d=Ii(o,o[ne],this.providerFactory.index,i);s=d.slice(0,l),bd(r,s);for(let u=l;u<d.length;u++)s.push(d[u])}else s=[],bd(r,s);return s}function bd(t,e){for(let n=0;n<t.length;n++){let o=t[n];e.push(o())}return e}function $b(t,e,n,o,i,r){let s=new ro(t,n,Pe,null);return s.multi=[],s.index=e,s.componentProviders=0,Dh(s,i,o&&!n),s}function on(t,e=[]){return n=>{n.providersResolver=(o,i)=>Hb(o,i?i(t):t,e)}}function nu(t,e,n,o){return Nh(se(),Si(),t,e,n,o)}function ou(t,e,n,o,i){return kh(se(),Si(),t,e,n,o,i)}function Ah(t,e){let n=t[e];return n===lt?void 0:n}function Nh(t,e,n,o,i,r){let s=e+n;return Ft(t,s,i)?uh(t,s+1,r?o.call(r,i):o(i)):Ah(t,s+1)}function kh(t,e,n,o,i,r,s){let l=e+n;return Jd(t,l,i,r)?uh(t,l+2,s?o.call(s,i,r):o(i,r)):Ah(t,l+2)}function y(t,e){let n=Ye(),o,i=t+He;n.firstCreatePass?(o=zb(e,n.pipeRegistry),n.data[i]=o,o.onDestroy&&(n.destroyHooks??=[]).push(i,o.onDestroy)):o=n.data[i];let r=o.factory||(o.factory=bn(o.type,!0)),s,l=ot(Pe);try{let d=_s(!1),u=r();return _s(d),Ci(n,se(),i,u),u}finally{ot(l)}}function zb(t,e){if(e)for(let n=e.length-1;n>=0;n--){let o=e[n];if(t===o.name)return o}}function C(t,e,n){let o=t+He,i=se(),r=Jr(i,o);return Rh(i,o)?Nh(i,Si(),e,r.transform,n,r):r.transform(n)}function $i(t,e,n,o){let i=t+He,r=se(),s=Jr(r,i);return Rh(r,i)?kh(r,Si(),e,s.transform,n,o,s):s.transform(n,o)}function Rh(t,e){return t[ne].data[e].pure}var Oh=(()=>{class t{applicationErrorHandler=w(ko);appRef=w(co);taskService=w(No);ngZone=w(pt);zonelessEnabled=w(Mi);tracing=w(lo,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new nt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(pi):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(w(Ic,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let o=this.useMicrotaskScheduler?Ec:Sc;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>o(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>o(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(pi+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(o){this.taskService.remove(n),this.applicationErrorHandler(o)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Ec(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(o){return new(o||t)};static \u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function iu(){return gn("NgZoneless"),$r([...ru(),[]])}function ru(){return[{provide:Mn,useExisting:Oh},{provide:pt,useClass:fi},{provide:Mi,useValue:!0}]}function Wb(){return typeof $localize<"u"&&$localize.locale||Gi}var su=new ge("",{factory:()=>w(su,{optional:!0,skipSelf:!0})||Wb()});var $s=class{destroyed=!1;listeners=null;errorHandler=w(vt,{optional:!0});destroyRef=w(Xt);constructor(){this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(e){if(this.destroyed)throw new ie(953,!1);return(this.listeners??=[]).push(e),{unsubscribe:()=>{let n=this.listeners?.indexOf(e);n!==void 0&&n!==-1&&this.listeners?.splice(n,1)}}}emit(e){if(this.destroyed){console.warn(wo(953,!1));return}if(this.listeners===null)return;let n=te(null);try{for(let o of this.listeners)try{o(e)}catch(i){this.errorHandler?.handleError(i)}}finally{te(n)}}};function H(t,e){return pr(t,e?.equal)}var Lh=Symbol("InputSignalNode#UNSET"),eS=z(B({},fr),{transformFn:void 0,applyValueToInputSignal(t,e){ii(t,e)}});function Bh(t,e){let n=Object.create(eS);n.value=t,n.transformFn=e?.transform;function o(){if(ti(n),n.value===Lh){let i=null;throw new ie(-950,i)}return n.value}return o[st]=n,o}function Uh(t){return new $s}function Fh(t,e){return Bh(t,e)}function tS(t){return Bh(Lh,t)}var Ws=(Fh.required=tS,Fh);var au=new ge(""),nS=new ge("");function zi(t){return!t.moduleRef}function oS(t){let e=zi(t)?t.r3Injector:t.moduleRef.injector,n=e.get(pt);return n.run(()=>{zi(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let o=e.get(ko),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:o})}),zi(t)){let r=()=>e.destroy(),s=t.platformInjector.get(au);s.add(r),e.onDestroy(()=>{i.unsubscribe(),s.delete(r)})}else{let r=()=>t.moduleRef.destroy(),s=t.platformInjector.get(au);s.add(r),t.moduleRef.onDestroy(()=>{xi(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(r)})}return rS(o,n,()=>{let r=e.get(No),s=r.add(),l=e.get(Qd);return l.runInitializers(),l.donePromise.then(()=>{let d=e.get(su,Gi);if(Ih(d||Gi),!e.get(nS,!0))return zi(t)?e.get(co):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(zi(t)){let f=e.get(co);return t.rootComponent!==void 0&&f.bootstrap(t.rootComponent),f}else return iS?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void r.remove(s))})})}var iS;function rS(t,e,n){try{let o=n();return Ui(o)?o.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):o}catch(o){throw e.runOutsideAngular(()=>t(o)),o}}var zs=null;function sS(t=[],e){return it.create({name:e,providers:[{provide:gi,useValue:"platform"},{provide:au,useValue:new Set([()=>zs=null])},...t]})}function aS(t=[]){if(zs)return zs;let e=sS(t);return zs=e,Mh(),lS(e),e}function lS(t){let e=t.get(Ns,null);zr(t,()=>{e?.forEach(n=>n())})}var lu=(()=>{class t{static __NG_ELEMENT_ID__=cS}return t})();function cS(t){return dS(rt(),se(),(t&16)===16)}function dS(t,e,n){if(Pn(t)&&!n){let o=bt(t.index,e);return new An(o,o)}else if(t.type&175){let o=e[mt];return new An(o,e)}return null}function Hh(t){let{rootComponent:e,appProviders:n,platformProviders:o,platformRef:i}=t;xe(8);try{let r=i?.injector??aS(o),s=[ru(),fm,...n||[]],l=new ki({providers:s,parent:r,debugName:"",runEnvironmentInitializers:!1});return oS({r3Injector:l.injector,platformInjector:r,rootComponent:e})}catch(r){return Promise.reject(r)}finally{xe(9)}}function cu(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var Gh=null;function hn(){return Gh}function du(t){Gh??=t}var Wi=class{};function uu(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let o=n.indexOf("="),[i,r]=o==-1?[n,""]:[n.slice(0,o),n.slice(o+1)];if(i.trim()===e)return decodeURIComponent(r)}return null}var Yi=class{};var qh="browser";var Ji=class{_doc;constructor(e){this._doc=e}manager},Ys=(()=>{class t extends Ji{constructor(n){super(n)}supports(n){return!0}addEventListener(n,o,i,r){return n.addEventListener(o,i,r),()=>this.removeEventListener(n,o,i,r)}removeEventListener(n,o,i,r){return n.removeEventListener(o,i,r)}static \u0275fac=function(o){return new(o||t)(ye(Nt))};static \u0275prov=fe({token:t,factory:t.\u0275fac})}return t})(),Zs=new ge(""),gu=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,o){this._zone=o,n.forEach(s=>{s.manager=this});let i=n.filter(s=>!(s instanceof Ys));this._plugins=i.slice().reverse();let r=n.find(s=>s instanceof Ys);r&&this._plugins.push(r)}addEventListener(n,o,i,r){return this._findPluginFor(o).addEventListener(n,o,i,r)}getZone(){return this._zone}_findPluginFor(n){let o=this._eventNameToPlugin.get(n);if(o)return o;if(o=this._plugins.find(r=>r.supports(n)),!o)throw new ie(5101,!1);return this._eventNameToPlugin.set(n,o),o}static \u0275fac=function(o){return new(o||t)(ye(Zs),ye(pt))};static \u0275prov=fe({token:t,factory:t.\u0275fac})}return t})(),pu="ng-app-id";function $h(t){for(let e of t)e.remove()}function zh(t,e){let n=e.createElement("style");return n.textContent=t,n}function uS(t,e,n,o){let i=t.head?.querySelectorAll(`style[${pu}="${e}"],link[${pu}="${e}"]`);if(i)for(let r of i)r.removeAttribute(pu),r instanceof HTMLLinkElement?o.set(r.href.slice(r.href.lastIndexOf("/")+1),{usage:0,elements:[r]}):r.textContent&&n.set(r.textContent,{usage:0,elements:[r]})}function mu(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var hu=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,o,i,r={}){this.doc=n,this.appId=o,this.nonce=i,uS(n,o,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,o){for(let i of n)this.addUsage(i,this.inline,zh);o?.forEach(i=>this.addUsage(i,this.external,mu))}removeStyles(n,o){for(let i of n)this.removeUsage(i,this.inline);o?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,o,i){let r=o.get(n);r?r.usage++:o.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,o){let i=o.get(n);i&&(i.usage--,i.usage<=0&&($h(i.elements),o.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])$h(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[o,{elements:i}]of this.inline)i.push(this.addElement(n,zh(o,this.doc)));for(let[o,{elements:i}]of this.external)i.push(this.addElement(n,mu(o,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,o){return this.nonce&&o.setAttribute("nonce",this.nonce),n.appendChild(o)}static \u0275fac=function(o){return new(o||t)(ye(Nt),ye(As),ye(ks,8),ye(Fi))};static \u0275prov=fe({token:t,factory:t.\u0275fac})}return t})(),fu={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},vu=/%COMP%/g;var Yh="%COMP%",pS=`_nghost-${Yh}`,fS=`_ngcontent-${Yh}`,mS=!0,gS=new ge("",{factory:()=>mS});function hS(t){return fS.replace(vu,t)}function vS(t){return pS.replace(vu,t)}function Jh(t,e){return e.map(n=>n.replace(vu,t))}var _u=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,o,i,r,s,l,d=null,u=null){this.eventManager=n,this.sharedStylesHost=o,this.appId=i,this.removeStylesOnCompDestroy=r,this.doc=s,this.ngZone=l,this.nonce=d,this.tracingService=u,this.platformIsServer=!1,this.defaultRenderer=new ji(n,s,l,this.platformIsServer,this.tracingService)}createRenderer(n,o){if(!n||!o)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,o);return i instanceof js?i.applyToHost(n):i instanceof Zi&&i.applyStyles(),i}getOrCreateRenderer(n,o){let i=this.rendererByCompId,r=i.get(o.id);if(!r){let s=this.doc,l=this.ngZone,d=this.eventManager,u=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,v=this.platformIsServer,_=this.tracingService;switch(o.encapsulation){case Ot.Emulated:r=new js(d,u,o,this.appId,f,s,l,v,_);break;case Ot.ShadowDom:return new Js(d,n,o,s,l,this.nonce,v,_,u);case Ot.ExperimentalIsolatedShadowDom:return new Js(d,n,o,s,l,this.nonce,v,_);default:r=new Zi(d,u,o,f,s,l,v,_);break}i.set(o.id,r)}return r}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(o){return new(o||t)(ye(gu),ye(hu),ye(As),ye(gS),ye(Nt),ye(pt),ye(ks),ye(lo,8))};static \u0275prov=fe({token:t,factory:t.\u0275fac})}return t})(),ji=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,o,i,r){this.eventManager=e,this.doc=n,this.ngZone=o,this.platformIsServer=i,this.tracingService=r}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(fu[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Wh(e)?e.content:e).appendChild(n)}insertBefore(e,n,o){e&&(Wh(e)?e.content:e).insertBefore(n,o)}removeChild(e,n){n.remove()}selectRootElement(e,n){let o=typeof e=="string"?this.doc.querySelector(e):e;if(!o)throw new ie(-5104,!1);return n||(o.textContent=""),o}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,o,i){if(i){n=i+":"+n;let r=fu[i];r?e.setAttributeNS(r,n,o):e.setAttribute(n,o)}else e.setAttribute(n,o)}removeAttribute(e,n,o){if(o){let i=fu[o];i?e.removeAttributeNS(i,n):e.removeAttribute(`${o}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,o,i){i&(un.DashCase|un.Important)?e.style.setProperty(n,o,i&un.Important?"important":""):e.style[n]=o}removeStyle(e,n,o){o&un.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,o){e!=null&&(e[n]=o)}setValue(e,n){e.nodeValue=n}listen(e,n,o,i){if(typeof e=="string"&&(e=hn().getGlobalEventTarget(this.doc,e),!e))throw new ie(5102,!1);let r=this.decoratePreventDefault(o);return this.tracingService?.wrapEventListener&&(r=this.tracingService.wrapEventListener(e,n,r)),this.eventManager.addEventListener(e,n,r,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function Wh(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Js=class extends ji{hostEl;sharedStylesHost;shadowRoot;constructor(e,n,o,i,r,s,l,d,u){super(e,i,r,l,d),this.hostEl=n,this.sharedStylesHost=u,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let f=o.styles;f=Jh(o.id,f);for(let _ of f){let S=document.createElement("style");s&&S.setAttribute("nonce",s),S.textContent=_,this.shadowRoot.appendChild(S)}let v=o.getExternalStyles?.();if(v)for(let _ of v){let S=mu(_,i);s&&S.setAttribute("nonce",s),this.shadowRoot.appendChild(S)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,o){return super.insertBefore(this.nodeOrShadowRoot(e),n,o)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},Zi=class extends ji{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,o,i,r,s,l,d,u){super(e,r,s,l,d),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let f=o.styles;this.styles=u?Jh(u,f):f,this.styleUrls=o.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&so.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},js=class extends Zi{contentAttr;hostAttr;constructor(e,n,o,i,r,s,l,d,u){let f=i+"-"+o.id;super(e,n,o,r,s,l,d,u,f),this.contentAttr=hS(f),this.hostAttr=vS(f)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let o=super.createElement(e,n);return super.setAttribute(o,this.contentAttr,""),o}};var Ks=class t extends Wi{supportsDOMEvents=!0;static makeCurrent(){du(new t)}onAndCancel(e,n,o,i){return e.addEventListener(n,o,i),()=>{e.removeEventListener(n,o,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=_S();return n==null?null:yS(n)}resetBaseElement(){Ki=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return uu(document.cookie,e)}},Ki=null;function _S(){return Ki=Ki||document.head.querySelector("base"),Ki?Ki.getAttribute("href"):null}function yS(t){return new URL(t,document.baseURI).pathname}var CS=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(o){return new(o||t)};static \u0275prov=fe({token:t,factory:t.\u0275fac})}return t})(),jh=["alt","control","meta","shift"],bS={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},SS={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},Zh=(()=>{class t extends Ji{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,o,i,r){let s=t.parseEventName(o),l=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>hn().onAndCancel(n,s.domEventName,l,r))}static parseEventName(n){let o=n.toLowerCase().split("."),i=o.shift();if(o.length===0||!(i==="keydown"||i==="keyup"))return null;let r=t._normalizeKey(o.pop()),s="",l=o.indexOf("code");if(l>-1&&(o.splice(l,1),s="code."),jh.forEach(u=>{let f=o.indexOf(u);f>-1&&(o.splice(f,1),s+=u+".")}),s+=r,o.length!=0||r.length===0)return null;let d={};return d.domEventName=i,d.fullKey=s,d}static matchEventFullKeyCode(n,o){let i=bS[n.key]||n.key,r="";return o.indexOf("code.")>-1&&(i=n.code,r="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),jh.forEach(s=>{if(s!==i){let l=SS[s];l(n)&&(r+=s+".")}}),r+=i,r===o)}static eventCallback(n,o,i){return r=>{t.matchEventFullKeyCode(r,n)&&i.runGuarded(()=>o(r))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(o){return new(o||t)(ye(Nt))};static \u0275prov=fe({token:t,factory:t.\u0275fac})}return t})();function yu(t,e,n){let o=B({rootComponent:t,platformRef:n?.platformRef},ES(e));return Hh(o)}function ES(t){return{appProviders:[...TS,...t?.providers??[]],platformProviders:IS}}function MS(){Ks.makeCurrent()}function wS(){return new vt}function xS(){return Md(document),document}var IS=[{provide:Fi,useValue:qh},{provide:Ns,useValue:MS,multi:!0},{provide:Nt,useFactory:xS}];var TS=[{provide:gi,useValue:"root"},{provide:vt,useFactory:wS},{provide:Zs,useClass:Ys,multi:!0},{provide:Zs,useClass:Zh,multi:!0},_u,hu,gu,{provide:pn,useExisting:_u},{provide:Yi,useClass:CS},[]];var Cu=(()=>{class t{static \u0275fac=function(o){return new(o||t)};static \u0275prov=fe({token:t,factory:function(o){let i=null;return o?i=new(o||t):i=ye(PS),i},providedIn:"root"})}return t})(),PS=(()=>{class t extends Cu{_doc;constructor(n){super(),this._doc=n}sanitize(n,o){if(o==null)return null;switch(n){case Vt.NONE:return o;case Vt.HTML:return fn(o,"HTML")?nn(o):Ad(this._doc,String(o)).toString();case Vt.STYLE:return fn(o,"Style")?nn(o):o;case Vt.SCRIPT:if(fn(o,"Script"))return nn(o);throw new ie(5200,!1);case Vt.URL:return fn(o,"URL")?nn(o):Vi(String(o));case Vt.RESOURCE_URL:if(fn(o,"ResourceURL"))return nn(o);throw new ie(5201,!1);default:throw new ie(5202,!1)}}bypassSecurityTrustHtml(n){return xd(n)}bypassSecurityTrustStyle(n){return Id(n)}bypassSecurityTrustScript(n){return Td(n)}bypassSecurityTrustUrl(n){return Pd(n)}bypassSecurityTrustResourceUrl(n){return Dd(n)}static \u0275fac=function(o){return new(o||t)(ye(Nt))};static \u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Kh=[{id:"school-1",name:"Al-Bayan Model School",location:{lat:24.7136,lon:46.6753},pickupZones:[{name:"A",spots:10},{name:"B",spots:5}]},{id:"school-2",name:"Dar Al-Fikr Schools"}],Qh=[{id:"user-super-admin",name:"Super Admin",email:"super@school.com",role:"super-admin",password:"password"},{id:"user-admin-1",name:"Nora Al-Saud",email:"admin@school.com",role:"school-admin",schoolId:"school-1",password:"password"},{id:"user-supervisor-1",name:"Fatima Al-Mutairi",email:"supervisor@school.com",role:"school-supervisor",schoolId:"school-1",password:"password"},{id:"user-teacher-1a",name:"Ahmad Al-Ghamdi",email:"teacher@school.com",role:"teacher",schoolId:"school-1",classId:"class-1a",password:"password"},{id:"user-teacher-1b",name:"Layla Al-Johani",email:"teacher2@school.com",role:"teacher",schoolId:"school-1",classId:"class-1b",password:"password"},{id:"user-guard-1",name:"Mohammed Salah",email:"guard@school.com",role:"guard",schoolId:"school-1",password:"password"},{id:"user-admin-2",name:"Khalid Al-Faisal",email:"admin2@school.com",role:"school-admin",schoolId:"school-2",password:"password"},{id:"user-parent-1",name:"Abdullah Al-Qahtani",email:"parent@school.com",phone:"0501234567",role:"parent",schoolId:"school-1",password:"password"},{id:"user-parent-2",name:"Sara Al-Otaibi",email:"parent2@school.com",phone:"0557654321",role:"parent",schoolId:"school-1",password:"password"},{id:"user-driver-1",name:"Ali Khan",email:"driver@school.com",phone:"0512345678",role:"driver",schoolId:"school-1",password:"password",employerId:"user-parent-1"}],Xh=[{id:"class-1a",name:"Grade 1 - Section A",schoolId:"school-1"},{id:"class-1b",name:"Grade 1 - Section B",schoolId:"school-1"},{id:"class-2a",name:"Grade 2 - Section A",schoolId:"school-1"},{id:"class-dar",name:"Grade 3",schoolId:"school-2"}],e0=[{id:"student-1",name:"Faisal Abdullah Al-Qahtani",grade:"Grade 1",class:"Grade 1 - Section A",classId:"class-1a",schoolId:"school-1",parentId:"user-parent-1",parentPhone:"0501234567",photoUrl:"https://picsum.photos/seed/Faisal/50/50",busId:"bus-1"},{id:"student-2",name:"Joud Abdullah Al-Qahtani",grade:"Grade 2",class:"Grade 2 - Section A",classId:"class-2a",schoolId:"school-1",parentId:"user-parent-1",parentPhone:"0501234567",photoUrl:"https://picsum.photos/seed/Joud/50/50"},{id:"student-3",name:"Saud Al-Otaibi",grade:"Grade 1",class:"Grade 1 - Section B",classId:"class-1b",schoolId:"school-1",parentId:"user-parent-2",parentPhone:"0557654321",photoUrl:"https://picsum.photos/seed/Saud/50/50",busId:"bus-1"}],t0=[{id:"ap-1",parentId:"user-parent-1",name:"Abdullah Al-Qahtani",relation:"Father",phone:"0501234567",idNumber:"1012345678",photoUrl:"https://picsum.photos/seed/Abdullah/50/50"},{id:"ap-2",parentId:"user-parent-1",name:"Hessa Al-Qahtani",relation:"Mother",phone:"0508765432",idNumber:"2012345678",photoUrl:"https://picsum.photos/seed/Hessa/50/50"},{id:"ap-3",parentId:"user-parent-2",name:"Sara Al-Otaibi",relation:"Mother",phone:"0557654321",idNumber:"2098765432",photoUrl:"https://picsum.photos/seed/Sara/50/50"}],n0=[{id:"bus-1",schoolId:"school-1",busNumber:"Bus 01 - North Route",driverName:"Sameer Ahmed",studentIds:["student-1","student-3"],liveLocation:{lat:24.7336,lon:46.6953},status:"en_route"},{id:"bus-2",schoolId:"school-1",busNumber:"Bus 02 - South Route",driverName:"Yusuf Islam",studentIds:[],liveLocation:{lat:24.6936,lon:46.6553},status:"stationary"}],o0=[{id:"activity-1",schoolId:"school-1",name:"Soccer Club",supervisorId:"user-teacher-1a",studentIds:["student-1","student-2"],startTime:"15:00",endTime:"16:00",location:"Main Field"},{id:"activity-2",schoolId:"school-1",name:"Art Club",supervisorId:"user-teacher-1b",studentIds:["student-3"],startTime:"15:30",endTime:"16:30",location:"Art Room"}],i0=[],r0=[];var Ee=class t{constructor(){this.injector=w(it);this._authService=null;this._schools=R([]);this._classes=R([]);this._students=R([]);this._authorizedPersons=R([]);this._users=R([]);this._buses=R([]);this._activities=R([]);this._carpoolGroups=R([]);this._carpoolMembers=R([]);this.schools=this._schools.asReadonly();this.classes=this._classes.asReadonly();this.students=this._students.asReadonly();this.authorizedPersons=this._authorizedPersons.asReadonly();this.users=this._users.asReadonly();this.buses=this._buses.asReadonly();this.activities=this._activities.asReadonly();this.loadInitialData()}get authService(){return this._authService||(this._authService=this.injector.get(de)),this._authService}loadInitialData(){this._schools.set(Kh),this._classes.set(Xh),this._students.set(e0),this._authorizedPersons.set(t0),this._users.set(Qh),this._buses.set(n0),this._activities.set(o0),this._carpoolGroups.set(i0),this._carpoolMembers.set(r0)}getSchoolById(e){return this._schools().find(n=>n.id===e)}getClassesBySchool(e){return this._classes().filter(n=>n.schoolId===e)}getClassById(e){return this._classes().find(n=>n.id===e)}getStudentsByParentId(e){return this._students().filter(n=>n.parentId===e)}getStudentsBySchool(e){return this._students().filter(n=>n.schoolId===e)}getAuthorizedPersonsByParentId(e){return this._authorizedPersons().filter(n=>n.parentId===e)}getAdminForSchool(e){return this._users().find(n=>n.schoolId===e&&n.role==="school-admin")}getStaffForSchool(e){return this._users().filter(n=>n.schoolId===e&&(n.role==="teacher"||n.role==="school-supervisor"||n.role==="guard"))}getBusById(e){return this._buses().find(n=>n.id===e)}getBusesBySchool(e){return this._buses().filter(n=>n.schoolId===e)}getActivitiesBySchool(e){return this._activities().filter(n=>n.schoolId===e)}getCarpoolGroupsForUser(e){let n=new Set(this._carpoolMembers().filter(o=>o.userId===e).map(o=>o.groupId));return this._carpoolGroups().filter(o=>n.has(o.id))}getMembersForGroup(e){let n=new Set(this._carpoolMembers().filter(o=>o.groupId===e).map(o=>o.userId));return this._users().filter(o=>n.has(o.id))}getParentsForSchool(e){return this._users().filter(n=>n.schoolId===e&&n.role==="parent")}async addSchool(e,n,o,i){let r=crypto.randomUUID(),s={id:r,name:e};this._schools.update(d=>[...d,s]);let l={id:crypto.randomUUID(),name:n,email:o,role:"school-admin",schoolId:r,password:i};this._users.update(d=>[...d,l])}async addClass(e,n){let o={id:crypto.randomUUID(),name:e,schoolId:n};this._classes.update(i=>[...i,o])}async addStudent(e){let n=z(B({},e),{id:crypto.randomUUID()});this._students.update(o=>[...o,n])}async addAuthorizedPerson(e){let n=z(B({},e),{id:crypto.randomUUID(),photoUrl:"https://picsum.photos/seed/default/50/50"});this._authorizedPersons.update(o=>[...o,n])}async addUser(e){let n=z(B({},e),{id:crypto.randomUUID()});this._users.update(o=>[...o,n])}async addBus(e){let n=z(B({},e),{id:crypto.randomUUID(),studentIds:[],status:"stationary"});this._buses.update(o=>[...o,n])}async addActivity(e){let n=z(B({},e),{id:crypto.randomUUID(),studentIds:[]});this._activities.update(o=>[...o,n])}async createCarpoolGroup(e,n,o){let i={id:crypto.randomUUID(),name:e,schoolId:n,adminId:o};this._carpoolGroups.update(r=>[...r,i]),this.addMemberToGroup(i.id,o)}async addMemberToGroup(e,n){let o={groupId:e,userId:n};this._carpoolMembers.update(i=>[...i,o])}async updateSchoolAndAdmin(e,n,o,i,r,s){this._schools.update(l=>l.map(d=>d.id===e?z(B({},d),{name:n}):d)),this._users.update(l=>l.map(d=>{if(d.id===o){let u=z(B({},d),{name:i,email:r});return s&&(u.password=s),u}return d}))}async updateSchoolLocation(e,n,o){this._schools.update(i=>i.map(r=>r.id===e?z(B({},r),{location:{lat:n,lon:o}}):r)),this.authService.currentUserSchool()?.id===e&&this.authService.currentUserSchool.update(i=>z(B({},i),{location:{lat:n,lon:o}}))}async updateUser(e){this._users.update(n=>n.map(o=>o.id===e.id?e:o)),this.authService.currentUser()?.id===e.id&&this.authService.currentUser.set(e)}async updateStudent(e){this._students.update(n=>n.map(o=>o.id===e.id?e:o))}async updateAuthorizedPerson(e){this._authorizedPersons.update(n=>n.map(o=>o.id===e.id?e:o))}async updateBus(e){this._buses.update(n=>n.map(o=>o.id===e.id?e:o))}async updateBusAssignments(e,n){this._students.update(o=>o.map(i=>i.busId===e&&!n.includes(i.id)?z(B({},i),{busId:void 0}):n.includes(i.id)?z(B({},i),{busId:e}):i)),this._buses.update(o=>o.map(i=>i.id===e?z(B({},i),{studentIds:n}):i))}async updateActivity(e){this._activities.update(n=>n.map(o=>o.id===e.id?e:o))}async updateActivityAssignments(e,n){this._activities.update(o=>o.map(i=>i.id===e?z(B({},i),{studentIds:n}):i))}async updateSchoolPickupZones(e,n){this._schools.update(o=>o.map(i=>i.id===e?z(B({},i),{pickupZones:n}):i)),this.authService.currentUserSchool()?.id===e&&this.authService.currentUserSchool.update(o=>z(B({},o),{pickupZones:n}))}async deleteSchoolAndAdmin(e){this._schools.update(n=>n.filter(o=>o.id!==e)),this._users.update(n=>n.filter(o=>o.schoolId!==e)),this._classes.update(n=>n.filter(o=>o.schoolId!==e)),this._students.update(n=>n.filter(o=>o.schoolId!==e))}async deleteUserAndAssociatedData(e){let n=this._users().find(o=>o.id===e);n&&(n.role==="school-admin"&&n.schoolId?await this.deleteSchoolAndAdmin(n.schoolId):this._users.update(o=>o.filter(i=>i.id!==e)))}async deleteAuthorizedPerson(e){this._authorizedPersons.update(n=>n.filter(o=>o.id!==e))}async deleteClass(e){this._classes.update(n=>n.filter(o=>o.id!==e)),this._students.update(n=>n.map(o=>o.classId===e?z(B({},o),{classId:"",class:"Unassigned"}):o)),this._users.update(n=>n.map(o=>o.classId===e?z(B({},o),{classId:void 0}):o))}async deleteStudent(e){this._students.update(n=>n.filter(o=>o.id!==e))}async deleteBus(e){this._students.update(n=>n.map(o=>o.busId===e?z(B({},o),{busId:void 0}):o)),this._buses.update(n=>n.filter(o=>o.id!==e))}async deleteActivity(e){this._activities.update(n=>n.filter(o=>o.id!==e))}async inviteDriver(e,n){let o=this._users().find(d=>d.id===e);if(!o||!o.schoolId||this._users().find(d=>d.phone===n))return null;let r=`Driver (${n})`,s={id:crypto.randomUUID(),name:r,email:`${n}@school-pickup.app`,phone:n,role:"driver",schoolId:o.schoolId,password:"password",employerId:e};this._users.update(d=>[...d,s]);let l={parentId:e,name:r,relation:"Driver",phone:n,idNumber:"N/A"};return await this.addAuthorizedPerson(l),s}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"})}};var ue=class t{constructor(){this.toasts=R([]);this.nextId=0}show(e,n,o=3e3){let i=this.nextId++;this.toasts.update(r=>[...r,{id:i,message:e,type:n,duration:o}]),o>0&&setTimeout(()=>this.remove(i),o)}remove(e){this.toasts.update(n=>n.filter(o=>o.id!==e))}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"})}};var X=class t{constructor(){this.language=R("ar");this.translations={en:{"app.title":"School Pick-up","login.welcomeTitle":"Welcome!","login.tagline":"","splash.title":"Student Pickup System","splash.subtitle":"Seamless & Secure Pickup Experience","splash.welcomeMessage":"Welcome to the Student Pickup Management System","login.emailPlaceholder":"Email","login.emailOrPhone":"Email or Phone Number","login.passwordPlaceholder":"Password","login.loginButton":"Login","login.errors.invalidCredentials":"Invalid identifier or password.","login.toast.success":"Logged in as {{role}}!",logoutButton:"Logout",languageToggle:"\u0627\u0644\u0639\u0631\u0628\u064A\u0629","header.welcome":"Welcome","common.or":"OR","common.notes":"Notes","common.phone":"Phone","common.email":"Email","common.password":"Password","common.confirmPassword":"Confirm Password","common.school":"School","common.idNumber":"ID Number","common.cancel":"Cancel","common.edit":"Edit","common.delete":"Delete","common.student":"Student","common.pickupPerson":"Pickup Person","common.distance":"Distance","common.status":"Status","common.saveChanges":"Save Changes","common.processing":"Processing...","common.actions":"Actions","common.selectSchool":"Select School","common.optionalLeaveBlank":"optional, leave blank to keep unchanged","common.errors.passwordsDoNotMatch":"Passwords do not match.","common.zone":"Zone","common.spot":"Spot","roleSelection.title":"Role Confirmation","roleSelection.welcome":"Welcome, {{name}}!","roleSelection.yourRoleIs":"Your assigned role is","roleSelection.info":"You will be directed to the dashboard corresponding to your role.","roleSelection.proceedButton":"Proceed to Dashboard","roles.parent.title":"Parent","roles.parent.description":"Manage your children's pickup schedules and authorized persons.","roles.guard.title":"Guard","roles.guard.description":"Verify pickup codes and manage the flow of vehicles at the school gate.","roles.teacher.title":"Teacher","roles.teacher.description":"Monitor pickup requests for your class and prepare students for departure.","roles.school-supervisor.title":"School Supervisor","roles.school-supervisor.description":"Oversee all pickup activities across the entire school.","roles.school-admin.title":"School Admin","roles.school-admin.description":"Manage staff, students, classes, and school-wide settings.","roles.super-admin.title":"Super Admin","roles.super-admin.description":"Manage all schools and user accounts across the entire system.","roles.driver.title":"Driver","roles.driver.description":"View assigned students and manage pickup requests on behalf of the parent.","parent.portal.title":"Parent Portal","parent.tabs.pickup":"Student Pick-up","parent.tabs.pickup.description":"Notify the school and get a pickup code for your children.","parent.tabs.absence":"Report Absence","parent.tabs.absence.description":"Inform the school if your child will be absent.","parent.tabs.management":"Authorized Persons","parent.tabs.management.description":"Manage who is allowed to pick up your children.","parent.tabs.bus":"Bus Tracking","parent.tabs.bus.description":"View the live location and status of the school bus.","parent.tabs.activities":"Activities","parent.tabs.activities.description":"Check on after-school activities and schedules.","parent.tabs.carpooling":"Carpooling","parent.tabs.carpooling.description":"Organize and manage carpool groups with other parents.","parent.pickup.title":"Request Pick-up","parent.pickup.selectStudents":"Select Students","parent.pickup.selectPerson":"Select Authorized Person","parent.pickup.carInfo":"Car Information","parent.pickup.carColor":"Car Color","parent.pickup.plateNumber":"Plate Number","parent.pickup.notes":"Notes for Staff (Optional)","parent.pickup.submit":"Request Pick-up","parent.pickup.code":"Your Pick-up Code:","parent.pickup.eta":"Estimated Time of Arrival: {{minutes}} min","parent.pickup.message":"Message for Staff:","parent.pickup.share":"Share Request","parent.pickup.copy":"Copy Details","parent.errors.apiKeyMissing":"GenAI API key is missing. AI functionality will be disabled.","parent.errors.noSchoolLocation":"School location not set. ETA cannot be calculated.","parent.errors.notificationFailed":"Failed to generate pickup message. Please try again.","parent.errors.geoNotSupported":"Geolocation is not supported by your browser.","parent.errors.geoPermissionDenied":"Geolocation permission denied. Cannot calculate distance.","parent.errors.geoUnavailable":"Location information is unavailable.","parent.errors.geoTimeout":"The request to get user location timed out.","parent.errors.geoUnknown":"An unknown error occurred while getting location.","parent.geofence.message":"You must be within {{distance}}m of the school to check in. You are currently ~{{currentDistance}}m away.","parent.toast.spotReleased":"You exceeded the time limit to reach the spot and have been returned to the virtual queue.","parent.share.title":"Pickup Request Details","parent.share.student":"Student(s)","parent.share.person":"Authorized Person","parent.share.vehicle":"Vehicle","parent.share.code":"Code","parent.share.eta":"ETA","parent.toast.shareNotSupported":"Web Share API not supported. Details copied to clipboard.","parent.toast.copied":"Pickup details copied to clipboard!","parent.toast.copyFailed":"Failed to copy pickup details.","parent.absence.title":"Report Student Absence","parent.absence.selectStudent":"Select Student","parent.absence.date":"Date of Absence","parent.absence.reason":"Reason for Absence","parent.absence.reasonPlaceholder":"e.g., Sickness, Family trip","parent.absence.submit":"Submit Absence Report","parent.toast.absenceReported":"Absence reported successfully!","parent.management.title":"Manage Authorized Persons","parent.management.description":"Add family members or drivers who are authorized to pick up your children.","parent.management.addPerson":"Add New Authorized Person","parent.management.name":"Name","parent.management.relation":"Relation (e.g., Mother, Uncle)","parent.management.phone":"Phone (Optional)","parent.management.idNumber":"ID Number","parent.management.addTitle":"Add New Person","parent.management.editTitle":"Edit Person","parent.management.addButton":"Add Person","parent.management.existing":"Existing Authorized Persons","parent.management.noPersons":"No authorized persons found. Add one above.","parent.management.save":"Save Person","parent.management.cancel":"Cancel","parent.management.edit":"Edit","parent.management.delete":"Delete","parent.management.deleteConfirmation":"Are you sure you want to delete this authorized person?","parent.management.toast.personAdded":"Authorized person added successfully!","parent.management.toast.personUpdated":"Authorized person updated successfully!","parent.management.toast.personDeleted":"Authorized person deleted successfully!","parent.management.details":"Person Details","parent.management.inviteTitle":"Invite a Driver","parent.management.inviteDriverDescription":"Enter the driver's phone number to invite them. They will be added as an authorized person.","parent.management.inviteButton":"Invite Driver","parent.management.toast.inviteSent":"Driver invite sent to {{phone}}!","parent.buttons.notify":"Notify School","parent.buttons.share":"Share","parent.buttons.copy":"Copy","parent.buttons.reportAbsence":"Report Absence","parent.pass.title":"Digital Pick-up Pass","parent.pass.instruction":"Show this to staff for verification.","parent.status.pickupCode":"Pickup Code","parent.status.eta":"ETA","parent.status.liveEta":"Live ETA","parent.status.distance":"Distance","parent.status.note":"Note","parent.status.currentStatus":"Current Status","parent.steps.selectStudent":"1. Select Student(s)","parent.steps.selectPerson":"2. Select Authorized Person","parent.steps.vehicleInfo":"3. Vehicle Information","parent.placeholders.carColor":"Car Color","parent.placeholders.plateNumber":"Plate Number","parent.placeholders.notes":"Notes for Staff (Optional)","parent.placeholders.absenceReason":"e.g., Sickness, Family trip","parent.buttons.arrived":"I Have Arrived","parent.spot.assignedTitle":"Proceed to Your Spot","parent.spot.assignedMessageNew":"Please proceed to the spot shown below.","parent.spot.standByTitle":"Please Stand By","parent.spot.standByMessage":"All pickup spots are currently occupied. You will be assigned a spot as soon as one becomes available.","parent.preflight.title":"Confirm Pickup Request","parent.preflight.calculating":"Calculating distance and ETA...","parent.preflight.locationError":"Could not calculate ETA. Proceed anyway?","parent.preflight.confirmMessage":"Your ETA is {{eta}} minutes ({{distance}} km). Send notification to school?","parent.preflight.confirmButton":"Yes, Send Notification","busTracking.title":"Bus Tracking","busTracking.noBuses":"None of your children are currently assigned to a school bus.","bus.status.stationary":"Stationary","bus.status.en_route":"En Route","bus.status.stopped":"Stopped","parent.activities.title":"After-School Activities","parent.activities.supervisor":"Supervisor","parent.activities.time":"Time","parent.activities.location":"Location","parent.activities.noActivities":"Your children are not enrolled in any after-school activities for today.","carpooling.title":"Carpooling Groups","carpooling.description":"Organize carpools with other parents to share pickup duties.","carpooling.createGroup.button":"Create a New Carpool Group","carpooling.createGroup.title":"Create New Group","carpooling.groupName.placeholder":'e.g., "Grade 3 Soccer Team"',"carpooling.create.button":"Create Group","carpooling.myGroups":"My Groups","carpooling.groupAdmin":"Admin","carpooling.members":"Members","carpooling.inviteMember.button":"Invite Member","carpooling.noGroups":"You are not part of any carpool groups yet.","carpooling.toast.groupCreated":"Carpool group created successfully!","carpooling.inviteMember.title":"Invite Member to","carpooling.inviteMember.select":"Select a parent to invite","carpooling.inviteMember.noParents":"No other parents available to invite.","carpooling.invite.button":"Send Invite","carpooling.toast.memberInvited":"Member invited successfully!","driverDashboard.title":"Driver Dashboard","driverDashboard.welcome":"Select your assigned students and notify the school.","driverDashboard.assignedStudents":"Assigned Students","driverDashboard.startPickup":"Start Pickup","driverDashboard.pickupInProgress":"Pickup in Progress","driverDashboard.noAssignments":"You are not currently assigned to pick up any students.","guard.title":"Guard View","guard.enterCode":"Enter Pick-up Code","guard.verify":"Verify Code","guard.pickupDetails":"Pick-up Details","guard.student":"Student","guard.authorizedPerson":"Authorized Person","guard.relation":"Relation","guard.carInfo":"Car","guard.status":"Status","guard.confirmPickup":"Confirm Pick-up","guard.errors.invalidCode":"Invalid or expired pick-up code.","guard.errors.noReadyRequests":'No "ready for pickup" requests to simulate.',"guard.errors.scannerFailed":"Failed to start QR scanner.","guard.errors.permissionDenied":"Camera permission denied. Please allow camera access in your browser settings.","guard.errors.noCamera":"No camera found on this device.","guard.scanQR":"Scan QR Code","guard.stopScan":"Stop Scanner","guard.simulateScan":"Simulate Scan (Demo)","guard.success":"Verification Successful!","guard.studentInfo":"Student Info","guard.vehicleInfo":"Vehicle Info","guard.pickupLocation":"Pickup Location","guard.confirm":"Confirm Pick-up","teacher.portal.title":"My Class","teacher.portal.activeRequests":"Active Requests","teacher.portal.pickupBy":"Pickup By","teacher.portal.markReady":"send the student to the designated place","teacher.portal.ready":"Ready for Pickup","teacher.portal.completed":"Completed","teacher.portal.noRequests":"No active pickup requests for your class.","teacher.title":"Teacher Dashboard","teacher.buttons.acknowledge":"Acknowledge","teacher.myClass":"My Class: {{className}}","teacher.pendingRequests":"Pending Pick-up Requests","teacher.studentName":"Student Name","teacher.authorizedPerson":"Authorized Person","teacher.carInfo":"Car Info","teacher.notes":"Notes","teacher.markReady":"send the student to the designated place","teacher.reports":"Absence Reports","teacher.report.student":"Student","teacher.report.date":"Date","teacher.report.reason":"Reason","schoolSupervisor.portal.title":"School Supervisor","schoolSupervisor.portal.monitor":"Monitor and manage all active pickups at your school.","schoolSupervisor.portal.activeRequests":"Active Requests","schoolSupervisor.portal.noRequests":"No active pickup requests at your school.","schoolSupervisor.title":"School Supervisor Dashboard","schoolSupervisor.activePickups":"Active Pick-up Requests (All Classes)","schoolSupervisor.liveMonitor.title":"Live Pickup Monitor","schoolSupervisor.liveMonitor.zone":"Zone","schoolSupervisor.liveMonitor.occupiedBy":"by","schoolSupervisor.liveMonitor.free":"Free","schoolSupervisor.insights.title":"Smart Insights","school-admin.title":"School Admin Dashboard","school-admin.tabs.monitor":"Monitor","school-admin.tabs.staff":"Staff","school-admin.tabs.students":"Students","school-admin.tabs.classes":"Classes","school-admin.tabs.settings":"Settings","school-admin.tabs.analytics":"Analytics","school-admin.tabs.buses":"Buses","school-admin.tabs.activities":"Activities","school-admin.tabs.broadcast":"Announcements","school-admin.portal.title":"School Pick-up Monitor","school-admin.portal.monitor":"Overview of active student pickup requests.","school-admin.portal.activeRequests":"Active Requests","school-admin.portal.resetDay":"Reset Day","school-admin.portal.resetConfirmation":"Are you sure you want to clear all active pickup requests for today? This cannot be undone.","school-admin.portal.noRequests":"No active pickup requests currently.","school-admin.toast.dayReset":"All active requests have been reset.","school-admin.staff.title":"Staff Management","school-admin.staff.add":"Add New Staff Member","school-admin.staff.addTitle":"Add New Staff Member","school-admin.staff.addButton":"Add Staff","school-admin.staff.editTitle":"Edit Staff Member","school-admin.staff.existing":"Existing Staff Members","school-admin.staff.name":"Name","school-admin.staff.phone":"Phone","school-admin.staff.role":"Role","school-admin.staff.selectRole":"Select Role","school-admin.staff.class":"Assigned Class (for Teachers)","school-admin.staff.selectClass":"Select Class","school-admin.staff.edit":"Edit","school-admin.staff.save":"Save Staff","school-admin.staff.cancel":"Cancel","school-admin.staff.toast.staffAdded":"Staff member added successfully!","school-admin.staff.toast.staffUpdated":"Staff member updated successfully!","school-admin.staff.toast.staffDeleted":"Staff member deleted successfully.","school-admin.staff.deleteConfirmation":"Are you sure you want to delete this staff member?","school-admin.staff.noStaff":"No staff members found for your school.","school-admin.students.title":"Student Management","school-admin.students.add":"Add New Student","school-admin.students.addTitle":"Add New Student","school-admin.students.addButton":"Add Student","school-admin.students.editTitle":"Edit Student","school-admin.students.existing":"Existing Students","school-admin.students.name":"Name","school-admin.students.grade":"Grade","school-admin.students.class":"Class","school-admin.students.selectClass":"Select Class","school-admin.students.parentPhone":"Parent Phone","school-admin.students.sendInvite":"Send Invite","school-admin.students.edit":"Edit","school-admin.students.save":"Save Student","school-admin.students.cancel":"Cancel","school-admin.students.invite":"Send Invite","school-admin.students.toast.studentAdded":"Student added successfully!","school-admin.students.toast.studentUpdated":"Student updated successfully!","school-admin.students.toast.studentDeleted":"Student deleted successfully.","school-admin.students.deleteConfirmation":"Are you sure you want to delete this student?","school-admin.students.toast.inviteSent":"Parent invite sent to {{phone}}!","school-admin.students.noStudents":"No students found for your school.","school-admin.classes.title":"Class Management","school-admin.classes.add":"Add New Class","school-admin.classes.addTitle":"Add New Class","school-admin.classes.addButton":"Add Class","school-admin.classes.existing":"Existing Classes","school-admin.classes.name":"Class Name","school-admin.classes.toast.classAdded":"Class added successfully!","school-admin.classes.toast.classDeleted":"Class deleted successfully.","school-admin.classes.deleteConfirmation":"Are you sure you want to delete this class? This may unassign students and teachers.","school-admin.classes.noClasses":"No classes found for your school.","school-admin.settings.title":"School Settings","school-admin.settings.location":"School Location","school-admin.settings.searchPlaceholder":"Search for location...","school-admin.settings.markerInstruction":"Drag the marker to pinpoint the exact school location.","school-admin.settings.centerOnMe":"Center Map on My Location","school-admin.settings.saveLocation":"Save Location","school-admin.settings.centerButton":"Center on My Location","school-admin.settings.saveButton":"Save Location","school-admin.settings.toast.locationSet":"School location updated successfully!","school-admin.settings.mapsNotConfigured.title":"Maps Not Configured","school-admin.settings.mapsNotConfigured.description":"This map service does not require an API key.","school-admin.settings.pickupZones.title":"Pickup Zones","school-admin.settings.pickupZones.description":"Configure named zones and the number of pickup spots in each.","school-admin.settings.pickupZones.addZone":"Add New Zone","school-admin.settings.pickupZones.zoneName":"Zone Name (e.g., A, B, 1, 2)","school-admin.settings.pickupZones.spotCount":"# of Spots","school-admin.settings.pickupZones.addButton":"Add Zone","school-admin.settings.pickupZones.existing":"Existing Zones","school-admin.settings.pickupZones.deleteConfirmation":"Are you sure you want to delete this zone?","school-admin.settings.pickupZones.toast.zoneAdded":"Pickup zone added successfully!","school-admin.settings.pickupZones.toast.zoneDeleted":"Pickup zone deleted successfully!","school-admin.settings.pickupZones.noZones":"No pickup zones configured yet.","analytics.title":"Analytics Dashboard","analytics.description":"Insights into today's pickup activities.","analytics.totalPickups":"Total Pickups Today","analytics.avgTime":"Average Pickup Time","analytics.minutes":"min","analytics.peakHour":"Peak Hour","analytics.absencesToday":"Absences Today","analytics.pickupsByHour":"Pickups by Hour","analytics.noData":"Not enough data to display chart.","analytics.statusDistribution":"Active Request Statuses","busManagement.description":"Manage school buses, drivers, and student assignments.","busManagement.addTitle":"Add New Bus","busManagement.editTitle":"Edit Bus","busManagement.busNumber":"Bus Number / Route Name","busManagement.driverName":"Driver Name","busManagement.addButton":"Add Bus","busManagement.existing":"Existing Buses","busManagement.assignedStudents":"Assigned Students","busManagement.assignStudents":"Assign Students","busManagement.noBuses":"No buses found for your school.","busManagement.assignStudentsTo":"Assign students to","busManagement.availableStudents":"Available Students","activityManagement.description":"Manage after-school activities and student enrollments.","activityManagement.addTitle":"Add New Activity","activityManagement.editTitle":"Edit Activity","activityManagement.name":"Activity Name","activityManagement.supervisor":"Supervisor (Teacher)","activityManagement.selectSupervisor":"Select a teacher","activityManagement.startTime":"Start Time","activityManagement.endTime":"End Time","activityManagement.location":"Location","activityManagement.addButton":"Add Activity","activityManagement.existing":"Existing Activities","activityManagement.assignedStudents":"Enrolled Students","activityManagement.assignStudents":"Assign Students","activityManagement.noActivities":"No activities found for your school.","activityManagement.toast.added":"Activity added successfully!","activityManagement.toast.updated":"Activity updated successfully!","activityManagement.toast.deleted":"Activity deleted successfully.","activityManagement.deleteConfirmation":"Are you sure you want to delete this activity?","activityManagement.assignStudentsTo":"Assign students to","activityManagement.availableStudents":"Available Students","activityManagement.toast.assignmentsUpdated":"Student assignments updated successfully!","super-admin.title":"Super Admin Dashboard","super-admin.tabs.schools":"Schools","super-admin.tabs.accounts":"User Accounts","schoolManagement.title":"School Management","schoolManagement.existingSchools":"Existing Schools","schoolManagement.addSchool":"Add New School","schoolManagement.schoolName":"School Name","schoolManagement.adminName":"Admin Name","schoolManagement.adminEmail":"Admin Email","schoolManagement.saveSchool":"Save School","schoolManagement.cancel":"Cancel","schoolManagement.edit":"Edit","schoolManagement.delete":"Delete","schoolManagement.deleteConfirmationTitle":"Delete School","schoolManagement.deleteConfirmationText":"Are you sure you want to delete this school? This will also delete the associated admin account and all related data (classes, students, requests, etc.). This action cannot be undone.","schoolManagement.actions":"Actions","schoolManagement.addTitle":"Add New School","schoolManagement.editTitle":"Edit School","schoolManagement.createButton":"Create School","schoolManagement.toast.schoolAdded":"School and admin added successfully!","schoolManagement.toast.schoolUpdated":"School and admin updated successfully!","schoolManagement.toast.schoolDeleted":"School and admin deleted successfully!","schoolManagement.noSchools":"No schools found. Add a new school above.","super-admin.accountManagement.title":"User Account Management","super-admin.accountManagement.description":"Manage all user accounts across all schools.","super-admin.accountManagement.searchPlaceholder":"Search by Name, Email, or School","super-admin.accountManagement.name":"Name","super-admin.accountManagement.email":"Email","super-admin.accountManagement.role":"Role","super-admin.accountManagement.school":"School","super-admin.accountManagement.class":"Class","super-admin.accountManagement.edit":"Edit","super-admin.accountManagement.delete":"Delete","super-admin.accountManagement.save":"Save User","super-admin.accountManagement.cancel":"Cancel","super-admin.accountManagement.editTitle":"Edit User Account","super-admin.accountManagement.actions":"Actions","super-admin.accountManagement.deleteConfirmationTitle":"Delete User Account","super-admin.accountManagement.deleteConfirmationText":"Are you sure you want to delete this user account? If this user is a School Admin, all data associated with their school will also be deleted.","super-admin.accountManagement.deleteAdminWarning":"WARNING: Deleting a School Admin will delete their school and all associated data (classes, students, requests, etc.).","super-admin.accountManagement.toast.userUpdated":"User account updated successfully!","super-admin.accountManagement.toast.userDeleted":"User account deleted successfully!","super-admin.accountManagement.noUsersFound":"No user accounts found matching your search.","broadcast.title":"Send Announcement","broadcast.description":"Send a message to all parents in the school.","broadcast.placeholder":"Type your message here...","broadcast.sendButton":"Send Announcement","broadcast.toast.sent":"Announcement sent successfully!","statuses.pending":"Pending","statuses.acknowledged":"Acknowledged","statuses.arrived":"Arrived","statuses.ready":"Ready for Pick-up","statuses.completed":"Completed"},ar:{"app.title":"\u0646\u0638\u0627\u0645 \u0627\u0644\u0627\u0644\u062A\u0642\u0627\u0637 \u0627\u0644\u0645\u062F\u0631\u0633\u064A","login.welcomeTitle":"\u0645\u0631\u062D\u0628\u0627\u064B \u0628\u0643!","login.tagline":"","splash.title":"\u0646\u0638\u0627\u0645 \u0627\u0644\u062A\u0642\u0627\u0637 \u0627\u0644\u0637\u0644\u0627\u0628","splash.subtitle":"\u062A\u062C\u0631\u0628\u0629 \u0627\u0644\u062A\u0642\u0627\u0637 \u0633\u0644\u0633\u0629 \u0648\u0622\u0645\u0646\u0629","splash.welcomeMessage":"\u0627\u0647\u0644\u0627 \u0628\u0643\u0645 \u0641\u064A \u0646\u0638\u0627\u0645 \u0627\u062F\u0627\u0631\u0647 \u0627\u0633\u062A\u0644\u0627\u0645 \u0627\u0644\u0637\u0644\u0627\u0628","login.emailPlaceholder":"\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A","login.emailOrPhone":"\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A \u0623\u0648 \u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062A\u0641","login.passwordPlaceholder":"\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631","login.loginButton":"\u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u062E\u0648\u0644","login.errors.invalidCredentials":"\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A/\u0627\u0644\u0647\u0627\u062A\u0641 \u0623\u0648 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u063A\u064A\u0631 \u0635\u062D\u064A\u062D\u0629.","login.toast.success":"\u062A\u0645 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u062E\u0648\u0644 \u0628\u0635\u0641\u062A\u0643 {{role}}!",logoutButton:"\u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062E\u0631\u0648\u062C",languageToggle:"English","header.welcome":"\u0623\u0647\u0644\u0627\u064B \u0628\u0643","common.or":"\u0623\u0648","common.notes":"\u0645\u0644\u0627\u062D\u0638\u0627\u062A","common.phone":"\u0627\u0644\u0647\u0627\u062A\u0641","common.email":"\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A","common.password":"\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631","common.confirmPassword":"\u062A\u0623\u0643\u064A\u062F \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631","common.school":"\u0627\u0644\u0645\u062F\u0631\u0633\u0629","common.idNumber":"\u0631\u0642\u0645 \u0627\u0644\u0647\u0648\u064A\u0629","common.cancel":"\u0625\u0644\u063A\u0627\u0621","common.edit":"\u062A\u0639\u062F\u064A\u0644","common.delete":"\u062D\u0630\u0641","common.student":"\u0637\u0627\u0644\u0628","common.pickupPerson":"\u0627\u0644\u0634\u062E\u0635 \u0627\u0644\u0645\u0633\u062A\u0644\u0645","common.distance":"\u0627\u0644\u0645\u0633\u0627\u0641\u0629","common.status":"\u0627\u0644\u062D\u0627\u0644\u0629","common.saveChanges":"\u062D\u0641\u0638 \u0627\u0644\u062A\u063A\u064A\u064A\u0631\u0627\u062A","common.processing":"\u062C\u0627\u0631\u064A \u0627\u0644\u0645\u0639\u0627\u0644\u062C\u0629...","common.actions":"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A","common.selectSchool":"\u0627\u062E\u062A\u0631 \u0627\u0644\u0645\u062F\u0631\u0633\u0629","common.optionalLeaveBlank":"\u0627\u062E\u062A\u064A\u0627\u0631\u064A\u060C \u0627\u062A\u0631\u0643\u0647 \u0641\u0627\u0631\u063A\u0627\u064B \u0644\u0639\u062F\u0645 \u0627\u0644\u062A\u063A\u064A\u064A\u0631","common.errors.passwordsDoNotMatch":"\u0643\u0644\u0645\u062A\u0627 \u0627\u0644\u0645\u0631\u0648\u0631 \u063A\u064A\u0631 \u0645\u062A\u0637\u0627\u0628\u0642\u062A\u064A\u0646.","common.zone":"\u0645\u0646\u0637\u0642\u0629","common.spot":"\u0645\u0648\u0642\u0641","roleSelection.title":"\u062A\u0623\u0643\u064A\u062F \u0627\u0644\u062F\u0648\u0631","roleSelection.welcome":"\u0623\u0647\u0644\u0627\u064B \u0628\u0643\u060C {{name}}!","roleSelection.yourRoleIs":"\u062F\u0648\u0631\u0643 \u0627\u0644\u0645\u0633\u062C\u0644 \u0647\u0648","roleSelection.info":"\u0633\u064A\u062A\u0645 \u062A\u0648\u062C\u064A\u0647\u0643 \u0625\u0644\u0649 \u0644\u0648\u062D\u0629 \u0627\u0644\u062A\u062D\u0643\u0645 \u0627\u0644\u0645\u0646\u0627\u0633\u0628\u0629 \u0644\u062F\u0648\u0631\u0643.","roleSelection.proceedButton":"\u0627\u0644\u0627\u0646\u062A\u0642\u0627\u0644 \u0625\u0644\u0649 \u0644\u0648\u062D\u0629 \u0627\u0644\u062A\u062D\u0643\u0645","roles.parent.title":"\u0648\u0644\u064A \u0623\u0645\u0631","roles.parent.description":"\u0625\u062F\u0627\u0631\u0629 \u062C\u062F\u0627\u0648\u0644 \u0627\u0633\u062A\u0644\u0627\u0645 \u0623\u0628\u0646\u0627\u0626\u0643 \u0648\u0627\u0644\u0623\u0634\u062E\u0627\u0635 \u0627\u0644\u0645\u0635\u0631\u062D \u0644\u0647\u0645.","roles.guard.title":"\u062D\u0627\u0631\u0633 \u0623\u0645\u0646","roles.guard.description":"\u0627\u0644\u062A\u062D\u0642\u0642 \u0645\u0646 \u0631\u0645\u0648\u0632 \u0627\u0644\u0627\u0633\u062A\u0644\u0627\u0645 \u0648\u0625\u062F\u0627\u0631\u0629 \u062D\u0631\u0643\u0629 \u0627\u0644\u0645\u0631\u0643\u0628\u0627\u062A \u0639\u0646\u062F \u0628\u0648\u0627\u0628\u0629 \u0627\u0644\u0645\u062F\u0631\u0633\u0629.","roles.teacher.title":"\u0645\u0639\u0644\u0645","roles.teacher.description":"\u0645\u062A\u0627\u0628\u0639\u0629 \u0637\u0644\u0628\u0627\u062A \u0627\u0633\u062A\u0644\u0627\u0645 \u0637\u0644\u0627\u0628 \u0641\u0635\u0644\u0643 \u0648\u062A\u062C\u0647\u064A\u0632\u0647\u0645 \u0644\u0644\u0645\u063A\u0627\u062F\u0631\u0629.","roles.school-supervisor.title":"\u0645\u0634\u0631\u0641 \u0627\u0644\u0645\u062F\u0631\u0633\u0629","roles.school-supervisor.description":"\u0627\u0644\u0625\u0634\u0631\u0627\u0641 \u0639\u0644\u0649 \u062C\u0645\u064A\u0639 \u0623\u0646\u0634\u0637\u0629 \u0627\u0644\u0627\u0633\u062A\u0644\u0627\u0645 \u0641\u064A \u0627\u0644\u0645\u062F\u0631\u0633\u0629 \u0628\u0623\u0643\u0645\u0644\u0647\u0627.","roles.school-admin.title":"\u0645\u062F\u064A\u0631 \u0627\u0644\u0645\u062F\u0631\u0633\u0629","roles.school-admin.description":"\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0645\u0648\u0638\u0641\u064A\u0646 \u0648\u0627\u0644\u0637\u0644\u0627\u0628 \u0648\u0627\u0644\u0641\u0635\u0648\u0644 \u0648\u0627\u0644\u0625\u0639\u062F\u0627\u062F\u0627\u062A \u0639\u0644\u0649 \u0645\u0633\u062A\u0648\u0649 \u0627\u0644\u0645\u062F\u0631\u0633\u0629.","roles.super-admin.title":"\u0645\u062F\u064A\u0631 \u0639\u0627\u0645","roles.super-admin.description":"\u0625\u062F\u0627\u0631\u0629 \u062C\u0645\u064A\u0639 \u0627\u0644\u0645\u062F\u0627\u0631\u0633 \u0648\u062D\u0633\u0627\u0628\u0627\u062A \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645\u064A\u0646 \u0641\u064A \u0627\u0644\u0646\u0638\u0627\u0645 \u0628\u0623\u0643\u0645\u0644\u0647.","roles.driver.title":"\u0633\u0627\u0626\u0642","roles.driver.description":"\u0639\u0631\u0636 \u0627\u0644\u0637\u0644\u0627\u0628 \u0627\u0644\u0645\u0643\u0644\u0641 \u0628\u0627\u0633\u062A\u0644\u0627\u0645\u0647\u0645 \u0648\u0625\u062F\u0627\u0631\u0629 \u0637\u0644\u0628\u0627\u062A \u0627\u0644\u0627\u0633\u062A\u0644\u0627\u0645 \u0646\u064A\u0627\u0628\u0629 \u0639\u0646 \u0648\u0644\u064A \u0627\u0644\u0623\u0645\u0631.","parent.portal.title":"\u0628\u0648\u0627\u0628\u0629 \u0648\u0644\u064A \u0627\u0644\u0623\u0645\u0631","parent.tabs.pickup":"\u0627\u0633\u062A\u0644\u0627\u0645 \u0627\u0644\u0637\u0644\u0627\u0628","parent.tabs.pickup.description":"\u0623\u0628\u0644\u063A \u0627\u0644\u0645\u062F\u0631\u0633\u0629 \u0648\u0627\u0633\u062A\u0644\u0645 \u0631\u0645\u0632 \u0627\u0633\u062A\u0644\u0627\u0645 \u0644\u0623\u0637\u0641\u0627\u0644\u0643.","parent.tabs.absence":"\u0627\u0644\u0625\u0628\u0644\u0627\u063A \u0639\u0646 \u063A\u064A\u0627\u0628","parent.tabs.absence.description":"\u0623\u0628\u0644\u063A \u0627\u0644\u0645\u062F\u0631\u0633\u0629 \u0641\u064A \u062D\u0627\u0644 \u063A\u064A\u0627\u0628 \u0637\u0641\u0644\u0643.","parent.tabs.management":"\u0627\u0644\u0623\u0634\u062E\u0627\u0635 \u0627\u0644\u0645\u0635\u0631\u062D \u0644\u0647\u0645","parent.tabs.management.description":"\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0623\u0634\u062E\u0627\u0635 \u0627\u0644\u0645\u0633\u0645\u0648\u062D \u0644\u0647\u0645 \u0628\u0627\u0633\u062A\u0644\u0627\u0645 \u0623\u0637\u0641\u0627\u0644\u0643.","parent.tabs.bus":"\u062A\u062A\u0628\u0639 \u0627\u0644\u062D\u0627\u0641\u0644\u0629","parent.tabs.bus.description":"\u0639\u0631\u0636 \u0627\u0644\u0645\u0648\u0642\u0639 \u0627\u0644\u0645\u0628\u0627\u0634\u0631 \u0648\u062D\u0627\u0644\u0629 \u0627\u0644\u062D\u0627\u0641\u0644\u0629 \u0627\u0644\u0645\u062F\u0631\u0633\u064A\u0629.","parent.tabs.activities":"\u0627\u0644\u0623\u0646\u0634\u0637\u0629","parent.tabs.activities.description":"\u0627\u0644\u062A\u062D\u0642\u0642 \u0645\u0646 \u0627\u0644\u0623\u0646\u0634\u0637\u0629 \u0627\u0644\u0644\u0627\u0635\u0641\u064A\u0629 \u0648\u0627\u0644\u062C\u062F\u0627\u0648\u0644 \u0627\u0644\u0632\u0645\u0646\u064A\u0629.","parent.tabs.carpooling":"\u0627\u0644\u0645\u0634\u0627\u0631\u0643\u0629 \u0628\u0627\u0644\u0633\u064A\u0627\u0631\u0629","parent.tabs.carpooling.description":"\u062A\u0646\u0638\u064A\u0645 \u0648\u0625\u062F\u0627\u0631\u0629 \u0645\u062C\u0645\u0648\u0639\u0627\u062A \u0627\u0644\u0645\u0634\u0627\u0631\u0643\u0629 \u0628\u0627\u0644\u0633\u064A\u0627\u0631\u0629 \u0645\u0639 \u0623\u0648\u0644\u064A\u0627\u0621 \u0627\u0644\u0623\u0645\u0648\u0631.","parent.pickup.title":"\u0637\u0644\u0628 \u0627\u0644\u0627\u0644\u062A\u0642\u0627\u0637","parent.pickup.selectStudents":"\u0627\u062E\u062A\u0631 \u0627\u0644\u0637\u0644\u0627\u0628","parent.pickup.selectPerson":"\u0627\u062E\u062A\u0631 \u0627\u0644\u0634\u062E\u0635 \u0627\u0644\u0645\u0635\u0631\u062D \u0644\u0647","parent.pickup.carInfo":"\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0633\u064A\u0627\u0631\u0629","parent.pickup.carColor":"\u0644\u0648\u0646 \u0627\u0644\u0633\u064A\u0627\u0631\u0629","parent.pickup.plateNumber":"\u0631\u0642\u0645 \u0627\u0644\u0644\u0648\u062D\u0629","parent.pickup.notes":"\u0645\u0644\u0627\u062D\u0638\u0627\u062A \u0644\u0644\u0645\u0648\u0638\u0641\u064A\u0646 (\u0627\u062E\u062A\u064A\u0627\u0631\u064A)","parent.pickup.submit":"\u0637\u0644\u0628 \u0627\u0644\u0627\u0644\u062A\u0642\u0627\u0637","parent.pickup.code":"\u0631\u0645\u0632 \u0627\u0644\u0627\u0644\u062A\u0642\u0627\u0637 \u0627\u0644\u062E\u0627\u0635 \u0628\u0643:","parent.pickup.eta":"\u0627\u0644\u0648\u0642\u062A \u0627\u0644\u0645\u062A\u0648\u0642\u0639 \u0644\u0644\u0648\u0635\u0648\u0644: {{minutes}} \u062F\u0642\u064A\u0642\u0629","parent.pickup.message":"\u0631\u0633\u0627\u0644\u0629 \u0644\u0644\u0645\u0648\u0638\u0641\u064A\u0646:","parent.pickup.share":"\u0645\u0634\u0627\u0631\u0643\u0629 \u0627\u0644\u0637\u0644\u0628","parent.pickup.copy":"\u0646\u0633\u062E \u0627\u0644\u062A\u0641\u0627\u0635\u064A\u0644","parent.errors.apiKeyMissing":"\u0645\u0641\u062A\u0627\u062D GenAI API \u0645\u0641\u0642\u0648\u062F. \u0633\u064A\u062A\u0645 \u062A\u0639\u0637\u064A\u0644 \u0648\u0638\u0627\u0626\u0641 \u0627\u0644\u0630\u0643\u0627\u0621 \u0627\u0644\u0627\u0635\u0637\u0646\u0627\u0639\u064A.","parent.errors.noSchoolLocation":"\u0645\u0648\u0642\u0639 \u0627\u0644\u0645\u062F\u0631\u0633\u0629 \u063A\u064A\u0631 \u0645\u062D\u062F\u062F. \u0644\u0627 \u064A\u0645\u0643\u0646 \u062D\u0633\u0627\u0628 \u0627\u0644\u0648\u0642\u062A \u0627\u0644\u0645\u062A\u0648\u0642\u0639 \u0644\u0644\u0648\u0635\u0648\u0644.","parent.errors.notificationFailed":"\u0641\u0634\u0644 \u0641\u064A \u0625\u0646\u0634\u0627\u0621 \u0631\u0633\u0627\u0644\u0629 \u0627\u0644\u0627\u0644\u062A\u0642\u0627\u0637. \u064A\u0631\u062C\u0649 \u0627\u0644\u0645\u062D\u0627\u0648\u0644\u0629 \u0645\u0631\u0629 \u0623\u062E\u0631\u0649.","parent.errors.geoNotSupported":"\u062A\u062D\u062F\u064A\u062F \u0627\u0644\u0645\u0648\u0642\u0639 \u0627\u0644\u062C\u063A\u0631\u0627\u0641\u064A \u063A\u064A\u0631 \u0645\u062F\u0639\u0648\u0645 \u0645\u0646 \u0642\u0628\u0644 \u0645\u062A\u0635\u0641\u062D\u0643.","parent.errors.geoPermissionDenied":"\u062A\u0645 \u0631\u0641\u0636 \u0625\u0630\u0646 \u062A\u062D\u062F\u064A\u062F \u0627\u0644\u0645\u0648\u0642\u0639 \u0627\u0644\u062C\u063A\u0631\u0627\u0641\u064A. \u0644\u0627 \u064A\u0645\u0643\u0646 \u062D\u0633\u0627\u0628 \u0627\u0644\u0645\u0633\u0627\u0641\u0629.","parent.errors.geoUnavailable":"\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0645\u0648\u0642\u0639 \u063A\u064A\u0631 \u0645\u062A\u0627\u062D\u0629.","parent.errors.geoTimeout":"\u0627\u0646\u062A\u0647\u062A \u0645\u0647\u0644\u0629 \u0637\u0644\u0628 \u0627\u0644\u062D\u0635\u0648\u0644 \u0639\u0644\u0649 \u0645\u0648\u0642\u0639 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645.","parent.errors.geoUnknown":"\u062D\u062F\u062B \u062E\u0637\u0623 \u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641 \u0623\u062B\u0646\u0627\u0621 \u0627\u0644\u062D\u0635\u0648\u0644 \u0639\u0644\u0649 \u0627\u0644\u0645\u0648\u0642\u0639.","parent.geofence.message":"\u064A\u062C\u0628 \u0623\u0646 \u062A\u0643\u0648\u0646 \u0636\u0645\u0646 \u0646\u0637\u0627\u0642 {{distance}}\u0645 \u0645\u0646 \u0627\u0644\u0645\u062F\u0631\u0633\u0629 \u0644\u062A\u0633\u062C\u064A\u0644 \u0648\u0635\u0648\u0644\u0643. \u0623\u0646\u062A \u062D\u0627\u0644\u064A\u064B\u0627 \u0639\u0644\u0649 \u0628\u0639\u062F ~{{currentDistance}}\u0645.","parent.toast.spotReleased":"\u0644\u0642\u062F \u062A\u062C\u0627\u0648\u0632\u062A \u0627\u0644\u0645\u0647\u0644\u0629 \u0627\u0644\u0632\u0645\u0646\u064A\u0629 \u0644\u0644\u0648\u0635\u0648\u0644 \u0625\u0644\u0649 \u0627\u0644\u0645\u0648\u0642\u0641. \u062A\u0645\u062A \u0625\u0639\u0627\u062F\u062A\u0643 \u0625\u0644\u0649 \u0637\u0627\u0628\u0648\u0631 \u0627\u0644\u0627\u0646\u062A\u0638\u0627\u0631 \u0627\u0644\u0627\u0641\u062A\u0631\u0627\u0636\u064A.","parent.share.title":"\u062A\u0641\u0627\u0635\u064A\u0644 \u0637\u0644\u0628 \u0627\u0644\u0627\u0644\u062A\u0642\u0627\u0637","parent.share.student":"\u0627\u0644\u0637\u0644\u0627\u0628","parent.share.person":"\u0627\u0644\u0634\u062E\u0635 \u0627\u0644\u0645\u0635\u0631\u062D \u0644\u0647","parent.share.vehicle":"\u0627\u0644\u0645\u0631\u0643\u0628\u0629","parent.share.code":"\u0627\u0644\u0631\u0645\u0632","parent.share.eta":"\u0627\u0644\u0648\u0642\u062A \u0627\u0644\u0645\u062A\u0648\u0642\u0639","parent.toast.shareNotSupported":"\u0645\u0634\u0627\u0631\u0643\u0629 \u0627\u0644\u0648\u064A\u0628 \u063A\u064A\u0631 \u0645\u062F\u0639\u0648\u0645\u0629. \u062A\u0645 \u0646\u0633\u062E \u0627\u0644\u062A\u0641\u0627\u0635\u064A\u0644 \u0625\u0644\u0649 \u0627\u0644\u062D\u0627\u0641\u0638\u0629.","parent.toast.copied":"\u062A\u0645 \u0646\u0633\u062E \u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u0627\u0644\u062A\u0642\u0627\u0637 \u0625\u0644\u0649 \u0627\u0644\u062D\u0627\u0641\u0638\u0629!","parent.toast.copyFailed":"\u0641\u0634\u0644 \u0646\u0633\u062E \u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u0627\u0644\u062A\u0642\u0627\u0637.","parent.absence.title":"\u0627\u0644\u0625\u0628\u0644\u0627\u063A \u0639\u0646 \u063A\u064A\u0627\u0628 \u0637\u0627\u0644\u0628","parent.absence.selectStudent":"\u0627\u062E\u062A\u0631 \u0627\u0644\u0637\u0627\u0644\u0628","parent.absence.date":"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u063A\u064A\u0627\u0628","parent.absence.reason":"\u0633\u0628\u0628 \u0627\u0644\u063A\u064A\u0627\u0628","parent.absence.reasonPlaceholder":"\u0645\u062B\u0627\u0644: \u0645\u0631\u0636\u060C \u0631\u062D\u0644\u0629 \u0639\u0627\u0626\u0644\u064A\u0629","parent.absence.submit":"\u0625\u0631\u0633\u0627\u0644 \u062A\u0642\u0631\u064A\u0631 \u0627\u0644\u063A\u064A\u0627\u0628","parent.toast.absenceReported":"\u062A\u0645 \u0627\u0644\u0625\u0628\u0644\u0627\u063A \u0639\u0646 \u0627\u0644\u063A\u064A\u0627\u0628 \u0628\u0646\u062C\u0627\u062D!","parent.management.title":"\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0623\u0634\u062E\u0627\u0635 \u0627\u0644\u0645\u0635\u0631\u062D \u0644\u0647\u0645","parent.management.description":"\u0623\u0636\u0641 \u0623\u0641\u0631\u0627\u062F \u0627\u0644\u0639\u0627\u0626\u0644\u0629 \u0623\u0648 \u0627\u0644\u0633\u0627\u0626\u0642\u064A\u0646 \u0627\u0644\u0645\u0635\u0631\u062D \u0644\u0647\u0645 \u0628\u0627\u0633\u062A\u0644\u0627\u0645 \u0623\u0637\u0641\u0627\u0644\u0643.","parent.management.addPerson":"\u0625\u0636\u0627\u0641\u0629 \u0634\u062E\u0635 \u0645\u0635\u0631\u062D \u0644\u0647 \u062C\u062F\u064A\u062F","parent.management.name":"\u0627\u0644\u0627\u0633\u0645","parent.management.relation":"\u0627\u0644\u0635\u0644\u0629 (\u0645\u062B\u0627\u0644: \u0623\u0645\u060C \u062E\u0627\u0644)","parent.management.phone":"\u0627\u0644\u0647\u0627\u062A\u0641 (\u0627\u062E\u062A\u064A\u0627\u0631\u064A)","parent.management.idNumber":"\u0631\u0642\u0645 \u0627\u0644\u0647\u0648\u064A\u0629","parent.management.addTitle":"\u0625\u0636\u0627\u0641\u0629 \u0634\u062E\u0635 \u062C\u062F\u064A\u062F","parent.management.editTitle":"\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0634\u062E\u0635","parent.management.addButton":"\u0625\u0636\u0627\u0641\u0629 \u0634\u062E\u0635","parent.management.existing":"\u0627\u0644\u0623\u0634\u062E\u0627\u0635 \u0627\u0644\u0645\u0635\u0631\u062D \u0644\u0647\u0645 \u0627\u0644\u062D\u0627\u0644\u064A\u0648\u0646","parent.management.noPersons":"\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0639\u062B\u0648\u0631 \u0639\u0644\u0649 \u0623\u0634\u062E\u0627\u0635 \u0645\u0635\u0631\u062D \u0644\u0647\u0645. \u0623\u0636\u0641 \u0648\u0627\u062D\u062F\u0627\u064B \u0623\u0639\u0644\u0627\u0647.","parent.management.save":"\u062D\u0641\u0638 \u0627\u0644\u0634\u062E\u0635","parent.management.cancel":"\u0625\u0644\u063A\u0627\u0621","parent.management.edit":"\u062A\u0639\u062F\u064A\u0644","parent.management.delete":"\u062D\u0630\u0641","parent.management.deleteConfirmation":"\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0623\u0646\u0643 \u062A\u0631\u064A\u062F \u062D\u0630\u0641 \u0647\u0630\u0627 \u0627\u0644\u0634\u062E\u0635 \u0627\u0644\u0645\u0635\u0631\u062D \u0644\u0647\u061F","parent.management.toast.personAdded":"\u062A\u0645\u062A \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0634\u062E\u0635 \u0627\u0644\u0645\u0635\u0631\u062D \u0644\u0647 \u0628\u0646\u062C\u0627\u062D!","parent.management.toast.personUpdated":"\u062A\u0645 \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0634\u062E\u0635 \u0627\u0644\u0645\u0635\u0631\u062D \u0644\u0647 \u0628\u0646\u062C\u0627\u062D!","parent.management.toast.personDeleted":"\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u0634\u062E\u0635 \u0627\u0644\u0645\u0635\u0631\u062D \u0644\u0647 \u0628\u0646\u062C\u0627\u062D!","parent.management.details":"\u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u0634\u062E\u0635","parent.management.inviteTitle":"\u062F\u0639\u0648\u0629 \u0633\u0627\u0626\u0642","parent.management.inviteDriverDescription":"\u0623\u062F\u062E\u0644 \u0631\u0642\u0645 \u0647\u0627\u062A\u0641 \u0627\u0644\u0633\u0627\u0626\u0642 \u0644\u062F\u0639\u0648\u062A\u0647. \u0633\u062A\u062A\u0645 \u0625\u0636\u0627\u0641\u062A\u0647 \u0643\u0634\u062E\u0635 \u0645\u0635\u0631\u062D \u0644\u0647.","parent.management.inviteButton":"\u062F\u0639\u0648\u0629 \u0633\u0627\u0626\u0642","parent.management.toast.inviteSent":"\u062A\u0645 \u0625\u0631\u0633\u0627\u0644 \u062F\u0639\u0648\u0629 \u0627\u0644\u0633\u0627\u0626\u0642 \u0625\u0644\u0649 {{phone}}!","parent.buttons.notify":"\u0625\u0628\u0644\u0627\u063A \u0627\u0644\u0645\u062F\u0631\u0633\u0629","parent.buttons.share":"\u0645\u0634\u0627\u0631\u0643\u0629","parent.buttons.copy":"\u0646\u0633\u062E","parent.buttons.reportAbsence":"\u0625\u0628\u0644\u0627\u063A \u0639\u0646 \u063A\u064A\u0627\u0628","parent.pass.title":"\u0628\u0637\u0627\u0642\u0629 \u0627\u0644\u0627\u0644\u062A\u0642\u0627\u0637 \u0627\u0644\u0631\u0642\u0645\u064A\u0629","parent.pass.instruction":"\u0627\u0639\u0631\u0636 \u0647\u0630\u0627 \u0644\u0644\u0645\u0648\u0638\u0641\u064A\u0646 \u0644\u0644\u062A\u062D\u0642\u0642.","parent.status.pickupCode":"\u0631\u0645\u0632 \u0627\u0644\u0627\u0644\u062A\u0642\u0627\u0637","parent.status.eta":"\u0627\u0644\u0648\u0642\u062A \u0627\u0644\u0645\u062A\u0648\u0642\u0639","parent.status.liveEta":"\u0627\u0644\u0648\u0642\u062A \u0627\u0644\u0645\u0628\u0627\u0634\u0631","parent.status.distance":"\u0627\u0644\u0645\u0633\u0627\u0641\u0629","parent.status.note":"\u0645\u0644\u0627\u062D\u0638\u0629","parent.status.currentStatus":"\u0627\u0644\u062D\u0627\u0644\u0629 \u0627\u0644\u062D\u0627\u0644\u064A\u0629","parent.steps.selectStudent":"1. \u0627\u062E\u062A\u0631 \u0627\u0644\u0637\u0644\u0627\u0628","parent.steps.selectPerson":"2. \u0627\u062E\u062A\u0631 \u0627\u0644\u0634\u062E\u0635 \u0627\u0644\u0645\u0635\u0631\u062D \u0644\u0647","parent.steps.vehicleInfo":"3. \u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0645\u0631\u0643\u0628\u0629","parent.placeholders.carColor":"\u0644\u0648\u0646 \u0627\u0644\u0633\u064A\u0627\u0631\u0629","parent.placeholders.plateNumber":"\u0631\u0642\u0645 \u0627\u0644\u0644\u0648\u062D\u0629","parent.placeholders.notes":"\u0645\u0644\u0627\u062D\u0638\u0627\u062A \u0644\u0644\u0645\u0648\u0638\u0641\u064A\u0646 (\u0627\u062E\u062A\u064A\u0627\u0631\u064A)","parent.placeholders.absenceReason":"\u0645\u062B\u0627\u0644: \u0645\u0631\u0636\u060C \u0631\u062D\u0644\u0629 \u0639\u0627\u0626\u0644\u064A\u0629","parent.buttons.arrived":"\u0644\u0642\u062F \u0648\u0635\u0644\u062A","parent.spot.assignedTitle":"\u062A\u0641\u0636\u0644 \u0628\u0627\u0644\u062A\u0648\u062C\u0647 \u0625\u0644\u0649 \u0645\u0648\u0642\u0641\u0643","parent.spot.assignedMessageNew":"\u064A\u0631\u062C\u0649 \u0627\u0644\u062A\u0648\u062C\u0647 \u0625\u0644\u0649 \u0627\u0644\u0645\u0648\u0642\u0641 \u0627\u0644\u0645\u0648\u0636\u062D \u0623\u062F\u0646\u0627\u0647.","parent.spot.standByTitle":"\u064A\u0631\u062C\u0649 \u0627\u0644\u0627\u0646\u062A\u0638\u0627\u0631","parent.spot.standByMessage":"\u062C\u0645\u064A\u0639 \u0645\u0648\u0627\u0642\u0641 \u0627\u0644\u0627\u0633\u062A\u0644\u0627\u0645 \u0645\u0634\u063A\u0648\u0644\u0629 \u062D\u0627\u0644\u064A\u064B\u0627. \u0633\u064A\u062A\u0645 \u062A\u062E\u0635\u064A\u0635 \u0645\u0648\u0642\u0641 \u0644\u0643 \u0641\u0648\u0631 \u062A\u0648\u0641\u0631\u0647.","parent.preflight.title":"\u062A\u0623\u0643\u064A\u062F \u0637\u0644\u0628 \u0627\u0644\u0627\u0633\u062A\u0644\u0627\u0645","parent.preflight.calculating":"\u062C\u0627\u0631\u064A \u062D\u0633\u0627\u0628 \u0627\u0644\u0645\u0633\u0627\u0641\u0629 \u0648\u0627\u0644\u0648\u0642\u062A \u0627\u0644\u0645\u062A\u0648\u0642\u0639...","parent.preflight.locationError":"\u062A\u0639\u0630\u0631 \u062D\u0633\u0627\u0628 \u0627\u0644\u0648\u0642\u062A \u0627\u0644\u0645\u062A\u0648\u0642\u0639. \u0647\u0644 \u062A\u0631\u064A\u062F \u0627\u0644\u0645\u062A\u0627\u0628\u0639\u0629 \u0639\u0644\u0649 \u0623\u064A \u062D\u0627\u0644\u061F","parent.preflight.confirmMessage":"\u0627\u0644\u0648\u0642\u062A \u0627\u0644\u0645\u062A\u0648\u0642\u0639 \u0644\u0648\u0635\u0648\u0644\u0643 \u0647\u0648 {{eta}} \u062F\u0642\u064A\u0642\u0629 ({{distance}} \u0643\u0645). \u0647\u0644 \u062A\u0631\u064A\u062F \u0625\u0631\u0633\u0627\u0644 \u0627\u0644\u0625\u0634\u0639\u0627\u0631 \u0644\u0644\u0645\u062F\u0631\u0633\u0629\u061F","parent.preflight.confirmButton":"\u0646\u0639\u0645\u060C \u0623\u0631\u0633\u0644 \u0627\u0644\u0625\u0634\u0639\u0627\u0631","busTracking.title":"\u062A\u062A\u0628\u0639 \u0627\u0644\u062D\u0627\u0641\u0644\u0629","busTracking.noBuses":"\u0644\u0627 \u064A\u0648\u062C\u062F \u0623\u064A \u0645\u0646 \u0623\u0628\u0646\u0627\u0626\u0643 \u0645\u0633\u062C\u0644 \u062D\u0627\u0644\u064A\u0627\u064B \u0641\u064A \u062D\u0627\u0641\u0644\u0629 \u0645\u062F\u0631\u0633\u064A\u0629.","bus.status.stationary":"\u0645\u062A\u0648\u0642\u0641\u0629","bus.status.en_route":"\u0641\u064A \u0627\u0644\u0637\u0631\u064A\u0642","bus.status.stopped":"\u0645\u062A\u0648\u0642\u0641\u0629 \u0645\u0624\u0642\u062A\u0627\u064B","parent.activities.title":"\u0627\u0644\u0623\u0646\u0634\u0637\u0629 \u0627\u0644\u0644\u0627\u0635\u0641\u064A\u0629","parent.activities.supervisor":"\u0627\u0644\u0645\u0634\u0631\u0641","parent.activities.time":"\u0627\u0644\u0648\u0642\u062A","parent.activities.location":"\u0627\u0644\u0645\u0643\u0627\u0646","parent.activities.noActivities":"\u0623\u0628\u0646\u0627\u0624\u0643 \u063A\u064A\u0631 \u0645\u0633\u062C\u0644\u064A\u0646 \u0641\u064A \u0623\u064A \u0623\u0646\u0634\u0637\u0629 \u0644\u0627\u0635\u0641\u064A\u0629 \u0644\u0644\u064A\u0648\u0645.","carpooling.title":"\u0645\u062C\u0645\u0648\u0639\u0627\u062A \u0627\u0644\u0645\u0634\u0627\u0631\u0643\u0629 \u0628\u0627\u0644\u0633\u064A\u0627\u0631\u0629","carpooling.description":"\u0646\u0638\u0645 \u0645\u062C\u0645\u0648\u0639\u0627\u062A \u0644\u0645\u0634\u0627\u0631\u0643\u0629 \u0627\u0644\u0633\u064A\u0627\u0631\u0629 \u0645\u0639 \u0623\u0648\u0644\u064A\u0627\u0621 \u0627\u0644\u0623\u0645\u0648\u0631 \u0627\u0644\u0622\u062E\u0631\u064A\u0646 \u0644\u062A\u0646\u0627\u0648\u0628 \u0645\u0647\u0627\u0645 \u0627\u0644\u062A\u0648\u0635\u064A\u0644.","carpooling.createGroup.button":"\u0625\u0646\u0634\u0627\u0621 \u0645\u062C\u0645\u0648\u0639\u0629 \u062C\u062F\u064A\u062F\u0629","carpooling.createGroup.title":"\u0625\u0646\u0634\u0627\u0621 \u0645\u062C\u0645\u0648\u0639\u0629 \u062C\u062F\u064A\u062F\u0629","carpooling.groupName.placeholder":'\u0645\u062B\u0627\u0644: "\u0641\u0631\u064A\u0642 \u0643\u0631\u0629 \u0627\u0644\u0642\u062F\u0645 \u0644\u0644\u0635\u0641 \u0627\u0644\u062B\u0627\u0644\u062B"',"carpooling.create.button":"\u0625\u0646\u0634\u0627\u0621 \u0645\u062C\u0645\u0648\u0639\u0629","carpooling.myGroups":"\u0645\u062C\u0645\u0648\u0639\u0627\u062A\u064A","carpooling.groupAdmin":"\u0627\u0644\u0645\u062F\u064A\u0631","carpooling.members":"\u0627\u0644\u0623\u0639\u0636\u0627\u0621","carpooling.inviteMember.button":"\u062F\u0639\u0648\u0629 \u0639\u0636\u0648","carpooling.noGroups":"\u0623\u0646\u062A \u0644\u0633\u062A \u0639\u0636\u0648\u0627\u064B \u0641\u064A \u0623\u064A \u0645\u062C\u0645\u0648\u0639\u0629 \u0628\u0639\u062F.","carpooling.toast.groupCreated":"\u062A\u0645 \u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u0645\u062C\u0645\u0648\u0639\u0629 \u0628\u0646\u062C\u0627\u062D!","carpooling.inviteMember.title":"\u062F\u0639\u0648\u0629 \u0639\u0636\u0648 \u0625\u0644\u0649","carpooling.inviteMember.select":"\u0627\u062E\u062A\u0631 \u0648\u0644\u064A \u0623\u0645\u0631 \u0644\u062F\u0639\u0648\u062A\u0647","carpooling.inviteMember.noParents":"\u0644\u0627 \u064A\u0648\u062C\u062F \u0623\u0648\u0644\u064A\u0627\u0621 \u0623\u0645\u0648\u0631 \u0622\u062E\u0631\u0648\u0646 \u0645\u062A\u0627\u062D\u0648\u0646 \u0644\u0644\u062F\u0639\u0648\u0629.","carpooling.invite.button":"\u0625\u0631\u0633\u0627\u0644 \u062F\u0639\u0648\u0629","carpooling.toast.memberInvited":"\u062A\u0645\u062A \u062F\u0639\u0648\u0629 \u0627\u0644\u0639\u0636\u0648 \u0628\u0646\u062C\u0627\u062D!","driverDashboard.title":"\u0644\u0648\u062D\u0629 \u062A\u062D\u0643\u0645 \u0627\u0644\u0633\u0627\u0626\u0642","driverDashboard.welcome":"\u0627\u062E\u062A\u0631 \u0627\u0644\u0637\u0644\u0627\u0628 \u0627\u0644\u0645\u0643\u0644\u0641 \u0628\u0647\u0645 \u0648\u0623\u0628\u0644\u063A \u0627\u0644\u0645\u062F\u0631\u0633\u0629.","driverDashboard.assignedStudents":"\u0627\u0644\u0637\u0644\u0627\u0628 \u0627\u0644\u0645\u0643\u0644\u0641 \u0628\u0647\u0645","driverDashboard.startPickup":"\u0628\u062F\u0621 \u0627\u0644\u0627\u0633\u062A\u0644\u0627\u0645","driverDashboard.pickupInProgress":"\u0627\u0644\u0627\u0633\u062A\u0644\u0627\u0645 \u0642\u064A\u062F \u0627\u0644\u062A\u0646\u0641\u064A\u0630","driverDashboard.noAssignments":"\u0623\u0646\u062A \u063A\u064A\u0631 \u0645\u0643\u0644\u0641 \u0628\u0627\u0633\u062A\u0644\u0627\u0645 \u0623\u064A \u0637\u0644\u0627\u0628 \u062D\u0627\u0644\u064A\u064B\u0627.","guard.title":"\u0639\u0631\u0636 \u0627\u0644\u062D\u0627\u0631\u0633","guard.enterCode":"\u0623\u062F\u062E\u0644 \u0631\u0645\u0632 \u0627\u0644\u0627\u0644\u062A\u0642\u0627\u0637","guard.verify":"\u062A\u062D\u0642\u0642 \u0645\u0646 \u0627\u0644\u0631\u0645\u0632","guard.pickupDetails":"\u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u0627\u0644\u062A\u0642\u0627\u0637","guard.student":"\u0627\u0644\u0637\u0627\u0644\u0628","guard.authorizedPerson":"\u0627\u0644\u0634\u062E\u0635 \u0627\u0644\u0645\u0635\u0631\u062D \u0644\u0647","guard.relation":"\u0627\u0644\u0635\u0644\u0629","guard.carInfo":"\u0627\u0644\u0633\u064A\u0627\u0631\u0629","guard.status":"\u0627\u0644\u062D\u0627\u0644\u0629","guard.confirmPickup":"\u062A\u0623\u0643\u064A\u062F \u0627\u0644\u0627\u0644\u062A\u0642\u0627\u0637","guard.errors.invalidCode":"\u0631\u0645\u0632 \u0627\u0644\u0627\u0644\u062A\u0642\u0627\u0637 \u063A\u064A\u0631 \u0635\u0627\u0644\u062D \u0623\u0648 \u0645\u0646\u062A\u0647\u064A \u0627\u0644\u0635\u0644\u0627\u062D\u064A\u0629.","guard.errors.noReadyRequests":'\u0644\u0627 \u062A\u0648\u062C\u062F \u0637\u0644\u0628\u0627\u062A "\u062C\u0627\u0647\u0632\u0629 \u0644\u0644\u0627\u0644\u062A\u0642\u0627\u0637" \u0644\u0644\u0645\u062D\u0627\u0643\u0627\u0629.',"guard.errors.scannerFailed":"\u0641\u0634\u0644 \u0641\u064A \u062A\u0634\u063A\u064A\u0644 \u0645\u0627\u0633\u062D QR.","guard.errors.permissionDenied":"\u062A\u0645 \u0631\u0641\u0636 \u0625\u0630\u0646 \u0627\u0644\u0648\u0635\u0648\u0644 \u0625\u0644\u0649 \u0627\u0644\u0643\u0627\u0645\u064A\u0631\u0627. \u064A\u0631\u062C\u0649 \u0627\u0644\u0633\u0645\u0627\u062D \u0628\u0627\u0644\u0648\u0635\u0648\u0644 \u0625\u0644\u0649 \u0627\u0644\u0643\u0627\u0645\u064A\u0631\u0627 \u0641\u064A \u0625\u0639\u062F\u0627\u062F\u0627\u062A \u0627\u0644\u0645\u062A\u0635\u0641\u062D.","guard.errors.noCamera":"\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0639\u062B\u0648\u0631 \u0639\u0644\u0649 \u0643\u0627\u0645\u064A\u0631\u0627 \u0639\u0644\u0649 \u0647\u0630\u0627 \u0627\u0644\u062C\u0647\u0627\u0632.","guard.scanQR":"\u0645\u0633\u062D \u0631\u0645\u0632 QR","guard.stopScan":"\u0625\u064A\u0642\u0627\u0641 \u0627\u0644\u0645\u0627\u0633\u062D","guard.simulateScan":"\u0645\u062D\u0627\u0643\u0627\u0629 \u0627\u0644\u0645\u0633\u062D (\u062A\u062C\u0631\u064A\u0628\u064A)","guard.success":"\u062A\u0645 \u0627\u0644\u062A\u062D\u0642\u0642 \u0628\u0646\u062C\u0627\u062D!","guard.studentInfo":"\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0637\u0627\u0644\u0628","guard.vehicleInfo":"\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0645\u0631\u0643\u0628\u0629","guard.pickupLocation":"\u0645\u0648\u0642\u0639 \u0627\u0644\u0627\u0633\u062A\u0644\u0627\u0645","guard.confirm":"\u062A\u0623\u0643\u064A\u062F","teacher.portal.title":"\u0641\u0635\u0644\u064A","teacher.portal.activeRequests":"\u0637\u0644\u0628\u0627\u062A \u0646\u0634\u0637\u0629","teacher.portal.pickupBy":"\u0627\u0644\u0645\u0633\u062A\u0644\u0645","teacher.portal.markReady":"\u0627\u0631\u0633\u0627\u0644 \u0627\u0644\u0637\u0627\u0644\u0628 \u0627\u0644\u0649 \u0627\u0644\u0645\u0643\u0627\u0646 \u0627\u0644\u0645\u062E\u0635\u0635","teacher.portal.ready":"\u062C\u0627\u0647\u0632 \u0644\u0644\u0627\u0633\u062A\u0644\u0627\u0645","teacher.portal.completed":"\u0627\u0643\u062A\u0645\u0644","teacher.portal.noRequests":"\u0644\u0627 \u062A\u0648\u062C\u062F \u0637\u0644\u0628\u0627\u062A \u0627\u0644\u062A\u0642\u0627\u0637 \u0646\u0634\u0637\u0629 \u0644\u0641\u0635\u0644\u0643.","teacher.title":"\u0644\u0648\u062D\u0629 \u062A\u062D\u0643\u0645 \u0627\u0644\u0645\u0639\u0644\u0645","teacher.buttons.acknowledge":"\u0627\u0633\u062A\u0644\u0627\u0645","teacher.myClass":"\u0635\u0641\u064A: {{className}}","teacher.pendingRequests":"\u0637\u0644\u0628\u0627\u062A \u0627\u0644\u0627\u0644\u062A\u0642\u0627\u0637 \u0627\u0644\u0645\u0639\u0644\u0642\u0629","teacher.studentName":"\u0627\u0633\u0645 \u0627\u0644\u0637\u0627\u0644\u0628","teacher.authorizedPerson":"\u0627\u0644\u0634\u062E\u0635 \u0627\u0644\u0645\u0635\u0631\u062D \u0644\u0647","teacher.carInfo":"\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0633\u064A\u0627\u0631\u0629","teacher.notes":"\u0645\u0644\u0627\u062D\u0638\u0627\u062A","teacher.markReady":"\u0627\u0631\u0633\u0627\u0644 \u0627\u0644\u0637\u0627\u0644\u0628 \u0627\u0644\u0649 \u0627\u0644\u0645\u0643\u0627\u0646 \u0627\u0644\u0645\u062E\u0635\u0635","teacher.reports":"\u062A\u0642\u0627\u0631\u064A\u0631 \u0627\u0644\u063A\u064A\u0627\u0628","teacher.report.student":"\u0627\u0644\u0637\u0627\u0644\u0628","teacher.report.date":"\u0627\u0644\u062A\u0627\u0631\u064A\u062E","teacher.report.reason":"\u0627\u0644\u0633\u0628\u0628","schoolSupervisor.portal.title":"\u0645\u0634\u0631\u0641 \u0627\u0644\u0645\u062F\u0631\u0633\u0629","schoolSupervisor.portal.monitor":"\u0645\u0631\u0627\u0642\u0628\u0629 \u0648\u0625\u062F\u0627\u0631\u0629 \u062C\u0645\u064A\u0639 \u0637\u0644\u0628\u0627\u062A \u0627\u0644\u0627\u0633\u062A\u0644\u0627\u0645 \u0627\u0644\u0646\u0634\u0637\u0629 \u0641\u064A \u0645\u062F\u0631\u0633\u062A\u0643.","schoolSupervisor.portal.activeRequests":"\u0637\u0644\u0628\u0627\u062A \u0646\u0634\u0637\u0629","schoolSupervisor.portal.noRequests":"\u0644\u0627 \u062A\u0648\u062C\u062F \u0637\u0644\u0628\u0627\u062A \u0627\u0644\u062A\u0642\u0627\u0637 \u0646\u0634\u0637\u0629 \u0641\u064A \u0645\u062F\u0631\u0633\u062A\u0643.","schoolSupervisor.title":"\u0644\u0648\u062D\u0629 \u062A\u062D\u0643\u0645 \u0645\u0634\u0631\u0641 \u0627\u0644\u0645\u062F\u0631\u0633\u0629","schoolSupervisor.activePickups":"\u0637\u0644\u0628\u0627\u062A \u0627\u0644\u0627\u0644\u062A\u0642\u0627\u0637 \u0627\u0644\u0646\u0634\u0637\u0629 (\u062C\u0645\u064A\u0639 \u0627\u0644\u0641\u0635\u0648\u0644)","schoolSupervisor.liveMonitor.title":"\u0645\u0631\u0627\u0642\u0628\u0629 \u0627\u0644\u0627\u0633\u062A\u0644\u0627\u0645 \u0627\u0644\u0645\u0628\u0627\u0634\u0631\u0629","schoolSupervisor.liveMonitor.zone":"\u0645\u0646\u0637\u0642\u0629","schoolSupervisor.liveMonitor.occupiedBy":"\u0628\u0648\u0627\u0633\u0637\u0629","schoolSupervisor.liveMonitor.free":"\u0641\u0627\u0631\u063A","schoolSupervisor.insights.title":"\u0631\u0624\u0649 \u0630\u0643\u064A\u0629","school-admin.title":"\u0644\u0648\u062D\u0629 \u062A\u062D\u0643\u0645 \u0645\u062F\u064A\u0631 \u0627\u0644\u0645\u062F\u0631\u0633\u0629","school-admin.tabs.monitor":"\u0627\u0644\u0645\u0631\u0627\u0642\u0628\u0629","school-admin.tabs.staff":"\u0627\u0644\u0645\u0648\u0638\u0641\u0648\u0646","school-admin.tabs.students":"\u0627\u0644\u0637\u0644\u0627\u0628","school-admin.tabs.classes":"\u0627\u0644\u0641\u0635\u0648\u0644","school-admin.tabs.settings":"\u0627\u0644\u0625\u0639\u062F\u0627\u062F\u0627\u062A","school-admin.tabs.analytics":"\u0627\u0644\u062A\u062D\u0644\u064A\u0644\u0627\u062A","school-admin.tabs.buses":"\u0627\u0644\u062D\u0627\u0641\u0644\u0627\u062A","school-admin.tabs.activities":"\u0627\u0644\u0623\u0646\u0634\u0637\u0629","school-admin.tabs.broadcast":"\u0625\u0639\u0644\u0627\u0646\u0627\u062A","school-admin.portal.title":"\u0645\u0631\u0627\u0642\u0628 \u0627\u0644\u062A\u0642\u0627\u0637 \u0627\u0644\u0637\u0644\u0627\u0628 \u0628\u0627\u0644\u0645\u062F\u0631\u0633\u0629","school-admin.portal.monitor":"\u0646\u0638\u0631\u0629 \u0639\u0627\u0645\u0629 \u0639\u0644\u0649 \u0637\u0644\u0628\u0627\u062A \u0627\u0644\u062A\u0642\u0627\u0637 \u0627\u0644\u0637\u0644\u0627\u0628 \u0627\u0644\u0646\u0634\u0637\u0629.","school-admin.portal.activeRequests":"\u0637\u0644\u0628\u0627\u062A \u0646\u0634\u0637\u0629","school-admin.portal.resetDay":"\u0625\u0639\u0627\u062F\u0629 \u062A\u0639\u064A\u064A\u0646 \u0627\u0644\u064A\u0648\u0645","school-admin.portal.resetConfirmation":"\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u0623\u0646\u0643 \u062A\u0631\u064A\u062F \u0645\u0633\u062D \u062C\u0645\u064A\u0639 \u0637\u0644\u0628\u0627\u062A \u0627\u0644\u0627\u0644\u062A\u0642\u0627\u0637 \u0627\u0644\u0646\u0634\u0637\u0629 \u0644\u0644\u064A\u0648\u0645\u061F \u0644\u0627 \u064A\u0645\u0643\u0646 \u0627\u0644\u062A\u0631\u0627\u062C\u0639 \u0639\u0646 \u0647\u0630\u0627 \u0627\u0644\u0625\u062C\u0631\u0627\u0621.","school-admin.portal.noRequests":"\u0644\u0627 \u062A\u0648\u062C\u062F \u0637\u0644\u0628\u0627\u062A \u0627\u0644\u062A\u0642\u0627\u0637 \u0646\u0634\u0637\u0629 \u062D\u0627\u0644\u064A\u064B\u0627.","school-admin.toast.dayReset":"\u062A\u0645\u062A \u0625\u0639\u0627\u062F\u0629 \u062A\u0639\u064A\u064A\u0646 \u062C\u0645\u064A\u0639 \u0627\u0644\u0637\u0644\u0628\u0627\u062A \u0627\u0644\u0646\u0634\u0637\u0629.","school-admin.staff.title":"\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0645\u0648\u0638\u0641\u064A\u0646","school-admin.staff.add":"\u0625\u0636\u0627\u0641\u0629 \u0645\u0648\u0638\u0641 \u062C\u062F\u064A\u062F","school-admin.staff.addTitle":"\u0625\u0636\u0627\u0641\u0629 \u0645\u0648\u0638\u0641 \u062C\u062F\u064A\u062F","school-admin.staff.addButton":"\u0625\u0636\u0627\u0641\u0629 \u0645\u0648\u0638\u0641","school-admin.staff.editTitle":"\u062A\u0639\u062F\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0645\u0648\u0638\u0641","school-admin.staff.existing":"\u0627\u0644\u0645\u0648\u0638\u0641\u0648\u0646 \u0627\u0644\u062D\u0627\u0644\u064A\u0648\u0646","school-admin.staff.name":"\u0627\u0644\u0627\u0633\u0645","school-admin.staff.phone":"\u0627\u0644\u0647\u0627\u062A\u0641","school-admin.staff.role":"\u0627\u0644\u062F\u0648\u0631","school-admin.staff.selectRole":"\u0627\u062E\u062A\u0631 \u0627\u0644\u062F\u0648\u0631","school-admin.staff.class":"\u0627\u0644\u0641\u0635\u0644 \u0627\u0644\u0645\u062E\u0635\u0635 (\u0644\u0644\u0645\u0639\u0644\u0645\u064A\u0646)","school-admin.staff.selectClass":"\u0627\u062E\u062A\u0631 \u0627\u0644\u0641\u0635\u0644","school-admin.staff.edit":"\u062A\u0639\u062F\u064A\u0644","school-admin.staff.save":"\u062D\u0641\u0638 \u0627\u0644\u0645\u0648\u0638\u0641","school-admin.staff.cancel":"\u0625\u0644\u063A\u0627\u0621","school-admin.staff.toast.staffAdded":"\u062A\u0645\u062A \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0648\u0638\u0641 \u0628\u0646\u062C\u0627\u062D!","school-admin.staff.toast.staffUpdated":"\u062A\u0645 \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0645\u0648\u0638\u0641 \u0628\u0646\u062C\u0627\u062D!","school-admin.staff.toast.staffDeleted":"\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u0645\u0648\u0638\u0641 \u0628\u0646\u062C\u0627\u062D.","school-admin.staff.deleteConfirmation":"\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0623\u0646\u0643 \u062A\u0631\u064A\u062F \u062D\u0630\u0641 \u0647\u0630\u0627 \u0627\u0644\u0645\u0648\u0638\u0641\u061F","school-admin.staff.noStaff":"\u0644\u0627 \u064A\u0648\u062C\u062F \u0645\u0648\u0638\u0641\u0648\u0646 \u0645\u0633\u062C\u0644\u0648\u0646 \u0641\u064A \u0645\u062F\u0631\u0633\u062A\u0643.","school-admin.students.title":"\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0637\u0644\u0627\u0628","school-admin.students.add":"\u0625\u0636\u0627\u0641\u0629 \u0637\u0627\u0644\u0628 \u062C\u062F\u064A\u062F","school-admin.students.addTitle":"\u0625\u0636\u0627\u0641\u0629 \u0637\u0627\u0644\u0628 \u062C\u062F\u064A\u062F","school-admin.students.addButton":"\u0625\u0636\u0627\u0641\u0629 \u0637\u0627\u0644\u0628","school-admin.students.editTitle":"\u062A\u0639\u062F\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0637\u0627\u0644\u0628","school-admin.students.existing":"\u0627\u0644\u0637\u0644\u0627\u0628 \u0627\u0644\u062D\u0627\u0644\u064A\u0648\u0646","school-admin.students.name":"\u0627\u0644\u0627\u0633\u0645","school-admin.students.grade":"\u0627\u0644\u0635\u0641","school-admin.students.class":"\u0627\u0644\u0641\u0635\u0644","school-admin.students.selectClass":"\u0627\u062E\u062A\u0631 \u0627\u0644\u0641\u0635\u0644","school-admin.students.parentPhone":"\u0647\u0627\u062A\u0641 \u0648\u0644\u064A \u0627\u0644\u0623\u0645\u0631","school-admin.students.sendInvite":"\u0625\u0631\u0633\u0627\u0644 \u062F\u0639\u0648\u0629","school-admin.students.edit":"\u062A\u0639\u062F\u064A\u0644","school-admin.students.save":"\u062D\u0641\u0638 \u0627\u0644\u0637\u0627\u0644\u0628","school-admin.students.cancel":"\u0625\u0644\u063A\u0627\u0621","school-admin.students.invite":"\u0625\u0631\u0633\u0627\u0644 \u062F\u0639\u0648\u0629","school-admin.students.toast.studentAdded":"\u062A\u0645\u062A \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0637\u0627\u0644\u0628 \u0628\u0646\u062C\u0627\u062D!","school-admin.students.toast.studentUpdated":"\u062A\u0645 \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0637\u0627\u0644\u0628 \u0628\u0646\u062C\u0627\u062D!","school-admin.students.toast.studentDeleted":"\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u0637\u0627\u0644\u0628 \u0628\u0646\u062C\u0627\u062D.","school-admin.students.deleteConfirmation":"\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0623\u0646\u0643 \u062A\u0631\u064A\u062F \u062D\u0630\u0641 \u0647\u0630\u0627 \u0627\u0644\u0637\u0627\u0644\u0628\u061F","school-admin.students.toast.inviteSent":"\u062A\u0645 \u0625\u0631\u0633\u0627\u0644 \u062F\u0639\u0648\u0629 \u0648\u0644\u064A \u0627\u0644\u0623\u0645\u0631 \u0625\u0644\u0649 {{phone}}!","school-admin.students.noStudents":"\u0644\u0627 \u064A\u0648\u062C\u062F \u0637\u0644\u0627\u0628 \u0645\u0633\u062C\u0644\u0648\u0646 \u0641\u064A \u0645\u062F\u0631\u0633\u062A\u0643.","school-admin.classes.title":"\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0641\u0635\u0648\u0644","school-admin.classes.add":"\u0625\u0636\u0627\u0641\u0629 \u0641\u0635\u0644 \u062C\u062F\u064A\u062F","school-admin.classes.addTitle":"\u0625\u0636\u0627\u0641\u0629 \u0641\u0635\u0644 \u062C\u062F\u064A\u062F","school-admin.classes.addButton":"\u0625\u0636\u0627\u0641\u0629 \u0641\u0635\u0644","school-admin.classes.existing":"\u0627\u0644\u0641\u0635\u0648\u0644 \u0627\u0644\u062D\u0627\u0644\u064A\u0629","school-admin.classes.name":"\u0627\u0633\u0645 \u0627\u0644\u0641\u0635\u0644","school-admin.classes.toast.classAdded":"\u062A\u0645\u062A \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0641\u0635\u0644 \u0628\u0646\u062C\u0627\u062D!","school-admin.classes.toast.classDeleted":"\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u0641\u0635\u0644 \u0628\u0646\u062C\u0627\u062D.","school-admin.classes.deleteConfirmation":"\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u062D\u0630\u0641 \u0647\u0630\u0627 \u0627\u0644\u0641\u0635\u0644\u061F \u0642\u062F \u064A\u0624\u062F\u064A \u0647\u0630\u0627 \u0625\u0644\u0649 \u0625\u0644\u063A\u0627\u0621 \u062A\u0639\u064A\u064A\u0646 \u0627\u0644\u0637\u0644\u0627\u0628 \u0648\u0627\u0644\u0645\u0639\u0644\u0645\u064A\u0646.","school-admin.classes.noClasses":"\u0644\u0627 \u062A\u0648\u062C\u062F \u0641\u0635\u0648\u0644 \u0645\u0633\u062C\u0644\u0629 \u0641\u064A \u0645\u062F\u0631\u0633\u062A\u0643.","school-admin.settings.title":"\u0625\u0639\u062F\u0627\u062F\u0627\u062A \u0627\u0644\u0645\u062F\u0631\u0633\u0629","school-admin.settings.location":"\u0645\u0648\u0642\u0639 \u0627\u0644\u0645\u062F\u0631\u0633\u0629","school-admin.settings.searchPlaceholder":"\u0627\u0644\u0628\u062D\u062B \u0639\u0646 \u0645\u0648\u0642\u0639...","school-admin.settings.markerInstruction":"\u0627\u0633\u062D\u0628 \u0627\u0644\u0639\u0644\u0627\u0645\u0629 \u0644\u062A\u062D\u062F\u064A\u062F \u0645\u0648\u0642\u0639 \u0627\u0644\u0645\u062F\u0631\u0633\u0629 \u0628\u062F\u0642\u0629.","school-admin.settings.centerOnMe":"\u062A\u0648\u0633\u064A\u0637 \u0627\u0644\u062E\u0631\u064A\u0637\u0629 \u0639\u0644\u0649 \u0645\u0648\u0642\u0639\u064A","school-admin.settings.saveLocation":"\u062D\u0641\u0638 \u0627\u0644\u0645\u0648\u0642\u0639","school-admin.settings.centerButton":"\u062A\u0648\u0633\u064A\u0637 \u0639\u0644\u0649 \u0645\u0648\u0642\u0639\u064A","school-admin.settings.saveButton":"\u062D\u0641\u0638 \u0627\u0644\u0645\u0648\u0642\u0639","school-admin.settings.toast.locationSet":"\u062A\u0645 \u062A\u062D\u062F\u064A\u062B \u0645\u0648\u0642\u0639 \u0627\u0644\u0645\u062F\u0631\u0633\u0629 \u0628\u0646\u062C\u0627\u062D!","school-admin.settings.mapsNotConfigured.title":"\u0627\u0644\u062E\u0631\u0627\u0626\u0637 \u063A\u064A\u0631 \u0645\u0647\u064A\u0623\u0629","school-admin.settings.mapsNotConfigured.description":"\u062E\u062F\u0645\u0629 \u0627\u0644\u062E\u0631\u0627\u0626\u0637 \u0647\u0630\u0647 \u0644\u0627 \u062A\u062A\u0637\u0644\u0628 \u0645\u0641\u062A\u0627\u062D API.","school-admin.settings.pickupZones.title":"\u0645\u0646\u0627\u0637\u0642 \u0627\u0644\u0627\u0633\u062A\u0644\u0627\u0645","school-admin.settings.pickupZones.description":"\u0642\u0645 \u0628\u0625\u0639\u062F\u0627\u062F \u0645\u0646\u0627\u0637\u0642 \u0645\u0633\u0645\u0627\u0629 \u0648\u0639\u062F\u062F \u0645\u0648\u0627\u0642\u0641 \u0627\u0644\u0627\u0633\u062A\u0644\u0627\u0645 \u0641\u064A \u0643\u0644 \u0645\u0646\u0637\u0642\u0629.","school-admin.settings.pickupZones.addZone":"\u0625\u0636\u0627\u0641\u0629 \u0645\u0646\u0637\u0642\u0629 \u062C\u062F\u064A\u062F\u0629","school-admin.settings.pickupZones.zoneName":"\u0627\u0633\u0645 \u0627\u0644\u0645\u0646\u0637\u0642\u0629 (\u0645\u062B\u0627\u0644: \u0623, \u0628, 1, 2)","school-admin.settings.pickupZones.spotCount":"\u0639\u062F\u062F \u0627\u0644\u0645\u0648\u0627\u0642\u0641","school-admin.settings.pickupZones.addButton":"\u0625\u0636\u0627\u0641\u0629 \u0645\u0646\u0637\u0642\u0629","school-admin.settings.pickupZones.existing":"\u0627\u0644\u0645\u0646\u0627\u0637\u0642 \u0627\u0644\u062D\u0627\u0644\u064A\u0629","school-admin.settings.pickupZones.deleteConfirmation":"\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u062D\u0630\u0641 \u0647\u0630\u0647 \u0627\u0644\u0645\u0646\u0637\u0642\u0629\u061F","school-admin.settings.pickupZones.toast.zoneAdded":"\u062A\u0645\u062A \u0625\u0636\u0627\u0641\u0629 \u0645\u0646\u0637\u0642\u0629 \u0627\u0644\u0627\u0633\u062A\u0644\u0627\u0645 \u0628\u0646\u062C\u0627\u062D!","school-admin.settings.pickupZones.toast.zoneDeleted":"\u062A\u0645 \u062D\u0630\u0641 \u0645\u0646\u0637\u0642\u0629 \u0627\u0644\u0627\u0633\u062A\u0644\u0627\u0645 \u0628\u0646\u062C\u0627\u062D!","school-admin.settings.pickupZones.noZones":"\u0644\u0645 \u064A\u062A\u0645 \u062A\u0643\u0648\u064A\u0646 \u0623\u064A \u0645\u0646\u0627\u0637\u0642 \u0627\u0633\u062A\u0644\u0627\u0645 \u0628\u0639\u062F.","analytics.title":"\u0644\u0648\u062D\u0629 \u0627\u0644\u062A\u062D\u0644\u064A\u0644\u0627\u062A","analytics.description":"\u0646\u0638\u0631\u0629 \u0639\u0644\u0649 \u0623\u0646\u0634\u0637\u0629 \u0627\u0644\u0627\u0633\u062A\u0644\u0627\u0645 \u0627\u0644\u064A\u0648\u0645.","analytics.totalPickups":"\u0645\u062C\u0645\u0648\u0639 \u0627\u0644\u0627\u0633\u062A\u0644\u0627\u0645 \u0627\u0644\u064A\u0648\u0645","analytics.avgTime":"\u0645\u062A\u0648\u0633\u0637 \u0648\u0642\u062A \u0627\u0644\u0627\u0633\u062A\u0644\u0627\u0645","analytics.minutes":"\u062F\u0642\u064A\u0642\u0629","analytics.peakHour":"\u0633\u0627\u0639\u0629 \u0627\u0644\u0630\u0631\u0648\u0629","analytics.absencesToday":"\u0627\u0644\u063A\u064A\u0627\u0628 \u0627\u0644\u064A\u0648\u0645","analytics.pickupsByHour":"\u0627\u0644\u0627\u0633\u062A\u0644\u0627\u0645 \u062D\u0633\u0628 \u0627\u0644\u0633\u0627\u0639\u0629","analytics.noData":"\u0644\u0627 \u062A\u0648\u062C\u062F \u0628\u064A\u0627\u0646\u0627\u062A \u0643\u0627\u0641\u064A\u0629 \u0644\u0639\u0631\u0636 \u0627\u0644\u0631\u0633\u0645 \u0627\u0644\u0628\u064A\u0627\u0646\u064A.","analytics.statusDistribution":"\u062D\u0627\u0644\u0629 \u0627\u0644\u0637\u0644\u0628\u0627\u062A \u0627\u0644\u0646\u0634\u0637\u0629","busManagement.description":"\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u062D\u0627\u0641\u0644\u0627\u062A \u0627\u0644\u0645\u062F\u0631\u0633\u064A\u0629 \u0648\u0627\u0644\u0633\u0627\u0626\u0642\u064A\u0646 \u0648\u062A\u0639\u064A\u064A\u0646\u0627\u062A \u0627\u0644\u0637\u0644\u0627\u0628.","busManagement.addTitle":"\u0625\u0636\u0627\u0641\u0629 \u062D\u0627\u0641\u0644\u0629 \u062C\u062F\u064A\u062F\u0629","busManagement.editTitle":"\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u062D\u0627\u0641\u0644\u0629","busManagement.busNumber":"\u0631\u0642\u0645 \u0627\u0644\u062D\u0627\u0641\u0644\u0629 / \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u0627\u0631","busManagement.driverName":"\u0627\u0633\u0645 \u0627\u0644\u0633\u0627\u0626\u0642","busManagement.addButton":"\u0625\u0636\u0627\u0641\u0629 \u062D\u0627\u0641\u0644\u0629","busManagement.existing":"\u0627\u0644\u062D\u0627\u0641\u0644\u0627\u062A \u0627\u0644\u062D\u0627\u0644\u064A\u0629","busManagement.assignedStudents":"\u0627\u0644\u0637\u0644\u0627\u0628 \u0627\u0644\u0645\u0633\u062C\u0644\u0648\u0646","busManagement.assignStudents":"\u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u0637\u0644\u0627\u0628","busManagement.noBuses":"\u0644\u0627 \u062A\u0648\u062C\u062F \u062D\u0627\u0641\u0644\u0627\u062A \u0645\u0633\u062C\u0644\u0629 \u0641\u064A \u0645\u062F\u0631\u0633\u062A\u0643.","busManagement.assignStudentsTo":"\u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u0637\u0644\u0627\u0628 \u0641\u064A","busManagement.availableStudents":"\u0627\u0644\u0637\u0644\u0627\u0628 \u0627\u0644\u0645\u062A\u0627\u062D\u0648\u0646","activityManagement.description":"\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0623\u0646\u0634\u0637\u0629 \u0627\u0644\u0644\u0627\u0635\u0641\u064A\u0629 \u0648\u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u0637\u0644\u0627\u0628.","activityManagement.addTitle":"\u0625\u0636\u0627\u0641\u0629 \u0646\u0634\u0627\u0637 \u062C\u062F\u064A\u062F","activityManagement.editTitle":"\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0646\u0634\u0627\u0637","activityManagement.name":"\u0627\u0633\u0645 \u0627\u0644\u0646\u0634\u0627\u0637","activityManagement.supervisor":"\u0627\u0644\u0645\u0634\u0631\u0641 (\u0645\u0639\u0644\u0645)","activityManagement.selectSupervisor":"\u0627\u062E\u062A\u0631 \u0645\u0639\u0644\u0645\u0627\u064B","activityManagement.startTime":"\u0648\u0642\u062A \u0627\u0644\u0628\u062F\u0621","activityManagement.endTime":"\u0648\u0642\u062A \u0627\u0644\u0627\u0646\u062A\u0647\u0627\u0621","activityManagement.location":"\u0627\u0644\u0645\u0643\u0627\u0646","activityManagement.addButton":"\u0625\u0636\u0627\u0641\u0629 \u0646\u0634\u0627\u0637","activityManagement.existing":"\u0627\u0644\u0623\u0646\u0634\u0637\u0629 \u0627\u0644\u062D\u0627\u0644\u064A\u0629","activityManagement.assignedStudents":"\u0627\u0644\u0637\u0644\u0627\u0628 \u0627\u0644\u0645\u0633\u062C\u0644\u0648\u0646","activityManagement.assignStudents":"\u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u0637\u0644\u0627\u0628","activityManagement.noActivities":"\u0644\u0627 \u062A\u0648\u062C\u062F \u0623\u0646\u0634\u0637\u0629 \u0645\u0633\u062C\u0644\u0629 \u0641\u064A \u0645\u062F\u0631\u0633\u062A\u0643.","activityManagement.toast.added":"\u062A\u0645\u062A \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0646\u0634\u0627\u0637 \u0628\u0646\u062C\u0627\u062D!","activityManagement.toast.updated":"\u062A\u0645 \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0646\u0634\u0627\u0637 \u0628\u0646\u062C\u0627\u062D!","activityManagement.toast.deleted":"\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u0646\u0634\u0627\u0637 \u0628\u0646\u062C\u0627\u062D.","activityManagement.deleteConfirmation":"\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0623\u0646\u0643 \u062A\u0631\u064A\u062F \u062D\u0630\u0641 \u0647\u0630\u0627 \u0627\u0644\u0646\u0634\u0627\u0637\u061F","activityManagement.assignStudentsTo":"\u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u0637\u0644\u0627\u0628 \u0641\u064A","activityManagement.availableStudents":"\u0627\u0644\u0637\u0644\u0627\u0628 \u0627\u0644\u0645\u062A\u0627\u062D\u0648\u0646","activityManagement.toast.assignmentsUpdated":"\u062A\u0645 \u062A\u062D\u062F\u064A\u062B \u062A\u0633\u062C\u064A\u0644\u0627\u062A \u0627\u0644\u0637\u0644\u0627\u0628 \u0628\u0646\u062C\u0627\u062D!","super-admin.title":"\u0644\u0648\u062D\u0629 \u062A\u062D\u0643\u0645 \u0627\u0644\u0645\u062F\u064A\u0631 \u0627\u0644\u0639\u0627\u0645","super-admin.tabs.schools":"\u0627\u0644\u0645\u062F\u0627\u0631\u0633","super-admin.tabs.accounts":"\u062D\u0633\u0627\u0628\u0627\u062A \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645\u064A\u0646","schoolManagement.title":"\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0645\u062F\u0627\u0631\u0633","schoolManagement.existingSchools":"\u0627\u0644\u0645\u062F\u0627\u0631\u0633 \u0627\u0644\u062D\u0627\u0644\u064A\u0629","schoolManagement.addSchool":"\u0625\u0636\u0627\u0641\u0629 \u0645\u062F\u0631\u0633\u0629 \u062C\u062F\u064A\u062F\u0629","schoolManagement.schoolName":"\u0627\u0633\u0645 \u0627\u0644\u0645\u062F\u0631\u0633\u0629","schoolManagement.adminName":"\u0627\u0633\u0645 \u0627\u0644\u0645\u062F\u064A\u0631","schoolManagement.adminEmail":"\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A \u0644\u0644\u0645\u062F\u064A\u0631","schoolManagement.saveSchool":"\u062D\u0641\u0638 \u0627\u0644\u0645\u062F\u0631\u0633\u0629","schoolManagement.cancel":"\u0625\u0644\u063A\u0627\u0621","schoolManagement.edit":"\u062A\u0639\u062F\u064A\u0644","schoolManagement.delete":"\u062D\u0630\u0641","schoolManagement.deleteConfirmationTitle":"\u062D\u0630\u0641 \u0627\u0644\u0645\u062F\u0631\u0633\u0629","schoolManagement.deleteConfirmationText":"\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0623\u0646\u0643 \u062A\u0631\u064A\u062F \u062D\u0630\u0641 \u0647\u0630\u0647 \u0627\u0644\u0645\u062F\u0631\u0633\u0629\u061F \u0633\u064A\u0624\u062F\u064A \u0630\u0644\u0643 \u0623\u064A\u0636\u064B\u0627 \u0625\u0644\u0649 \u062D\u0630\u0641 \u062D\u0633\u0627\u0628 \u0627\u0644\u0645\u0633\u0624\u0648\u0644 \u0627\u0644\u0645\u0631\u062A\u0628\u0637 \u0648\u062C\u0645\u064A\u0639 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A \u0630\u0627\u062A \u0627\u0644\u0635\u0644\u0629 (\u0627\u0644\u0641\u0635\u0648\u0644\u060C \u0627\u0644\u0637\u0644\u0627\u0628\u060C \u0627\u0644\u0637\u0644\u0628\u0627\u062A\u060C \u0625\u0644\u062E). \u0644\u0627 \u064A\u0645\u0643\u0646 \u0627\u0644\u062A\u0631\u0627\u062C\u0639 \u0639\u0646 \u0647\u0630\u0627 \u0627\u0644\u0625\u062C\u0631\u0627\u0621.","schoolManagement.addTitle":"\u0625\u0636\u0627\u0641\u0629 \u0645\u062F\u0631\u0633\u0629 \u062C\u062F\u064A\u062F\u0629","schoolManagement.editTitle":"\u062A\u0639\u062F\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0645\u062F\u0631\u0633\u0629","schoolManagement.createButton":"\u0625\u0646\u0634\u0627\u0621 \u0645\u062F\u0631\u0633\u0629","schoolManagement.actions":"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A","schoolManagement.toast.schoolAdded":"\u062A\u0645\u062A \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u062F\u0631\u0633\u0629 \u0648\u0627\u0644\u0645\u0633\u0624\u0648\u0644 \u0628\u0646\u062C\u0627\u062D!","schoolManagement.toast.schoolUpdated":"\u062A\u0645 \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0645\u062F\u0631\u0633\u0629 \u0648\u0627\u0644\u0645\u0633\u0624\u0648\u0644 \u0628\u0646\u062C\u0627\u062D!","schoolManagement.toast.schoolDeleted":"\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u0645\u062F\u0631\u0633\u0629 \u0648\u0627\u0644\u0645\u0633\u0624\u0648\u0644 \u0628\u0646\u062C\u0627\u062D!","schoolManagement.noSchools":"\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0639\u062B\u0648\u0631 \u0639\u0644\u0649 \u0645\u062F\u0627\u0631\u0633. \u0623\u0636\u0641 \u0645\u062F\u0631\u0633\u0629 \u062C\u062F\u064A\u062F\u0629 \u0623\u0639\u0644\u0627\u0647.","super-admin.accountManagement.title":"\u0625\u062F\u0627\u0631\u0629 \u062D\u0633\u0627\u0628\u0627\u062A \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645\u064A\u0646","super-admin.accountManagement.description":"\u0625\u062F\u0627\u0631\u0629 \u062C\u0645\u064A\u0639 \u062D\u0633\u0627\u0628\u0627\u062A \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645\u064A\u0646 \u0639\u0628\u0631 \u062C\u0645\u064A\u0639 \u0627\u0644\u0645\u062F\u0627\u0631\u0633.","super-admin.accountManagement.searchPlaceholder":"\u0627\u0644\u0628\u062D\u062B \u0628\u0627\u0644\u0627\u0633\u0645\u060C \u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A\u060C \u0623\u0648 \u0627\u0644\u0645\u062F\u0631\u0633\u0629","super-admin.accountManagement.name":"\u0627\u0644\u0627\u0633\u0645","super-admin.accountManagement.email":"\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A","super-admin.accountManagement.role":"\u0627\u0644\u062F\u0648\u0631","super-admin.accountManagement.school":"\u0627\u0644\u0645\u062F\u0631\u0633\u0629","super-admin.accountManagement.class":"\u0627\u0644\u0641\u0635\u0644","super-admin.accountManagement.edit":"\u062A\u0639\u062F\u064A\u0644","super-admin.accountManagement.delete":"\u062D\u0630\u0641","super-admin.accountManagement.save":"\u062D\u0641\u0638 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645","super-admin.accountManagement.cancel":"\u0625\u0644\u063A\u0627\u0621","super-admin.accountManagement.editTitle":"\u062A\u0639\u062F\u064A\u0644 \u062D\u0633\u0627\u0628 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645","super-admin.accountManagement.actions":"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A","super-admin.accountManagement.deleteConfirmationTitle":"\u062D\u0630\u0641 \u062D\u0633\u0627\u0628 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645","super-admin.accountManagement.deleteConfirmationText":"\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0623\u0646\u0643 \u062A\u0631\u064A\u062F \u062D\u0630\u0641 \u062D\u0633\u0627\u0628 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645 \u0647\u0630\u0627\u061F \u0625\u0630\u0627 \u0643\u0627\u0646 \u0647\u0630\u0627 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645 \u0647\u0648 \u0645\u062F\u064A\u0631 \u0645\u062F\u0631\u0633\u0629\u060C \u0641\u0633\u064A\u062A\u0645 \u062D\u0630\u0641 \u062C\u0645\u064A\u0639 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0645\u0631\u062A\u0628\u0637\u0629 \u0628\u0645\u062F\u0631\u0633\u062A\u0647 \u0623\u064A\u0636\u064B\u0627.","super-admin.accountManagement.deleteAdminWarning":"\u062A\u062D\u0630\u064A\u0631: \u062D\u0630\u0641 \u0645\u062F\u064A\u0631 \u0645\u062F\u0631\u0633\u0629 \u0633\u064A\u0624\u062F\u064A \u0625\u0644\u0649 \u062D\u0630\u0641 \u0645\u062F\u0631\u0633\u062A\u0647 \u0648\u062C\u0645\u064A\u0639 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0645\u0631\u062A\u0628\u0637\u0629 \u0628\u0647\u0627 (\u0627\u0644\u0641\u0635\u0648\u0644\u060C \u0627\u0644\u0637\u0644\u0627\u0628\u060C \u0627\u0644\u0637\u0644\u0628\u0627\u062A\u060C \u0625\u0644\u062E).","super-admin.accountManagement.toast.userUpdated":"\u062A\u0645 \u062A\u062D\u062F\u064A\u062B \u062D\u0633\u0627\u0628 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645 \u0628\u0646\u062C\u0627\u062D!","super-admin.accountManagement.toast.userDeleted":"\u062A\u0645 \u062D\u0630\u0641 \u062D\u0633\u0627\u0628 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645 \u0628\u0646\u062C\u0627\u062D!","super-admin.accountManagement.noUsersFound":"\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0639\u062B\u0648\u0631 \u0639\u0644\u0649 \u062D\u0633\u0627\u0628\u0627\u062A \u0645\u0633\u062A\u062E\u062F\u0645\u064A\u0646 \u0645\u0637\u0627\u0628\u0642\u0629 \u0644\u0628\u062D\u062B\u0643.","broadcast.title":"\u0625\u0631\u0633\u0627\u0644 \u0625\u0639\u0644\u0627\u0646","broadcast.description":"\u0623\u0631\u0633\u0644 \u0631\u0633\u0627\u0644\u0629 \u0644\u062C\u0645\u064A\u0639 \u0623\u0648\u0644\u064A\u0627\u0621 \u0627\u0644\u0623\u0645\u0648\u0631 \u0641\u064A \u0627\u0644\u0645\u062F\u0631\u0633\u0629.","broadcast.placeholder":"\u0627\u0643\u062A\u0628 \u0631\u0633\u0627\u0644\u062A\u0643 \u0647\u0646\u0627...","broadcast.sendButton":"\u0625\u0631\u0633\u0627\u0644 \u0627\u0644\u0625\u0639\u0644\u0627\u0646","broadcast.toast.sent":"\u062A\u0645 \u0625\u0631\u0633\u0627\u0644 \u0627\u0644\u0625\u0639\u0644\u0627\u0646 \u0628\u0646\u062C\u0627\u062D!","statuses.pending":"\u0645\u0639\u0644\u0642","statuses.acknowledged":"\u062A\u0645 \u0627\u0644\u0627\u0633\u062A\u0644\u0627\u0645","statuses.arrived":"\u0648\u0635\u0644","statuses.ready":"\u062C\u0627\u0647\u0632 \u0644\u0644\u0627\u0633\u062A\u0644\u0627\u0645","statuses.completed":"\u0627\u0643\u062A\u0645\u0644"}}}translate(e,n={}){let o=this.language(),i=this.translations[o]?.[e]||e;for(let[r,s]of Object.entries(n))i=i.replace(new RegExp(`{{${r}}}`,"g"),s);return i}setLanguage(e){this.language.set(e)}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"})}};var de=class t{constructor(){this.schoolDataService=w(Ee);this.toastService=w(ue);this.translationService=w(X);this.currentUser=R(null);this.currentUserSchool=R(null);this.hasSelectedRole=R(!1)}async loginWithCredentials(e,n){let o=e.toLowerCase(),i=this.schoolDataService.users().find(r=>(r.email?.toLowerCase()===o||r.phone===e)&&r.password===n);if(i){if(this.currentUser.set(i),i.schoolId){let r=this.schoolDataService.getSchoolById(i.schoolId);this.currentUserSchool.set(r??null)}else this.currentUserSchool.set(null);return this.hasSelectedRole.set(!1),this.toastService.show(this.translationService.translate("login.toast.success",{role:i.role}),"success"),!0}else return!1}async logout(){this.currentUser.set(null),this.currentUserSchool.set(null),this.hasSelectedRole.set(!1)}completeRoleSelection(){this.hasSelectedRole.set(!0)}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"})}};var oe=class t{constructor(){this.translationService=w(X)}transform(e,n={}){return this.translationService.translate(e,n)}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275pipe=Zd({name:"translate",type:t,pure:!0})}};var Qs=class t{constructor(){this.translationService=w(X)}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=ee({type:t,selectors:[["app-splash-screen"]],decls:18,vars:3,consts:[[1,"splash-screen-container-global"],["viewBox","0 0 64 64","xmlns","http://www.w3.org/2000/svg",1,"logo-svg"],["id","logo-gradient","x1","0%","y1","0%","x2","100%","y2","100%"],["offset","0%",1,"logo-gradient-start"],["offset","100%",1,"logo-gradient-end"],["fill","url(#logo-gradient)","d","M4,60 V28 L32,4 L60,28 V60 H4 Z"],["fill-opacity","0.3","d","M29,60 V46 h6 v14 Z",1,"logo-inner-shadow"],["x","14","y","36","width","8","height","8","rx","2","fill-opacity","0.3",1,"logo-inner-shadow"],["x","42","y","36","width","8","height","8","rx","2","fill-opacity","0.3",1,"logo-inner-shadow"],["cx","32","cy","18","r","4","fill-opacity","0.3",1,"logo-inner-shadow"],["transform","translate(10, 5)"],["cx","46","cy","38","r","5","fill","white"],["d","M40,55 V45 C40,43 42,43 42,43 H50 C50,43 52,43 52,45 V55 Z","fill","white"],[1,"splash-welcome-message"],[1,"loading-spinner-global"]],template:function(n,o){n&1&&(x(0,"div",0),U(),x(1,"svg",1)(2,"defs")(3,"linearGradient",2),ve(4,"stop",3)(5,"stop",4),P()(),ve(6,"path",5)(7,"path",6)(8,"rect",7)(9,"rect",8)(10,"circle",9),x(11,"g",10),ve(12,"circle",11)(13,"path",12),P()(),J(),x(14,"h1",13),h(15),y(16,"translate"),P(),ve(17,"div",14),P()),n&2&&(p(15),N(" ",C(16,1,"splash.welcomeMessage")," "))},dependencies:[oe],styles:["@keyframes _ngcontent-%COMP%_fade-in-slow{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}@keyframes _ngcontent-%COMP%_logo-pulse{0%,to{transform:scale(1)}50%{transform:scale(1.05)}}.splash-screen-container-global[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;animation:_ngcontent-%COMP%_fade-in-slow 1s ease-out forwards;gap:1.5rem}.logo-svg[_ngcontent-%COMP%]{width:8rem;height:8rem;animation:_ngcontent-%COMP%_logo-pulse 3s infinite ease-in-out;filter:drop-shadow(0 10px 8px rgba(0,0,0,.2)) drop-shadow(0 4px 3px rgba(0,0,0,.1))}.logo-gradient-start[_ngcontent-%COMP%]{stop-color:var(--color-cyan-400)}.logo-gradient-end[_ngcontent-%COMP%]{stop-color:var(--color-cyan-600)}.logo-inner-shadow[_ngcontent-%COMP%]{fill:var(--color-slate-950)}.logo-person[_ngcontent-%COMP%]{fill:#fff}.splash-welcome-message[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:var(--color-slate-200);text-align:center;max-width:90%}@media(min-width:640px){.splash-welcome-message[_ngcontent-%COMP%]{font-size:1.875rem}}.loading-spinner-global[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;border:4px solid var(--color-slate-600);border-top-color:var(--color-cyan-400);border-radius:9999px;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-top:1rem}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"],changeDetection:0})}};var g0=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,o){this._renderer=n,this._elementRef=o}setProperty(n,o){this._renderer.setProperty(this._elementRef.nativeElement,n,o)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(o){return new(o||t)(Pe(kn),Pe(tn))};static \u0275dir=Ze({type:t})}return t})(),aa=(()=>{class t extends g0{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Nn(t)))(i||t)}})();static \u0275dir=Ze({type:t,features:[ct]})}return t})(),ir=new ge("");var DS={provide:ir,useExisting:ft(()=>Me),multi:!0};function AS(){let t=hn()?hn().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var NS=new ge(""),Me=(()=>{class t extends g0{_compositionMode;_composing=!1;constructor(n,o,i){super(n,o),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!AS())}writeValue(n){let o=n??"";this.setProperty("value",o)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(o){return new(o||t)(Pe(kn),Pe(tn),Pe(NS,8))};static \u0275dir=Ze({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(o,i){o&1&&M("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[on([DS]),ct]})}return t})();function kS(t){return t==null||RS(t)===0}function RS(t){return t==null?null:Array.isArray(t)||typeof t=="string"?t.length:t instanceof Set?t.size:null}var la=new ge(""),h0=new ge("");function OS(t){return e=>{if(e.value==null||t==null)return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function FS(t){return kS(t.value)?{required:!0}:null}function s0(t){return null}function v0(t){return t!=null}function _0(t){return Ui(t)?wl(t):t}function y0(t){let e={};return t.forEach(n=>{e=n!=null?B(B({},e),n):e}),Object.keys(e).length===0?null:e}function C0(t,e){return e.map(n=>n(t))}function VS(t){return!t.validate}function b0(t){return t.map(e=>VS(e)?e:n=>e.validate(n))}function LS(t){if(!t)return null;let e=t.filter(v0);return e.length==0?null:function(n){return y0(C0(n,e))}}function Eu(t){return t!=null?LS(b0(t)):null}function BS(t){if(!t)return null;let e=t.filter(v0);return e.length==0?null:function(n){let o=C0(n,e).map(_0);return xl(o).pipe(Hn(y0))}}function Mu(t){return t!=null?BS(b0(t)):null}function a0(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function US(t){return t._rawValidators}function HS(t){return t._rawAsyncValidators}function bu(t){return t?Array.isArray(t)?t:[t]:[]}function ea(t,e){return Array.isArray(t)?t.includes(e):t===e}function l0(t,e){let n=bu(e);return bu(t).forEach(i=>{ea(n,i)||n.push(i)}),n}function c0(t,e){return bu(e).filter(n=>!ea(t,n))}var ta=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Eu(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Mu(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},$o=class extends ta{name;get formDirective(){return null}get path(){return null}},or=class extends ta{_parent=null;name=null;valueAccessor=null},na=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var De=(()=>{class t extends na{constructor(n){super(n)}static \u0275fac=function(o){return new(o||t)(Pe(or,2))};static \u0275dir=Ze({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(o,i){o&2&&j("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[ct]})}return t})(),Fe=(()=>{class t extends na{constructor(n){super(n)}static \u0275fac=function(o){return new(o||t)(Pe($o,10))};static \u0275dir=Ze({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["","formArray",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(o,i){o&2&&j("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[ct]})}return t})();var Qi="VALID",Xs="INVALID",Go="PENDING",Xi="DISABLED",Rn=class{},oa=class extends Rn{value;source;constructor(e,n){super(),this.value=e,this.source=n}},tr=class extends Rn{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}},nr=class extends Rn{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}},qo=class extends Rn{status;source;constructor(e,n){super(),this.status=e,this.source=n}},Su=class extends Rn{source;constructor(e){super(),this.source=e}},ia=class extends Rn{source;constructor(e){super(),this.source=e}};function S0(t){return(ca(t)?t.validators:t)||null}function GS(t){return Array.isArray(t)?Eu(t):t||null}function E0(t,e){return(ca(e)?e.asyncValidators:t)||null}function qS(t){return Array.isArray(t)?Mu(t):t||null}function ca(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function $S(t,e,n){let o=t.controls;if(!(e?Object.keys(o):o).length)throw new ie(1e3,"");if(!o[n])throw new ie(1001,"")}function zS(t,e,n){t._forEachChild((o,i)=>{if(n[i]===void 0)throw new ie(1002,"")})}var ra=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return kt(this.statusReactive)}set status(e){kt(()=>this.statusReactive.set(e))}_status=H(()=>this.statusReactive());statusReactive=R(void 0);get valid(){return this.status===Qi}get invalid(){return this.status===Xs}get pending(){return this.status==Go}get disabled(){return this.status===Xi}get enabled(){return this.status!==Xi}errors;get pristine(){return kt(this.pristineReactive)}set pristine(e){kt(()=>this.pristineReactive.set(e))}_pristine=H(()=>this.pristineReactive());pristineReactive=R(!0);get dirty(){return!this.pristine}get touched(){return kt(this.touchedReactive)}set touched(e){kt(()=>this.touchedReactive.set(e))}_touched=H(()=>this.touchedReactive());touchedReactive=R(!1);get untouched(){return!this.touched}_events=new xt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(l0(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(l0(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(c0(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(c0(e,this._rawAsyncValidators))}hasValidator(e){return ea(this._rawValidators,e)}hasAsyncValidator(e){return ea(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let o=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(z(B({},e),{sourceControl:o})),n&&e.emitEvent!==!1&&this._events.next(new nr(!0,o))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let o=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:o})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,o),n&&e.emitEvent!==!1&&this._events.next(new nr(!1,o))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let o=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(z(B({},e),{sourceControl:o})),n&&e.emitEvent!==!1&&this._events.next(new tr(!1,o))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let o=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,o),n&&e.emitEvent!==!1&&this._events.next(new tr(!0,o))}markAsPending(e={}){this.status=Go;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new qo(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(z(B({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Xi,this.errors=null,this._forEachChild(i=>{i.disable(z(B({},e),{onlySelf:!0}))}),this._updateValue();let o=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new oa(this.value,o)),this._events.next(new qo(this.status,o)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(z(B({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Qi,this._forEachChild(o=>{o.enable(z(B({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(z(B({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(o=>o(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let o=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Qi||this.status===Go)&&this._runAsyncValidator(o,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new oa(this.value,n)),this._events.next(new qo(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(z(B({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Xi:Qi}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=Go,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:e!==!1};let o=_0(this.asyncValidator(this));this._asyncValidationSubscription=o.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((o,i)=>o&&o._find(i),this)}getError(e,n){let o=n?this.get(n):this;return o&&o.errors?o.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,o){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||o)&&this._events.next(new qo(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,o)}_initObservables(){this.valueChanges=new at,this.statusChanges=new at}_calculateStatus(){return this._allControlsDisabled()?Xi:this.errors?Xs:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Go)?Go:this._anyControlsHaveStatus(Xs)?Xs:Qi}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let o=!this._anyControlsDirty(),i=this.pristine!==o;this.pristine=o,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new tr(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new nr(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ca(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=GS(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=qS(this._rawAsyncValidators)}},sa=class extends ra{constructor(e,n,o){super(S0(n),E0(o,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,o={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,o={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){zS(this,!0,e),Object.keys(e).forEach(o=>{$S(this,!0,o),this.controls[o].setValue(e[o],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(o=>{let i=this.controls[o];i&&i.patchValue(e[o],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((o,i)=>{o.reset(e?e[i]:null,z(B({},n),{onlySelf:!0}))}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n),n?.emitEvent!==!1&&this._events.next(new ia(this))}getRawValue(){return this._reduceChildren({},(e,n,o)=>(e[o]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,o)=>o._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let o=this.controls[n];o&&e(o,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,o]of Object.entries(this.controls))if(this.contains(n)&&e(o))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,o,i)=>((o.enabled||this.disabled)&&(n[i]=o.value),n))}_reduceChildren(e,n){let o=e;return this._forEachChild((i,r)=>{o=n(o,i,r)}),o}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var wu=new ge("",{factory:()=>xu}),xu="always";function WS(t,e){return[...e.path,t]}function M0(t,e,n=xu){w0(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),JS(t,e),ZS(t,e),jS(t,e),YS(t,e)}function d0(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function YS(t,e){if(e.valueAccessor.setDisabledState){let n=o=>{e.valueAccessor.setDisabledState(o)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function w0(t,e){let n=US(t);e.validator!==null?t.setValidators(a0(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let o=HS(t);e.asyncValidator!==null?t.setAsyncValidators(a0(o,e.asyncValidator)):typeof o=="function"&&t.setAsyncValidators([o]);let i=()=>t.updateValueAndValidity();d0(e._rawValidators,i),d0(e._rawAsyncValidators,i)}function JS(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&x0(t,e)})}function jS(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&x0(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function x0(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function ZS(t,e){let n=(o,i)=>{e.valueAccessor.writeValue(o),i&&e.viewToModelUpdate(o)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function KS(t,e){t==null,w0(t,e)}function QS(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function XS(t){return Object.getPrototypeOf(t.constructor)===aa}function eE(t,e){t._syncPendingControls(),e.forEach(n=>{let o=n.control;o.updateOn==="submit"&&o._pendingChange&&(n.viewToModelUpdate(o._pendingValue),o._pendingChange=!1)})}function tE(t,e){if(!e)return null;Array.isArray(e);let n,o,i;return e.forEach(r=>{r.constructor===Me?n=r:XS(r)?o=r:i=r}),i||o||n||null}var nE={provide:$o,useExisting:ft(()=>Re)},er=Promise.resolve(),Re=(()=>{class t extends $o{callSetDisabledState;get submitted(){return kt(this.submittedReactive)}_submitted=H(()=>this.submittedReactive());submittedReactive=R(!1);_directives=new Set;form;ngSubmit=new at;options;constructor(n,o,i){super(),this.callSetDisabledState=i,this.form=new sa({},Eu(n),Mu(o))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){er.then(()=>{let o=this._findContainer(n.path);n.control=o.registerControl(n.name,n.control),M0(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){er.then(()=>{let o=this._findContainer(n.path);o&&o.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){er.then(()=>{let o=this._findContainer(n.path),i=new sa({});KS(i,n),o.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){er.then(()=>{let o=this._findContainer(n.path);o&&o.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,o){er.then(()=>{this.form.get(n.path).setValue(o)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),eE(this.form,this._directives),this.ngSubmit.emit(n),this.form._events.next(new Su(this.control)),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static \u0275fac=function(o){return new(o||t)(Pe(la,10),Pe(h0,10),Pe(wu,8))};static \u0275dir=Ze({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup","",3,"formArray",""],["ng-form"],["","ngForm",""]],hostBindings:function(o,i){o&1&&M("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[on([nE]),ct]})}return t})();function u0(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function p0(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var oE=class extends ra{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,o){super(S0(n),E0(o,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ca(n)&&(n.nonNullable||n.initialValueIsDefault)&&(p0(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(o=>o(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),n.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,n?.emitEvent!==!1&&this._events.next(new ia(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){u0(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){u0(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){p0(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var iE={provide:or,useExisting:ft(()=>Ie)},f0=Promise.resolve(),Ie=(()=>{class t extends or{_changeDetectorRef;callSetDisabledState;control=new oE;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new at;constructor(n,o,i,r,s,l){super(),this._changeDetectorRef=s,this.callSetDisabledState=l,this._parent=n,this._setValidators(o),this._setAsyncValidators(i),this.valueAccessor=tE(this,r)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let o=n.name.previousValue;this.formDirective.removeControl({name:o,path:this._getPath(o)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),QS(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){M0(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){f0.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let o=n.isDisabled.currentValue,i=o!==0&&cu(o);f0.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?WS(n,this._parent):[n]}static \u0275fac=function(o){return new(o||t)(Pe($o,9),Pe(la,10),Pe(h0,10),Pe(ir,10),Pe(lu,8),Pe(wu,8))};static \u0275dir=Ze({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[on([iE]),ct,Ds]})}return t})();var Ve=(()=>{class t{static \u0275fac=function(o){return new(o||t)};static \u0275dir=Ze({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return t})(),rE={provide:ir,useExisting:ft(()=>Iu),multi:!0},Iu=(()=>{class t extends aa{writeValue(n){let o=n??"";this.setProperty("value",o)}registerOnChange(n){this.onChange=o=>{n(o==""?null:parseFloat(o))}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Nn(t)))(i||t)}})();static \u0275dir=Ze({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(o,i){o&1&&M("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[on([rE]),ct]})}return t})();var sE={provide:ir,useExisting:ft(()=>Et),multi:!0};function I0(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function aE(t){return t.split(":")[0]}var Et=(()=>{class t extends aa{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;appRefInjector=w(co).injector;destroyRef=w(Xt);cdr=w(lu);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Bd({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(n){this.cdr.markForCheck(),this.value=n;let o=this._getOptionId(n),i=I0(o,n);this.setProperty("value",i)}registerOnChange(n){this.onChange=o=>{this.value=this._getOptionValue(o),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(let o of this._optionMap.keys())if(this._compareWith(this._optionMap.get(o),n))return o;return null}_getOptionValue(n){let o=aE(n);return this._optionMap.has(o)?this._optionMap.get(o):n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Nn(t)))(i||t)}})();static \u0275dir=Ze({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(o,i){o&1&&M("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[on([sE]),ct]})}return t})(),rn=(()=>{class t{_element;_renderer;_select;id;constructor(n,o,i){this._element=n,this._renderer=o,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(n){this._select!=null&&(this._select._optionMap.set(this.id,n),this._setElementValue(I0(this.id,n)),this._select._writeValueAfterRender())}set value(n){this._setElementValue(n),this._select&&this._select._writeValueAfterRender()}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(o){return new(o||t)(Pe(tn),Pe(kn),Pe(Et,9))};static \u0275dir=Ze({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return t})(),lE={provide:ir,useExisting:ft(()=>T0),multi:!0};function m0(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function cE(t){return t.split(":")[0]}var T0=(()=>{class t extends aa{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;writeValue(n){this.value=n;let o;if(Array.isArray(n)){let i=n.map(r=>this._getOptionId(r));o=(r,s)=>{r._setSelected(i.indexOf(s.toString())>-1)}}else o=(i,r)=>{i._setSelected(!1)};this._optionMap.forEach(o)}registerOnChange(n){this.onChange=o=>{let i=[],r=o.selectedOptions;if(r!==void 0){let s=r;for(let l=0;l<s.length;l++){let d=s[l],u=this._getOptionValue(d.value);i.push(u)}}else{let s=o.options;for(let l=0;l<s.length;l++){let d=s[l];if(d.selected){let u=this._getOptionValue(d.value);i.push(u)}}}this.value=i,n(i)}}_registerOption(n){let o=(this._idCounter++).toString();return this._optionMap.set(o,n),o}_getOptionId(n){for(let o of this._optionMap.keys())if(this._compareWith(this._optionMap.get(o)._value,n))return o;return null}_getOptionValue(n){let o=cE(n);return this._optionMap.has(o)?this._optionMap.get(o)._value:n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Nn(t)))(i||t)}})();static \u0275dir=Ze({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(o,i){o&1&&M("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[on([lE]),ct]})}return t})(),sn=(()=>{class t{_element;_renderer;_select;id;_value;constructor(n,o,i){this._element=n,this._renderer=o,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){this._select!=null&&(this._value=n,this._setElementValue(m0(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(m0(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(o){return new(o||t)(Pe(tn),Pe(kn),Pe(T0,9))};static \u0275dir=Ze({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return t})();function dE(t){return typeof t=="number"?t:parseFloat(t)}var P0=(()=>{class t{_validator=s0;_onChange;_enabled;ngOnChanges(n){if(this.inputName in n){let o=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(o),this._validator=this._enabled?this.createValidator(o):s0,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}static \u0275fac=function(o){return new(o||t)};static \u0275dir=Ze({type:t,features:[Ds]})}return t})();var uE={provide:la,useExisting:ft(()=>Tu),multi:!0},Tu=(()=>{class t extends P0{min;inputName="min";normalizeInput=n=>dE(n);createValidator=n=>OS(n);static \u0275fac=(()=>{let n;return function(i){return(n||(n=Nn(t)))(i||t)}})();static \u0275dir=Ze({type:t,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(o,i){o&2&&St("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[on([uE]),ct]})}return t})(),pE={provide:la,useExisting:ft(()=>Be),multi:!0};var Be=(()=>{class t extends P0{required;inputName="required";normalizeInput=cu;createValidator=n=>FS;enabled(n){return n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Nn(t)))(i||t)}})();static \u0275dir=Ze({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(o,i){o&2&&St("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[on([pE]),ct]})}return t})();var fE=(()=>{class t{static \u0275fac=function(o){return new(o||t)};static \u0275mod=Uo({type:t});static \u0275inj=Wn({})}return t})();var Ae=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:wu,useValue:n.callSetDisabledState??xu}]}}static \u0275fac=function(o){return new(o||t)};static \u0275mod=Uo({type:t});static \u0275inj=Wn({imports:[fE]})}return t})();function mE(t,e){if(t&1&&(m(0,"p",9),h(1),g()),t&2){let n=E();p(),b(n.loginError())}}var da=class t{constructor(){this.authService=w(de);this.toastService=w(ue);this.translationService=w(X);this.identifier=R("parent@school.com");this.password=R("password");this.loginError=R("")}async handleLogin(){this.loginError.set(""),await this.authService.loginWithCredentials(this.identifier(),this.password())||this.loginError.set(this.translationService.translate("login.errors.invalidCredentials"))}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=ee({type:t,selectors:[["app-login"]],decls:25,vars:21,consts:[[1,"login-container"],[1,"login-content-wrapper"],[1,"login-header"],[1,"login-title"],[1,"login-form-group",3,"submit"],["for","identifier",1,"form-label"],["id","identifier","type","text","name","identifier","required","",1,"form-input",3,"ngModelChange","ngModel","placeholder"],["for","password",1,"form-label"],["id","password","type","password","name","password","required","",1,"form-input",3,"ngModelChange","ngModel","placeholder"],[1,"login-error-message"],[1,"form-actions-group"],["type","submit",1,"btn-primary"]],template:function(n,o){n&1&&(m(0,"div",0)(1,"div",1)(2,"div")(3,"header",2)(4,"h1",3),h(5),y(6,"translate"),g()(),m(7,"form",4),M("submit",function(){return o.handleLogin()}),m(8,"div")(9,"label",5),h(10),y(11,"translate"),g(),m(12,"input",6),y(13,"translate"),M("ngModelChange",function(r){return o.identifier.set(r)}),g()(),m(14,"div")(15,"label",7),h(16),y(17,"translate"),g(),m(18,"input",8),y(19,"translate"),M("ngModelChange",function(r){return o.password.set(r)}),g()(),O(20,mE,2,1,"p",9),m(21,"div",10)(22,"button",11),h(23),y(24,"translate"),g()()()()()()),n&2&&(p(5),N(" ",C(6,9,"login.welcomeTitle")," "),p(5),b(C(11,11,"login.emailOrPhone")),p(2),A("ngModel",o.identifier())("placeholder",C(13,13,"login.emailOrPhone")),p(4),b(C(17,15,"common.password")),p(2),A("ngModel",o.password())("placeholder",C(19,17,"login.passwordPlaceholder")),p(2),F(o.loginError()?20:-1),p(3),N(" ",C(24,19,"login.loginButton")," "))},dependencies:[Ae,Ve,Me,De,Fe,Be,Ie,Re,oe],styles:["@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.login-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;animation:_ngcontent-%COMP%_fade-in .5s ease-out forwards;width:100%}.login-content-wrapper[_ngcontent-%COMP%]{width:100%;max-width:28rem;padding:2.5rem 1.5rem;box-sizing:border-box}@media(min-width:640px){.login-content-wrapper[_ngcontent-%COMP%]{padding:3rem 2.5rem}}.login-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2.5rem}.login-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:800;color:var(--color-white)}@media(min-width:640px){.login-title[_ngcontent-%COMP%]{font-size:2.5rem}}.login-form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.25rem}.form-label[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:500;color:var(--color-slate-300);margin-bottom:.5rem}.form-input[_ngcontent-%COMP%]{width:90%;background-color:var(--color-slate-800);border:1px solid var(--color-slate-700);border-radius:.5rem;padding:.875rem 1rem;outline:none;transition:all .2s ease-in-out;border:2px solid transparent}.form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-cyan-500);background-color:var(--color-slate-900);box-shadow:0 0 0 3px #06b6d44d}.login-error-message[_ngcontent-%COMP%]{color:var(--color-red-400);font-size:.875rem;text-align:center;background-color:#dc26261a;padding:.75rem;border-radius:.5rem;border:1px solid rgba(220,38,38,.3)}.form-actions-group[_ngcontent-%COMP%]{margin-top:1rem}.btn-primary[_ngcontent-%COMP%]{width:100%;background-image:linear-gradient(to right,var(--color-cyan-500) 0%,var(--color-cyan-400) 51%,var(--color-cyan-500) 100%);background-size:200% auto;color:var(--color-white);font-weight:700;font-size:1rem;padding:.875rem 1.5rem;border-radius:.5rem;border:none;cursor:pointer;box-shadow:0 4px 14px #06b6d463;transition:background-position .3s ease-in-out,transform .2s ease-in-out,box-shadow .2s ease-in-out}.btn-primary[_ngcontent-%COMP%]:hover{background-position:right center;transform:translateY(-2px);box-shadow:0 6px 20px #06b6d43b}"],changeDetection:0})}};var gE,hE;function vE(){return{geminiUrl:gE,vertexUrl:hE}}function _E(t,e,n,o){var i,r;if(!t?.baseUrl){let s=vE();return e?(i=s.vertexUrl)!==null&&i!==void 0?i:n:(r=s.geminiUrl)!==null&&r!==void 0?r:o}return t.baseUrl}var Gt=class{};function W(t,e){let n=/\{([^}]+)\}/g;return t.replace(n,(o,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){let r=e[i];return r!=null?String(r):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function c(t,e,n){for(let r=0;r<e.length-1;r++){let s=e[r];if(s.endsWith("[]")){let l=s.slice(0,-2);if(!(l in t))if(Array.isArray(n))t[l]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[l])){let d=t[l];if(Array.isArray(n))for(let u=0;u<d.length;u++){let f=d[u];c(f,e.slice(r+1),n[u])}else for(let u of d)c(u,e.slice(r+1),n)}return}else if(s.endsWith("[0]")){let l=s.slice(0,-3);l in t||(t[l]=[{}]);let d=t[l];c(d[0],e.slice(r+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}let o=e[e.length-1],i=t[o];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[o]=n}function a(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let o=0;o<e.length;o++){if(typeof t!="object"||t===null)return n;let i=e[o];if(i.endsWith("[]")){let r=i.slice(0,-2);if(r in t){let s=t[r];return Array.isArray(s)?s.map(l=>a(l,e.slice(o+1),n)):n}else return n}else t=t[i]}return t}catch(o){if(o instanceof TypeError)return n;throw o}}function yE(t,e){for(let[n,o]of Object.entries(e)){let i=n.split("."),r=o.split("."),s=new Set,l=-1;for(let d=0;d<i.length;d++)if(i[d]==="*"){l=d;break}if(l!==-1&&r.length>l)for(let d=l;d<r.length;d++){let u=r[d];u!=="*"&&!u.endsWith("[]")&&!u.endsWith("[0]")&&s.add(u)}Pu(t,i,r,0,s)}}function Pu(t,e,n,o,i){if(o>=e.length||typeof t!="object"||t===null)return;let r=e[o];if(r.endsWith("[]")){let s=r.slice(0,-2),l=t;if(s in l&&Array.isArray(l[s]))for(let d of l[s])Pu(d,e,n,o+1,i)}else if(r==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){let s=t,l=Object.keys(s).filter(u=>!u.startsWith("_")&&!i.has(u)),d={};for(let u of l)d[u]=s[u];for(let[u,f]of Object.entries(d)){let v=[];for(let _ of n.slice(o))_==="*"?v.push(u):v.push(_);c(s,v,f)}for(let u of l)delete s[u]}}else{let s=t;r in s&&Pu(s[r],e,n,o+1,i)}}function Cp(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function CE(t){let e={},n=a(t,["operationName"]);n!=null&&c(e,["operationName"],n);let o=a(t,["resourceName"]);return o!=null&&c(e,["_url","resourceName"],o),e}function bE(t){let e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);let o=a(t,["metadata"]);o!=null&&c(e,["metadata"],o);let i=a(t,["done"]);i!=null&&c(e,["done"],i);let r=a(t,["error"]);r!=null&&c(e,["error"],r);let s=a(t,["response","generateVideoResponse"]);return s!=null&&c(e,["response"],EE(s)),e}function SE(t){let e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);let o=a(t,["metadata"]);o!=null&&c(e,["metadata"],o);let i=a(t,["done"]);i!=null&&c(e,["done"],i);let r=a(t,["error"]);r!=null&&c(e,["error"],r);let s=a(t,["response"]);return s!=null&&c(e,["response"],ME(s)),e}function EE(t){let e={},n=a(t,["generatedSamples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>wE(s))),c(e,["generatedVideos"],r)}let o=a(t,["raiMediaFilteredCount"]);o!=null&&c(e,["raiMediaFilteredCount"],o);let i=a(t,["raiMediaFilteredReasons"]);return i!=null&&c(e,["raiMediaFilteredReasons"],i),e}function ME(t){let e={},n=a(t,["videos"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>xE(s))),c(e,["generatedVideos"],r)}let o=a(t,["raiMediaFilteredCount"]);o!=null&&c(e,["raiMediaFilteredCount"],o);let i=a(t,["raiMediaFilteredReasons"]);return i!=null&&c(e,["raiMediaFilteredReasons"],i),e}function wE(t){let e={},n=a(t,["video"]);return n!=null&&c(e,["video"],NE(n)),e}function xE(t){let e={},n=a(t,["_self"]);return n!=null&&c(e,["video"],kE(n)),e}function IE(t){let e={},n=a(t,["operationName"]);return n!=null&&c(e,["_url","operationName"],n),e}function TE(t){let e={},n=a(t,["operationName"]);return n!=null&&c(e,["_url","operationName"],n),e}function PE(t){let e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);let o=a(t,["metadata"]);o!=null&&c(e,["metadata"],o);let i=a(t,["done"]);i!=null&&c(e,["done"],i);let r=a(t,["error"]);r!=null&&c(e,["error"],r);let s=a(t,["response"]);return s!=null&&c(e,["response"],DE(s)),e}function DE(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let o=a(t,["parent"]);o!=null&&c(e,["parent"],o);let i=a(t,["documentName"]);return i!=null&&c(e,["documentName"],i),e}function j0(t){let e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);let o=a(t,["metadata"]);o!=null&&c(e,["metadata"],o);let i=a(t,["done"]);i!=null&&c(e,["done"],i);let r=a(t,["error"]);r!=null&&c(e,["error"],r);let s=a(t,["response"]);return s!=null&&c(e,["response"],AE(s)),e}function AE(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let o=a(t,["parent"]);o!=null&&c(e,["parent"],o);let i=a(t,["documentName"]);return i!=null&&c(e,["documentName"],i),e}function NE(t){let e={},n=a(t,["uri"]);n!=null&&c(e,["uri"],n);let o=a(t,["encodedVideo"]);o!=null&&c(e,["videoBytes"],Cp(o));let i=a(t,["encoding"]);return i!=null&&c(e,["mimeType"],i),e}function kE(t){let e={},n=a(t,["gcsUri"]);n!=null&&c(e,["uri"],n);let o=a(t,["bytesBase64Encoded"]);o!=null&&c(e,["videoBytes"],Cp(o));let i=a(t,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}var Ht=(function(t){return t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL",t})(Ht||{});var Du=(function(t){return t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO",t})(Du||{});var Z0=(function(t){return t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED",t})(Z0||{});var rr=(function(t){return t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT",t})(rr||{});var ar=class{constructor(e){let n={};for(let o of e.headers.entries())n[o[0]]=o[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}};var fo=class{get text(){var e,n,o,i,r,s,l,d;if(((i=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",f=!1,v=[];for(let _ of(d=(l=(s=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)!==null&&d!==void 0?d:[]){for(let[S,D]of Object.entries(_))S!=="text"&&S!=="thought"&&S!=="thoughtSignature"&&(D!==null||D!==void 0)&&v.push(S);if(typeof _.text=="string"){if(typeof _.thought=="boolean"&&_.thought)continue;f=!0,u+=_.text}}return v.length>0&&console.warn(`there are non-text parts ${v} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?u:void 0}get data(){var e,n,o,i,r,s,l,d;if(((i=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="",f=[];for(let v of(d=(l=(s=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)!==null&&d!==void 0?d:[]){for(let[_,S]of Object.entries(v))_!=="inlineData"&&(S!==null||S!==void 0)&&f.push(_);v.inlineData&&typeof v.inlineData.data=="string"&&(u+=atob(v.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var e,n,o,i,r,s,l,d;if(((i=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");let u=(d=(l=(s=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||d===void 0?void 0:d.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if(u?.length!==0)return u}get executableCode(){var e,n,o,i,r,s,l,d,u;if(((i=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");let f=(d=(l=(s=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||d===void 0?void 0:d.filter(v=>v.executableCode).map(v=>v.executableCode).filter(v=>v!==void 0);if(f?.length!==0)return(u=f?.[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var e,n,o,i,r,s,l,d,u;if(((i=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");let f=(d=(l=(s=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||d===void 0?void 0:d.filter(v=>v.codeExecutionResult).map(v=>v.codeExecutionResult).filter(v=>v!==void 0);if(f?.length!==0)return(u=f?.[0])===null||u===void 0?void 0:u.output}},fa=class{},ma=class{},Au=class{},Nu=class{},ku=class{},Ru=class{},ga=class{},ha=class{},va=class{},Ou=class{};var _a=class t{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){let o=new t,i,r=e;return n?i=SE(r):i=bE(r),Object.assign(o,i),o}},ya=class{},Ca=class{},ba=class{},Fu=class{},Vu=class{},Lu=class{};var Bu=class t{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){let o=new t,r=PE(e);return Object.assign(o,r),o}},Uu=class{},Hu=class{},Gu=class{};var Sa=class{};var qu=class{get text(){var e,n,o;let i="",r=!1,s=[];for(let l of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(let[d,u]of Object.entries(l))d!=="text"&&d!=="thought"&&u!==null&&s.push(d);if(typeof l.text=="string"){if(typeof l.thought=="boolean"&&l.thought)continue;r=!0,i+=l.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),r?i:void 0}get data(){var e,n,o;let i="",r=[];for(let s of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(let[l,d]of Object.entries(s))l!=="inlineData"&&d!==null&&r.push(l);s.inlineData&&typeof s.inlineData.data=="string"&&(i+=atob(s.inlineData.data))}return r.length>0&&console.warn(`there are non-data parts ${r} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}};var $u=class{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}};var zu=class t{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){let o=new t,r=j0(e);return Object.assign(o,r),o}};function be(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){let n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function K0(t,e){let n=be(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function Q0(t){return Array.isArray(t)?t.map(e=>Ea(e)):[Ea(t)]}function Ea(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function X0(t){let e=Ea(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function ev(t){let e=Ea(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function D0(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function tv(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>D0(e)):[D0(t)]}function Wu(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function A0(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function N0(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function tt(t){if(t==null)throw new Error("ContentUnion is required");return Wu(t)?t:{role:"user",parts:tv(t)}}function bp(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{let o=tt(n);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(t.isVertexAI()){let n=tt(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>tt(n)):[tt(e)]}function Mt(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(A0(t)||N0(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[tt(t)]}let e=[],n=[],o=Wu(t[0]);for(let i of t){let r=Wu(i);if(r!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(r)e.push(i);else{if(A0(i)||N0(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return o||e.push({role:"user",parts:tv(n)}),e}function RE(t,e){t.includes("null")&&(e.nullable=!0);let n=t.filter(o=>o!=="null");if(n.length===1)e.type=Object.values(Ht).includes(n[0].toUpperCase())?n[0].toUpperCase():Ht.TYPE_UNSPECIFIED;else{e.anyOf=[];for(let o of n)e.anyOf.push({type:Object.values(Ht).includes(o.toUpperCase())?o.toUpperCase():Ht.TYPE_UNSPECIFIED})}}function zo(t){let e={},n=["items"],o=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");let r=t.anyOf;r!=null&&r.length==2&&(r[0].type==="null"?(e.nullable=!0,t=r[1]):r[1].type==="null"&&(e.nullable=!0,t=r[0])),t.type instanceof Array&&RE(t.type,e);for(let[s,l]of Object.entries(t))if(l!=null)if(s=="type"){if(l==="null")throw new Error("type: null can not be the only possible type for the field.");if(l instanceof Array)continue;e.type=Object.values(Ht).includes(l.toUpperCase())?l.toUpperCase():Ht.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=zo(l);else if(o.includes(s)){let d=[];for(let u of l){if(u.type=="null"){e.nullable=!0;continue}d.push(zo(u))}e[s]=d}else if(i.includes(s)){let d={};for(let[u,f]of Object.entries(l))d[u]=zo(f);e[s]=d}else{if(s==="additionalProperties")continue;e[s]=l}return e}function Sp(t){return zo(t)}function Ep(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Mp(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function jo(t){if(t.functionDeclarations)for(let e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=zo(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=zo(e.response));return t}function Zo(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");let e=[];for(let n of t)e.push(n);return e}function OE(t,e,n,o=1){let i=!e.startsWith(`${n}/`)&&e.split("/").length===o;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function _n(t,e){if(typeof e!="string")throw new Error("name must be a string");return OE(t,e,"cachedContents")}function nv(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function On(t){return Cp(t)}function FE(t){return t!=null&&typeof t=="object"&&"name"in t}function VE(t){return t!=null&&typeof t=="object"&&"video"in t}function LE(t){return t!=null&&typeof t=="object"&&"uri"in t}function ov(t){var e;let n;if(FE(t)&&(n=t.name),!(LE(t)&&(n=t.uri,n===void 0))&&!(VE(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){let i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function iv(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function rv(t){for(let e of["models","tunedModels","publisherModels"])if(BE(t,e))return t[e];return[]}function BE(t,e){return t!==null&&typeof t=="object"&&e in t}function UE(t,e={}){let n=t,o={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(o.responseJsonSchema=n.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function HE(t,e={}){let n=[],o=new Set;for(let i of t){let r=i.name;if(o.has(r))throw new Error(`Duplicate function name ${r} found in MCP tools. Please ensure function names are unique.`);o.add(r);let s=UE(i,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function sv(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;let o=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function GE(t){if(typeof t!="string")return t;let e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function av(t){if(typeof t!="object"||t===null)return{};let e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;let i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let r=!1;for(let s of i){if(typeof s!="object"||s===null)continue;let d=s.response;if(typeof d!="object"||d===null)continue;if(d.embedding!==void 0){r=!0;break}}return r&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Ko(t,e){let n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function lv(t){let e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function qE(t){let e={},n=a(t,["responsesFile"]);n!=null&&c(e,["fileName"],n);let o=a(t,["inlinedResponses","inlinedResponses"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>EM(s))),c(e,["inlinedResponses"],r)}let i=a(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),c(e,["inlinedEmbedContentResponses"],r)}return e}function $E(t){let e={},n=a(t,["predictionsFormat"]);n!=null&&c(e,["format"],n);let o=a(t,["gcsDestination","outputUriPrefix"]);o!=null&&c(e,["gcsUri"],o);let i=a(t,["bigqueryDestination","outputUri"]);return i!=null&&c(e,["bigqueryUri"],i),e}function zE(t){let e={},n=a(t,["format"]);n!=null&&c(e,["predictionsFormat"],n);let o=a(t,["gcsUri"]);o!=null&&c(e,["gcsDestination","outputUriPrefix"],o);let i=a(t,["bigqueryUri"]);if(i!=null&&c(e,["bigqueryDestination","outputUri"],i),a(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(a(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function ua(t){let e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);let o=a(t,["metadata","displayName"]);o!=null&&c(e,["displayName"],o);let i=a(t,["metadata","state"]);i!=null&&c(e,["state"],lv(i));let r=a(t,["metadata","createTime"]);r!=null&&c(e,["createTime"],r);let s=a(t,["metadata","endTime"]);s!=null&&c(e,["endTime"],s);let l=a(t,["metadata","updateTime"]);l!=null&&c(e,["updateTime"],l);let d=a(t,["metadata","model"]);d!=null&&c(e,["model"],d);let u=a(t,["metadata","output"]);return u!=null&&c(e,["dest"],qE(av(u))),e}function Yu(t){let e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);let o=a(t,["displayName"]);o!=null&&c(e,["displayName"],o);let i=a(t,["state"]);i!=null&&c(e,["state"],lv(i));let r=a(t,["error"]);r!=null&&c(e,["error"],r);let s=a(t,["createTime"]);s!=null&&c(e,["createTime"],s);let l=a(t,["startTime"]);l!=null&&c(e,["startTime"],l);let d=a(t,["endTime"]);d!=null&&c(e,["endTime"],d);let u=a(t,["updateTime"]);u!=null&&c(e,["updateTime"],u);let f=a(t,["model"]);f!=null&&c(e,["model"],f);let v=a(t,["inputConfig"]);v!=null&&c(e,["src"],WE(v));let _=a(t,["outputConfig"]);_!=null&&c(e,["dest"],$E(av(_)));let S=a(t,["completionStats"]);return S!=null&&c(e,["completionStats"],S),e}function WE(t){let e={},n=a(t,["instancesFormat"]);n!=null&&c(e,["format"],n);let o=a(t,["gcsSource","uris"]);o!=null&&c(e,["gcsUri"],o);let i=a(t,["bigquerySource","inputUri"]);return i!=null&&c(e,["bigqueryUri"],i),e}function YE(t,e){let n={};if(a(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(a(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");let o=a(e,["fileName"]);o!=null&&c(n,["fileName"],o);let i=a(e,["inlinedRequests"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>SM(t,s))),c(n,["requests","requests"],r)}return n}function JE(t){let e={},n=a(t,["format"]);n!=null&&c(e,["instancesFormat"],n);let o=a(t,["gcsUri"]);o!=null&&c(e,["gcsSource","uris"],o);let i=a(t,["bigqueryUri"]);if(i!=null&&c(e,["bigquerySource","inputUri"],i),a(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function jE(t){let e={},n=a(t,["data"]);if(n!=null&&c(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let o=a(t,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function ZE(t,e){let n={},o=a(e,["name"]);return o!=null&&c(n,["_url","name"],Ko(t,o)),n}function KE(t,e){let n={},o=a(e,["name"]);return o!=null&&c(n,["_url","name"],Ko(t,o)),n}function QE(t){let e={},n=a(t,["content"]);n!=null&&c(e,["content"],n);let o=a(t,["citationMetadata"]);o!=null&&c(e,["citationMetadata"],XE(o));let i=a(t,["tokenCount"]);i!=null&&c(e,["tokenCount"],i);let r=a(t,["finishReason"]);r!=null&&c(e,["finishReason"],r);let s=a(t,["avgLogprobs"]);s!=null&&c(e,["avgLogprobs"],s);let l=a(t,["groundingMetadata"]);l!=null&&c(e,["groundingMetadata"],l);let d=a(t,["index"]);d!=null&&c(e,["index"],d);let u=a(t,["logprobsResult"]);u!=null&&c(e,["logprobsResult"],u);let f=a(t,["safetyRatings"]);if(f!=null){let _=f;Array.isArray(_)&&(_=_.map(S=>S)),c(e,["safetyRatings"],_)}let v=a(t,["urlContextMetadata"]);return v!=null&&c(e,["urlContextMetadata"],v),e}function XE(t){let e={},n=a(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>i)),c(e,["citations"],o)}return e}function cv(t){let e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>DM(r))),c(e,["parts"],i)}let o=a(t,["role"]);return o!=null&&c(e,["role"],o),e}function eM(t,e){let n={},o=a(t,["displayName"]);if(e!==void 0&&o!=null&&c(e,["batch","displayName"],o),a(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function tM(t,e){let n={},o=a(t,["displayName"]);e!==void 0&&o!=null&&c(e,["displayName"],o);let i=a(t,["dest"]);return e!==void 0&&i!=null&&c(e,["outputConfig"],zE(GE(i))),n}function k0(t,e){let n={},o=a(e,["model"]);o!=null&&c(n,["_url","model"],be(t,o));let i=a(e,["src"]);i!=null&&c(n,["batch","inputConfig"],YE(t,sv(t,i)));let r=a(e,["config"]);return r!=null&&eM(r,n),n}function nM(t,e){let n={},o=a(e,["model"]);o!=null&&c(n,["model"],be(t,o));let i=a(e,["src"]);i!=null&&c(n,["inputConfig"],JE(sv(t,i)));let r=a(e,["config"]);return r!=null&&tM(r,n),n}function oM(t,e){let n={},o=a(t,["displayName"]);return e!==void 0&&o!=null&&c(e,["batch","displayName"],o),n}function iM(t,e){let n={},o=a(e,["model"]);o!=null&&c(n,["_url","model"],be(t,o));let i=a(e,["src"]);i!=null&&c(n,["batch","inputConfig"],uM(t,i));let r=a(e,["config"]);return r!=null&&oM(r,n),n}function rM(t,e){let n={},o=a(e,["name"]);return o!=null&&c(n,["_url","name"],Ko(t,o)),n}function sM(t,e){let n={},o=a(e,["name"]);return o!=null&&c(n,["_url","name"],Ko(t,o)),n}function aM(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let o=a(t,["name"]);o!=null&&c(e,["name"],o);let i=a(t,["done"]);i!=null&&c(e,["done"],i);let r=a(t,["error"]);return r!=null&&c(e,["error"],r),e}function lM(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let o=a(t,["name"]);o!=null&&c(e,["name"],o);let i=a(t,["done"]);i!=null&&c(e,["done"],i);let r=a(t,["error"]);return r!=null&&c(e,["error"],r),e}function cM(t,e){let n={},o=a(e,["contents"]);if(o!=null){let r=bp(t,o);Array.isArray(r)&&(r=r.map(s=>s)),c(n,["requests[]","request","content"],r)}let i=a(e,["config"]);return i!=null&&(c(n,["_self"],dM(i,n)),yE(n,{"requests[].*":"requests[].request.*"})),n}function dM(t,e){let n={},o=a(t,["taskType"]);e!==void 0&&o!=null&&c(e,["requests[]","taskType"],o);let i=a(t,["title"]);e!==void 0&&i!=null&&c(e,["requests[]","title"],i);let r=a(t,["outputDimensionality"]);if(e!==void 0&&r!=null&&c(e,["requests[]","outputDimensionality"],r),a(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function uM(t,e){let n={},o=a(e,["fileName"]);o!=null&&c(n,["file_name"],o);let i=a(e,["inlinedRequests"]);return i!=null&&c(n,["requests"],cM(t,i)),n}function pM(t){let e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=a(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);let o=a(t,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function fM(t){let e={},n=a(t,["id"]);n!=null&&c(e,["id"],n);let o=a(t,["args"]);o!=null&&c(e,["args"],o);let i=a(t,["name"]);if(i!=null&&c(e,["name"],i),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function mM(t){let e={},n=a(t,["mode"]);n!=null&&c(e,["mode"],n);let o=a(t,["allowedFunctionNames"]);if(o!=null&&c(e,["allowedFunctionNames"],o),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function gM(t,e,n){let o={},i=a(e,["systemInstruction"]);n!==void 0&&i!=null&&c(n,["systemInstruction"],cv(tt(i)));let r=a(e,["temperature"]);r!=null&&c(o,["temperature"],r);let s=a(e,["topP"]);s!=null&&c(o,["topP"],s);let l=a(e,["topK"]);l!=null&&c(o,["topK"],l);let d=a(e,["candidateCount"]);d!=null&&c(o,["candidateCount"],d);let u=a(e,["maxOutputTokens"]);u!=null&&c(o,["maxOutputTokens"],u);let f=a(e,["stopSequences"]);f!=null&&c(o,["stopSequences"],f);let v=a(e,["responseLogprobs"]);v!=null&&c(o,["responseLogprobs"],v);let _=a(e,["logprobs"]);_!=null&&c(o,["logprobs"],_);let S=a(e,["presencePenalty"]);S!=null&&c(o,["presencePenalty"],S);let D=a(e,["frequencyPenalty"]);D!=null&&c(o,["frequencyPenalty"],D);let V=a(e,["seed"]);V!=null&&c(o,["seed"],V);let q=a(e,["responseMimeType"]);q!=null&&c(o,["responseMimeType"],q);let $=a(e,["responseSchema"]);$!=null&&c(o,["responseSchema"],Sp($));let Q=a(e,["responseJsonSchema"]);if(Q!=null&&c(o,["responseJsonSchema"],Q),a(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let Y=a(e,["safetySettings"]);if(n!==void 0&&Y!=null){let Ue=Y;Array.isArray(Ue)&&(Ue=Ue.map($t=>AM($t))),c(n,["safetySettings"],Ue)}let ae=a(e,["tools"]);if(n!==void 0&&ae!=null){let Ue=Zo(ae);Array.isArray(Ue)&&(Ue=Ue.map($t=>kM(jo($t)))),c(n,["tools"],Ue)}let pe=a(e,["toolConfig"]);if(n!==void 0&&pe!=null&&c(n,["toolConfig"],NM(pe)),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let he=a(e,["cachedContent"]);n!==void 0&&he!=null&&c(n,["cachedContent"],_n(t,he));let _e=a(e,["responseModalities"]);_e!=null&&c(o,["responseModalities"],_e);let Qe=a(e,["mediaResolution"]);Qe!=null&&c(o,["mediaResolution"],Qe);let le=a(e,["speechConfig"]);if(le!=null&&c(o,["speechConfig"],Ep(le)),a(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let we=a(e,["thinkingConfig"]);we!=null&&c(o,["thinkingConfig"],we);let je=a(e,["imageConfig"]);return je!=null&&c(o,["imageConfig"],bM(je)),o}function hM(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let o=a(t,["candidates"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(u=>QE(u))),c(e,["candidates"],d)}let i=a(t,["modelVersion"]);i!=null&&c(e,["modelVersion"],i);let r=a(t,["promptFeedback"]);r!=null&&c(e,["promptFeedback"],r);let s=a(t,["responseId"]);s!=null&&c(e,["responseId"],s);let l=a(t,["usageMetadata"]);return l!=null&&c(e,["usageMetadata"],l),e}function vM(t,e){let n={},o=a(e,["name"]);return o!=null&&c(n,["_url","name"],Ko(t,o)),n}function _M(t,e){let n={},o=a(e,["name"]);return o!=null&&c(n,["_url","name"],Ko(t,o)),n}function yM(t){let e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=a(t,["enableWidget"]);return n!=null&&c(e,["enableWidget"],n),e}function CM(t){let e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=a(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],n),e}function bM(t){let e={},n=a(t,["aspectRatio"]);n!=null&&c(e,["aspectRatio"],n);let o=a(t,["imageSize"]);if(o!=null&&c(e,["imageSize"],o),a(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(a(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function SM(t,e){let n={},o=a(e,["model"]);o!=null&&c(n,["request","model"],be(t,o));let i=a(e,["contents"]);if(i!=null){let l=Mt(i);Array.isArray(l)&&(l=l.map(d=>cv(d))),c(n,["request","contents"],l)}let r=a(e,["metadata"]);r!=null&&c(n,["metadata"],r);let s=a(e,["config"]);return s!=null&&c(n,["request","generationConfig"],gM(t,s,a(n,["request"],{}))),n}function EM(t){let e={},n=a(t,["response"]);n!=null&&c(e,["response"],hM(n));let o=a(t,["error"]);return o!=null&&c(e,["error"],o),e}function MM(t,e){let n={},o=a(t,["pageSize"]);e!==void 0&&o!=null&&c(e,["_query","pageSize"],o);let i=a(t,["pageToken"]);if(e!==void 0&&i!=null&&c(e,["_query","pageToken"],i),a(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function wM(t,e){let n={},o=a(t,["pageSize"]);e!==void 0&&o!=null&&c(e,["_query","pageSize"],o);let i=a(t,["pageToken"]);e!==void 0&&i!=null&&c(e,["_query","pageToken"],i);let r=a(t,["filter"]);return e!==void 0&&r!=null&&c(e,["_query","filter"],r),n}function xM(t){let e={},n=a(t,["config"]);return n!=null&&MM(n,e),e}function IM(t){let e={},n=a(t,["config"]);return n!=null&&wM(n,e),e}function TM(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let o=a(t,["nextPageToken"]);o!=null&&c(e,["nextPageToken"],o);let i=a(t,["operations"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>ua(s))),c(e,["batchJobs"],r)}return e}function PM(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let o=a(t,["nextPageToken"]);o!=null&&c(e,["nextPageToken"],o);let i=a(t,["batchPredictionJobs"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>Yu(s))),c(e,["batchJobs"],r)}return e}function DM(t){let e={},n=a(t,["mediaResolution"]);n!=null&&c(e,["mediaResolution"],n);let o=a(t,["codeExecutionResult"]);o!=null&&c(e,["codeExecutionResult"],o);let i=a(t,["executableCode"]);i!=null&&c(e,["executableCode"],i);let r=a(t,["fileData"]);r!=null&&c(e,["fileData"],pM(r));let s=a(t,["functionCall"]);s!=null&&c(e,["functionCall"],fM(s));let l=a(t,["functionResponse"]);l!=null&&c(e,["functionResponse"],l);let d=a(t,["inlineData"]);d!=null&&c(e,["inlineData"],jE(d));let u=a(t,["text"]);u!=null&&c(e,["text"],u);let f=a(t,["thought"]);f!=null&&c(e,["thought"],f);let v=a(t,["thoughtSignature"]);v!=null&&c(e,["thoughtSignature"],v);let _=a(t,["videoMetadata"]);return _!=null&&c(e,["videoMetadata"],_),e}function AM(t){let e={},n=a(t,["category"]);if(n!=null&&c(e,["category"],n),a(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let o=a(t,["threshold"]);return o!=null&&c(e,["threshold"],o),e}function NM(t){let e={},n=a(t,["functionCallingConfig"]);n!=null&&c(e,["functionCallingConfig"],mM(n));let o=a(t,["retrievalConfig"]);return o!=null&&c(e,["retrievalConfig"],o),e}function kM(t){let e={},n=a(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(v=>v)),c(e,["functionDeclarations"],f)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let o=a(t,["googleSearchRetrieval"]);o!=null&&c(e,["googleSearchRetrieval"],o);let i=a(t,["computerUse"]);i!=null&&c(e,["computerUse"],i);let r=a(t,["fileSearch"]);r!=null&&c(e,["fileSearch"],r);let s=a(t,["codeExecution"]);if(s!=null&&c(e,["codeExecution"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let l=a(t,["googleMaps"]);l!=null&&c(e,["googleMaps"],yM(l));let d=a(t,["googleSearch"]);d!=null&&c(e,["googleSearch"],CM(d));let u=a(t,["urlContext"]);return u!=null&&c(e,["urlContext"],u),e}var Fn=(function(t){return t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents",t})(Fn||{}),vn=class{constructor(e,n,o,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,o,i)}init(e,n,o){var i,r;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n?.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!o||Object.keys(o).length===0?s={config:{}}:typeof o=="object"?s=Object.assign({},o):s=o,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(r=(i=s.config)===null||i===void 0?void 0:i.pageSize)!==null&&r!==void 0?r:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};let e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");let e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}};var Ju=class extends Gt{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new vn(Fn.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){let n=k0(this.apiClient,e),o=n._url,i=W("{model}:batchGenerateContent",o),l=n.batch.inputConfig.requests,d=l.requests,u=[];for(let f of d){let v=Object.assign({},f);if(v.systemInstruction){let _=v.systemInstruction;delete v.systemInstruction;let S=v.request;S.systemInstruction=_,v.request=S}u.push(v)}return l.requests=u,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){let o=n?Object.assign({},n):{},i=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${i}`),o.dest===void 0){let r=this.getGcsUri(e),s=this.getBigqueryUri(e);if(r)r.endsWith(".jsonl")?o.dest=`${r.slice(0,-6)}/dest`:o.dest=`${r}_dest_${i}`;else if(s)o.dest=`${s}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var n,o,i,r;let s,l="",d={};if(this.apiClient.isVertexAI()){let u=nM(this.apiClient,e);return l=W("batchPredictionJobs",u._url),d=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Yu(f))}else{let u=k0(this.apiClient,e);return l=W("{model}:batchGenerateContent",u._url),d=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>ua(f))}}async createEmbeddingsInternal(e){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=iM(this.apiClient,e);return r=W("{model}:asyncBatchEmbedContent",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),i.then(d=>ua(d))}}async get(e){var n,o,i,r;let s,l="",d={};if(this.apiClient.isVertexAI()){let u=_M(this.apiClient,e);return l=W("batchPredictionJobs/{name}",u._url),d=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Yu(f))}else{let u=vM(this.apiClient,e);return l=W("batches/{name}",u._url),d=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>ua(f))}}async cancel(e){var n,o,i,r;let s="",l={};if(this.apiClient.isVertexAI()){let d=KE(this.apiClient,e);s=W("batchPredictionJobs/{name}:cancel",d._url),l=d._query,delete d._url,delete d._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{let d=ZE(this.apiClient,e);s=W("batches/{name}:cancel",d._url),l=d._query,delete d._url,delete d._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,o,i,r;let s,l="",d={};if(this.apiClient.isVertexAI()){let u=IM(e);return l=W("batchPredictionJobs",u._url),d=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(v=>{let _=v;return _.sdkHttpResponse={headers:f.headers},_})),s.then(f=>{let v=PM(f),_=new Sa;return Object.assign(_,v),_})}else{let u=xM(e);return l=W("batches",u._url),d=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(v=>{let _=v;return _.sdkHttpResponse={headers:f.headers},_})),s.then(f=>{let v=TM(f),_=new Sa;return Object.assign(_,v),_})}}async delete(e){var n,o,i,r;let s,l="",d={};if(this.apiClient.isVertexAI()){let u=sM(this.apiClient,e);return l=W("batchPredictionJobs/{name}",u._url),d=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(v=>{let _=v;return _.sdkHttpResponse={headers:f.headers},_})),s.then(f=>lM(f))}else{let u=rM(this.apiClient,e);return l=W("batches/{name}",u._url),d=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(v=>{let _=v;return _.sdkHttpResponse={headers:f.headers},_})),s.then(f=>aM(f))}}};function RM(t){let e={},n=a(t,["data"]);if(n!=null&&c(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let o=a(t,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function R0(t){let e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>ow(r))),c(e,["parts"],i)}let o=a(t,["role"]);return o!=null&&c(e,["role"],o),e}function OM(t,e){let n={},o=a(t,["ttl"]);e!==void 0&&o!=null&&c(e,["ttl"],o);let i=a(t,["expireTime"]);e!==void 0&&i!=null&&c(e,["expireTime"],i);let r=a(t,["displayName"]);e!==void 0&&r!=null&&c(e,["displayName"],r);let s=a(t,["contents"]);if(e!==void 0&&s!=null){let f=Mt(s);Array.isArray(f)&&(f=f.map(v=>R0(v))),c(e,["contents"],f)}let l=a(t,["systemInstruction"]);e!==void 0&&l!=null&&c(e,["systemInstruction"],R0(tt(l)));let d=a(t,["tools"]);if(e!==void 0&&d!=null){let f=d;Array.isArray(f)&&(f=f.map(v=>rw(v))),c(e,["tools"],f)}let u=a(t,["toolConfig"]);if(e!==void 0&&u!=null&&c(e,["toolConfig"],iw(u)),a(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function FM(t,e){let n={},o=a(t,["ttl"]);e!==void 0&&o!=null&&c(e,["ttl"],o);let i=a(t,["expireTime"]);e!==void 0&&i!=null&&c(e,["expireTime"],i);let r=a(t,["displayName"]);e!==void 0&&r!=null&&c(e,["displayName"],r);let s=a(t,["contents"]);if(e!==void 0&&s!=null){let v=Mt(s);Array.isArray(v)&&(v=v.map(_=>_)),c(e,["contents"],v)}let l=a(t,["systemInstruction"]);e!==void 0&&l!=null&&c(e,["systemInstruction"],tt(l));let d=a(t,["tools"]);if(e!==void 0&&d!=null){let v=d;Array.isArray(v)&&(v=v.map(_=>sw(_))),c(e,["tools"],v)}let u=a(t,["toolConfig"]);e!==void 0&&u!=null&&c(e,["toolConfig"],u);let f=a(t,["kmsKeyName"]);return e!==void 0&&f!=null&&c(e,["encryption_spec","kmsKeyName"],f),n}function VM(t,e){let n={},o=a(e,["model"]);o!=null&&c(n,["model"],K0(t,o));let i=a(e,["config"]);return i!=null&&OM(i,n),n}function LM(t,e){let n={},o=a(e,["model"]);o!=null&&c(n,["model"],K0(t,o));let i=a(e,["config"]);return i!=null&&FM(i,n),n}function BM(t,e){let n={},o=a(e,["name"]);return o!=null&&c(n,["_url","name"],_n(t,o)),n}function UM(t,e){let n={},o=a(e,["name"]);return o!=null&&c(n,["_url","name"],_n(t,o)),n}function HM(t){let e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}function GM(t){let e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}function qM(t){let e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=a(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);let o=a(t,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function $M(t){let e={},n=a(t,["id"]);n!=null&&c(e,["id"],n);let o=a(t,["args"]);o!=null&&c(e,["args"],o);let i=a(t,["name"]);if(i!=null&&c(e,["name"],i),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function zM(t){let e={},n=a(t,["mode"]);n!=null&&c(e,["mode"],n);let o=a(t,["allowedFunctionNames"]);if(o!=null&&c(e,["allowedFunctionNames"],o),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function WM(t){let e={};if(a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");let n=a(t,["description"]);n!=null&&c(e,["description"],n);let o=a(t,["name"]);o!=null&&c(e,["name"],o);let i=a(t,["parameters"]);i!=null&&c(e,["parameters"],i);let r=a(t,["parametersJsonSchema"]);r!=null&&c(e,["parametersJsonSchema"],r);let s=a(t,["response"]);s!=null&&c(e,["response"],s);let l=a(t,["responseJsonSchema"]);return l!=null&&c(e,["responseJsonSchema"],l),e}function YM(t,e){let n={},o=a(e,["name"]);return o!=null&&c(n,["_url","name"],_n(t,o)),n}function JM(t,e){let n={},o=a(e,["name"]);return o!=null&&c(n,["_url","name"],_n(t,o)),n}function jM(t){let e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=a(t,["enableWidget"]);return n!=null&&c(e,["enableWidget"],n),e}function ZM(t){let e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=a(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],n),e}function KM(t,e){let n={},o=a(t,["pageSize"]);e!==void 0&&o!=null&&c(e,["_query","pageSize"],o);let i=a(t,["pageToken"]);return e!==void 0&&i!=null&&c(e,["_query","pageToken"],i),n}function QM(t,e){let n={},o=a(t,["pageSize"]);e!==void 0&&o!=null&&c(e,["_query","pageSize"],o);let i=a(t,["pageToken"]);return e!==void 0&&i!=null&&c(e,["_query","pageToken"],i),n}function XM(t){let e={},n=a(t,["config"]);return n!=null&&KM(n,e),e}function ew(t){let e={},n=a(t,["config"]);return n!=null&&QM(n,e),e}function tw(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let o=a(t,["nextPageToken"]);o!=null&&c(e,["nextPageToken"],o);let i=a(t,["cachedContents"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),c(e,["cachedContents"],r)}return e}function nw(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let o=a(t,["nextPageToken"]);o!=null&&c(e,["nextPageToken"],o);let i=a(t,["cachedContents"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),c(e,["cachedContents"],r)}return e}function ow(t){let e={},n=a(t,["mediaResolution"]);n!=null&&c(e,["mediaResolution"],n);let o=a(t,["codeExecutionResult"]);o!=null&&c(e,["codeExecutionResult"],o);let i=a(t,["executableCode"]);i!=null&&c(e,["executableCode"],i);let r=a(t,["fileData"]);r!=null&&c(e,["fileData"],qM(r));let s=a(t,["functionCall"]);s!=null&&c(e,["functionCall"],$M(s));let l=a(t,["functionResponse"]);l!=null&&c(e,["functionResponse"],l);let d=a(t,["inlineData"]);d!=null&&c(e,["inlineData"],RM(d));let u=a(t,["text"]);u!=null&&c(e,["text"],u);let f=a(t,["thought"]);f!=null&&c(e,["thought"],f);let v=a(t,["thoughtSignature"]);v!=null&&c(e,["thoughtSignature"],v);let _=a(t,["videoMetadata"]);return _!=null&&c(e,["videoMetadata"],_),e}function iw(t){let e={},n=a(t,["functionCallingConfig"]);n!=null&&c(e,["functionCallingConfig"],zM(n));let o=a(t,["retrievalConfig"]);return o!=null&&c(e,["retrievalConfig"],o),e}function rw(t){let e={},n=a(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(v=>v)),c(e,["functionDeclarations"],f)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let o=a(t,["googleSearchRetrieval"]);o!=null&&c(e,["googleSearchRetrieval"],o);let i=a(t,["computerUse"]);i!=null&&c(e,["computerUse"],i);let r=a(t,["fileSearch"]);r!=null&&c(e,["fileSearch"],r);let s=a(t,["codeExecution"]);if(s!=null&&c(e,["codeExecution"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let l=a(t,["googleMaps"]);l!=null&&c(e,["googleMaps"],jM(l));let d=a(t,["googleSearch"]);d!=null&&c(e,["googleSearch"],ZM(d));let u=a(t,["urlContext"]);return u!=null&&c(e,["urlContext"],u),e}function sw(t){let e={},n=a(t,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(_=>WM(_))),c(e,["functionDeclarations"],v)}let o=a(t,["retrieval"]);o!=null&&c(e,["retrieval"],o);let i=a(t,["googleSearchRetrieval"]);i!=null&&c(e,["googleSearchRetrieval"],i);let r=a(t,["computerUse"]);if(r!=null&&c(e,["computerUse"],r),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let s=a(t,["codeExecution"]);s!=null&&c(e,["codeExecution"],s);let l=a(t,["enterpriseWebSearch"]);l!=null&&c(e,["enterpriseWebSearch"],l);let d=a(t,["googleMaps"]);d!=null&&c(e,["googleMaps"],d);let u=a(t,["googleSearch"]);u!=null&&c(e,["googleSearch"],u);let f=a(t,["urlContext"]);return f!=null&&c(e,["urlContext"],f),e}function aw(t,e){let n={},o=a(t,["ttl"]);e!==void 0&&o!=null&&c(e,["ttl"],o);let i=a(t,["expireTime"]);return e!==void 0&&i!=null&&c(e,["expireTime"],i),n}function lw(t,e){let n={},o=a(t,["ttl"]);e!==void 0&&o!=null&&c(e,["ttl"],o);let i=a(t,["expireTime"]);return e!==void 0&&i!=null&&c(e,["expireTime"],i),n}function cw(t,e){let n={},o=a(e,["name"]);o!=null&&c(n,["_url","name"],_n(t,o));let i=a(e,["config"]);return i!=null&&aw(i,n),n}function dw(t,e){let n={},o=a(e,["name"]);o!=null&&c(n,["_url","name"],_n(t,o));let i=a(e,["config"]);return i!=null&&lw(i,n),n}var ju=class extends Gt{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new vn(Fn.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(n),n)}async create(e){var n,o,i,r;let s,l="",d={};if(this.apiClient.isVertexAI()){let u=LM(this.apiClient,e);return l=W("cachedContents",u._url),d=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{let u=VM(this.apiClient,e);return l=W("cachedContents",u._url),d=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async get(e){var n,o,i,r;let s,l="",d={};if(this.apiClient.isVertexAI()){let u=JM(this.apiClient,e);return l=W("{name}",u._url),d=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{let u=YM(this.apiClient,e);return l=W("{name}",u._url),d=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async delete(e){var n,o,i,r;let s,l="",d={};if(this.apiClient.isVertexAI()){let u=UM(this.apiClient,e);return l=W("{name}",u._url),d=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(v=>{let _=v;return _.sdkHttpResponse={headers:f.headers},_})),s.then(f=>{let v=GM(f),_=new Ca;return Object.assign(_,v),_})}else{let u=BM(this.apiClient,e);return l=W("{name}",u._url),d=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(v=>{let _=v;return _.sdkHttpResponse={headers:f.headers},_})),s.then(f=>{let v=HM(f),_=new Ca;return Object.assign(_,v),_})}}async update(e){var n,o,i,r;let s,l="",d={};if(this.apiClient.isVertexAI()){let u=dw(this.apiClient,e);return l=W("{name}",u._url),d=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{let u=cw(this.apiClient,e);return l=W("{name}",u._url),d=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async listInternal(e){var n,o,i,r;let s,l="",d={};if(this.apiClient.isVertexAI()){let u=ew(e);return l=W("cachedContents",u._url),d=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(v=>{let _=v;return _.sdkHttpResponse={headers:f.headers},_})),s.then(f=>{let v=nw(f),_=new ba;return Object.assign(_,v),_})}else{let u=XM(e);return l=W("cachedContents",u._url),d=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(v=>{let _=v;return _.sdkHttpResponse={headers:f.headers},_})),s.then(f=>{let v=tw(f),_=new ba;return Object.assign(_,v),_})}}};function O0(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Oe(t){return this instanceof Oe?(this.v=t,this):new Oe(t)}function Wo(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(t,e||[]),i,r=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(S){return function(D){return Promise.resolve(D).then(S,v)}}function l(S,D){o[S]&&(i[S]=function(V){return new Promise(function(q,$){r.push([S,V,q,$])>1||d(S,V)})},D&&(i[S]=D(i[S])))}function d(S,D){try{u(o[S](D))}catch(V){_(r[0][3],V)}}function u(S){S.value instanceof Oe?Promise.resolve(S.value.v).then(f,v):_(r[0][2],S)}function f(S){d("next",S)}function v(S){d("throw",S)}function _(S,D){S(D),r.shift(),r.length&&d(r[0][0],r[0][1])}}function sr(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof O0=="function"?O0(t):t[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(r){n[r]=t[r]&&function(s){return new Promise(function(l,d){s=t[r](s),i(l,d,s.done,s.value)})}}function i(r,s,l,d){Promise.resolve(d).then(function(u){r({value:u,done:l})},s)}}function uw(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;let n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:dv(n)}function dv(t){if(t.parts===void 0||t.parts.length===0)return!1;for(let e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function pw(t){if(t.length!==0){for(let e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function F0(t){if(t===void 0||t.length===0)return[];let e=[],n=t.length,o=0;for(;o<n;)if(t[o].role==="user")e.push(t[o]),o++;else{let i=[],r=!0;for(;o<n&&t[o].role==="model";)i.push(t[o]),r&&!dv(t[o])&&(r=!1),o++;r?e.push(...i):e.pop()}return e}var Zu=class{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new Ku(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}},Ku=class{constructor(e,n,o,i={},r=[]){this.apiClient=e,this.modelsModule=n,this.model=o,this.config=i,this.history=r,this.sendPromise=Promise.resolve(),pw(r)}async sendMessage(e){var n;await this.sendPromise;let o=tt(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var r,s,l;let d=await i,u=(s=(r=d.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content,f=d.automaticFunctionCallingHistory,v=this.getHistory(!0).length,_=[];f!=null&&(_=(l=f.slice(v))!==null&&l!==void 0?l:[]);let S=u?[u]:[];this.recordHistory(o,S,_)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;let o=tt(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});let r=await i;return this.processStreamResponse(r,o)}getHistory(e=!1){let n=e?F0(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var o,i;return Wo(this,arguments,function*(){var s,l,d,u;let f=[];try{for(var v=!0,_=sr(e),S;S=yield Oe(_.next()),s=S.done,!s;v=!0){u=S.value,v=!1;let D=u;if(uw(D)){let V=(i=(o=D.candidates)===null||o===void 0?void 0:o[0])===null||i===void 0?void 0:i.content;V!==void 0&&f.push(V)}yield yield Oe(D)}}catch(D){l={error:D}}finally{try{!v&&!s&&(d=_.return)&&(yield Oe(d.call(_)))}finally{if(l)throw l.error}}this.recordHistory(n,f)})}recordHistory(e,n,o){let i=[];n.length>0&&n.every(r=>r.role!==void 0)?i=n:i.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...F0(o)):this.history.push(e),this.history.push(...i)}};var Ma=class t extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,t.prototype)}};function fw(t){let e={},n=a(t,["file"]);return n!=null&&c(e,["file"],n),e}function mw(t){let e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}function gw(t){let e={},n=a(t,["name"]);return n!=null&&c(e,["_url","file"],ov(n)),e}function hw(t){let e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}function vw(t){let e={},n=a(t,["name"]);return n!=null&&c(e,["_url","file"],ov(n)),e}function _w(t,e){let n={},o=a(t,["pageSize"]);e!==void 0&&o!=null&&c(e,["_query","pageSize"],o);let i=a(t,["pageToken"]);return e!==void 0&&i!=null&&c(e,["_query","pageToken"],i),n}function yw(t){let e={},n=a(t,["config"]);return n!=null&&_w(n,e),e}function Cw(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let o=a(t,["nextPageToken"]);o!=null&&c(e,["nextPageToken"],o);let i=a(t,["files"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),c(e,["files"],r)}return e}var Qu=class extends Gt{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new vn(Fn.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=yw(e);return r=W("files",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(u=>{let f=u;return f.sdkHttpResponse={headers:d.headers},f})),i.then(d=>{let u=Cw(d),f=new Uu;return Object.assign(f,u),f})}}async createInternal(e){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=fw(e);return r=W("upload/v1beta/files",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),i.then(d=>{let u=mw(d),f=new Hu;return Object.assign(f,u),f})}}async get(e){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=vw(e);return r=W("files/{file}",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),i.then(d=>d)}}async delete(e){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=gw(e);return r=W("files/{file}",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(u=>{let f=u;return f.sdkHttpResponse={headers:d.headers},f})),i.then(d=>{let u=hw(d),f=new Gu;return Object.assign(f,u),f})}}};function pa(t){let e={},n=a(t,["data"]);if(n!=null&&c(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let o=a(t,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function bw(t){let e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>Vw(r))),c(e,["parts"],i)}let o=a(t,["role"]);return o!=null&&c(e,["role"],o),e}function Sw(t){let e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=a(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);let o=a(t,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function Ew(t){let e={},n=a(t,["id"]);n!=null&&c(e,["id"],n);let o=a(t,["args"]);o!=null&&c(e,["args"],o);let i=a(t,["name"]);if(i!=null&&c(e,["name"],i),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Mw(t){let e={};if(a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");let n=a(t,["description"]);n!=null&&c(e,["description"],n);let o=a(t,["name"]);o!=null&&c(e,["name"],o);let i=a(t,["parameters"]);i!=null&&c(e,["parameters"],i);let r=a(t,["parametersJsonSchema"]);r!=null&&c(e,["parametersJsonSchema"],r);let s=a(t,["response"]);s!=null&&c(e,["response"],s);let l=a(t,["responseJsonSchema"]);return l!=null&&c(e,["responseJsonSchema"],l),e}function ww(t){let e={},n=a(t,["modelSelectionConfig"]);n!=null&&c(e,["modelConfig"],n);let o=a(t,["responseJsonSchema"]);o!=null&&c(e,["responseJsonSchema"],o);let i=a(t,["audioTimestamp"]);i!=null&&c(e,["audioTimestamp"],i);let r=a(t,["candidateCount"]);r!=null&&c(e,["candidateCount"],r);let s=a(t,["enableAffectiveDialog"]);s!=null&&c(e,["enableAffectiveDialog"],s);let l=a(t,["frequencyPenalty"]);l!=null&&c(e,["frequencyPenalty"],l);let d=a(t,["logprobs"]);d!=null&&c(e,["logprobs"],d);let u=a(t,["maxOutputTokens"]);u!=null&&c(e,["maxOutputTokens"],u);let f=a(t,["mediaResolution"]);f!=null&&c(e,["mediaResolution"],f);let v=a(t,["presencePenalty"]);v!=null&&c(e,["presencePenalty"],v);let _=a(t,["responseLogprobs"]);_!=null&&c(e,["responseLogprobs"],_);let S=a(t,["responseMimeType"]);S!=null&&c(e,["responseMimeType"],S);let D=a(t,["responseModalities"]);D!=null&&c(e,["responseModalities"],D);let V=a(t,["responseSchema"]);V!=null&&c(e,["responseSchema"],V);let q=a(t,["routingConfig"]);q!=null&&c(e,["routingConfig"],q);let $=a(t,["seed"]);$!=null&&c(e,["seed"],$);let Q=a(t,["speechConfig"]);Q!=null&&c(e,["speechConfig"],uv(Q));let Y=a(t,["stopSequences"]);Y!=null&&c(e,["stopSequences"],Y);let ae=a(t,["temperature"]);ae!=null&&c(e,["temperature"],ae);let pe=a(t,["thinkingConfig"]);pe!=null&&c(e,["thinkingConfig"],pe);let he=a(t,["topK"]);he!=null&&c(e,["topK"],he);let _e=a(t,["topP"]);if(_e!=null&&c(e,["topP"],_e),a(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function xw(t){let e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=a(t,["enableWidget"]);return n!=null&&c(e,["enableWidget"],n),e}function Iw(t){let e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=a(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],n),e}function Tw(t,e){let n={},o=a(t,["generationConfig"]);e!==void 0&&o!=null&&c(e,["setup","generationConfig"],o);let i=a(t,["responseModalities"]);e!==void 0&&i!=null&&c(e,["setup","generationConfig","responseModalities"],i);let r=a(t,["temperature"]);e!==void 0&&r!=null&&c(e,["setup","generationConfig","temperature"],r);let s=a(t,["topP"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig","topP"],s);let l=a(t,["topK"]);e!==void 0&&l!=null&&c(e,["setup","generationConfig","topK"],l);let d=a(t,["maxOutputTokens"]);e!==void 0&&d!=null&&c(e,["setup","generationConfig","maxOutputTokens"],d);let u=a(t,["mediaResolution"]);e!==void 0&&u!=null&&c(e,["setup","generationConfig","mediaResolution"],u);let f=a(t,["seed"]);e!==void 0&&f!=null&&c(e,["setup","generationConfig","seed"],f);let v=a(t,["speechConfig"]);e!==void 0&&v!=null&&c(e,["setup","generationConfig","speechConfig"],Mp(v));let _=a(t,["thinkingConfig"]);e!==void 0&&_!=null&&c(e,["setup","generationConfig","thinkingConfig"],_);let S=a(t,["enableAffectiveDialog"]);e!==void 0&&S!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],S);let D=a(t,["systemInstruction"]);e!==void 0&&D!=null&&c(e,["setup","systemInstruction"],bw(tt(D)));let V=a(t,["tools"]);if(e!==void 0&&V!=null){let he=Zo(V);Array.isArray(he)&&(he=he.map(_e=>Bw(jo(_e)))),c(e,["setup","tools"],he)}let q=a(t,["sessionResumption"]);e!==void 0&&q!=null&&c(e,["setup","sessionResumption"],Lw(q));let $=a(t,["inputAudioTranscription"]);e!==void 0&&$!=null&&c(e,["setup","inputAudioTranscription"],$);let Q=a(t,["outputAudioTranscription"]);e!==void 0&&Q!=null&&c(e,["setup","outputAudioTranscription"],Q);let Y=a(t,["realtimeInputConfig"]);e!==void 0&&Y!=null&&c(e,["setup","realtimeInputConfig"],Y);let ae=a(t,["contextWindowCompression"]);e!==void 0&&ae!=null&&c(e,["setup","contextWindowCompression"],ae);let pe=a(t,["proactivity"]);return e!==void 0&&pe!=null&&c(e,["setup","proactivity"],pe),n}function Pw(t,e){let n={},o=a(t,["generationConfig"]);e!==void 0&&o!=null&&c(e,["setup","generationConfig"],ww(o));let i=a(t,["responseModalities"]);e!==void 0&&i!=null&&c(e,["setup","generationConfig","responseModalities"],i);let r=a(t,["temperature"]);e!==void 0&&r!=null&&c(e,["setup","generationConfig","temperature"],r);let s=a(t,["topP"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig","topP"],s);let l=a(t,["topK"]);e!==void 0&&l!=null&&c(e,["setup","generationConfig","topK"],l);let d=a(t,["maxOutputTokens"]);e!==void 0&&d!=null&&c(e,["setup","generationConfig","maxOutputTokens"],d);let u=a(t,["mediaResolution"]);e!==void 0&&u!=null&&c(e,["setup","generationConfig","mediaResolution"],u);let f=a(t,["seed"]);e!==void 0&&f!=null&&c(e,["setup","generationConfig","seed"],f);let v=a(t,["speechConfig"]);e!==void 0&&v!=null&&c(e,["setup","generationConfig","speechConfig"],uv(Mp(v)));let _=a(t,["thinkingConfig"]);e!==void 0&&_!=null&&c(e,["setup","generationConfig","thinkingConfig"],_);let S=a(t,["enableAffectiveDialog"]);e!==void 0&&S!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],S);let D=a(t,["systemInstruction"]);e!==void 0&&D!=null&&c(e,["setup","systemInstruction"],tt(D));let V=a(t,["tools"]);if(e!==void 0&&V!=null){let he=Zo(V);Array.isArray(he)&&(he=he.map(_e=>Uw(jo(_e)))),c(e,["setup","tools"],he)}let q=a(t,["sessionResumption"]);e!==void 0&&q!=null&&c(e,["setup","sessionResumption"],q);let $=a(t,["inputAudioTranscription"]);e!==void 0&&$!=null&&c(e,["setup","inputAudioTranscription"],$);let Q=a(t,["outputAudioTranscription"]);e!==void 0&&Q!=null&&c(e,["setup","outputAudioTranscription"],Q);let Y=a(t,["realtimeInputConfig"]);e!==void 0&&Y!=null&&c(e,["setup","realtimeInputConfig"],Y);let ae=a(t,["contextWindowCompression"]);e!==void 0&&ae!=null&&c(e,["setup","contextWindowCompression"],ae);let pe=a(t,["proactivity"]);return e!==void 0&&pe!=null&&c(e,["setup","proactivity"],pe),n}function Dw(t,e){let n={},o=a(e,["model"]);o!=null&&c(n,["setup","model"],be(t,o));let i=a(e,["config"]);return i!=null&&c(n,["config"],Tw(i,n)),n}function Aw(t,e){let n={},o=a(e,["model"]);o!=null&&c(n,["setup","model"],be(t,o));let i=a(e,["config"]);return i!=null&&c(n,["config"],Pw(i,n)),n}function Nw(t){let e={},n=a(t,["musicGenerationConfig"]);return n!=null&&c(e,["musicGenerationConfig"],n),e}function kw(t){let e={},n=a(t,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>i)),c(e,["weightedPrompts"],o)}return e}function Rw(t){let e={},n=a(t,["media"]);if(n!=null){let u=Q0(n);Array.isArray(u)&&(u=u.map(f=>pa(f))),c(e,["mediaChunks"],u)}let o=a(t,["audio"]);o!=null&&c(e,["audio"],pa(ev(o)));let i=a(t,["audioStreamEnd"]);i!=null&&c(e,["audioStreamEnd"],i);let r=a(t,["video"]);r!=null&&c(e,["video"],pa(X0(r)));let s=a(t,["text"]);s!=null&&c(e,["text"],s);let l=a(t,["activityStart"]);l!=null&&c(e,["activityStart"],l);let d=a(t,["activityEnd"]);return d!=null&&c(e,["activityEnd"],d),e}function Ow(t){let e={},n=a(t,["media"]);if(n!=null){let u=Q0(n);Array.isArray(u)&&(u=u.map(f=>f)),c(e,["mediaChunks"],u)}let o=a(t,["audio"]);o!=null&&c(e,["audio"],ev(o));let i=a(t,["audioStreamEnd"]);i!=null&&c(e,["audioStreamEnd"],i);let r=a(t,["video"]);r!=null&&c(e,["video"],X0(r));let s=a(t,["text"]);s!=null&&c(e,["text"],s);let l=a(t,["activityStart"]);l!=null&&c(e,["activityStart"],l);let d=a(t,["activityEnd"]);return d!=null&&c(e,["activityEnd"],d),e}function Fw(t){let e={},n=a(t,["setupComplete"]);n!=null&&c(e,["setupComplete"],n);let o=a(t,["serverContent"]);o!=null&&c(e,["serverContent"],o);let i=a(t,["toolCall"]);i!=null&&c(e,["toolCall"],i);let r=a(t,["toolCallCancellation"]);r!=null&&c(e,["toolCallCancellation"],r);let s=a(t,["usageMetadata"]);s!=null&&c(e,["usageMetadata"],Hw(s));let l=a(t,["goAway"]);l!=null&&c(e,["goAway"],l);let d=a(t,["sessionResumptionUpdate"]);return d!=null&&c(e,["sessionResumptionUpdate"],d),e}function Vw(t){let e={},n=a(t,["mediaResolution"]);n!=null&&c(e,["mediaResolution"],n);let o=a(t,["codeExecutionResult"]);o!=null&&c(e,["codeExecutionResult"],o);let i=a(t,["executableCode"]);i!=null&&c(e,["executableCode"],i);let r=a(t,["fileData"]);r!=null&&c(e,["fileData"],Sw(r));let s=a(t,["functionCall"]);s!=null&&c(e,["functionCall"],Ew(s));let l=a(t,["functionResponse"]);l!=null&&c(e,["functionResponse"],l);let d=a(t,["inlineData"]);d!=null&&c(e,["inlineData"],pa(d));let u=a(t,["text"]);u!=null&&c(e,["text"],u);let f=a(t,["thought"]);f!=null&&c(e,["thought"],f);let v=a(t,["thoughtSignature"]);v!=null&&c(e,["thoughtSignature"],v);let _=a(t,["videoMetadata"]);return _!=null&&c(e,["videoMetadata"],_),e}function Lw(t){let e={},n=a(t,["handle"]);if(n!=null&&c(e,["handle"],n),a(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function uv(t){let e={},n=a(t,["languageCode"]);n!=null&&c(e,["languageCode"],n);let o=a(t,["voiceConfig"]);if(o!=null&&c(e,["voiceConfig"],o),a(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function Bw(t){let e={},n=a(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(v=>v)),c(e,["functionDeclarations"],f)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let o=a(t,["googleSearchRetrieval"]);o!=null&&c(e,["googleSearchRetrieval"],o);let i=a(t,["computerUse"]);i!=null&&c(e,["computerUse"],i);let r=a(t,["fileSearch"]);r!=null&&c(e,["fileSearch"],r);let s=a(t,["codeExecution"]);if(s!=null&&c(e,["codeExecution"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let l=a(t,["googleMaps"]);l!=null&&c(e,["googleMaps"],xw(l));let d=a(t,["googleSearch"]);d!=null&&c(e,["googleSearch"],Iw(d));let u=a(t,["urlContext"]);return u!=null&&c(e,["urlContext"],u),e}function Uw(t){let e={},n=a(t,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(_=>Mw(_))),c(e,["functionDeclarations"],v)}let o=a(t,["retrieval"]);o!=null&&c(e,["retrieval"],o);let i=a(t,["googleSearchRetrieval"]);i!=null&&c(e,["googleSearchRetrieval"],i);let r=a(t,["computerUse"]);if(r!=null&&c(e,["computerUse"],r),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let s=a(t,["codeExecution"]);s!=null&&c(e,["codeExecution"],s);let l=a(t,["enterpriseWebSearch"]);l!=null&&c(e,["enterpriseWebSearch"],l);let d=a(t,["googleMaps"]);d!=null&&c(e,["googleMaps"],d);let u=a(t,["googleSearch"]);u!=null&&c(e,["googleSearch"],u);let f=a(t,["urlContext"]);return f!=null&&c(e,["urlContext"],f),e}function Hw(t){let e={},n=a(t,["promptTokenCount"]);n!=null&&c(e,["promptTokenCount"],n);let o=a(t,["cachedContentTokenCount"]);o!=null&&c(e,["cachedContentTokenCount"],o);let i=a(t,["candidatesTokenCount"]);i!=null&&c(e,["responseTokenCount"],i);let r=a(t,["toolUsePromptTokenCount"]);r!=null&&c(e,["toolUsePromptTokenCount"],r);let s=a(t,["thoughtsTokenCount"]);s!=null&&c(e,["thoughtsTokenCount"],s);let l=a(t,["totalTokenCount"]);l!=null&&c(e,["totalTokenCount"],l);let d=a(t,["promptTokensDetails"]);if(d!=null){let S=d;Array.isArray(S)&&(S=S.map(D=>D)),c(e,["promptTokensDetails"],S)}let u=a(t,["cacheTokensDetails"]);if(u!=null){let S=u;Array.isArray(S)&&(S=S.map(D=>D)),c(e,["cacheTokensDetails"],S)}let f=a(t,["candidatesTokensDetails"]);if(f!=null){let S=f;Array.isArray(S)&&(S=S.map(D=>D)),c(e,["responseTokensDetails"],S)}let v=a(t,["toolUsePromptTokensDetails"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(D=>D)),c(e,["toolUsePromptTokensDetails"],S)}let _=a(t,["trafficType"]);return _!=null&&c(e,["trafficType"],_),e}function Gw(t){let e={},n=a(t,["data"]);if(n!=null&&c(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let o=a(t,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function qw(t){let e={},n=a(t,["content"]);n!=null&&c(e,["content"],n);let o=a(t,["citationMetadata"]);o!=null&&c(e,["citationMetadata"],$w(o));let i=a(t,["tokenCount"]);i!=null&&c(e,["tokenCount"],i);let r=a(t,["finishReason"]);r!=null&&c(e,["finishReason"],r);let s=a(t,["avgLogprobs"]);s!=null&&c(e,["avgLogprobs"],s);let l=a(t,["groundingMetadata"]);l!=null&&c(e,["groundingMetadata"],l);let d=a(t,["index"]);d!=null&&c(e,["index"],d);let u=a(t,["logprobsResult"]);u!=null&&c(e,["logprobsResult"],u);let f=a(t,["safetyRatings"]);if(f!=null){let _=f;Array.isArray(_)&&(_=_.map(S=>S)),c(e,["safetyRatings"],_)}let v=a(t,["urlContextMetadata"]);return v!=null&&c(e,["urlContextMetadata"],v),e}function $w(t){let e={},n=a(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>i)),c(e,["citations"],o)}return e}function zw(t,e){let n={},o=a(e,["model"]);o!=null&&c(n,["_url","model"],be(t,o));let i=a(e,["contents"]);if(i!=null){let r=Mt(i);Array.isArray(r)&&(r=r.map(s=>s)),c(n,["contents"],r)}return n}function Ww(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let o=a(t,["tokensInfo"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(r=>r)),c(e,["tokensInfo"],i)}return e}function Yw(t){let e={},n=a(t,["values"]);n!=null&&c(e,["values"],n);let o=a(t,["statistics"]);return o!=null&&c(e,["statistics"],Jw(o)),e}function Jw(t){let e={},n=a(t,["truncated"]);n!=null&&c(e,["truncated"],n);let o=a(t,["token_count"]);return o!=null&&c(e,["tokenCount"],o),e}function xa(t){let e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>oI(r))),c(e,["parts"],i)}let o=a(t,["role"]);return o!=null&&c(e,["role"],o),e}function jw(t){let e={},n=a(t,["controlType"]);n!=null&&c(e,["controlType"],n);let o=a(t,["enableControlImageComputation"]);return o!=null&&c(e,["computeControl"],o),e}function Zw(t){let e={};if(a(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(a(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(a(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Kw(t,e){let n={},o=a(t,["systemInstruction"]);e!==void 0&&o!=null&&c(e,["systemInstruction"],tt(o));let i=a(t,["tools"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>hv(l))),c(e,["tools"],s)}let r=a(t,["generationConfig"]);return e!==void 0&&r!=null&&c(e,["generationConfig"],Gx(r)),n}function Qw(t,e){let n={},o=a(e,["model"]);o!=null&&c(n,["_url","model"],be(t,o));let i=a(e,["contents"]);if(i!=null){let s=Mt(i);Array.isArray(s)&&(s=s.map(l=>xa(l))),c(n,["contents"],s)}let r=a(e,["config"]);return r!=null&&Zw(r),n}function Xw(t,e){let n={},o=a(e,["model"]);o!=null&&c(n,["_url","model"],be(t,o));let i=a(e,["contents"]);if(i!=null){let s=Mt(i);Array.isArray(s)&&(s=s.map(l=>l)),c(n,["contents"],s)}let r=a(e,["config"]);return r!=null&&Kw(r,n),n}function ex(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let o=a(t,["totalTokens"]);o!=null&&c(e,["totalTokens"],o);let i=a(t,["cachedContentTokenCount"]);return i!=null&&c(e,["cachedContentTokenCount"],i),e}function tx(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let o=a(t,["totalTokens"]);return o!=null&&c(e,["totalTokens"],o),e}function nx(t,e){let n={},o=a(e,["model"]);return o!=null&&c(n,["_url","name"],be(t,o)),n}function ox(t,e){let n={},o=a(e,["model"]);return o!=null&&c(n,["_url","name"],be(t,o)),n}function ix(t){let e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}function rx(t){let e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}function sx(t,e){let n={},o=a(t,["outputGcsUri"]);e!==void 0&&o!=null&&c(e,["parameters","storageUri"],o);let i=a(t,["negativePrompt"]);e!==void 0&&i!=null&&c(e,["parameters","negativePrompt"],i);let r=a(t,["numberOfImages"]);e!==void 0&&r!=null&&c(e,["parameters","sampleCount"],r);let s=a(t,["aspectRatio"]);e!==void 0&&s!=null&&c(e,["parameters","aspectRatio"],s);let l=a(t,["guidanceScale"]);e!==void 0&&l!=null&&c(e,["parameters","guidanceScale"],l);let d=a(t,["seed"]);e!==void 0&&d!=null&&c(e,["parameters","seed"],d);let u=a(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&c(e,["parameters","safetySetting"],u);let f=a(t,["personGeneration"]);e!==void 0&&f!=null&&c(e,["parameters","personGeneration"],f);let v=a(t,["includeSafetyAttributes"]);e!==void 0&&v!=null&&c(e,["parameters","includeSafetyAttributes"],v);let _=a(t,["includeRaiReason"]);e!==void 0&&_!=null&&c(e,["parameters","includeRaiReason"],_);let S=a(t,["language"]);e!==void 0&&S!=null&&c(e,["parameters","language"],S);let D=a(t,["outputMimeType"]);e!==void 0&&D!=null&&c(e,["parameters","outputOptions","mimeType"],D);let V=a(t,["outputCompressionQuality"]);e!==void 0&&V!=null&&c(e,["parameters","outputOptions","compressionQuality"],V);let q=a(t,["addWatermark"]);e!==void 0&&q!=null&&c(e,["parameters","addWatermark"],q);let $=a(t,["labels"]);e!==void 0&&$!=null&&c(e,["labels"],$);let Q=a(t,["editMode"]);e!==void 0&&Q!=null&&c(e,["parameters","editMode"],Q);let Y=a(t,["baseSteps"]);return e!==void 0&&Y!=null&&c(e,["parameters","editConfig","baseSteps"],Y),n}function ax(t,e){let n={},o=a(e,["model"]);o!=null&&c(n,["_url","model"],be(t,o));let i=a(e,["prompt"]);i!=null&&c(n,["instances[0]","prompt"],i);let r=a(e,["referenceImages"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(d=>cI(d))),c(n,["instances[0]","referenceImages"],l)}let s=a(e,["config"]);return s!=null&&sx(s,n),n}function lx(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let o=a(t,["predictions"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(r=>Ia(r))),c(e,["generatedImages"],i)}return e}function cx(t,e){let n={},o=a(t,["taskType"]);e!==void 0&&o!=null&&c(e,["requests[]","taskType"],o);let i=a(t,["title"]);e!==void 0&&i!=null&&c(e,["requests[]","title"],i);let r=a(t,["outputDimensionality"]);if(e!==void 0&&r!=null&&c(e,["requests[]","outputDimensionality"],r),a(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function dx(t,e){let n={},o=a(t,["taskType"]);e!==void 0&&o!=null&&c(e,["instances[]","task_type"],o);let i=a(t,["title"]);e!==void 0&&i!=null&&c(e,["instances[]","title"],i);let r=a(t,["outputDimensionality"]);e!==void 0&&r!=null&&c(e,["parameters","outputDimensionality"],r);let s=a(t,["mimeType"]);e!==void 0&&s!=null&&c(e,["instances[]","mimeType"],s);let l=a(t,["autoTruncate"]);return e!==void 0&&l!=null&&c(e,["parameters","autoTruncate"],l),n}function ux(t,e){let n={},o=a(e,["model"]);o!=null&&c(n,["_url","model"],be(t,o));let i=a(e,["contents"]);if(i!=null){let l=bp(t,i);Array.isArray(l)&&(l=l.map(d=>d)),c(n,["requests[]","content"],l)}let r=a(e,["config"]);r!=null&&cx(r,n);let s=a(e,["model"]);return s!==void 0&&c(n,["requests[]","model"],be(t,s)),n}function px(t,e){let n={},o=a(e,["model"]);o!=null&&c(n,["_url","model"],be(t,o));let i=a(e,["contents"]);if(i!=null){let s=bp(t,i);Array.isArray(s)&&(s=s.map(l=>l)),c(n,["instances[]","content"],s)}let r=a(e,["config"]);return r!=null&&dx(r,n),n}function fx(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let o=a(t,["embeddings"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>s)),c(e,["embeddings"],r)}let i=a(t,["metadata"]);return i!=null&&c(e,["metadata"],i),e}function mx(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let o=a(t,["predictions[]","embeddings"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>Yw(s))),c(e,["embeddings"],r)}let i=a(t,["metadata"]);return i!=null&&c(e,["metadata"],i),e}function gx(t){let e={},n=a(t,["endpoint"]);n!=null&&c(e,["name"],n);let o=a(t,["deployedModelId"]);return o!=null&&c(e,["deployedModelId"],o),e}function hx(t){let e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=a(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);let o=a(t,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function vx(t){let e={},n=a(t,["id"]);n!=null&&c(e,["id"],n);let o=a(t,["args"]);o!=null&&c(e,["args"],o);let i=a(t,["name"]);if(i!=null&&c(e,["name"],i),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function _x(t){let e={},n=a(t,["mode"]);n!=null&&c(e,["mode"],n);let o=a(t,["allowedFunctionNames"]);if(o!=null&&c(e,["allowedFunctionNames"],o),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function yx(t){let e={};if(a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");let n=a(t,["description"]);n!=null&&c(e,["description"],n);let o=a(t,["name"]);o!=null&&c(e,["name"],o);let i=a(t,["parameters"]);i!=null&&c(e,["parameters"],i);let r=a(t,["parametersJsonSchema"]);r!=null&&c(e,["parametersJsonSchema"],r);let s=a(t,["response"]);s!=null&&c(e,["response"],s);let l=a(t,["responseJsonSchema"]);return l!=null&&c(e,["responseJsonSchema"],l),e}function Cx(t,e,n){let o={},i=a(e,["systemInstruction"]);n!==void 0&&i!=null&&c(n,["systemInstruction"],xa(tt(i)));let r=a(e,["temperature"]);r!=null&&c(o,["temperature"],r);let s=a(e,["topP"]);s!=null&&c(o,["topP"],s);let l=a(e,["topK"]);l!=null&&c(o,["topK"],l);let d=a(e,["candidateCount"]);d!=null&&c(o,["candidateCount"],d);let u=a(e,["maxOutputTokens"]);u!=null&&c(o,["maxOutputTokens"],u);let f=a(e,["stopSequences"]);f!=null&&c(o,["stopSequences"],f);let v=a(e,["responseLogprobs"]);v!=null&&c(o,["responseLogprobs"],v);let _=a(e,["logprobs"]);_!=null&&c(o,["logprobs"],_);let S=a(e,["presencePenalty"]);S!=null&&c(o,["presencePenalty"],S);let D=a(e,["frequencyPenalty"]);D!=null&&c(o,["frequencyPenalty"],D);let V=a(e,["seed"]);V!=null&&c(o,["seed"],V);let q=a(e,["responseMimeType"]);q!=null&&c(o,["responseMimeType"],q);let $=a(e,["responseSchema"]);$!=null&&c(o,["responseSchema"],Sp($));let Q=a(e,["responseJsonSchema"]);if(Q!=null&&c(o,["responseJsonSchema"],Q),a(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let Y=a(e,["safetySettings"]);if(n!==void 0&&Y!=null){let Ue=Y;Array.isArray(Ue)&&(Ue=Ue.map($t=>dI($t))),c(n,["safetySettings"],Ue)}let ae=a(e,["tools"]);if(n!==void 0&&ae!=null){let Ue=Zo(ae);Array.isArray(Ue)&&(Ue=Ue.map($t=>vI(jo($t)))),c(n,["tools"],Ue)}let pe=a(e,["toolConfig"]);if(n!==void 0&&pe!=null&&c(n,["toolConfig"],hI(pe)),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let he=a(e,["cachedContent"]);n!==void 0&&he!=null&&c(n,["cachedContent"],_n(t,he));let _e=a(e,["responseModalities"]);_e!=null&&c(o,["responseModalities"],_e);let Qe=a(e,["mediaResolution"]);Qe!=null&&c(o,["mediaResolution"],Qe);let le=a(e,["speechConfig"]);if(le!=null&&c(o,["speechConfig"],Ep(le)),a(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let we=a(e,["thinkingConfig"]);we!=null&&c(o,["thinkingConfig"],we);let je=a(e,["imageConfig"]);return je!=null&&c(o,["imageConfig"],Yx(je)),o}function bx(t,e,n){let o={},i=a(e,["systemInstruction"]);n!==void 0&&i!=null&&c(n,["systemInstruction"],tt(i));let r=a(e,["temperature"]);r!=null&&c(o,["temperature"],r);let s=a(e,["topP"]);s!=null&&c(o,["topP"],s);let l=a(e,["topK"]);l!=null&&c(o,["topK"],l);let d=a(e,["candidateCount"]);d!=null&&c(o,["candidateCount"],d);let u=a(e,["maxOutputTokens"]);u!=null&&c(o,["maxOutputTokens"],u);let f=a(e,["stopSequences"]);f!=null&&c(o,["stopSequences"],f);let v=a(e,["responseLogprobs"]);v!=null&&c(o,["responseLogprobs"],v);let _=a(e,["logprobs"]);_!=null&&c(o,["logprobs"],_);let S=a(e,["presencePenalty"]);S!=null&&c(o,["presencePenalty"],S);let D=a(e,["frequencyPenalty"]);D!=null&&c(o,["frequencyPenalty"],D);let V=a(e,["seed"]);V!=null&&c(o,["seed"],V);let q=a(e,["responseMimeType"]);q!=null&&c(o,["responseMimeType"],q);let $=a(e,["responseSchema"]);$!=null&&c(o,["responseSchema"],Sp($));let Q=a(e,["responseJsonSchema"]);Q!=null&&c(o,["responseJsonSchema"],Q);let Y=a(e,["routingConfig"]);Y!=null&&c(o,["routingConfig"],Y);let ae=a(e,["modelSelectionConfig"]);ae!=null&&c(o,["modelConfig"],ae);let pe=a(e,["safetySettings"]);if(n!==void 0&&pe!=null){let an=pe;Array.isArray(an)&&(an=an.map(nl=>nl)),c(n,["safetySettings"],an)}let he=a(e,["tools"]);if(n!==void 0&&he!=null){let an=Zo(he);Array.isArray(an)&&(an=an.map(nl=>hv(jo(nl)))),c(n,["tools"],an)}let _e=a(e,["toolConfig"]);n!==void 0&&_e!=null&&c(n,["toolConfig"],_e);let Qe=a(e,["labels"]);n!==void 0&&Qe!=null&&c(n,["labels"],Qe);let le=a(e,["cachedContent"]);n!==void 0&&le!=null&&c(n,["cachedContent"],_n(t,le));let we=a(e,["responseModalities"]);we!=null&&c(o,["responseModalities"],we);let je=a(e,["mediaResolution"]);je!=null&&c(o,["mediaResolution"],je);let Ue=a(e,["speechConfig"]);Ue!=null&&c(o,["speechConfig"],gv(Ep(Ue)));let $t=a(e,["audioTimestamp"]);$t!=null&&c(o,["audioTimestamp"],$t);let Fp=a(e,["thinkingConfig"]);Fp!=null&&c(o,["thinkingConfig"],Fp);let Vp=a(e,["imageConfig"]);return Vp!=null&&c(o,["imageConfig"],Jx(Vp)),o}function V0(t,e){let n={},o=a(e,["model"]);o!=null&&c(n,["_url","model"],be(t,o));let i=a(e,["contents"]);if(i!=null){let s=Mt(i);Array.isArray(s)&&(s=s.map(l=>xa(l))),c(n,["contents"],s)}let r=a(e,["config"]);return r!=null&&c(n,["generationConfig"],Cx(t,r,n)),n}function L0(t,e){let n={},o=a(e,["model"]);o!=null&&c(n,["_url","model"],be(t,o));let i=a(e,["contents"]);if(i!=null){let s=Mt(i);Array.isArray(s)&&(s=s.map(l=>l)),c(n,["contents"],s)}let r=a(e,["config"]);return r!=null&&c(n,["generationConfig"],bx(t,r,n)),n}function B0(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let o=a(t,["candidates"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(u=>qw(u))),c(e,["candidates"],d)}let i=a(t,["modelVersion"]);i!=null&&c(e,["modelVersion"],i);let r=a(t,["promptFeedback"]);r!=null&&c(e,["promptFeedback"],r);let s=a(t,["responseId"]);s!=null&&c(e,["responseId"],s);let l=a(t,["usageMetadata"]);return l!=null&&c(e,["usageMetadata"],l),e}function U0(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let o=a(t,["candidates"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(f=>f)),c(e,["candidates"],u)}let i=a(t,["createTime"]);i!=null&&c(e,["createTime"],i);let r=a(t,["modelVersion"]);r!=null&&c(e,["modelVersion"],r);let s=a(t,["promptFeedback"]);s!=null&&c(e,["promptFeedback"],s);let l=a(t,["responseId"]);l!=null&&c(e,["responseId"],l);let d=a(t,["usageMetadata"]);return d!=null&&c(e,["usageMetadata"],d),e}function Sx(t,e){let n={};if(a(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");let o=a(t,["numberOfImages"]);e!==void 0&&o!=null&&c(e,["parameters","sampleCount"],o);let i=a(t,["aspectRatio"]);e!==void 0&&i!=null&&c(e,["parameters","aspectRatio"],i);let r=a(t,["guidanceScale"]);if(e!==void 0&&r!=null&&c(e,["parameters","guidanceScale"],r),a(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let s=a(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&c(e,["parameters","safetySetting"],s);let l=a(t,["personGeneration"]);e!==void 0&&l!=null&&c(e,["parameters","personGeneration"],l);let d=a(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&c(e,["parameters","includeSafetyAttributes"],d);let u=a(t,["includeRaiReason"]);e!==void 0&&u!=null&&c(e,["parameters","includeRaiReason"],u);let f=a(t,["language"]);e!==void 0&&f!=null&&c(e,["parameters","language"],f);let v=a(t,["outputMimeType"]);e!==void 0&&v!=null&&c(e,["parameters","outputOptions","mimeType"],v);let _=a(t,["outputCompressionQuality"]);if(e!==void 0&&_!=null&&c(e,["parameters","outputOptions","compressionQuality"],_),a(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let S=a(t,["imageSize"]);if(e!==void 0&&S!=null&&c(e,["parameters","sampleImageSize"],S),a(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function Ex(t,e){let n={},o=a(t,["outputGcsUri"]);e!==void 0&&o!=null&&c(e,["parameters","storageUri"],o);let i=a(t,["negativePrompt"]);e!==void 0&&i!=null&&c(e,["parameters","negativePrompt"],i);let r=a(t,["numberOfImages"]);e!==void 0&&r!=null&&c(e,["parameters","sampleCount"],r);let s=a(t,["aspectRatio"]);e!==void 0&&s!=null&&c(e,["parameters","aspectRatio"],s);let l=a(t,["guidanceScale"]);e!==void 0&&l!=null&&c(e,["parameters","guidanceScale"],l);let d=a(t,["seed"]);e!==void 0&&d!=null&&c(e,["parameters","seed"],d);let u=a(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&c(e,["parameters","safetySetting"],u);let f=a(t,["personGeneration"]);e!==void 0&&f!=null&&c(e,["parameters","personGeneration"],f);let v=a(t,["includeSafetyAttributes"]);e!==void 0&&v!=null&&c(e,["parameters","includeSafetyAttributes"],v);let _=a(t,["includeRaiReason"]);e!==void 0&&_!=null&&c(e,["parameters","includeRaiReason"],_);let S=a(t,["language"]);e!==void 0&&S!=null&&c(e,["parameters","language"],S);let D=a(t,["outputMimeType"]);e!==void 0&&D!=null&&c(e,["parameters","outputOptions","mimeType"],D);let V=a(t,["outputCompressionQuality"]);e!==void 0&&V!=null&&c(e,["parameters","outputOptions","compressionQuality"],V);let q=a(t,["addWatermark"]);e!==void 0&&q!=null&&c(e,["parameters","addWatermark"],q);let $=a(t,["labels"]);e!==void 0&&$!=null&&c(e,["labels"],$);let Q=a(t,["imageSize"]);e!==void 0&&Q!=null&&c(e,["parameters","sampleImageSize"],Q);let Y=a(t,["enhancePrompt"]);return e!==void 0&&Y!=null&&c(e,["parameters","enhancePrompt"],Y),n}function Mx(t,e){let n={},o=a(e,["model"]);o!=null&&c(n,["_url","model"],be(t,o));let i=a(e,["prompt"]);i!=null&&c(n,["instances[0]","prompt"],i);let r=a(e,["config"]);return r!=null&&Sx(r,n),n}function wx(t,e){let n={},o=a(e,["model"]);o!=null&&c(n,["_url","model"],be(t,o));let i=a(e,["prompt"]);i!=null&&c(n,["instances[0]","prompt"],i);let r=a(e,["config"]);return r!=null&&Ex(r,n),n}function xx(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let o=a(t,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>Lx(s))),c(e,["generatedImages"],r)}let i=a(t,["positivePromptSafetyAttributes"]);return i!=null&&c(e,["positivePromptSafetyAttributes"],fv(i)),e}function Ix(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let o=a(t,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>Ia(s))),c(e,["generatedImages"],r)}let i=a(t,["positivePromptSafetyAttributes"]);return i!=null&&c(e,["positivePromptSafetyAttributes"],mv(i)),e}function Tx(t,e){let n={},o=a(t,["numberOfVideos"]);if(e!==void 0&&o!=null&&c(e,["parameters","sampleCount"],o),a(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");let i=a(t,["durationSeconds"]);if(e!==void 0&&i!=null&&c(e,["parameters","durationSeconds"],i),a(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let r=a(t,["aspectRatio"]);e!==void 0&&r!=null&&c(e,["parameters","aspectRatio"],r);let s=a(t,["resolution"]);e!==void 0&&s!=null&&c(e,["parameters","resolution"],s);let l=a(t,["personGeneration"]);if(e!==void 0&&l!=null&&c(e,["parameters","personGeneration"],l),a(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");let d=a(t,["negativePrompt"]);e!==void 0&&d!=null&&c(e,["parameters","negativePrompt"],d);let u=a(t,["enhancePrompt"]);if(e!==void 0&&u!=null&&c(e,["parameters","enhancePrompt"],u),a(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");let f=a(t,["lastFrame"]);e!==void 0&&f!=null&&c(e,["instances[0]","lastFrame"],Ta(f));let v=a(t,["referenceImages"]);if(e!==void 0&&v!=null){let _=v;Array.isArray(_)&&(_=_.map(S=>DI(S))),c(e,["instances[0]","referenceImages"],_)}if(a(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(a(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function Px(t,e){let n={},o=a(t,["numberOfVideos"]);e!==void 0&&o!=null&&c(e,["parameters","sampleCount"],o);let i=a(t,["outputGcsUri"]);e!==void 0&&i!=null&&c(e,["parameters","storageUri"],i);let r=a(t,["fps"]);e!==void 0&&r!=null&&c(e,["parameters","fps"],r);let s=a(t,["durationSeconds"]);e!==void 0&&s!=null&&c(e,["parameters","durationSeconds"],s);let l=a(t,["seed"]);e!==void 0&&l!=null&&c(e,["parameters","seed"],l);let d=a(t,["aspectRatio"]);e!==void 0&&d!=null&&c(e,["parameters","aspectRatio"],d);let u=a(t,["resolution"]);e!==void 0&&u!=null&&c(e,["parameters","resolution"],u);let f=a(t,["personGeneration"]);e!==void 0&&f!=null&&c(e,["parameters","personGeneration"],f);let v=a(t,["pubsubTopic"]);e!==void 0&&v!=null&&c(e,["parameters","pubsubTopic"],v);let _=a(t,["negativePrompt"]);e!==void 0&&_!=null&&c(e,["parameters","negativePrompt"],_);let S=a(t,["enhancePrompt"]);e!==void 0&&S!=null&&c(e,["parameters","enhancePrompt"],S);let D=a(t,["generateAudio"]);e!==void 0&&D!=null&&c(e,["parameters","generateAudio"],D);let V=a(t,["lastFrame"]);e!==void 0&&V!=null&&c(e,["instances[0]","lastFrame"],qt(V));let q=a(t,["referenceImages"]);if(e!==void 0&&q!=null){let Y=q;Array.isArray(Y)&&(Y=Y.map(ae=>AI(ae))),c(e,["instances[0]","referenceImages"],Y)}let $=a(t,["mask"]);e!==void 0&&$!=null&&c(e,["instances[0]","mask"],PI($));let Q=a(t,["compressionQuality"]);return e!==void 0&&Q!=null&&c(e,["parameters","compressionQuality"],Q),n}function Dx(t){let e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);let o=a(t,["metadata"]);o!=null&&c(e,["metadata"],o);let i=a(t,["done"]);i!=null&&c(e,["done"],i);let r=a(t,["error"]);r!=null&&c(e,["error"],r);let s=a(t,["response","generateVideoResponse"]);return s!=null&&c(e,["response"],Rx(s)),e}function Ax(t){let e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);let o=a(t,["metadata"]);o!=null&&c(e,["metadata"],o);let i=a(t,["done"]);i!=null&&c(e,["done"],i);let r=a(t,["error"]);r!=null&&c(e,["error"],r);let s=a(t,["response"]);return s!=null&&c(e,["response"],Ox(s)),e}function Nx(t,e){let n={},o=a(e,["model"]);o!=null&&c(n,["_url","model"],be(t,o));let i=a(e,["prompt"]);i!=null&&c(n,["instances[0]","prompt"],i);let r=a(e,["image"]);r!=null&&c(n,["instances[0]","image"],Ta(r));let s=a(e,["video"]);s!=null&&c(n,["instances[0]","video"],vv(s));let l=a(e,["source"]);l!=null&&Fx(l,n);let d=a(e,["config"]);return d!=null&&Tx(d,n),n}function kx(t,e){let n={},o=a(e,["model"]);o!=null&&c(n,["_url","model"],be(t,o));let i=a(e,["prompt"]);i!=null&&c(n,["instances[0]","prompt"],i);let r=a(e,["image"]);r!=null&&c(n,["instances[0]","image"],qt(r));let s=a(e,["video"]);s!=null&&c(n,["instances[0]","video"],_v(s));let l=a(e,["source"]);l!=null&&Vx(l,n);let d=a(e,["config"]);return d!=null&&Px(d,n),n}function Rx(t){let e={},n=a(t,["generatedSamples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Ux(s))),c(e,["generatedVideos"],r)}let o=a(t,["raiMediaFilteredCount"]);o!=null&&c(e,["raiMediaFilteredCount"],o);let i=a(t,["raiMediaFilteredReasons"]);return i!=null&&c(e,["raiMediaFilteredReasons"],i),e}function Ox(t){let e={},n=a(t,["videos"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>Hx(s))),c(e,["generatedVideos"],r)}let o=a(t,["raiMediaFilteredCount"]);o!=null&&c(e,["raiMediaFilteredCount"],o);let i=a(t,["raiMediaFilteredReasons"]);return i!=null&&c(e,["raiMediaFilteredReasons"],i),e}function Fx(t,e){let n={},o=a(t,["prompt"]);e!==void 0&&o!=null&&c(e,["instances[0]","prompt"],o);let i=a(t,["image"]);e!==void 0&&i!=null&&c(e,["instances[0]","image"],Ta(i));let r=a(t,["video"]);return e!==void 0&&r!=null&&c(e,["instances[0]","video"],vv(r)),n}function Vx(t,e){let n={},o=a(t,["prompt"]);e!==void 0&&o!=null&&c(e,["instances[0]","prompt"],o);let i=a(t,["image"]);e!==void 0&&i!=null&&c(e,["instances[0]","image"],qt(i));let r=a(t,["video"]);return e!==void 0&&r!=null&&c(e,["instances[0]","video"],_v(r)),n}function Lx(t){let e={},n=a(t,["_self"]);n!=null&&c(e,["image"],jx(n));let o=a(t,["raiFilteredReason"]);o!=null&&c(e,["raiFilteredReason"],o);let i=a(t,["_self"]);return i!=null&&c(e,["safetyAttributes"],fv(i)),e}function Ia(t){let e={},n=a(t,["_self"]);n!=null&&c(e,["image"],pv(n));let o=a(t,["raiFilteredReason"]);o!=null&&c(e,["raiFilteredReason"],o);let i=a(t,["_self"]);i!=null&&c(e,["safetyAttributes"],mv(i));let r=a(t,["prompt"]);return r!=null&&c(e,["enhancedPrompt"],r),e}function Bx(t){let e={},n=a(t,["_self"]);n!=null&&c(e,["mask"],pv(n));let o=a(t,["labels"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(r=>r)),c(e,["labels"],i)}return e}function Ux(t){let e={},n=a(t,["video"]);return n!=null&&c(e,["video"],II(n)),e}function Hx(t){let e={},n=a(t,["_self"]);return n!=null&&c(e,["video"],TI(n)),e}function Gx(t){let e={},n=a(t,["modelSelectionConfig"]);n!=null&&c(e,["modelConfig"],n);let o=a(t,["responseJsonSchema"]);o!=null&&c(e,["responseJsonSchema"],o);let i=a(t,["audioTimestamp"]);i!=null&&c(e,["audioTimestamp"],i);let r=a(t,["candidateCount"]);r!=null&&c(e,["candidateCount"],r);let s=a(t,["enableAffectiveDialog"]);s!=null&&c(e,["enableAffectiveDialog"],s);let l=a(t,["frequencyPenalty"]);l!=null&&c(e,["frequencyPenalty"],l);let d=a(t,["logprobs"]);d!=null&&c(e,["logprobs"],d);let u=a(t,["maxOutputTokens"]);u!=null&&c(e,["maxOutputTokens"],u);let f=a(t,["mediaResolution"]);f!=null&&c(e,["mediaResolution"],f);let v=a(t,["presencePenalty"]);v!=null&&c(e,["presencePenalty"],v);let _=a(t,["responseLogprobs"]);_!=null&&c(e,["responseLogprobs"],_);let S=a(t,["responseMimeType"]);S!=null&&c(e,["responseMimeType"],S);let D=a(t,["responseModalities"]);D!=null&&c(e,["responseModalities"],D);let V=a(t,["responseSchema"]);V!=null&&c(e,["responseSchema"],V);let q=a(t,["routingConfig"]);q!=null&&c(e,["routingConfig"],q);let $=a(t,["seed"]);$!=null&&c(e,["seed"],$);let Q=a(t,["speechConfig"]);Q!=null&&c(e,["speechConfig"],gv(Q));let Y=a(t,["stopSequences"]);Y!=null&&c(e,["stopSequences"],Y);let ae=a(t,["temperature"]);ae!=null&&c(e,["temperature"],ae);let pe=a(t,["thinkingConfig"]);pe!=null&&c(e,["thinkingConfig"],pe);let he=a(t,["topK"]);he!=null&&c(e,["topK"],he);let _e=a(t,["topP"]);if(_e!=null&&c(e,["topP"],_e),a(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function qx(t,e){let n={},o=a(e,["model"]);return o!=null&&c(n,["_url","name"],be(t,o)),n}function $x(t,e){let n={},o=a(e,["model"]);return o!=null&&c(n,["_url","name"],be(t,o)),n}function zx(t){let e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=a(t,["enableWidget"]);return n!=null&&c(e,["enableWidget"],n),e}function Wx(t){let e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=a(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],n),e}function Yx(t){let e={},n=a(t,["aspectRatio"]);n!=null&&c(e,["aspectRatio"],n);let o=a(t,["imageSize"]);if(o!=null&&c(e,["imageSize"],o),a(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(a(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Jx(t){let e={},n=a(t,["aspectRatio"]);n!=null&&c(e,["aspectRatio"],n);let o=a(t,["imageSize"]);o!=null&&c(e,["imageSize"],o);let i=a(t,["outputMimeType"]);i!=null&&c(e,["imageOutputOptions","mimeType"],i);let r=a(t,["outputCompressionQuality"]);return r!=null&&c(e,["imageOutputOptions","compressionQuality"],r),e}function jx(t){let e={},n=a(t,["bytesBase64Encoded"]);n!=null&&c(e,["imageBytes"],On(n));let o=a(t,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function pv(t){let e={},n=a(t,["gcsUri"]);n!=null&&c(e,["gcsUri"],n);let o=a(t,["bytesBase64Encoded"]);o!=null&&c(e,["imageBytes"],On(o));let i=a(t,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function Ta(t){let e={};if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");let n=a(t,["imageBytes"]);n!=null&&c(e,["bytesBase64Encoded"],On(n));let o=a(t,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function qt(t){let e={},n=a(t,["gcsUri"]);n!=null&&c(e,["gcsUri"],n);let o=a(t,["imageBytes"]);o!=null&&c(e,["bytesBase64Encoded"],On(o));let i=a(t,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function Zx(t,e,n){let o={},i=a(e,["pageSize"]);n!==void 0&&i!=null&&c(n,["_query","pageSize"],i);let r=a(e,["pageToken"]);n!==void 0&&r!=null&&c(n,["_query","pageToken"],r);let s=a(e,["filter"]);n!==void 0&&s!=null&&c(n,["_query","filter"],s);let l=a(e,["queryBase"]);return n!==void 0&&l!=null&&c(n,["_url","models_url"],iv(t,l)),o}function Kx(t,e,n){let o={},i=a(e,["pageSize"]);n!==void 0&&i!=null&&c(n,["_query","pageSize"],i);let r=a(e,["pageToken"]);n!==void 0&&r!=null&&c(n,["_query","pageToken"],r);let s=a(e,["filter"]);n!==void 0&&s!=null&&c(n,["_query","filter"],s);let l=a(e,["queryBase"]);return n!==void 0&&l!=null&&c(n,["_url","models_url"],iv(t,l)),o}function Qx(t,e){let n={},o=a(e,["config"]);return o!=null&&Zx(t,o,n),n}function Xx(t,e){let n={},o=a(e,["config"]);return o!=null&&Kx(t,o,n),n}function eI(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let o=a(t,["nextPageToken"]);o!=null&&c(e,["nextPageToken"],o);let i=a(t,["_self"]);if(i!=null){let r=rv(i);Array.isArray(r)&&(r=r.map(s=>Xu(s))),c(e,["models"],r)}return e}function tI(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let o=a(t,["nextPageToken"]);o!=null&&c(e,["nextPageToken"],o);let i=a(t,["_self"]);if(i!=null){let r=rv(i);Array.isArray(r)&&(r=r.map(s=>ep(s))),c(e,["models"],r)}return e}function nI(t){let e={},n=a(t,["maskMode"]);n!=null&&c(e,["maskMode"],n);let o=a(t,["segmentationClasses"]);o!=null&&c(e,["maskClasses"],o);let i=a(t,["maskDilation"]);return i!=null&&c(e,["dilation"],i),e}function Xu(t){let e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);let o=a(t,["displayName"]);o!=null&&c(e,["displayName"],o);let i=a(t,["description"]);i!=null&&c(e,["description"],i);let r=a(t,["version"]);r!=null&&c(e,["version"],r);let s=a(t,["_self"]);s!=null&&c(e,["tunedModelInfo"],_I(s));let l=a(t,["inputTokenLimit"]);l!=null&&c(e,["inputTokenLimit"],l);let d=a(t,["outputTokenLimit"]);d!=null&&c(e,["outputTokenLimit"],d);let u=a(t,["supportedGenerationMethods"]);u!=null&&c(e,["supportedActions"],u);let f=a(t,["temperature"]);f!=null&&c(e,["temperature"],f);let v=a(t,["maxTemperature"]);v!=null&&c(e,["maxTemperature"],v);let _=a(t,["topP"]);_!=null&&c(e,["topP"],_);let S=a(t,["topK"]);S!=null&&c(e,["topK"],S);let D=a(t,["thinking"]);return D!=null&&c(e,["thinking"],D),e}function ep(t){let e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);let o=a(t,["displayName"]);o!=null&&c(e,["displayName"],o);let i=a(t,["description"]);i!=null&&c(e,["description"],i);let r=a(t,["versionId"]);r!=null&&c(e,["version"],r);let s=a(t,["deployedModels"]);if(s!=null){let v=s;Array.isArray(v)&&(v=v.map(_=>gx(_))),c(e,["endpoints"],v)}let l=a(t,["labels"]);l!=null&&c(e,["labels"],l);let d=a(t,["_self"]);d!=null&&c(e,["tunedModelInfo"],yI(d));let u=a(t,["defaultCheckpointId"]);u!=null&&c(e,["defaultCheckpointId"],u);let f=a(t,["checkpoints"]);if(f!=null){let v=f;Array.isArray(v)&&(v=v.map(_=>_)),c(e,["checkpoints"],v)}return e}function oI(t){let e={},n=a(t,["mediaResolution"]);n!=null&&c(e,["mediaResolution"],n);let o=a(t,["codeExecutionResult"]);o!=null&&c(e,["codeExecutionResult"],o);let i=a(t,["executableCode"]);i!=null&&c(e,["executableCode"],i);let r=a(t,["fileData"]);r!=null&&c(e,["fileData"],hx(r));let s=a(t,["functionCall"]);s!=null&&c(e,["functionCall"],vx(s));let l=a(t,["functionResponse"]);l!=null&&c(e,["functionResponse"],l);let d=a(t,["inlineData"]);d!=null&&c(e,["inlineData"],Gw(d));let u=a(t,["text"]);u!=null&&c(e,["text"],u);let f=a(t,["thought"]);f!=null&&c(e,["thought"],f);let v=a(t,["thoughtSignature"]);v!=null&&c(e,["thoughtSignature"],v);let _=a(t,["videoMetadata"]);return _!=null&&c(e,["videoMetadata"],_),e}function iI(t){let e={},n=a(t,["productImage"]);return n!=null&&c(e,["image"],qt(n)),e}function rI(t,e){let n={},o=a(t,["numberOfImages"]);e!==void 0&&o!=null&&c(e,["parameters","sampleCount"],o);let i=a(t,["baseSteps"]);e!==void 0&&i!=null&&c(e,["parameters","baseSteps"],i);let r=a(t,["outputGcsUri"]);e!==void 0&&r!=null&&c(e,["parameters","storageUri"],r);let s=a(t,["seed"]);e!==void 0&&s!=null&&c(e,["parameters","seed"],s);let l=a(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&c(e,["parameters","safetySetting"],l);let d=a(t,["personGeneration"]);e!==void 0&&d!=null&&c(e,["parameters","personGeneration"],d);let u=a(t,["addWatermark"]);e!==void 0&&u!=null&&c(e,["parameters","addWatermark"],u);let f=a(t,["outputMimeType"]);e!==void 0&&f!=null&&c(e,["parameters","outputOptions","mimeType"],f);let v=a(t,["outputCompressionQuality"]);e!==void 0&&v!=null&&c(e,["parameters","outputOptions","compressionQuality"],v);let _=a(t,["enhancePrompt"]);e!==void 0&&_!=null&&c(e,["parameters","enhancePrompt"],_);let S=a(t,["labels"]);return e!==void 0&&S!=null&&c(e,["labels"],S),n}function sI(t,e){let n={},o=a(e,["model"]);o!=null&&c(n,["_url","model"],be(t,o));let i=a(e,["source"]);i!=null&&lI(i,n);let r=a(e,["config"]);return r!=null&&rI(r,n),n}function aI(t){let e={},n=a(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>Ia(i))),c(e,["generatedImages"],o)}return e}function lI(t,e){let n={},o=a(t,["prompt"]);e!==void 0&&o!=null&&c(e,["instances[0]","prompt"],o);let i=a(t,["personImage"]);e!==void 0&&i!=null&&c(e,["instances[0]","personImage","image"],qt(i));let r=a(t,["productImages"]);if(e!==void 0&&r!=null){let s=r;Array.isArray(s)&&(s=s.map(l=>iI(l))),c(e,["instances[0]","productImages"],s)}return n}function cI(t){let e={},n=a(t,["referenceImage"]);n!=null&&c(e,["referenceImage"],qt(n));let o=a(t,["referenceId"]);o!=null&&c(e,["referenceId"],o);let i=a(t,["referenceType"]);i!=null&&c(e,["referenceType"],i);let r=a(t,["maskImageConfig"]);r!=null&&c(e,["maskImageConfig"],nI(r));let s=a(t,["controlImageConfig"]);s!=null&&c(e,["controlImageConfig"],jw(s));let l=a(t,["styleImageConfig"]);l!=null&&c(e,["styleImageConfig"],l);let d=a(t,["subjectImageConfig"]);return d!=null&&c(e,["subjectImageConfig"],d),e}function fv(t){let e={},n=a(t,["safetyAttributes","categories"]);n!=null&&c(e,["categories"],n);let o=a(t,["safetyAttributes","scores"]);o!=null&&c(e,["scores"],o);let i=a(t,["contentType"]);return i!=null&&c(e,["contentType"],i),e}function mv(t){let e={},n=a(t,["safetyAttributes","categories"]);n!=null&&c(e,["categories"],n);let o=a(t,["safetyAttributes","scores"]);o!=null&&c(e,["scores"],o);let i=a(t,["contentType"]);return i!=null&&c(e,["contentType"],i),e}function dI(t){let e={},n=a(t,["category"]);if(n!=null&&c(e,["category"],n),a(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let o=a(t,["threshold"]);return o!=null&&c(e,["threshold"],o),e}function uI(t){let e={},n=a(t,["image"]);return n!=null&&c(e,["image"],qt(n)),e}function pI(t,e){let n={},o=a(t,["mode"]);e!==void 0&&o!=null&&c(e,["parameters","mode"],o);let i=a(t,["maxPredictions"]);e!==void 0&&i!=null&&c(e,["parameters","maxPredictions"],i);let r=a(t,["confidenceThreshold"]);e!==void 0&&r!=null&&c(e,["parameters","confidenceThreshold"],r);let s=a(t,["maskDilation"]);e!==void 0&&s!=null&&c(e,["parameters","maskDilation"],s);let l=a(t,["binaryColorThreshold"]);e!==void 0&&l!=null&&c(e,["parameters","binaryColorThreshold"],l);let d=a(t,["labels"]);return e!==void 0&&d!=null&&c(e,["labels"],d),n}function fI(t,e){let n={},o=a(e,["model"]);o!=null&&c(n,["_url","model"],be(t,o));let i=a(e,["source"]);i!=null&&gI(i,n);let r=a(e,["config"]);return r!=null&&pI(r,n),n}function mI(t){let e={},n=a(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>Bx(i))),c(e,["generatedMasks"],o)}return e}function gI(t,e){let n={},o=a(t,["prompt"]);e!==void 0&&o!=null&&c(e,["instances[0]","prompt"],o);let i=a(t,["image"]);e!==void 0&&i!=null&&c(e,["instances[0]","image"],qt(i));let r=a(t,["scribbleImage"]);return e!==void 0&&r!=null&&c(e,["instances[0]","scribble"],uI(r)),n}function gv(t){let e={},n=a(t,["languageCode"]);n!=null&&c(e,["languageCode"],n);let o=a(t,["voiceConfig"]);if(o!=null&&c(e,["voiceConfig"],o),a(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function hI(t){let e={},n=a(t,["functionCallingConfig"]);n!=null&&c(e,["functionCallingConfig"],_x(n));let o=a(t,["retrievalConfig"]);return o!=null&&c(e,["retrievalConfig"],o),e}function vI(t){let e={},n=a(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(v=>v)),c(e,["functionDeclarations"],f)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let o=a(t,["googleSearchRetrieval"]);o!=null&&c(e,["googleSearchRetrieval"],o);let i=a(t,["computerUse"]);i!=null&&c(e,["computerUse"],i);let r=a(t,["fileSearch"]);r!=null&&c(e,["fileSearch"],r);let s=a(t,["codeExecution"]);if(s!=null&&c(e,["codeExecution"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let l=a(t,["googleMaps"]);l!=null&&c(e,["googleMaps"],zx(l));let d=a(t,["googleSearch"]);d!=null&&c(e,["googleSearch"],Wx(d));let u=a(t,["urlContext"]);return u!=null&&c(e,["urlContext"],u),e}function hv(t){let e={},n=a(t,["functionDeclarations"]);if(n!=null){let v=n;Array.isArray(v)&&(v=v.map(_=>yx(_))),c(e,["functionDeclarations"],v)}let o=a(t,["retrieval"]);o!=null&&c(e,["retrieval"],o);let i=a(t,["googleSearchRetrieval"]);i!=null&&c(e,["googleSearchRetrieval"],i);let r=a(t,["computerUse"]);if(r!=null&&c(e,["computerUse"],r),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let s=a(t,["codeExecution"]);s!=null&&c(e,["codeExecution"],s);let l=a(t,["enterpriseWebSearch"]);l!=null&&c(e,["enterpriseWebSearch"],l);let d=a(t,["googleMaps"]);d!=null&&c(e,["googleMaps"],d);let u=a(t,["googleSearch"]);u!=null&&c(e,["googleSearch"],u);let f=a(t,["urlContext"]);return f!=null&&c(e,["urlContext"],f),e}function _I(t){let e={},n=a(t,["baseModel"]);n!=null&&c(e,["baseModel"],n);let o=a(t,["createTime"]);o!=null&&c(e,["createTime"],o);let i=a(t,["updateTime"]);return i!=null&&c(e,["updateTime"],i),e}function yI(t){let e={},n=a(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&c(e,["baseModel"],n);let o=a(t,["createTime"]);o!=null&&c(e,["createTime"],o);let i=a(t,["updateTime"]);return i!=null&&c(e,["updateTime"],i),e}function CI(t,e){let n={},o=a(t,["displayName"]);e!==void 0&&o!=null&&c(e,["displayName"],o);let i=a(t,["description"]);e!==void 0&&i!=null&&c(e,["description"],i);let r=a(t,["defaultCheckpointId"]);return e!==void 0&&r!=null&&c(e,["defaultCheckpointId"],r),n}function bI(t,e){let n={},o=a(t,["displayName"]);e!==void 0&&o!=null&&c(e,["displayName"],o);let i=a(t,["description"]);e!==void 0&&i!=null&&c(e,["description"],i);let r=a(t,["defaultCheckpointId"]);return e!==void 0&&r!=null&&c(e,["defaultCheckpointId"],r),n}function SI(t,e){let n={},o=a(e,["model"]);o!=null&&c(n,["_url","name"],be(t,o));let i=a(e,["config"]);return i!=null&&CI(i,n),n}function EI(t,e){let n={},o=a(e,["model"]);o!=null&&c(n,["_url","model"],be(t,o));let i=a(e,["config"]);return i!=null&&bI(i,n),n}function MI(t,e){let n={},o=a(t,["outputGcsUri"]);e!==void 0&&o!=null&&c(e,["parameters","storageUri"],o);let i=a(t,["safetyFilterLevel"]);e!==void 0&&i!=null&&c(e,["parameters","safetySetting"],i);let r=a(t,["personGeneration"]);e!==void 0&&r!=null&&c(e,["parameters","personGeneration"],r);let s=a(t,["includeRaiReason"]);e!==void 0&&s!=null&&c(e,["parameters","includeRaiReason"],s);let l=a(t,["outputMimeType"]);e!==void 0&&l!=null&&c(e,["parameters","outputOptions","mimeType"],l);let d=a(t,["outputCompressionQuality"]);e!==void 0&&d!=null&&c(e,["parameters","outputOptions","compressionQuality"],d);let u=a(t,["enhanceInputImage"]);e!==void 0&&u!=null&&c(e,["parameters","upscaleConfig","enhanceInputImage"],u);let f=a(t,["imagePreservationFactor"]);e!==void 0&&f!=null&&c(e,["parameters","upscaleConfig","imagePreservationFactor"],f);let v=a(t,["labels"]);e!==void 0&&v!=null&&c(e,["labels"],v);let _=a(t,["numberOfImages"]);e!==void 0&&_!=null&&c(e,["parameters","sampleCount"],_);let S=a(t,["mode"]);return e!==void 0&&S!=null&&c(e,["parameters","mode"],S),n}function wI(t,e){let n={},o=a(e,["model"]);o!=null&&c(n,["_url","model"],be(t,o));let i=a(e,["image"]);i!=null&&c(n,["instances[0]","image"],qt(i));let r=a(e,["upscaleFactor"]);r!=null&&c(n,["parameters","upscaleConfig","upscaleFactor"],r);let s=a(e,["config"]);return s!=null&&MI(s,n),n}function xI(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let o=a(t,["predictions"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(r=>Ia(r))),c(e,["generatedImages"],i)}return e}function II(t){let e={},n=a(t,["uri"]);n!=null&&c(e,["uri"],n);let o=a(t,["encodedVideo"]);o!=null&&c(e,["videoBytes"],On(o));let i=a(t,["encoding"]);return i!=null&&c(e,["mimeType"],i),e}function TI(t){let e={},n=a(t,["gcsUri"]);n!=null&&c(e,["uri"],n);let o=a(t,["bytesBase64Encoded"]);o!=null&&c(e,["videoBytes"],On(o));let i=a(t,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function PI(t){let e={},n=a(t,["image"]);n!=null&&c(e,["_self"],qt(n));let o=a(t,["maskMode"]);return o!=null&&c(e,["maskMode"],o),e}function DI(t){let e={},n=a(t,["image"]);n!=null&&c(e,["image"],Ta(n));let o=a(t,["referenceType"]);return o!=null&&c(e,["referenceType"],o),e}function AI(t){let e={},n=a(t,["image"]);n!=null&&c(e,["image"],qt(n));let o=a(t,["referenceType"]);return o!=null&&c(e,["referenceType"],o),e}function vv(t){let e={},n=a(t,["uri"]);n!=null&&c(e,["uri"],n);let o=a(t,["videoBytes"]);o!=null&&c(e,["encodedVideo"],On(o));let i=a(t,["mimeType"]);return i!=null&&c(e,["encoding"],i),e}function _v(t){let e={},n=a(t,["uri"]);n!=null&&c(e,["gcsUri"],n);let o=a(t,["videoBytes"]);o!=null&&c(e,["bytesBase64Encoded"],On(o));let i=a(t,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}var NI="Content-Type",kI="X-Server-Timeout",RI="User-Agent",tp="x-goog-api-client",OI="1.30.0",FI=`google-genai-sdk/${OI}`,VI="v1beta1",LI="v1beta",H0=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/,np=class{constructor(e){var n,o;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});let i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:VI,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:LI,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");let o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){let e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,o){let i=[this.getRequestUrlInternal(n)];return o&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let o=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,o);if(e.queryParams)for(let[s,l]of Object.entries(e.queryParams))i.searchParams.append(s,String(l));let r={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else r.body=e.body;return r=await this.includeExtraHttpOptionsToRequestInit(r,n,i.toString(),e.abortSignal),this.unaryApiCall(i,r,e.httpMethod)}patchHttpOptions(e,n){let o=JSON.parse(JSON.stringify(e));for(let[i,r]of Object.entries(n))typeof r=="object"?o[i]=Object.assign(Object.assign({},o[i]),r):r!==void 0&&(o[i]=r);return o}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let o=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,o);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let r={};return r.body=e.body,r=await this.includeExtraHttpOptionsToRequestInit(r,n,i.toString(),e.abortSignal),this.streamApiCall(i,r,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,o,i){if(n&&n.timeout||i){let r=new AbortController,s=r.signal;if(n.timeout&&n?.timeout>0){let l=setTimeout(()=>r.abort(),n.timeout);l&&typeof l.unref=="function"&&l.unref()}i&&i.addEventListener("abort",()=>{r.abort()}),e.signal=s}return n&&n.extraBody!==null&&BI(e,n.extraBody),e.headers=await this.getHeadersInternal(n,o),e}async unaryApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async i=>(await G0(i),new ar(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async i=>(await G0(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var n;return Wo(this,arguments,function*(){let i=(n=e?.body)===null||n===void 0?void 0:n.getReader(),r=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let s="";for(;;){let{done:l,value:d}=yield Oe(i.read());if(l){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}let u=r.decode(d,{stream:!0});try{let v=JSON.parse(u);if("error"in v){let _=JSON.parse(JSON.stringify(v.error)),S=_.status,D=_.code,V=`got status: ${S}. ${JSON.stringify(v)}`;if(D>=400&&D<600)throw new Ma({message:V,status:D})}}catch(v){if(v.name==="ApiError")throw v}s+=u;let f=s.match(H0);for(;f;){let v=f[1];try{let _=new Response(v,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield Oe(new ar(_)),s=s.slice(f[0].length),f=s.match(H0)}catch(_){throw new Error(`exception parsing stream chunk ${v}. ${_}`)}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){let e={},n=FI+" "+this.clientOptions.userAgentExtra;return e[RI]=n,e[tp]=n,e[NI]="application/json",e}async getHeadersInternal(e,n){let o=new Headers;if(e&&e.headers){for(let[i,r]of Object.entries(e.headers))o.append(i,r);e.timeout&&e.timeout>0&&o.append(kI,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,n),o}getFileName(e){var n;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(n=o.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),o}async uploadFile(e,n){var o;let i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);let r=this.clientOptions.uploader,s=await r.stat(e);i.sizeBytes=String(s.size);let l=(o=n?.mimeType)!==null&&o!==void 0?o:s.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=l;let d={file:i},u=this.getFileName(e),f=W("upload/v1beta/files",d._url),v=await this.fetchUploadUrl(f,i.sizeBytes,i.mimeType,u,d,n?.httpOptions);return r.upload(e,v,this)}async uploadFileToFileSearchStore(e,n,o){var i;let r=this.clientOptions.uploader,s=await r.stat(n),l=String(s.size),d=(i=o?.mimeType)!==null&&i!==void 0?i:s.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");let u=`upload/v1beta/${e}:uploadToFileSearchStore`,f=this.getFileName(n),v={};o?.customMetadata&&(v.customMetadata=o.customMetadata),o?.chunkingConfig&&(v.chunkingConfig=o.chunkingConfig);let _=await this.fetchUploadUrl(u,l,d,f,v,o?.httpOptions);return r.uploadToFileSearchStore(n,_,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,o,i,r,s){var l;let d={};s?d=s:d={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${o}`},i?{"X-Goog-Upload-File-Name":i}:{})};let u=await this.request({path:e,body:JSON.stringify(r),httpMethod:"POST",httpOptions:d});if(!u||!u?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");let f=(l=u?.headers)===null||l===void 0?void 0:l["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}};async function G0(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){let n=t.status,o;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await t.json():o={error:{message:await t.text(),code:t.status,status:t.statusText}};let i=JSON.stringify(o);throw n>=400&&n<600?new Ma({message:i,status:n}):new Error(i)}}function BI(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{let r=JSON.parse(t.body);if(typeof r=="object"&&r!==null&&!Array.isArray(r))n=r;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(r,s){let l=Object.assign({},r);for(let d in s)if(Object.prototype.hasOwnProperty.call(s,d)){let u=s[d],f=l[d];u&&typeof u=="object"&&!Array.isArray(u)&&f&&typeof f=="object"&&!Array.isArray(f)?l[d]=o(f,u):(f&&u&&typeof f!=typeof u&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${d}". Original type: ${typeof f}, New type: ${typeof u}. Overwriting.`),l[d]=u)}return l}let i=o(n,e);t.body=JSON.stringify(i)}var UI="mcp_used/unknown",HI=!1;function yv(t){for(let e of t)if(GI(e)||typeof e=="object"&&"inputSchema"in e)return!0;return HI}function Cv(t){var e;let n=(e=t[tp])!==null&&e!==void 0?e:"";t[tp]=(n+` ${UI}`).trimStart()}function GI(t){return t!==null&&typeof t=="object"&&t instanceof op}function qI(t,e=100){return Wo(this,arguments,function*(){let o,i=0;for(;i<e;){let r=yield Oe(t.listTools({cursor:o}));for(let s of r.tools)yield yield Oe(s),i++;if(!r.nextCursor)break;o=r.nextCursor}})}var op=class t{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new t(e,n)}async initialize(){var e,n,o,i;if(this.mcpTools.length>0)return;let r={},s=[];for(let f of this.mcpClients)try{for(var l=!0,d=(n=void 0,sr(qI(f))),u;u=await d.next(),e=u.done,!e;l=!0){i=u.value,l=!1;let v=i;s.push(v);let _=v.name;if(r[_])throw new Error(`Duplicate function name ${_} found in MCP tools. Please ensure function names are unique.`);r[_]=f}}catch(v){n={error:v}}finally{try{!l&&!e&&(o=d.return)&&await o.call(d)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=r}async tool(){return await this.initialize(),HE(this.mcpTools,this.config)}async callTool(e){await this.initialize();let n=[];for(let o of e)if(o.name in this.functionNameToMcpClient){let i=this.functionNameToMcpClient[o.name],r;this.config.timeout&&(r={timeout:this.config.timeout});let s=await i.callTool({name:o.name,arguments:o.args},void 0,r);n.push({functionResponse:{name:o.name,response:s.isError?{error:s}:s}})}return n}};async function $I(t,e,n){let o=new $u,i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),Object.assign(o,i),e(o)}var ip=class{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o}async connect(e){var n,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");let i=this.apiClient.getWebsocketBaseUrl(),r=this.apiClient.getApiVersion(),s=WI(this.apiClient.getDefaultHeaders()),l=this.apiClient.getApiKey(),d=`${i}/ws/google.ai.generativelanguage.${r}.GenerativeService.BidiGenerateMusic?key=${l}`,u=()=>{},f=new Promise(Y=>{u=Y}),v=e.callbacks,_=function(){u({})},S=this.apiClient,D={onopen:_,onmessage:Y=>{$I(S,v.onmessage,Y)},onerror:(n=v?.onerror)!==null&&n!==void 0?n:function(Y){},onclose:(o=v?.onclose)!==null&&o!==void 0?o:function(Y){}},V=this.webSocketFactory.create(d,zI(s),D);V.connect(),await f;let Q={setup:{model:be(this.apiClient,e.model)}};return V.send(JSON.stringify(Q)),new rp(V,this.apiClient)}},rp=class{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");let n=kw(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});let n=Nw(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){let n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(rr.PLAY)}pause(){this.sendPlaybackControl(rr.PAUSE)}stop(){this.sendPlaybackControl(rr.STOP)}resetContext(){this.sendPlaybackControl(rr.RESET_CONTEXT)}close(){this.conn.close()}};function zI(t){let e={};return t.forEach((n,o)=>{e[o]=n}),e}function WI(t){let e=new Headers;for(let[n,o]of Object.entries(t))e.append(n,o);return e}var YI="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function JI(t,e,n){let o=new qu,i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;let r=JSON.parse(i);if(t.isVertexAI()){let s=Fw(r);Object.assign(o,s)}else Object.assign(o,r);e(o)}var sp=class{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o,this.music=new ip(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,o,i,r,s,l;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");let d=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion(),f,v=this.apiClient.getHeaders();e.config&&e.config.tools&&yv(e.config.tools)&&Cv(v);let _=KI(v);if(this.apiClient.isVertexAI())f=`${d}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(_,f);else{let le=this.apiClient.getApiKey(),we="BidiGenerateContent",je="key";le?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),u!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),we="BidiGenerateContentConstrained",je="access_token"),f=`${d}/ws/google.ai.generativelanguage.${u}.GenerativeService.${we}?${je}=${le}`}let S=()=>{},D=new Promise(le=>{S=le}),V=e.callbacks,q=function(){var le;(le=V?.onopen)===null||le===void 0||le.call(V),S({})},$=this.apiClient,Q={onopen:q,onmessage:le=>{JI($,V.onmessage,le)},onerror:(n=V?.onerror)!==null&&n!==void 0?n:function(le){},onclose:(o=V?.onclose)!==null&&o!==void 0?o:function(le){}},Y=this.webSocketFactory.create(f,ZI(_),Q);Y.connect(),await D;let ae=be(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&ae.startsWith("publishers/")){let le=this.apiClient.getProject(),we=this.apiClient.getLocation();ae=`projects/${le}/locations/${we}/`+ae}let pe={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Du.AUDIO]}:e.config.responseModalities=[Du.AUDIO]),!((r=e.config)===null||r===void 0)&&r.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");let he=(l=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&l!==void 0?l:[],_e=[];for(let le of he)if(this.isCallableTool(le)){let we=le;_e.push(await we.tool())}else _e.push(le);_e.length>0&&(e.config.tools=_e);let Qe={model:ae,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?pe=Aw(this.apiClient,Qe):pe=Dw(this.apiClient,Qe),delete pe.config,Y.send(JSON.stringify(pe)),new ap(Y,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}},jI={turnComplete:!0},ap=class{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let o=[];try{o=Mt(n.turns),e.isVertexAI()||(o=o.map(i=>xa(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:o,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let o=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?o=n.functionResponses:o=[n.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(let r of o){if(typeof r!="object"||r===null||!("name"in r)||!("response"in r))throw new Error(`Could not parse function response, type '${typeof r}'.`);if(!e.isVertexAI()&&!("id"in r))throw new Error(YI)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},jI),e);let n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:Ow(e)}:n={realtimeInput:Rw(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");let n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}};function ZI(t){let e={};return t.forEach((n,o)=>{e[o]=n}),e}function KI(t){let e=new Headers;for(let[n,o]of Object.entries(t))e.append(n,o);return e}var q0=10;function $0(t){var e,n,o;if(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(let s of(n=t?.tools)!==null&&n!==void 0?n:[])if(Yo(s)){i=!0;break}if(!i)return!0;let r=(o=t?.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return r&&(r<0||!Number.isInteger(r))||r==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",r),!0):!1}function Yo(t){return"callTool"in t&&typeof t.callTool=="function"}function QI(t){var e,n,o;return(o=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>Yo(i)))!==null&&o!==void 0?o:!1}function z0(t){var e;let n=[];return!((e=t?.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((o,i)=>{if(Yo(o))return;let r=o;r.functionDeclarations&&r.functionDeclarations.length>0&&n.push(i)}),n}function W0(t){var e;return!(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}var lp=class extends Gt{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var o,i,r,s,l;let d=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!QI(n)||$0(n.config))return await this.generateContentInternal(d);let u=z0(n);if(u.length>0){let V=u.map(q=>`tools[${q}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${V}.`)}let f,v,_=Mt(d.contents),S=(r=(i=(o=d.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:q0,D=0;for(;D<S&&(f=await this.generateContentInternal(d),!(!f.functionCalls||f.functionCalls.length===0));){let V=f.candidates[0].content,q=[];for(let $ of(l=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&l!==void 0?l:[])if(Yo($)){let Y=await $.callTool(f.functionCalls);q.push(...Y)}D++,v={role:"user",parts:q},d.contents=Mt(d.contents),d.contents.push(V),d.contents.push(v),W0(d.config)&&(_.push(V),_.push(v))}return W0(d.config)&&(f.automaticFunctionCallingHistory=_),f},this.generateContentStream=async n=>{var o,i,r,s,l;if(this.maybeMoveToResponseJsonSchem(n),$0(n.config)){let v=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(v)}let d=z0(n);if(d.length>0){let v=d.map(_=>`tools[${_}]`).join(", ");throw new Error(`Incompatible tools found at ${v}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}let u=(r=(i=(o=n?.config)===null||o===void 0?void 0:o.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||r===void 0?void 0:r.streamFunctionCallArguments,f=(l=(s=n?.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||l===void 0?void 0:l.disable;if(u&&!f)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(o=>{var i;let r,s=[];if(o?.generatedImages)for(let d of o.generatedImages)d&&d?.safetyAttributes&&((i=d?.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?r=d?.safetyAttributes:s.push(d);let l;return r?l={generatedImages:s,positivePromptSafetyAttributes:r,sdkHttpResponse:o.sdkHttpResponse}:l={generatedImages:s,sdkHttpResponse:o.sdkHttpResponse},l}),this.list=async n=>{var o;let s={config:Object.assign(Object.assign({},{queryBase:!0}),n?.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((o=s.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new vn(Fn.PAGED_ITEM_MODELS,l=>this.listInternal(l),await this.listInternal(s),s)},this.editImage=async n=>{let o={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(o.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async n=>{let o={numberOfImages:1,mode:"upscale"};n.config&&(o=Object.assign(Object.assign({},o),n.config));let i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:o};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{var o,i,r,s,l,d;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=n.video)===null||o===void 0)&&o.uri&&(!((i=n.video)===null||i===void 0)&&i.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((s=(r=n.source)===null||r===void 0?void 0:r.video)===null||s===void 0)&&s.uri&&(!((d=(l=n.source)===null||l===void 0?void 0:l.video)===null||d===void 0)&&d.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,o,i;let r=(n=e.config)===null||n===void 0?void 0:n.tools;if(!r)return e;let s=await Promise.all(r.map(async d=>Yo(d)?await d.tool():d)),l={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(l.config.tools=s,e.config&&e.config.tools&&yv(e.config.tools)){let d=(i=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&i!==void 0?i:{},u=Object.assign({},d);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),Cv(u),l.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:u})}return l}async initAfcToolsMap(e){var n,o,i;let r=new Map;for(let s of(o=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&o!==void 0?o:[])if(Yo(s)){let l=s,d=await l.tool();for(let u of(i=d.functionDeclarations)!==null&&i!==void 0?i:[]){if(!u.name)throw new Error("Function declaration name is required.");if(r.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);r.set(u.name,l)}}return r}async processAfcStream(e){var n,o,i;let r=(i=(o=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&i!==void 0?i:q0,s=!1,l=0,d=await this.initAfcToolsMap(e);return(function(u,f,v){var _,S;return Wo(this,arguments,function*(){for(var D,V,q,$;l<r;){s&&(l++,s=!1);let pe=yield Oe(u.processParamsMaybeAddMcpUsage(v)),he=yield Oe(u.generateContentStreamInternal(pe)),_e=[],Qe=[];try{for(var Q=!0,Y=(V=void 0,sr(he)),ae;ae=yield Oe(Y.next()),D=ae.done,!D;Q=!0){$=ae.value,Q=!1;let le=$;if(yield yield Oe(le),le.candidates&&(!((_=le.candidates[0])===null||_===void 0)&&_.content)){Qe.push(le.candidates[0].content);for(let we of(S=le.candidates[0].content.parts)!==null&&S!==void 0?S:[])if(l<r&&we.functionCall){if(!we.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(we.functionCall.name)){let je=yield Oe(f.get(we.functionCall.name).callTool([we.functionCall]));_e.push(...je)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${we.functionCall.name}`)}}}}catch(le){V={error:le}}finally{try{!Q&&!D&&(q=Y.return)&&(yield Oe(q.call(Y)))}finally{if(V)throw V.error}}if(_e.length>0){s=!0;let le=new fo;le.candidates=[{content:{role:"user",parts:_e}}],yield yield Oe(le);let we=[];we.push(...Qe),we.push({role:"user",parts:_e});let je=Mt(v.contents).concat(we);v.contents=je}else break}})})(this,d,e)}async generateContentInternal(e){var n,o,i,r;let s,l="",d={};if(this.apiClient.isVertexAI()){let u=L0(this.apiClient,e);return l=W("{model}:generateContent",u._url),d=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(v=>{let _=v;return _.sdkHttpResponse={headers:f.headers},_})),s.then(f=>{let v=U0(f),_=new fo;return Object.assign(_,v),_})}else{let u=V0(this.apiClient,e);return l=W("{model}:generateContent",u._url),d=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(v=>{let _=v;return _.sdkHttpResponse={headers:f.headers},_})),s.then(f=>{let v=B0(f),_=new fo;return Object.assign(_,v),_})}}async generateContentStreamInternal(e){var n,o,i,r;let s,l="",d={};if(this.apiClient.isVertexAI()){let u=L0(this.apiClient,e);return l=W("{model}:streamGenerateContent?alt=sse",u._url),d=u._query,delete u._url,delete u._query,s=this.apiClient.requestStream({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(v){return Wo(this,arguments,function*(){var _,S,D,V;try{for(var q=!0,$=sr(v),Q;Q=yield Oe($.next()),_=Q.done,!_;q=!0){V=Q.value,q=!1;let Y=V,ae=U0(yield Oe(Y.json()));ae.sdkHttpResponse={headers:Y.headers};let pe=new fo;Object.assign(pe,ae),yield yield Oe(pe)}}catch(Y){S={error:Y}}finally{try{!q&&!_&&(D=$.return)&&(yield Oe(D.call($)))}finally{if(S)throw S.error}}})})}else{let u=V0(this.apiClient,e);return l=W("{model}:streamGenerateContent?alt=sse",u._url),d=u._query,delete u._url,delete u._query,s=this.apiClient.requestStream({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(v){return Wo(this,arguments,function*(){var _,S,D,V;try{for(var q=!0,$=sr(v),Q;Q=yield Oe($.next()),_=Q.done,!_;q=!0){V=Q.value,q=!1;let Y=V,ae=B0(yield Oe(Y.json()));ae.sdkHttpResponse={headers:Y.headers};let pe=new fo;Object.assign(pe,ae),yield yield Oe(pe)}}catch(Y){S={error:Y}}finally{try{!q&&!_&&(D=$.return)&&(yield Oe(D.call($)))}finally{if(S)throw S.error}}})})}}async embedContent(e){var n,o,i,r;let s,l="",d={};if(this.apiClient.isVertexAI()){let u=px(this.apiClient,e);return l=W("{model}:predict",u._url),d=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(v=>{let _=v;return _.sdkHttpResponse={headers:f.headers},_})),s.then(f=>{let v=mx(f),_=new fa;return Object.assign(_,v),_})}else{let u=ux(this.apiClient,e);return l=W("{model}:batchEmbedContents",u._url),d=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(v=>{let _=v;return _.sdkHttpResponse={headers:f.headers},_})),s.then(f=>{let v=fx(f),_=new fa;return Object.assign(_,v),_})}}async generateImagesInternal(e){var n,o,i,r;let s,l="",d={};if(this.apiClient.isVertexAI()){let u=wx(this.apiClient,e);return l=W("{model}:predict",u._url),d=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(v=>{let _=v;return _.sdkHttpResponse={headers:f.headers},_})),s.then(f=>{let v=Ix(f),_=new ma;return Object.assign(_,v),_})}else{let u=Mx(this.apiClient,e);return l=W("{model}:predict",u._url),d=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(v=>{let _=v;return _.sdkHttpResponse={headers:f.headers},_})),s.then(f=>{let v=xx(f),_=new ma;return Object.assign(_,v),_})}}async editImageInternal(e){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI()){let l=ax(this.apiClient,e);return r=W("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(u=>{let f=u;return f.sdkHttpResponse={headers:d.headers},f})),i.then(d=>{let u=lx(d),f=new Au;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI()){let l=wI(this.apiClient,e);return r=W("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(u=>{let f=u;return f.sdkHttpResponse={headers:d.headers},f})),i.then(d=>{let u=xI(d),f=new Nu;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI()){let l=sI(this.apiClient,e);return r=W("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),i.then(d=>{let u=aI(d),f=new ku;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI()){let l=fI(this.apiClient,e);return r=W("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),i.then(d=>{let u=mI(d),f=new Ru;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,o,i,r;let s,l="",d={};if(this.apiClient.isVertexAI()){let u=$x(this.apiClient,e);return l=W("{name}",u._url),d=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>ep(f))}else{let u=qx(this.apiClient,e);return l=W("{name}",u._url),d=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>Xu(f))}}async listInternal(e){var n,o,i,r;let s,l="",d={};if(this.apiClient.isVertexAI()){let u=Xx(this.apiClient,e);return l=W("{models_url}",u._url),d=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(v=>{let _=v;return _.sdkHttpResponse={headers:f.headers},_})),s.then(f=>{let v=tI(f),_=new ga;return Object.assign(_,v),_})}else{let u=Qx(this.apiClient,e);return l=W("{models_url}",u._url),d=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(v=>{let _=v;return _.sdkHttpResponse={headers:f.headers},_})),s.then(f=>{let v=eI(f),_=new ga;return Object.assign(_,v),_})}}async update(e){var n,o,i,r;let s,l="",d={};if(this.apiClient.isVertexAI()){let u=EI(this.apiClient,e);return l=W("{model}",u._url),d=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>ep(f))}else{let u=SI(this.apiClient,e);return l=W("{name}",u._url),d=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>Xu(f))}}async delete(e){var n,o,i,r;let s,l="",d={};if(this.apiClient.isVertexAI()){let u=ox(this.apiClient,e);return l=W("{name}",u._url),d=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(v=>{let _=v;return _.sdkHttpResponse={headers:f.headers},_})),s.then(f=>{let v=rx(f),_=new ha;return Object.assign(_,v),_})}else{let u=nx(this.apiClient,e);return l=W("{name}",u._url),d=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(v=>{let _=v;return _.sdkHttpResponse={headers:f.headers},_})),s.then(f=>{let v=ix(f),_=new ha;return Object.assign(_,v),_})}}async countTokens(e){var n,o,i,r;let s,l="",d={};if(this.apiClient.isVertexAI()){let u=Xw(this.apiClient,e);return l=W("{model}:countTokens",u._url),d=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(v=>{let _=v;return _.sdkHttpResponse={headers:f.headers},_})),s.then(f=>{let v=tx(f),_=new va;return Object.assign(_,v),_})}else{let u=Qw(this.apiClient,e);return l=W("{model}:countTokens",u._url),d=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(v=>{let _=v;return _.sdkHttpResponse={headers:f.headers},_})),s.then(f=>{let v=ex(f),_=new va;return Object.assign(_,v),_})}}async computeTokens(e){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI()){let l=zw(this.apiClient,e);return r=W("{model}:computeTokens",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(u=>{let f=u;return f.sdkHttpResponse={headers:d.headers},f})),i.then(d=>{let u=Ww(d),f=new Ou;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,o,i,r;let s,l="",d={};if(this.apiClient.isVertexAI()){let u=kx(this.apiClient,e);return l=W("{model}:predictLongRunning",u._url),d=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>{let v=Ax(f),_=new _a;return Object.assign(_,v),_})}else{let u=Nx(this.apiClient,e);return l=W("{model}:predictLongRunning",u._url),d=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>{let v=Dx(f),_=new _a;return Object.assign(_,v),_})}}};var cp=class extends Gt{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){let n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let i=n.name.split("/operations/")[0],r;o&&"httpOptions"in o&&(r=o.httpOptions);let s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:r}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{let i=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(e){let n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let i=n.name.split("/operations/")[0],r;o&&"httpOptions"in o&&(r=o.httpOptions);let s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:r}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{let i=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,o,i,r;let s,l="",d={};if(this.apiClient.isVertexAI()){let u=TE(e);return l=W("{operationName}",u._url),d=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s}else{let u=IE(e);return l=W("{operationName}",u._url),d=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s}}async fetchPredictVideosOperationInternal(e){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI()){let l=CE(e);return r=W("{resourceName}:fetchPredictOperation",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}};function XI(t){let e={},n=a(t,["data"]);if(n!=null&&c(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let o=a(t,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function eT(t){let e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>cT(r))),c(e,["parts"],i)}let o=a(t,["role"]);return o!=null&&c(e,["role"],o),e}function tT(t,e,n){let o={},i=a(e,["expireTime"]);n!==void 0&&i!=null&&c(n,["expireTime"],i);let r=a(e,["newSessionExpireTime"]);n!==void 0&&r!=null&&c(n,["newSessionExpireTime"],r);let s=a(e,["uses"]);n!==void 0&&s!=null&&c(n,["uses"],s);let l=a(e,["liveConnectConstraints"]);n!==void 0&&l!=null&&c(n,["bidiGenerateContentSetup"],lT(t,l));let d=a(e,["lockAdditionalFields"]);return n!==void 0&&d!=null&&c(n,["fieldMask"],d),o}function nT(t,e){let n={},o=a(e,["config"]);return o!=null&&c(n,["config"],tT(t,o,n)),n}function oT(t){let e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=a(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);let o=a(t,["mimeType"]);return o!=null&&c(e,["mimeType"],o),e}function iT(t){let e={},n=a(t,["id"]);n!=null&&c(e,["id"],n);let o=a(t,["args"]);o!=null&&c(e,["args"],o);let i=a(t,["name"]);if(i!=null&&c(e,["name"],i),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function rT(t){let e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=a(t,["enableWidget"]);return n!=null&&c(e,["enableWidget"],n),e}function sT(t){let e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=a(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],n),e}function aT(t,e){let n={},o=a(t,["generationConfig"]);e!==void 0&&o!=null&&c(e,["setup","generationConfig"],o);let i=a(t,["responseModalities"]);e!==void 0&&i!=null&&c(e,["setup","generationConfig","responseModalities"],i);let r=a(t,["temperature"]);e!==void 0&&r!=null&&c(e,["setup","generationConfig","temperature"],r);let s=a(t,["topP"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig","topP"],s);let l=a(t,["topK"]);e!==void 0&&l!=null&&c(e,["setup","generationConfig","topK"],l);let d=a(t,["maxOutputTokens"]);e!==void 0&&d!=null&&c(e,["setup","generationConfig","maxOutputTokens"],d);let u=a(t,["mediaResolution"]);e!==void 0&&u!=null&&c(e,["setup","generationConfig","mediaResolution"],u);let f=a(t,["seed"]);e!==void 0&&f!=null&&c(e,["setup","generationConfig","seed"],f);let v=a(t,["speechConfig"]);e!==void 0&&v!=null&&c(e,["setup","generationConfig","speechConfig"],Mp(v));let _=a(t,["thinkingConfig"]);e!==void 0&&_!=null&&c(e,["setup","generationConfig","thinkingConfig"],_);let S=a(t,["enableAffectiveDialog"]);e!==void 0&&S!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],S);let D=a(t,["systemInstruction"]);e!==void 0&&D!=null&&c(e,["setup","systemInstruction"],eT(tt(D)));let V=a(t,["tools"]);if(e!==void 0&&V!=null){let he=Zo(V);Array.isArray(he)&&(he=he.map(_e=>uT(jo(_e)))),c(e,["setup","tools"],he)}let q=a(t,["sessionResumption"]);e!==void 0&&q!=null&&c(e,["setup","sessionResumption"],dT(q));let $=a(t,["inputAudioTranscription"]);e!==void 0&&$!=null&&c(e,["setup","inputAudioTranscription"],$);let Q=a(t,["outputAudioTranscription"]);e!==void 0&&Q!=null&&c(e,["setup","outputAudioTranscription"],Q);let Y=a(t,["realtimeInputConfig"]);e!==void 0&&Y!=null&&c(e,["setup","realtimeInputConfig"],Y);let ae=a(t,["contextWindowCompression"]);e!==void 0&&ae!=null&&c(e,["setup","contextWindowCompression"],ae);let pe=a(t,["proactivity"]);return e!==void 0&&pe!=null&&c(e,["setup","proactivity"],pe),n}function lT(t,e){let n={},o=a(e,["model"]);o!=null&&c(n,["setup","model"],be(t,o));let i=a(e,["config"]);return i!=null&&c(n,["config"],aT(i,n)),n}function cT(t){let e={},n=a(t,["mediaResolution"]);n!=null&&c(e,["mediaResolution"],n);let o=a(t,["codeExecutionResult"]);o!=null&&c(e,["codeExecutionResult"],o);let i=a(t,["executableCode"]);i!=null&&c(e,["executableCode"],i);let r=a(t,["fileData"]);r!=null&&c(e,["fileData"],oT(r));let s=a(t,["functionCall"]);s!=null&&c(e,["functionCall"],iT(s));let l=a(t,["functionResponse"]);l!=null&&c(e,["functionResponse"],l);let d=a(t,["inlineData"]);d!=null&&c(e,["inlineData"],XI(d));let u=a(t,["text"]);u!=null&&c(e,["text"],u);let f=a(t,["thought"]);f!=null&&c(e,["thought"],f);let v=a(t,["thoughtSignature"]);v!=null&&c(e,["thoughtSignature"],v);let _=a(t,["videoMetadata"]);return _!=null&&c(e,["videoMetadata"],_),e}function dT(t){let e={},n=a(t,["handle"]);if(n!=null&&c(e,["handle"],n),a(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function uT(t){let e={},n=a(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(v=>v)),c(e,["functionDeclarations"],f)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let o=a(t,["googleSearchRetrieval"]);o!=null&&c(e,["googleSearchRetrieval"],o);let i=a(t,["computerUse"]);i!=null&&c(e,["computerUse"],i);let r=a(t,["fileSearch"]);r!=null&&c(e,["fileSearch"],r);let s=a(t,["codeExecution"]);if(s!=null&&c(e,["codeExecution"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let l=a(t,["googleMaps"]);l!=null&&c(e,["googleMaps"],rT(l));let d=a(t,["googleSearch"]);d!=null&&c(e,["googleSearch"],sT(d));let u=a(t,["urlContext"]);return u!=null&&c(e,["urlContext"],u),e}function pT(t){let e=[];for(let n in t)if(Object.prototype.hasOwnProperty.call(t,n)){let o=t[n];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){let i=Object.keys(o).map(r=>`${n}.${r}`);e.push(...i)}else e.push(n)}return e.join(",")}function fT(t,e){let n=null,o=t.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){let r=o.setup;typeof r=="object"&&r!==null?(t.bidiGenerateContentSetup=r,n=r):delete t.bidiGenerateContentSetup}else o!==void 0&&delete t.bidiGenerateContentSetup;let i=t.fieldMask;if(n){let r=pT(n);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)r?t.fieldMask=r:delete t.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){let s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"],l=[];i.length>0&&(l=i.map(u=>s.includes(u)?`generationConfig.${u}`:u));let d=[];r&&d.push(r),l.length>0&&d.push(...l),d.length>0?t.fieldMask=d.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}var dp=class extends Gt{constructor(e){super(),this.apiClient=e}async create(e){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{let l=nT(this.apiClient,e);r=W("auth_tokens",l._url),s=l._query,delete l.config,delete l._url,delete l._query;let d=fT(l,e.config);return i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json()),i.then(u=>u)}}};function mT(t,e){let n={},o=a(t,["displayName"]);return e!==void 0&&o!=null&&c(e,["displayName"],o),n}function gT(t){let e={},n=a(t,["config"]);return n!=null&&mT(n,e),e}function hT(t,e){let n={},o=a(t,["force"]);return e!==void 0&&o!=null&&c(e,["_query","force"],o),n}function vT(t){let e={},n=a(t,["name"]);n!=null&&c(e,["_url","name"],n);let o=a(t,["config"]);return o!=null&&hT(o,e),e}function _T(t){let e={},n=a(t,["name"]);return n!=null&&c(e,["_url","name"],n),e}function yT(t,e){let n={},o=a(t,["customMetadata"]);if(e!==void 0&&o!=null){let r=o;Array.isArray(r)&&(r=r.map(s=>s)),c(e,["customMetadata"],r)}let i=a(t,["chunkingConfig"]);return e!==void 0&&i!=null&&c(e,["chunkingConfig"],i),n}function CT(t){let e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);let o=a(t,["metadata"]);o!=null&&c(e,["metadata"],o);let i=a(t,["done"]);i!=null&&c(e,["done"],i);let r=a(t,["error"]);r!=null&&c(e,["error"],r);let s=a(t,["response"]);return s!=null&&c(e,["response"],ST(s)),e}function bT(t){let e={},n=a(t,["fileSearchStoreName"]);n!=null&&c(e,["_url","file_search_store_name"],n);let o=a(t,["fileName"]);o!=null&&c(e,["fileName"],o);let i=a(t,["config"]);return i!=null&&yT(i,e),e}function ST(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let o=a(t,["parent"]);o!=null&&c(e,["parent"],o);let i=a(t,["documentName"]);return i!=null&&c(e,["documentName"],i),e}function ET(t,e){let n={},o=a(t,["pageSize"]);e!==void 0&&o!=null&&c(e,["_query","pageSize"],o);let i=a(t,["pageToken"]);return e!==void 0&&i!=null&&c(e,["_query","pageToken"],i),n}function MT(t){let e={},n=a(t,["config"]);return n!=null&&ET(n,e),e}function wT(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let o=a(t,["nextPageToken"]);o!=null&&c(e,["nextPageToken"],o);let i=a(t,["fileSearchStores"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),c(e,["fileSearchStores"],r)}return e}function xT(t,e){let n={},o=a(t,["mimeType"]);e!==void 0&&o!=null&&c(e,["mimeType"],o);let i=a(t,["displayName"]);e!==void 0&&i!=null&&c(e,["displayName"],i);let r=a(t,["customMetadata"]);if(e!==void 0&&r!=null){let l=r;Array.isArray(l)&&(l=l.map(d=>d)),c(e,["customMetadata"],l)}let s=a(t,["chunkingConfig"]);return e!==void 0&&s!=null&&c(e,["chunkingConfig"],s),n}function IT(t){let e={},n=a(t,["fileSearchStoreName"]);n!=null&&c(e,["_url","file_search_store_name"],n);let o=a(t,["config"]);return o!=null&&xT(o,e),e}function TT(t){let e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}function PT(t,e){let n={},o=a(t,["force"]);return e!==void 0&&o!=null&&c(e,["_query","force"],o),n}function DT(t){let e={},n=a(t,["name"]);n!=null&&c(e,["_url","name"],n);let o=a(t,["config"]);return o!=null&&PT(o,e),e}function AT(t){let e={},n=a(t,["name"]);return n!=null&&c(e,["_url","name"],n),e}function NT(t,e){let n={},o=a(t,["pageSize"]);e!==void 0&&o!=null&&c(e,["_query","pageSize"],o);let i=a(t,["pageToken"]);return e!==void 0&&i!=null&&c(e,["_query","pageToken"],i),n}function kT(t){let e={},n=a(t,["parent"]);n!=null&&c(e,["_url","parent"],n);let o=a(t,["config"]);return o!=null&&NT(o,e),e}function RT(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);let o=a(t,["nextPageToken"]);o!=null&&c(e,["nextPageToken"],o);let i=a(t,["documents"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(s=>s)),c(e,["documents"],r)}return e}var up=class extends Gt{constructor(e){super(),this.apiClient=e,this.list=async n=>new vn(Fn.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:n.parent,config:o.config}),await this.listInternal(n),n)}async get(e){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=AT(e);return r=W("{name}",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),i.then(d=>d)}}async delete(e){var n,o;let i="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let s=DT(e);i=W("{name}",s._url),r=s._query,delete s._url,delete s._query,await this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=kT(e);return r=W("{parent}/documents",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),i.then(d=>{let u=RT(d),f=new Fu;return Object.assign(f,u),f})}}};var pp=class extends Gt{constructor(e,n=new up(e)){super(),this.apiClient=e,this.documents=n,this.list=async(o={})=>new vn(Fn.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=gT(e);return r=W("fileSearchStores",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),i.then(d=>d)}}async get(e){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=_T(e);return r=W("{name}",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),i.then(d=>d)}}async delete(e){var n,o;let i="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let s=vT(e);i=W("{name}",s._url),r=s._query,delete s._url,delete s._query,await this.apiClient.request({path:i,queryParams:r,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=MT(e);return r=W("fileSearchStores",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),i.then(d=>{let u=wT(d),f=new Vu;return Object.assign(f,u),f})}}async uploadToFileSearchStoreInternal(e){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=IT(e);return r=W("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),i.then(d=>{let u=TT(d),f=new Lu;return Object.assign(f,u),f})}}async importFile(e){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=bT(e);return r=W("{file_search_store_name}:importFile",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),i.then(d=>{let u=CT(d),f=new Bu;return Object.assign(f,u),f})}}};function OT(t,e){let n={},o=a(t,["name"]);return o!=null&&c(n,["_url","name"],o),n}function FT(t,e){let n={},o=a(t,["name"]);return o!=null&&c(n,["_url","name"],o),n}function VT(t,e,n){let o={};if(a(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");let i=a(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&c(e,["displayName"],i),a(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");let r=a(t,["epochCount"]);e!==void 0&&r!=null&&c(e,["tuningTask","hyperparameters","epochCount"],r);let s=a(t,["learningRateMultiplier"]);if(s!=null&&c(o,["tuningTask","hyperparameters","learningRateMultiplier"],s),a(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(a(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(a(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");let l=a(t,["batchSize"]);e!==void 0&&l!=null&&c(e,["tuningTask","hyperparameters","batchSize"],l);let d=a(t,["learningRate"]);if(e!==void 0&&d!=null&&c(e,["tuningTask","hyperparameters","learningRate"],d),a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(a(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return o}function LT(t,e,n){let o={},i=a(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){let S=a(t,["validationDataset"]);e!==void 0&&S!=null&&c(e,["supervisedTuningSpec"],Y0(S))}else if(i==="PREFERENCE_TUNING"){let S=a(t,["validationDataset"]);e!==void 0&&S!=null&&c(e,["preferenceOptimizationSpec"],Y0(S))}let r=a(t,["tunedModelDisplayName"]);e!==void 0&&r!=null&&c(e,["tunedModelDisplayName"],r);let s=a(t,["description"]);e!==void 0&&s!=null&&c(e,["description"],s);let l=a(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){let S=a(t,["epochCount"]);e!==void 0&&S!=null&&c(e,["supervisedTuningSpec","hyperParameters","epochCount"],S)}else if(l==="PREFERENCE_TUNING"){let S=a(t,["epochCount"]);e!==void 0&&S!=null&&c(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],S)}let d=a(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){let S=a(t,["learningRateMultiplier"]);e!==void 0&&S!=null&&c(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],S)}else if(d==="PREFERENCE_TUNING"){let S=a(t,["learningRateMultiplier"]);e!==void 0&&S!=null&&c(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],S)}let u=a(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){let S=a(t,["exportLastCheckpointOnly"]);e!==void 0&&S!=null&&c(e,["supervisedTuningSpec","exportLastCheckpointOnly"],S)}else if(u==="PREFERENCE_TUNING"){let S=a(t,["exportLastCheckpointOnly"]);e!==void 0&&S!=null&&c(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],S)}let f=a(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){let S=a(t,["adapterSize"]);e!==void 0&&S!=null&&c(e,["supervisedTuningSpec","hyperParameters","adapterSize"],S)}else if(f==="PREFERENCE_TUNING"){let S=a(t,["adapterSize"]);e!==void 0&&S!=null&&c(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],S)}if(a(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(a(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");let v=a(t,["labels"]);e!==void 0&&v!=null&&c(e,["labels"],v);let _=a(t,["beta"]);return e!==void 0&&_!=null&&c(e,["preferenceOptimizationSpec","hyperParameters","beta"],_),o}function BT(t,e){let n={},o=a(t,["baseModel"]);o!=null&&c(n,["baseModel"],o);let i=a(t,["preTunedModel"]);i!=null&&c(n,["preTunedModel"],i);let r=a(t,["trainingDataset"]);r!=null&&ZT(r);let s=a(t,["config"]);return s!=null&&VT(s,n),n}function UT(t,e){let n={},o=a(t,["baseModel"]);o!=null&&c(n,["baseModel"],o);let i=a(t,["preTunedModel"]);i!=null&&c(n,["preTunedModel"],i);let r=a(t,["trainingDataset"]);r!=null&&KT(r,n,e);let s=a(t,["config"]);return s!=null&&LT(s,n,e),n}function HT(t,e){let n={},o=a(t,["name"]);return o!=null&&c(n,["_url","name"],o),n}function GT(t,e){let n={},o=a(t,["name"]);return o!=null&&c(n,["_url","name"],o),n}function qT(t,e,n){let o={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);let r=a(t,["pageToken"]);e!==void 0&&r!=null&&c(e,["_query","pageToken"],r);let s=a(t,["filter"]);return e!==void 0&&s!=null&&c(e,["_query","filter"],s),o}function $T(t,e,n){let o={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);let r=a(t,["pageToken"]);e!==void 0&&r!=null&&c(e,["_query","pageToken"],r);let s=a(t,["filter"]);return e!==void 0&&s!=null&&c(e,["_query","filter"],s),o}function zT(t,e){let n={},o=a(t,["config"]);return o!=null&&qT(o,n),n}function WT(t,e){let n={},o=a(t,["config"]);return o!=null&&$T(o,n),n}function YT(t,e){let n={},o=a(t,["sdkHttpResponse"]);o!=null&&c(n,["sdkHttpResponse"],o);let i=a(t,["nextPageToken"]);i!=null&&c(n,["nextPageToken"],i);let r=a(t,["tunedModels"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(l=>bv(l))),c(n,["tuningJobs"],s)}return n}function JT(t,e){let n={},o=a(t,["sdkHttpResponse"]);o!=null&&c(n,["sdkHttpResponse"],o);let i=a(t,["nextPageToken"]);i!=null&&c(n,["nextPageToken"],i);let r=a(t,["tuningJobs"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(l=>fp(l))),c(n,["tuningJobs"],s)}return n}function jT(t,e){let n={},o=a(t,["name"]);o!=null&&c(n,["model"],o);let i=a(t,["name"]);return i!=null&&c(n,["endpoint"],i),n}function ZT(t,e){let n={};if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");let o=a(t,["examples"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(r=>r)),c(n,["examples","examples"],i)}return n}function KT(t,e,n){let o={},i=a(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){let s=a(t,["gcsUri"]);e!==void 0&&s!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(i==="PREFERENCE_TUNING"){let s=a(t,["gcsUri"]);e!==void 0&&s!=null&&c(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}let r=a(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){let s=a(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(r==="PREFERENCE_TUNING"){let s=a(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&c(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}if(a(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function bv(t,e){let n={},o=a(t,["sdkHttpResponse"]);o!=null&&c(n,["sdkHttpResponse"],o);let i=a(t,["name"]);i!=null&&c(n,["name"],i);let r=a(t,["state"]);r!=null&&c(n,["state"],nv(r));let s=a(t,["createTime"]);s!=null&&c(n,["createTime"],s);let l=a(t,["tuningTask","startTime"]);l!=null&&c(n,["startTime"],l);let d=a(t,["tuningTask","completeTime"]);d!=null&&c(n,["endTime"],d);let u=a(t,["updateTime"]);u!=null&&c(n,["updateTime"],u);let f=a(t,["description"]);f!=null&&c(n,["description"],f);let v=a(t,["baseModel"]);v!=null&&c(n,["baseModel"],v);let _=a(t,["_self"]);return _!=null&&c(n,["tunedModel"],jT(_)),n}function fp(t,e){let n={},o=a(t,["sdkHttpResponse"]);o!=null&&c(n,["sdkHttpResponse"],o);let i=a(t,["name"]);i!=null&&c(n,["name"],i);let r=a(t,["state"]);r!=null&&c(n,["state"],nv(r));let s=a(t,["createTime"]);s!=null&&c(n,["createTime"],s);let l=a(t,["startTime"]);l!=null&&c(n,["startTime"],l);let d=a(t,["endTime"]);d!=null&&c(n,["endTime"],d);let u=a(t,["updateTime"]);u!=null&&c(n,["updateTime"],u);let f=a(t,["error"]);f!=null&&c(n,["error"],f);let v=a(t,["description"]);v!=null&&c(n,["description"],v);let _=a(t,["baseModel"]);_!=null&&c(n,["baseModel"],_);let S=a(t,["tunedModel"]);S!=null&&c(n,["tunedModel"],S);let D=a(t,["preTunedModel"]);D!=null&&c(n,["preTunedModel"],D);let V=a(t,["supervisedTuningSpec"]);V!=null&&c(n,["supervisedTuningSpec"],V);let q=a(t,["preferenceOptimizationSpec"]);q!=null&&c(n,["preferenceOptimizationSpec"],q);let $=a(t,["tuningDataStats"]);$!=null&&c(n,["tuningDataStats"],$);let Q=a(t,["encryptionSpec"]);Q!=null&&c(n,["encryptionSpec"],Q);let Y=a(t,["partnerModelTuningSpec"]);Y!=null&&c(n,["partnerModelTuningSpec"],Y);let ae=a(t,["customBaseModel"]);ae!=null&&c(n,["customBaseModel"],ae);let pe=a(t,["experiment"]);pe!=null&&c(n,["experiment"],pe);let he=a(t,["labels"]);he!=null&&c(n,["labels"],he);let _e=a(t,["outputUri"]);_e!=null&&c(n,["outputUri"],_e);let Qe=a(t,["pipelineJob"]);Qe!=null&&c(n,["pipelineJob"],Qe);let le=a(t,["serviceAccount"]);le!=null&&c(n,["serviceAccount"],le);let we=a(t,["tunedModelDisplayName"]);we!=null&&c(n,["tunedModelDisplayName"],we);let je=a(t,["veoTuningSpec"]);return je!=null&&c(n,["veoTuningSpec"],je),n}function QT(t,e){let n={},o=a(t,["sdkHttpResponse"]);o!=null&&c(n,["sdkHttpResponse"],o);let i=a(t,["name"]);i!=null&&c(n,["name"],i);let r=a(t,["metadata"]);r!=null&&c(n,["metadata"],r);let s=a(t,["done"]);s!=null&&c(n,["done"],s);let l=a(t,["error"]);return l!=null&&c(n,["error"],l),n}function Y0(t,e){let n={},o=a(t,["gcsUri"]);o!=null&&c(n,["validationDatasetUri"],o);let i=a(t,["vertexDatasetResource"]);return i!=null&&c(n,["validationDatasetUri"],i),n}var mp=class extends Gt{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new vn(Fn.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.tune=async n=>{var o;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){let i={tunedModelName:n.baseModel};!((o=n.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(i.checkpointId=n.config.preTunedModelCheckpointId);let r=Object.assign(Object.assign({},n),{preTunedModel:i});return r.baseModel=void 0,await this.tuneInternal(r)}else{let i=Object.assign({},n);return await this.tuneInternal(i)}else{let i=Object.assign({},n),r=await this.tuneMldevInternal(i),s="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?s=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(s=r.name.split("/operations/")[0]),{name:s,state:Z0.JOB_STATE_QUEUED}}}}async getInternal(e){var n,o,i,r;let s,l="",d={};if(this.apiClient.isVertexAI()){let u=GT(e);return l=W("{name}",u._url),d=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(v=>{let _=v;return _.sdkHttpResponse={headers:f.headers},_})),s.then(f=>fp(f))}else{let u=HT(e);return l=W("{name}",u._url),d=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(v=>{let _=v;return _.sdkHttpResponse={headers:f.headers},_})),s.then(f=>bv(f))}}async listInternal(e){var n,o,i,r;let s,l="",d={};if(this.apiClient.isVertexAI()){let u=WT(e);return l=W("tuningJobs",u._url),d=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(v=>{let _=v;return _.sdkHttpResponse={headers:f.headers},_})),s.then(f=>{let v=JT(f),_=new ya;return Object.assign(_,v),_})}else{let u=zT(e);return l=W("tunedModels",u._url),d=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(v=>{let _=v;return _.sdkHttpResponse={headers:f.headers},_})),s.then(f=>{let v=YT(f),_=new ya;return Object.assign(_,v),_})}}async cancel(e){var n,o,i,r;let s="",l={};if(this.apiClient.isVertexAI()){let d=FT(e);s=W("{name}:cancel",d._url),l=d._query,delete d._url,delete d._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{let d=OT(e);s=W("{name}:cancel",d._url),l=d._query,delete d._url,delete d._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async tuneInternal(e){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI()){let l=UT(e,e);return r=W("tuningJobs",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(u=>{let f=u;return f.sdkHttpResponse={headers:d.headers},f})),i.then(d=>fp(d))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,o;let i,r="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=BT(e);return r=W("tunedModels",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:r,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(u=>{let f=u;return f.sdkHttpResponse={headers:d.headers},f})),i.then(d=>QT(d))}}};var gp=class{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}},XT=1024*1024*8,eP=3,tP=1e3,nP=2,wa="x-goog-upload-status";async function oP(t,e,n){var o;let i=await Sv(t,e,n),r=await i?.json();if(((o=i?.headers)===null||o===void 0?void 0:o[wa])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return r.file}async function iP(t,e,n){var o;let i=await Sv(t,e,n),r=await i?.json();if(((o=i?.headers)===null||o===void 0?void 0:o[wa])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");let s=j0(r),l=new zu;return Object.assign(l,s),l}async function Sv(t,e,n){var o,i;let r=0,s=0,l=new ar(new Response),d="upload";for(r=t.size;s<r;){let u=Math.min(XT,r-s),f=t.slice(s,s+u);s+u>=r&&(d+=", finalize");let v=0,_=tP;for(;v<eP&&(l=await n.request({path:"",body:f,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(s),"Content-Length":String(u)}}}),!(!((o=l?.headers)===null||o===void 0)&&o[wa]));)v++,await sP(_),_=_*nP;if(s+=u,((i=l?.headers)===null||i===void 0?void 0:i[wa])!=="active")break;if(r<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return l}async function rP(t){return{size:t.size,type:t.type}}function sP(t){return new Promise(e=>setTimeout(e,t))}var hp=class{async upload(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await oP(e,n,o)}async uploadToFileSearchStore(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await iP(e,n,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await rP(e)}};var vp=class{create(e,n,o){return new _p(e,n,o)}},_p=class{constructor(e,n,o){this.url=e,this.headers=n,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}};var J0="x-goog-api-key",yp=class{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(J0)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(J0,this.apiKey)}}};var aP="gl-node/",Jo=class{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;let o=_E(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion;let i=new yp(this.apiKey);this.apiClient=new np({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:aP+"web",uploader:new hp,downloader:new gp}),this.models=new lp(this.apiClient),this.live=new sp(this.apiClient,i,new vp),this.batches=new Ju(this.apiClient),this.chats=new Zu(this.models,this.apiClient),this.caches=new ju(this.apiClient),this.files=new Qu(this.apiClient),this.operations=new cp(this.apiClient),this.authTokens=new dp(this.apiClient),this.tunings=new mp(this.apiClient),this.fileSearchStores=new pp(this.apiClient)}};var Ke=class t{constructor(){this.authService=w(de);this.toastService=w(ue);this.translationService=w(X);this._allRequests=R([]);this._absenceReports=R([]);this.spotTimers=new Map;this.SPOT_HOLD_TIME_MS=180*1e3;this.allRequests=this._allRequests.asReadonly();this.activeRequests=H(()=>{let e=this.authService.currentUserSchool()?.id;return e?this._allRequests().filter(n=>n.schoolId===e&&n.status!=="completed"):[]});this.schoolAbsenceReports=H(()=>{let e=this.authService.currentUserSchool()?.id;return e?this._absenceReports().filter(n=>n.schoolId===e):[]});We(()=>{this._allRequests(),this.tryAssigningSpotToWaitingParent()},{allowSignalWrites:!0}),We(()=>{let e=this.activeRequests().filter(o=>o.status==="arrived"&&o.assignedZone),n=new Set(e.map(o=>o.code));for(let o of e)if(!this.spotTimers.has(o.code)){let i=window.setTimeout(()=>{this.releaseSpot(o.code)},this.SPOT_HOLD_TIME_MS);this.spotTimers.set(o.code,i)}for(let[o,i]of this.spotTimers.entries())n.has(o)||(clearTimeout(i),this.spotTimers.delete(o))})}releaseSpot(e){let n=this.getRequestByCode(e);n&&n.status==="arrived"&&n.assignedZone&&(this._allRequests.update(o=>o.map(i=>i.code===e?z(B({},i),{assignedZone:void 0,assignedSpot:void 0}):i)),this.spotTimers.delete(e),this.toastService.show(this.translationService.translate("parent.toast.spotReleased"),"warn"))}async tryAssigningSpotToWaitingParent(){let e=this.authService.currentUserSchool();if(!e||!e.pickupZones||e.pickupZones.length===0)return;let n=this.activeRequests().filter(s=>s.status==="arrived"&&!s.assignedZone).sort((s,l)=>new Date(s.created_at).getTime()-new Date(l.created_at).getTime());if(n.length===0)return;let o=this.activeRequests().filter(s=>s.schoolId===e.id),i=new Set(o.filter(s=>s.assignedSpot).map(s=>`${s.assignedZone}-${s.assignedSpot}`)),r=e.pickupZones.reduce((s,l)=>s+l.spots,0);if(i.size<r){let s=n[0];this.assignPickupSpot(s.code)}}async addRequest(e){let n=z(B({},e),{id:crypto.randomUUID(),created_at:new Date().toISOString()});this._allRequests.update(o=>[...o,n])}getRequestByCode(e){return this.activeRequests().find(n=>n.code===e)}async updateRequestStatus(e,n){this._allRequests.update(o=>o.map(i=>{if(i.code===e){let r=z(B({},i),{status:n});return n==="completed"&&!i.completed_at&&(r.completed_at=new Date().toISOString()),r}return i}))}async updateRequestEtaAndDistance(e,n,o){this._allRequests.update(i=>i.map(r=>r.code===e?z(B({},r),{eta:n,distance:o}):r))}async assignPickupSpot(e){if(!this.getRequestByCode(e))return;let o=this.authService.currentUserSchool();if(!o||!o.pickupZones||o.pickupZones.length===0){this.updateRequestStatus(e,"arrived");return}let i=new Set(this.activeRequests().filter(l=>l.assignedSpot&&l.code!==e).map(l=>`${l.assignedZone}-${l.assignedSpot}`)),r,s;for(let l of o.pickupZones){for(let d=1;d<=l.spots;d++){let u=`${l.name}-${d}`;if(!i.has(u)){r=l.name,s=d;break}}if(s)break}this._allRequests.update(l=>l.map(d=>d.code===e?z(B({},d),{status:"arrived",assignedZone:r,assignedSpot:s}):d))}async reportAbsence(e){let n=z(B({},e),{id:crypto.randomUUID()});this._absenceReports.update(o=>[...o,n])}async clearAllRequests(){let e=this.authService.currentUserSchool()?.id;e&&this._allRequests.update(n=>n.filter(o=>o.schoolId!==e||o.status==="completed"))}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"})}};var wp={name:"",relation:"",phone:"",idNumber:""},xp={name:"",phone:"",role:"",classId:""},Ip={name:"",parentPhone:"",classId:""},Pa={name:"",adminName:"",adminEmail:"",adminPassword:"",adminPasswordConfirm:""},Tp={id:"",name:"",email:"",role:"",schoolId:"",classId:""},Pp={busNumber:"",driverName:""},Dp={name:"",supervisorId:"",startTime:"",endTime:"",location:""};var Ev=(t,e)=>e.id;function lP(t,e){t&1&&(h(0),y(1,"translate")),t&2&&N(" ",C(1,1,"parent.management.editTitle")," ")}function cP(t,e){t&1&&(h(0),y(1,"translate")),t&2&&N(" ",C(1,1,"parent.management.addTitle")," ")}function dP(t,e){t&1&&(h(0),y(1,"translate")),t&2&&N(" ",C(1,1,"common.saveChanges")," ")}function uP(t,e){t&1&&(h(0),y(1,"translate")),t&2&&N(" ",C(1,1,"parent.management.addButton")," ")}function pP(t,e){if(t&1){let n=G();m(0,"button",20),M("click",function(){I(n);let i=E();return T(i.cancelForm())}),h(1),y(2,"translate"),g()}t&2&&(p(),N(" ",C(2,1,"common.cancel")," "))}function fP(t,e){if(t&1){let n=G();m(0,"div",22)(1,"div",29),k(2,"img",30),m(3,"div")(4,"h4",31),h(5),g(),m(6,"p",32),h(7),g()()(),k(8,"div",33),m(9,"div",34)(10,"p")(11,"span",35),h(12),y(13,"translate"),g(),m(14,"span",36),h(15),g()(),m(16,"p")(17,"span",35),h(18),y(19,"translate"),g(),m(20,"span",37),h(21),g()()(),k(22,"div",33),m(23,"div",38)(24,"button",39),y(25,"translate"),M("click",function(){let i=I(n).$implicit,r=E(2);return T(r.startEdit(i))}),U(),m(26,"svg",40),k(27,"path",41)(28,"path",42),g()(),J(),m(29,"button",43),y(30,"translate"),M("click",function(){let i=I(n).$implicit,r=E(2);return T(r.deletePerson(i))}),U(),m(31,"svg",40),k(32,"path",44),g()()()()}if(t&2){let n=e.$implicit;p(2),A("src",n.photoUrl,qe)("alt",n.name),p(3),b(n.name),p(2),b(n.relation),p(5),N("",C(13,10,"common.phone"),":"),p(3),b(n.phone),p(3),N("",C(19,12,"common.idNumber"),":"),p(3),b(n.idNumber),p(3),A("title",C(25,14,"common.edit")),p(5),A("title",C(30,16,"common.delete"))}}function mP(t,e){if(t&1){let n=G();m(0,"tr",28)(1,"td",45)(2,"div",46),k(3,"img",47),m(4,"span",48),h(5),g()()(),m(6,"td",49),h(7),g(),m(8,"td",49),h(9),g(),m(10,"td",50),h(11),g(),m(12,"td",51)(13,"div",52)(14,"button",39),y(15,"translate"),M("click",function(){let i=I(n).$implicit,r=E(2);return T(r.startEdit(i))}),U(),m(16,"svg",40),k(17,"path",41)(18,"path",42),g()(),J(),m(19,"button",43),y(20,"translate"),M("click",function(){let i=I(n).$implicit,r=E(2);return T(r.deletePerson(i))}),U(),m(21,"svg",40),k(22,"path",44),g()()()()()}if(t&2){let n=e.$implicit;p(3),A("src",n.photoUrl,qe)("alt",n.name),p(2),b(n.name),p(2),b(n.relation),p(2),b(n.phone),p(2),b(n.idNumber),p(3),A("title",C(15,8,"common.edit")),p(5),A("title",C(20,10,"common.delete"))}}function gP(t,e){if(t&1&&(m(0,"div",21),Z(1,fP,33,18,"div",22,Ev),g(),m(3,"div",23)(4,"table",24)(5,"thead",25)(6,"tr")(7,"th",26),h(8),y(9,"translate"),g(),m(10,"th",26),h(11),y(12,"translate"),g(),m(13,"th",26),h(14),y(15,"translate"),g(),m(16,"th",26),h(17),y(18,"translate"),g(),m(19,"th",27),h(20),y(21,"translate"),g()()(),m(22,"tbody"),Z(23,mP,23,12,"tr",28,Ev),g()()()),t&2){let n=E();p(),K(n.authorizedPersons()),p(7),b(C(9,5,"parent.management.name")),p(3),b(C(12,7,"parent.management.relation")),p(3),b(C(15,9,"parent.management.phone")),p(3),b(C(18,11,"parent.management.idNumber")),p(3),b(C(21,13,"common.actions")),p(3),K(n.authorizedPersons())}}function hP(t,e){t&1&&(m(0,"div",19)(1,"p"),h(2),y(3,"translate"),g()()),t&2&&(p(2),b(C(3,1,"parent.management.noPersons")))}var Da=class t{constructor(){this.translationService=w(X);this.dataService=w(Ee);this.toastService=w(ue);this.authService=w(de);this.personForm=R(wp);this.editingPerson=R(null);this.driverPhoneNumber=R("");this.authorizedPersons=H(()=>{let e=this.authService.currentUser();return e?this.dataService.getAuthorizedPersonsByParentId(e.id):[]});this.isFormValid=H(()=>{let e=this.personForm();return e.name&&e.relation&&e.idNumber})}startEdit(e){this.editingPerson.set(e),this.personForm.set({name:e.name,relation:e.relation,phone:e.phone||"",idNumber:e.idNumber})}cancelForm(){this.editingPerson.set(null),this.personForm.set(wp)}async savePerson(){if(!this.isFormValid())return;let e=this.personForm(),n=this.authService.currentUser();if(!n)return;let o=this.editingPerson();if(o){let i=z(B({},o),{name:e.name,relation:e.relation,phone:e.phone,idNumber:e.idNumber});await this.dataService.updateAuthorizedPerson(i),this.toastService.show(this.translationService.translate("parent.management.toast.personUpdated"),"success")}else await this.dataService.addAuthorizedPerson({parentId:n.id,name:e.name,relation:e.relation,phone:e.phone,idNumber:e.idNumber}),this.toastService.show(this.translationService.translate("parent.management.toast.personAdded"),"success");this.cancelForm()}async deletePerson(e){confirm(this.translationService.translate("parent.management.deleteConfirmation"))&&(await this.dataService.deleteAuthorizedPerson(e.id),this.toastService.show(this.translationService.translate("parent.management.toast.personDeleted"),"success"))}updatePersonForm(e,n){this.personForm.update(o=>z(B({},o),{[e]:n}))}async inviteDriver(){let e=this.driverPhoneNumber(),n=this.authService.currentUser()?.id;if(e&&n)if(await this.dataService.inviteDriver(n,e)){let i=this.translationService.translate("parent.management.toast.inviteSent",{phone:e});this.toastService.show(i,"info"),this.driverPhoneNumber.set("")}else this.toastService.show("Failed to invite driver.","error")}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=ee({type:t,selectors:[["app-authorized-person-management"]],decls:60,vars:48,consts:[[1,"authorized-person-container"],[1,"section-title"],[1,"section-description"],[1,"management-grid"],[1,"add-edit-form-card"],[1,"form-card-title"],[1,"form-spacing",3,"submit"],[1,"form-label"],["type","text","name","personName","required","",1,"form-input",3,"ngModelChange","ngModel"],["type","text","name","personRelation","required","",1,"form-input",3,"ngModelChange","ngModel"],["type","tel","name","personPhone",1,"form-input",3,"ngModelChange","ngModel"],["type","text","name","personIdNumber","required","",1,"form-input",3,"ngModelChange","ngModel"],[1,"form-buttons-padding"],["type","submit",1,"btn-primary",3,"disabled"],["type","button",1,"btn-secondary"],[1,"form-card-description"],["type","tel","name","driverPhone","required","",1,"form-input",3,"ngModelChange","ngModel"],[1,"list-section"],[1,"section-title-alt"],[1,"no-persons-message"],["type","button",1,"btn-secondary",3,"click"],[1,"person-cards-mobile"],[1,"person-card"],[1,"persons-table-desktop"],[1,"data-table"],[1,"table-header"],["scope","col",1,"table-th"],["scope","col",1,"table-th","table-th-actions"],[1,"table-row"],[1,"person-card-header"],[1,"person-avatar",3,"src","alt"],[1,"person-name"],[1,"person-relation"],[1,"card-divider"],[1,"person-details"],[1,"detail-label"],[1,"detail-value"],[1,"detail-value","detail-value-mono"],[1,"card-actions"],[1,"action-button","edit-button",3,"click","title"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"icon-small"],["d","M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"],["fill-rule","evenodd","d","M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z","clip-rule","evenodd"],[1,"action-button","delete-button",3,"click","title"],["fill-rule","evenodd","d","M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule","evenodd"],[1,"table-td","table-td-avatar"],[1,"table-cell-content"],[1,"table-avatar",3,"src","alt"],[1,"table-name"],[1,"table-td"],[1,"table-td","table-td-id-number"],[1,"table-td","table-td-actions"],[1,"action-buttons-group"]],template:function(n,o){n&1&&(m(0,"div",0)(1,"h2",1),h(2),y(3,"translate"),g(),m(4,"p",2),h(5),y(6,"translate"),g(),m(7,"div",3)(8,"div",4)(9,"h3",5),O(10,lP,2,3)(11,cP,2,3),g(),m(12,"form",6),M("submit",function(){return o.savePerson()}),m(13,"div")(14,"label",7),h(15),y(16,"translate"),g(),m(17,"input",8),M("ngModelChange",function(r){return o.updatePersonForm("name",r)}),g()(),m(18,"div")(19,"label",7),h(20),y(21,"translate"),g(),m(22,"input",9),M("ngModelChange",function(r){return o.updatePersonForm("relation",r)}),g()(),m(23,"div")(24,"label",7),h(25),y(26,"translate"),g(),m(27,"input",10),M("ngModelChange",function(r){return o.updatePersonForm("phone",r)}),g()(),m(28,"div")(29,"label",7),h(30),y(31,"translate"),g(),m(32,"input",11),M("ngModelChange",function(r){return o.updatePersonForm("idNumber",r)}),g()(),m(33,"div",12)(34,"button",13),O(35,dP,2,3)(36,uP,2,3),g(),O(37,pP,3,3,"button",14),g()()(),m(38,"div",4)(39,"h3",5),h(40),y(41,"translate"),g(),m(42,"p",15),h(43),y(44,"translate"),g(),m(45,"form",6),M("submit",function(){return o.inviteDriver()}),m(46,"div")(47,"label",7),h(48),y(49,"translate"),g(),m(50,"input",16),M("ngModelChange",function(r){return o.driverPhoneNumber.set(r)}),g()(),m(51,"button",13),h(52),y(53,"translate"),g()()()(),m(54,"div",17)(55,"h3",18),h(56),y(57,"translate"),g(),O(58,gP,25,15)(59,hP,4,3,"div",19),g()()),n&2&&(p(2),b(C(3,26,"parent.management.title")),p(3),b(C(6,28,"parent.management.description")),p(5),F(o.editingPerson()?10:11),p(5),b(C(16,30,"parent.management.name")),p(2),A("ngModel",o.personForm().name),p(3),b(C(21,32,"parent.management.relation")),p(2),A("ngModel",o.personForm().relation),p(3),b(C(26,34,"parent.management.phone")),p(2),A("ngModel",o.personForm().phone),p(3),b(C(31,36,"parent.management.idNumber")),p(2),A("ngModel",o.personForm().idNumber),p(2),j("btn-disabled",!o.isFormValid()),A("disabled",!o.isFormValid()),p(),F(o.editingPerson()?35:36),p(2),F(o.editingPerson()?37:-1),p(3),b(C(41,38,"parent.management.inviteTitle")),p(3),b(C(44,40,"parent.management.inviteDriverDescription")),p(5),b(C(49,42,"common.phone")),p(2),A("ngModel",o.driverPhoneNumber()),p(),j("btn-disabled",!o.driverPhoneNumber()),A("disabled",!o.driverPhoneNumber()),p(),N(" ",C(53,44,"parent.management.inviteButton")," "),p(4),b(C(57,46,"parent.management.existing")),p(2),F(o.authorizedPersons().length>0?58:59))},dependencies:[Ae,Ve,Me,De,Fe,Be,Ie,Re,oe],styles:["@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.authorized-person-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in .5s ease-out forwards;width:100%}.section-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:var(--color-cyan-400)}.section-description[_ngcontent-%COMP%]{color:var(--color-slate-400);margin-top:.25rem;margin-bottom:1.5rem}.section-title-alt[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;margin-bottom:1.5rem;color:var(--color-slate-200)}.management-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:2rem;margin-bottom:2rem}@media(min-width:1024px){.management-grid[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr;align-items:start}}.list-section[_ngcontent-%COMP%]{margin-top:2rem}.add-edit-form-card[_ngcontent-%COMP%]{background-color:#1e293b80;padding:1.5rem;border-radius:.75rem;border:1px solid var(--color-slate-700);height:fit-content}.form-card-title[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;margin-bottom:.5rem}.form-card-description[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-slate-400);margin-bottom:1rem}.form-spacing[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.form-label[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:500;color:var(--color-slate-300);margin-bottom:.5rem}.form-input[_ngcontent-%COMP%]{width:90%;background-color:var(--color-slate-800);border:1px solid var(--color-slate-700);border-radius:.5rem;padding:.75rem;outline:none;transition:all .2s ease-in-out}.form-input[_ngcontent-%COMP%]:focus{border-color:var(--color-cyan-500);background-color:var(--color-slate-900);box-shadow:0 0 0 3px #06b6d44d}.form-buttons-padding[_ngcontent-%COMP%]{padding-top:.5rem;display:flex;flex-direction:column;gap:.5rem}.person-cards-mobile[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:1rem}@media(min-width:640px){.person-cards-mobile[_ngcontent-%COMP%]{display:none}}.person-card[_ngcontent-%COMP%]{background:linear-gradient(145deg,var(--color-slate-800),#151f32);border-radius:.75rem;border:1px solid var(--color-slate-700);padding:1rem;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}.person-card-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.person-avatar[_ngcontent-%COMP%]{width:3.5rem;height:3.5rem;border-radius:9999px;object-fit:cover;border:2px solid var(--color-slate-600)}.person-name[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:var(--color-white)}.person-relation[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-slate-400)}.card-divider[_ngcontent-%COMP%]{border-top:1px solid var(--color-slate-700);margin:.75rem 0}.person-details[_ngcontent-%COMP%]   .detail-label[_ngcontent-%COMP%]{color:var(--color-slate-500)}.person-details[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{color:var(--color-slate-300)}.detail-value-mono[_ngcontent-%COMP%]{font-family:monospace}.card-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.75rem;margin-top:.5rem}.persons-table-desktop[_ngcontent-%COMP%]{display:none;background-color:var(--color-slate-900);border-radius:.75rem;border:1px solid var(--color-slate-800);overflow:hidden}@media(min-width:640px){.persons-table-desktop[_ngcontent-%COMP%]{display:block}}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table-header[_ngcontent-%COMP%]{background-color:var(--color-slate-800)}.table-th[_ngcontent-%COMP%]{padding:.75rem 1.5rem;font-size:.75rem;font-weight:600;color:var(--color-slate-300);text-transform:uppercase;letter-spacing:.05em;text-align:left}.table-row[_ngcontent-%COMP%]{border-bottom:1px solid var(--color-slate-800);transition:background-color .2s ease-in-out}.table-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.table-row[_ngcontent-%COMP%]:hover{background-color:var(--color-slate-800)}.table-td[_ngcontent-%COMP%]{padding:1rem 1.5rem;font-size:.875rem;color:var(--color-slate-400);vertical-align:middle}.table-td-avatar[_ngcontent-%COMP%]   .table-cell-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.table-avatar[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;border-radius:9999px;object-fit:cover}.table-name[_ngcontent-%COMP%]{color:var(--color-white);font-weight:500}.table-td-id-number[_ngcontent-%COMP%]{font-family:monospace}.table-th-actions[_ngcontent-%COMP%], .table-td-actions[_ngcontent-%COMP%]{text-align:right}.action-buttons-group[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.5rem}.no-persons-message[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:var(--color-slate-500);background-color:var(--color-slate-800);border-radius:.5rem}.action-button[_ngcontent-%COMP%]{padding:.5rem;background-color:transparent;border:1px solid var(--color-slate-700);border-radius:.5rem;transition:all .2s ease-in-out;cursor:pointer;display:flex;align-items:center;justify-content:center}.action-button[_ngcontent-%COMP%]:hover{background-color:var(--color-slate-700);border-color:var(--color-slate-600)}.action-button.edit-button[_ngcontent-%COMP%]{color:var(--color-cyan-400)}.action-button.delete-button[_ngcontent-%COMP%]{color:var(--color-red-400)}.icon-small[_ngcontent-%COMP%]{height:1.125rem;width:1.125rem}.btn-primary[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background-color:var(--color-cyan-500);color:var(--color-white);font-weight:600;border-radius:.5rem;border:none;cursor:pointer;transition:background-color .2s}.btn-primary[_ngcontent-%COMP%]:hover{background-color:var(--color-cyan-600)}.btn-primary.btn-disabled[_ngcontent-%COMP%], .btn-primary[_ngcontent-%COMP%]:disabled{background-color:var(--color-slate-600);cursor:not-allowed;opacity:.7}.btn-secondary[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background-color:var(--color-slate-600);color:var(--color-slate-300);font-weight:600;border-radius:.5rem;border:none;cursor:pointer;transition:background-color .2s}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:var(--color-slate-500)}"],changeDetection:0})}};var vP=["qrContainer"],Aa=class t{constructor(){this.data=Ws.required();this.isViewReady=R(!1);We(()=>{this.data()&&this.isViewReady()&&this.waitForQRCodeLibraryAndGenerate()})}ngAfterViewInit(){this.isViewReady.set(!0)}generateQRCode(){let e=this.data();if(e&&this.qrContainer)try{this.qrContainer.nativeElement.innerHTML="";let n=qrcode(0,"L");n.addData(e),n.make(),this.qrContainer.nativeElement.innerHTML=n.createImgTag(6,4)}catch(n){console.error("Failed to generate QR Code.",n)}}waitForQRCodeLibraryAndGenerate(e=50,n=100){typeof qrcode<"u"?this.generateQRCode():e>0?setTimeout(()=>{this.waitForQRCodeLibraryAndGenerate(e-1,n)},n):console.error("qrcode-generator library failed to load after several retries.")}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=ee({type:t,selectors:[["app-qr-code"]],viewQuery:function(n,o){if(n&1&&Lt(vP,5),n&2){let i;Bt(i=Ut())&&(o.qrContainer=i.first)}},inputs:{data:[1,"data"]},decls:2,vars:0,consts:[["qrContainer",""],[1,"qr-code-host"]],template:function(n,o){n&1&&ve(0,"div",1,0)},styles:["[_nghost-%COMP%]{display:block;background-color:#fff;padding:.75rem;border-radius:.75rem;display:inline-block;line-height:0}.qr-code-host[_ngcontent-%COMP%]   :is(img[_ngcontent-%COMP%]){display:block;width:180px;height:180px}"],changeDetection:0})}};function _P(t,e){if(t&1&&(m(0,"div",1)(1,"h3",36),U(),m(2,"svg",37),k(3,"path",38),g(),h(4),y(5,"translate"),g(),J(),m(6,"p",39),h(7),y(8,"translate"),g(),m(9,"div",40)(10,"div",41)(11,"div",42)(12,"span",43),h(13),y(14,"translate"),g(),m(15,"span",44),h(16),g()(),m(17,"div",45)(18,"span",43),h(19),y(20,"translate"),g(),m(21,"span",46),h(22),g()()()()()),t&2){let n=E();p(4),N(" ",C(5,6,"parent.spot.assignedTitle")," "),p(3),b(C(8,8,"parent.spot.assignedMessageNew")),p(6),b(C(14,10,"common.zone")),p(3),b(n.assignedZone),p(3),b(C(20,12,"common.spot")),p(3),b(n.assignedSpot)}}function yP(t,e){t&1&&(m(0,"div",2)(1,"h3",47),U(),m(2,"svg",48),k(3,"path",49),g(),h(4),y(5,"translate"),g(),J(),m(6,"p",50),h(7),y(8,"translate"),g()()),t&2&&(p(4),N(" ",C(5,2,"parent.spot.standByTitle")," "),p(3),b(C(8,4,"parent.spot.standByMessage")))}function CP(t,e){if(t&1){let n=G();m(0,"div",3)(1,"button",51),M("click",function(){I(n);let i=E(2);return T(i.arrivalSignaled.emit())}),U(),m(2,"svg",52),k(3,"path",38),g(),h(4),y(5,"translate"),g()()}t&2&&(p(4),N(" ",C(5,1,"parent.buttons.arrived")," "))}function bP(t,e){if(t&1&&(m(0,"span",27),k(1,"span",53),h(2),g()),t&2){let n=E();p(2),N(" ",n.eta??"..."," min ")}}function SP(t,e){t&1&&(m(0,"span",26),h(1),y(2,"translate"),g()),t&2&&(p(),b(C(2,1,"statuses.arrived")))}function EP(t,e){if(t&1&&(m(0,"span",26),h(1),g()),t&2){let n=E();p(),b(n.distance?n.distance.toFixed(1)+" km":"...")}}function MP(t,e){t&1&&(m(0,"span",26),h(1,"0 km"),g())}function wP(t,e){if(t&1){let n=G();O(0,_P,23,14,"div",1)(1,yP,9,6,"div",2)(2,CP,6,3,"div",3),m(3,"div",4)(4,"p",5),h(5),y(6,"translate"),g(),m(7,"p",6),h(8),y(9,"translate"),g()(),m(10,"div",7),k(11,"div",8),m(12,"div",9)(13,"header",10)(14,"div",11),U(),m(15,"svg",12),k(16,"path",13),g()(),J(),m(17,"div",14)(18,"h3",15),h(19),y(20,"translate"),g(),m(21,"p",16),h(22),g()()(),m(23,"div",17)(24,"div",18),k(25,"app-qr-code",19),g(),m(26,"p",20),h(27),y(28,"translate"),g()(),m(29,"footer",21)(30,"div",22)(31,"span",23),h(32),y(33,"translate"),g(),m(34,"span",24),h(35),g()(),k(36,"div",25),m(37,"div",22)(38,"span",23),h(39),y(40,"translate"),g(),m(41,"span",26),h(42),g()(),m(43,"div",22)(44,"span",23),h(45),y(46,"translate"),g(),m(47,"span",26),h(48),g()(),m(49,"div",22)(50,"span",23),h(51),y(52,"translate"),g(),m(53,"span",26),h(54),g()(),k(55,"div",25),m(56,"div",22)(57,"span",23),h(58),y(59,"translate"),g(),O(60,bP,3,1,"span",27)(61,SP,3,3,"span",26),g(),m(62,"div",22)(63,"span",23),h(64),y(65,"translate"),g(),O(66,EP,2,1,"span",26)(67,MP,2,0,"span",26),g()()()(),m(68,"div",28)(69,"button",29),M("click",function(){I(n);let i=E();return T(i.shareRequest())}),U(),m(70,"svg",30),k(71,"path",31),g(),J(),m(72,"span"),h(73),y(74,"translate"),g()(),m(75,"button",32),M("click",function(){I(n);let i=E();return T(i.copyRequestDetails())}),U(),m(76,"svg",33),k(77,"path",34)(78,"path",35),g(),J(),m(79,"span"),h(80),y(81,"translate"),g()()()}if(t&2){let n,o=e,i=E();F(o.status==="arrived"&&o.assignedZone?0:o.status==="arrived"&&!o.assignedZone?1:o.status!=="arrived"&&o.status!=="completed"?2:-1),p(5),b(C(6,30,"parent.status.currentStatus")),p(2),j("status-pending",o.status==="pending")("status-acknowledged",o.status==="acknowledged")("status-arrived",o.status==="arrived")("status-ready",o.status==="ready"),p(),N(" ",C(9,32,"statuses."+o.status)," "),p(11),b(C(20,34,"parent.pass.title")),p(3),b((n=i.authService.currentUserSchool())==null?null:n.name),p(3),A("data",i.pickupCode()),p(2),b(C(28,36,"parent.pass.instruction")),p(5),b(C(33,38,"parent.status.pickupCode")),p(3),b(i.pickupCode()),p(4),b(C(40,40,"parent.share.student")),p(3),b(i.studentNames()),p(3),b(C(46,42,"parent.share.person")),p(3),b(o.authorizedPerson.name),p(3),b(C(52,44,"parent.share.vehicle")),p(3),Ce("",o.carInfo.color," - ",o.carInfo.plateNumber),p(4),b(C(59,46,"parent.status.liveEta")),p(2),F(o.status!=="arrived"?60:61),p(4),b(C(65,48,"parent.status.distance")),p(2),F(o.status!=="arrived"?66:67),p(7),b(C(74,50,"parent.buttons.share")),p(7),b(C(81,52,"parent.buttons.copy"))}}var Qo=class t{constructor(){this.authService=w(de);this.pickupStateService=w(Ke);this.toastService=w(ue);this.translationService=w(X);this.pickupCode=Ws.required();this.arrivalSignaled=Uh();this.allRequestsForCode=H(()=>this.pickupStateService.allRequests().filter(e=>e.code===this.pickupCode()));this.firstRequest=H(()=>this.allRequestsForCode()[0]??null);this.students=H(()=>this.allRequestsForCode().map(e=>e.student));this.studentNames=H(()=>this.students().map(e=>e.name).join(", "))}getShareableText(){let e=this.firstRequest();if(!e)return"";let n=i=>this.translationService.translate(i);return[n("parent.share.title"),"----------------------",`${n("parent.share.student")}: ${this.studentNames()}`,`${n("parent.share.person")}: ${e.authorizedPerson.name}`,`${n("parent.share.vehicle")}: ${e.carInfo.color} - ${e.carInfo.plateNumber}`,`${n("parent.share.code")}: ${this.pickupCode()}`,`${n("parent.share.eta")}: ~${e.eta??"N/A"} min`].join(`
`)}async shareRequest(){let e=this.getShareableText(),n=this.translationService.translate("parent.share.title");if(!navigator.share){this.copyRequestDetails(),this.toastService.show(this.translationService.translate("parent.toast.shareNotSupported"),"info");return}try{await navigator.share({title:n,text:e})}catch(o){console.error("Error using Web Share API:",o)}}copyRequestDetails(){navigator.clipboard.writeText(this.getShareableText()).then(()=>{this.toastService.show(this.translationService.translate("parent.toast.copied"),"success")}).catch(e=>{console.error("Failed to copy:",e),this.toastService.show(this.translationService.translate("parent.toast.copyFailed"),"error")})}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=ee({type:t,selectors:[["app-pickup-status-card"]],inputs:{pickupCode:[1,"pickupCode"]},outputs:{arrivalSignaled:"arrivalSignaled"},decls:2,vars:1,consts:[[1,"pickup-status-container"],[1,"spot-assigned-card"],[1,"stand-by-card"],[1,"arrival-button-container"],[1,"status-tracker-card"],[1,"status-tracker-label"],[1,"status-tracker-value"],[1,"digital-pass-container"],[1,"digital-pass-glow"],[1,"digital-pass"],[1,"digital-pass-header"],[1,"pass-logo"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor"],["d","M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.428A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"],[1,"pass-title-group"],[1,"pass-title"],[1,"pass-school-name"],[1,"pass-body"],[1,"pass-qr-code-wrapper"],[3,"data"],[1,"pass-instruction"],[1,"pass-footer"],[1,"pass-detail"],[1,"pass-detail-label"],[1,"pass-detail-value","font-mono"],[1,"pass-detail-divider"],[1,"pass-detail-value"],[1,"pass-detail-value","live-value"],[1,"share-action-group"],[1,"share-button",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"share-icon"],["d","M15 8a3 3 0 10-2.977-2.63l-4.94 2.47a3 3 0 100 4.319l4.94 2.47a3 3 0 10.895-1.789l-4.94-2.47a3.027 3.027 0 000-.74l4.94-2.47C13.456 7.68 14.19 8 15 8z"],[1,"copy-button",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"copy-icon"],["d","M7 9a2 2 0 012-2h6a2 2 0 012 2v6a2 2 0 01-2 2H9a2 2 0 01-2-2V9z"],["d","M4 3a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H4z"],[1,"spot-assigned-title"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"spot-assigned-icon"],["fill-rule","evenodd","d","M5.05 4.05a7 7 0 119.9 9.9L10 21l-4.95-6.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule","evenodd"],[1,"spot-assigned-message"],[1,"pickup-spot-display-wrapper"],[1,"pickup-spot-display"],[1,"pickup-spot-zone"],[1,"pickup-spot-label"],[1,"pickup-spot-value-zone"],[1,"pickup-spot-number"],[1,"pickup-spot-value-number"],[1,"stand-by-title"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"stand-by-icon"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule","evenodd"],[1,"stand-by-message"],[1,"btn-arrived",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"btn-arrived-icon"],[1,"live-indicator"]],template:function(n,o){if(n&1&&(m(0,"div",0),O(1,wP,82,54),g()),n&2){let i;p(),F((i=o.firstRequest())?1:-1,i)}},dependencies:[Aa,oe],styles:["@keyframes _ngcontent-%COMP%_fade-in-slow{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_pulse-glow{0%,to{box-shadow:0 0 20px -5px var(--color-cyan-500-50)}50%{box-shadow:0 0 35px 5px var(--color-cyan-500-50)}}@keyframes _ngcontent-%COMP%_pulse-live{0%,to{box-shadow:0 0 0 0 var(--color-green-500-50)}50%{box-shadow:0 0 0 .5rem #22c55e00}}.pickup-status-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem;animation:_ngcontent-%COMP%_fade-in-slow .5s ease-out forwards;width:100%;max-width:28rem;margin:0 auto}.arrival-button-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.75rem}.btn-arrived[_ngcontent-%COMP%]{background-color:var(--color-amber-700);color:var(--color-white);font-weight:700;padding:1rem 1.5rem;border-radius:.75rem;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:.75rem;font-size:1.125rem;box-shadow:0 4px 14px #b4530963;transition:all .3s ease-in-out;width:100%}.btn-arrived[_ngcontent-%COMP%]:hover{background-color:var(--color-amber-800);transform:translateY(-2px);box-shadow:0 6px 20px #b453093b}.btn-arrived[_ngcontent-%COMP%]:disabled{background-color:var(--color-slate-600);cursor:not-allowed;opacity:.7;transform:none;box-shadow:none}.btn-arrived-icon[_ngcontent-%COMP%]{width:1.25rem;height:1.25rem}.stand-by-card[_ngcontent-%COMP%]{background-color:var(--color-slate-800);border:1px solid var(--color-slate-700);border-radius:1rem;padding:1.5rem;text-align:center}.stand-by-title[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.75rem;font-size:1.25rem;font-weight:600;color:var(--color-amber-300);margin-bottom:.5rem}.stand-by-icon[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem}.stand-by-message[_ngcontent-%COMP%]{color:var(--color-slate-300);line-height:1.5}.spot-assigned-card[_ngcontent-%COMP%]{background-color:var(--color-slate-800);border:2px solid var(--color-green-500);border-radius:1rem;padding:1.5rem;text-align:center;box-shadow:0 0 25px #22c55e33}.spot-assigned-title[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.75rem;font-size:1.25rem;font-weight:600;color:var(--color-green-400);margin-bottom:.5rem}.spot-assigned-icon[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem}.spot-assigned-message[_ngcontent-%COMP%]{color:var(--color-slate-300);line-height:1.5;margin-bottom:1rem}.status-tracker-card[_ngcontent-%COMP%]{background-color:#1e293b80;padding:.75rem 1rem;border-radius:.5rem;text-align:center;border:1px solid var(--color-slate-700)}.status-tracker-label[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-slate-500);text-transform:uppercase}.status-tracker-value[_ngcontent-%COMP%]{font-size:1rem;font-weight:600}.status-pending[_ngcontent-%COMP%]{color:var(--color-amber-300)}.status-acknowledged[_ngcontent-%COMP%]{color:var(--color-sky-300)}.status-arrived[_ngcontent-%COMP%]{color:var(--color-amber-300)}.status-ready[_ngcontent-%COMP%]{color:var(--color-green-400)}.digital-pass-container[_ngcontent-%COMP%]{position:relative;animation:_ngcontent-%COMP%_pulse-glow 3s infinite ease-in-out}.digital-pass-glow[_ngcontent-%COMP%]{position:absolute;inset:-1rem;background-image:radial-gradient(var(--color-cyan-500-20),transparent 70%);border-radius:1.5rem}.digital-pass[_ngcontent-%COMP%]{background:linear-gradient(145deg,var(--color-slate-800),#151f32);border-radius:1rem;border:1px solid var(--color-slate-700);overflow:hidden;position:relative}.digital-pass-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1rem;background-color:#1e293b80}.pass-logo[_ngcontent-%COMP%]{padding:.5rem;background-color:var(--color-cyan-500);border-radius:.5rem;color:#fff}.pass-logo[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem}.pass-title-group[_ngcontent-%COMP%]{line-height:1.2}.pass-title[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:#fff}.pass-school-name[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-slate-400)}.pass-body[_ngcontent-%COMP%]{padding:1.5rem 1rem;text-align:center}.pass-qr-code-wrapper[_ngcontent-%COMP%]{margin-bottom:1rem}.pass-instruction[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-slate-400)}.pass-footer[_ngcontent-%COMP%]{background-color:#1e293b80;padding:1rem;display:flex;flex-direction:column;gap:.5rem}.pass-detail[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:.875rem}.pass-detail-label[_ngcontent-%COMP%]{color:var(--color-slate-500)}.pass-detail-value[_ngcontent-%COMP%]{color:var(--color-slate-300);font-weight:600;text-align:right}.pass-detail-divider[_ngcontent-%COMP%]{border-top:1px solid var(--color-slate-700);margin:.25rem 0}.live-value[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:var(--color-green-400)}.live-indicator[_ngcontent-%COMP%]{width:.5rem;height:.5rem;background-color:var(--color-green-400);border-radius:9999px;animation:_ngcontent-%COMP%_pulse-live 1.5s infinite}.share-action-group[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem}.share-button[_ngcontent-%COMP%], .copy-button[_ngcontent-%COMP%]{padding:.75rem;border:1px solid var(--color-slate-700);border-radius:.5rem;background-color:var(--color-slate-800);color:var(--color-slate-300);font-weight:500;display:flex;align-items:center;justify-content:center;gap:.5rem;cursor:pointer;transition:all .2s}.share-button[_ngcontent-%COMP%]:hover, .copy-button[_ngcontent-%COMP%]:hover{background-color:var(--color-slate-700);color:#fff}.share-icon[_ngcontent-%COMP%], .copy-icon[_ngcontent-%COMP%]{width:1rem;height:1rem}"],changeDetection:0})}};var Ap=(t,e)=>e.id;function xP(t,e){if(t&1){let n=G();m(0,"div",5)(1,"h3",12),h(2),y(3,"translate"),g(),m(4,"form",13),M("submit",function(){I(n);let i=E();return T(i.createGroup())}),m(5,"input",14),y(6,"translate"),M("ngModelChange",function(i){I(n);let r=E();return T(r.newGroupName.set(i))}),g(),m(7,"div",15)(8,"button",16),M("click",function(){I(n);let i=E();return T(i.toggleCreateGroupForm())}),h(9),y(10,"translate"),g(),m(11,"button",17),h(12),y(13,"translate"),g()()()()}if(t&2){let n=E();p(2),b(C(3,6,"carpooling.createGroup.title")),p(3),A("ngModel",n.newGroupName())("placeholder",C(6,8,"carpooling.groupName.placeholder")),p(4),b(C(10,10,"common.cancel")),p(2),A("disabled",!n.newGroupName()),p(),b(C(13,12,"carpooling.create.button"))}}function IP(t,e){if(t&1){let n=G();m(0,"button",18),M("click",function(){I(n);let i=E();return T(i.toggleCreateGroupForm())}),h(1),y(2,"translate"),g()}t&2&&(p(),N(" ",C(2,1,"carpooling.createGroup.button")," "))}function TP(t,e){if(t&1&&(m(0,"p",21)(1,"span",30),h(2),y(3,"translate"),g(),h(4),g()),t&2){let n=E().$implicit;p(2),N("",C(3,2,"carpooling.groupAdmin"),":"),p(2),N(" ",n.admin.name," ")}}function PP(t,e){if(t&1&&(m(0,"div",25),k(1,"img",31),m(2,"span"),h(3),g()()),t&2){let n=e.$implicit;p(),A("src",tu("https://picsum.photos/seed/",n.name,"/40/40"),qe)("alt",n.name),p(2),b(n.name)}}function DP(t,e){if(t&1){let n=G();m(0,"div",19)(1,"h4",20),h(2),g(),O(3,TP,5,4,"p",21),k(4,"div",22),m(5,"h5",23),h(6),y(7,"translate"),g(),m(8,"div",24),Z(9,PP,4,4,"div",25,Ap),g(),k(11,"div",22),m(12,"div",26)(13,"button",27),M("click",function(){let i=I(n).$implicit,r=E(2);return T(r.openInviteModal(i))}),U(),m(14,"svg",28),k(15,"path",29),g(),J(),m(16,"span"),h(17),y(18,"translate"),g()()()()}if(t&2){let n=e.$implicit;p(2),b(n.name),p(),F(n.admin?3:-1),p(3),Ce("",C(7,5,"carpooling.members")," (",n.members.length,")"),p(3),K(n.members),p(8),b(C(18,7,"carpooling.inviteMember.button"))}}function AP(t,e){if(t&1&&(m(0,"div",9),Z(1,DP,19,9,"div",19,Ap),g()),t&2){let n=E();p(),K(n.myGroups())}}function NP(t,e){t&1&&(m(0,"div",10)(1,"p"),h(2),y(3,"translate"),g()()),t&2&&(p(2),b(C(3,1,"carpooling.noGroups")))}function kP(t,e){if(t&1&&(m(0,"option",40),h(1),g()),t&2){let n=e.$implicit;A("value",n.id),p(),b(n.name)}}function RP(t,e){if(t&1){let n=G();m(0,"select",38),M("ngModelChange",function(i){I(n);let r=E(2);return T(r.inviteeUserId.set(i))}),m(1,"option",39),h(2),y(3,"translate"),g(),Z(4,kP,2,2,"option",40,Ap),g()}if(t&2){let n=E(2);A("ngModel",n.inviteeUserId()),p(2),b(C(3,2,"carpooling.inviteMember.select")),p(2),K(n.parentsToInvite())}}function OP(t,e){t&1&&(m(0,"p",36),h(1),y(2,"translate"),g()),t&2&&(p(),b(C(2,1,"carpooling.inviteMember.noParents")))}function FP(t,e){if(t&1){let n=G();m(0,"div",32),M("click",function(){I(n);let i=E();return T(i.closeInviteModal())}),m(1,"div",33),M("click",function(i){return I(n),T(i.stopPropagation())}),m(2,"h3",34),h(3),y(4,"translate"),g(),m(5,"form",13),M("submit",function(){I(n);let i=E();return T(i.sendInvite())}),O(6,RP,6,4,"select",35)(7,OP,3,3,"p",36),m(8,"div",37)(9,"button",16),M("click",function(){I(n);let i=E();return T(i.closeInviteModal())}),h(10),y(11,"translate"),g(),m(12,"button",17),h(13),y(14,"translate"),g()()()()()}if(t&2){let n=E();p(3),Ce("",C(4,6,"carpooling.inviteMember.title")," '",e.name,"'"),p(3),F(n.parentsToInvite().length>0?6:7),p(4),b(C(11,8,"common.cancel")),p(2),A("disabled",!n.inviteeUserId()),p(),b(C(14,10,"carpooling.invite.button"))}}var Na=class t{constructor(){this.authService=w(de);this.dataService=w(Ee);this.toastService=w(ue);this.translationService=w(X);this.currentUser=this.authService.currentUser;this.showCreateGroupForm=R(!1);this.showInviteModalForGroup=R(null);this.newGroupName=R("");this.inviteeUserId=R("");this.myGroups=H(()=>{let e=this.currentUser();return e?this.dataService.getCarpoolGroupsForUser(e.id).map(o=>{let i=this.dataService.getMembersForGroup(o.id),r=i.find(s=>s.id===o.adminId);return z(B({},o),{members:i,admin:r})}):[]});this.parentsToInvite=H(()=>{let e=this.showInviteModalForGroup(),n=this.currentUser()?.schoolId;if(!e||!n)return[];let o=this.dataService.getParentsForSchool(n),i=new Set(e.members.map(r=>r.id));return o.filter(r=>!i.has(r.id))})}toggleCreateGroupForm(){this.showCreateGroupForm.update(e=>!e),this.newGroupName.set("")}async createGroup(){let e=this.newGroupName().trim(),n=this.currentUser(),o=this.authService.currentUserSchool()?.id;!e||!n||!o||(await this.dataService.createCarpoolGroup(e,o,n.id),this.toastService.show(this.translationService.translate("carpooling.toast.groupCreated"),"success"),this.toggleCreateGroupForm())}openInviteModal(e){this.inviteeUserId.set(""),this.showInviteModalForGroup.set(e)}closeInviteModal(){this.showInviteModalForGroup.set(null)}async sendInvite(){let e=this.showInviteModalForGroup(),n=this.inviteeUserId();!e||!n||(await this.dataService.addMemberToGroup(e.id,n),this.toastService.show(this.translationService.translate("carpooling.toast.memberInvited"),"success"),this.closeInviteModal())}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=ee({type:t,selectors:[["app-carpooling"]],decls:18,vars:12,consts:[[1,"carpooling-container"],[1,"header"],[1,"section-title"],[1,"section-description"],[1,"create-group-section"],[1,"form-card"],[1,"btn-primary-full"],[1,"my-groups-section"],[1,"section-title-alt"],[1,"groups-grid"],[1,"no-data-message"],[1,"modal-overlay"],[1,"form-card-title"],[1,"form-layout",3,"submit"],["type","text","name","groupName","required","",1,"form-input",3,"ngModelChange","ngModel","placeholder"],[1,"form-actions"],["type","button",1,"btn-secondary",3,"click"],["type","submit",1,"btn-primary",3,"disabled"],[1,"btn-primary-full",3,"click"],[1,"group-card"],[1,"group-name"],[1,"group-admin-info"],[1,"card-divider"],[1,"members-title"],[1,"members-list"],[1,"member-item"],[1,"card-actions"],[1,"btn-invite",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"btn-icon"],["d","M8 9a3 3 0 100-6 3 3 0 000 6zM8 11a6 6 0 016 6H2a6 6 0 016-6zM16 11a1 1 0 10-2 0v1h-1a1 1 0 100 2h1v1a1 1 0 102 0v-1h1a1 1 0 100-2h-1v-1z"],[1,"admin-label"],[1,"member-avatar",3,"src","alt"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-title"],["name","invitee","required","",1,"form-select",3,"ngModel"],[1,"no-parents-message"],[1,"modal-actions"],["name","invitee","required","",1,"form-select",3,"ngModelChange","ngModel"],["value","","disabled",""],[3,"value"]],template:function(n,o){if(n&1&&(m(0,"div",0)(1,"header",1)(2,"h2",2),h(3),y(4,"translate"),g(),m(5,"p",3),h(6),y(7,"translate"),g()(),m(8,"section",4),O(9,xP,14,14,"div",5)(10,IP,3,3,"button",6),g(),m(11,"section",7)(12,"h3",8),h(13),y(14,"translate"),g(),O(15,AP,3,0,"div",9)(16,NP,4,3,"div",10),g(),O(17,FP,15,12,"div",11),g()),n&2){let i;p(3),b(C(4,6,"carpooling.title")),p(3),b(C(7,8,"carpooling.description")),p(3),F(o.showCreateGroupForm()?9:10),p(4),b(C(14,10,"carpooling.myGroups")),p(2),F(o.myGroups().length>0?15:16),p(2),F((i=o.showInviteModalForGroup())?17:-1,i)}},dependencies:[Ae,Ve,rn,sn,Me,Et,De,Fe,Be,Ie,Re,oe],styles:[`@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.carpooling-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in .5s ease-out forwards;width:100%}.header[_ngcontent-%COMP%]{margin-bottom:1.5rem}.section-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:var(--color-cyan-400)}.section-description[_ngcontent-%COMP%]{color:var(--color-slate-400);margin-top:.25rem}.section-title-alt[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;margin-bottom:1.5rem;color:var(--color-slate-200)}.create-group-section[_ngcontent-%COMP%]{margin-bottom:2rem}.form-card[_ngcontent-%COMP%]{background-color:#1e293b80;padding:1.5rem;border-radius:.75rem;border:1px solid var(--color-slate-700)}.form-card-title[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;margin-bottom:1rem}.form-layout[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.form-input[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{width:90%;background-color:var(--color-slate-800);border:1px solid var(--color-slate-700);border-radius:.5rem;padding:.75rem;outline:none;transition:all .2s ease-in-out}.form-input[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{border-color:var(--color-cyan-500);background-color:var(--color-slate-900);box-shadow:0 0 0 3px #06b6d44d}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.75rem;margin-top:.5rem}.groups-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:1.5rem}@media(min-width:768px){.groups-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}.group-card[_ngcontent-%COMP%]{background:linear-gradient(145deg,var(--color-slate-800),#151f32);border-radius:.75rem;border:1px solid var(--color-slate-700);padding:1rem;display:flex;flex-direction:column;gap:.75rem}.group-name[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:var(--color-white)}.group-admin-info[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-slate-300)}.admin-label[_ngcontent-%COMP%]{color:var(--color-slate-500)}.card-divider[_ngcontent-%COMP%]{border-top:1px solid var(--color-slate-700)}.members-title[_ngcontent-%COMP%]{font-weight:500;color:var(--color-slate-400);font-size:.875rem}.members-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.75rem}.member-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;background-color:var(--color-slate-700);padding:.25rem .75rem;border-radius:9999px;font-size:.875rem}.member-avatar[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;border-radius:9999px;object-fit:cover}.card-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.btn-invite[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;background-color:var(--color-green-500-20);color:var(--color-green-400);font-weight:600;padding:.5rem 1rem;border-radius:.5rem;border:1px solid var(--color-green-500-50);cursor:pointer;transition:background-color .2s}.btn-invite[_ngcontent-%COMP%]:hover{background-color:var(--color-green-500-50)}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#000000b3;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);display:flex;align-items:center;justify-content:center;z-index:50;animation:_ngcontent-%COMP%_fade-in .3s ease-out}.modal-content[_ngcontent-%COMP%]{background-color:var(--color-slate-900);border:1px solid var(--color-slate-700);border-radius:1rem;padding:1.5rem;box-shadow:0 10px 25px #0000004d;width:90%;max-width:28rem}.modal-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:var(--color-cyan-400);margin-bottom:1.5rem}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;margin-top:1.5rem;padding-top:1rem;border-top:1px solid var(--color-slate-700)}.no-parents-message[_ngcontent-%COMP%]{color:var(--color-slate-500);text-align:center;padding:1rem}.no-data-message[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:var(--color-slate-500);background-color:var(--color-slate-800);border-radius:.5rem}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%], .btn-primary-full[_ngcontent-%COMP%]{padding:.625rem 1.25rem;font-weight:600;border-radius:.5rem;border:none;cursor:pointer;transition:background-color .2s}.btn-primary[_ngcontent-%COMP%]{background-color:var(--color-cyan-500);color:var(--color-white)}.btn-primary[_ngcontent-%COMP%]:hover{background-color:var(--color-cyan-600)}.btn-primary[_ngcontent-%COMP%]:disabled{background-color:var(--color-slate-600);cursor:not-allowed;opacity:.7}.btn-secondary[_ngcontent-%COMP%]{background-color:var(--color-slate-600);color:var(--color-slate-300)}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:var(--color-slate-500)}.btn-primary-full[_ngcontent-%COMP%]{width:100%;background-color:var(--color-cyan-500);color:var(--color-white)}.btn-icon[_ngcontent-%COMP%]{width:1.125rem;height:1.125rem}




`],changeDetection:0})}};var Xo=class t{constructor(){this.latestBroadcast=R(null)}sendBroadcast(e){this.latestBroadcast.set({message:e,timestamp:Date.now()})}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"})}};var Np={production:!0,googleMapsApiKey:"AIzaSyC0IntD9PGE53i1bXKk0asT-cBDvw9w0oo",supabase:{url:"",anonKey:""}};var VP=(t,e)=>({distance:t,eta:e}),lr=(t,e)=>e.id,Mv=(t,e)=>e.student.id;function LP(t,e){if(t&1){let n=G();m(0,"button",24),M("click",function(){let i=I(n).$implicit,r=E(2);return T(r.setView(i.id))}),U(),m(1,"svg",25),k(2,"path",26),g(),J(),m(3,"span",27),h(4),y(5,"translate"),g()()}if(t&2){let n=e.$implicit,o=E(2);j("menu-item-active",o.activeView()===n.id),p(2),St("d",n.iconPath),p(2),b(C(5,4,n.titleKey))}}function BP(t,e){if(t&1){let n=G();m(0,"div",15),M("click",function(){I(n);let i=E();return T(i.isMobileMenuOpen.set(!1))}),m(1,"aside",16),M("click",function(i){return I(n),T(i.stopPropagation())}),m(2,"header",17)(3,"h2",18),h(4),y(5,"translate"),g(),m(6,"button",19),M("click",function(){I(n);let i=E();return T(i.isMobileMenuOpen.set(!1))}),U(),m(7,"svg",20),k(8,"path",21),g()()(),J(),m(9,"nav",22),Z(10,LP,6,6,"button",23,lr),g()()()}if(t&2){let n=E();p(4),b(C(5,2,"parent.portal.title")),p(2),A("title","Close menu"),p(4),K(n.features)}}function UP(t,e){t&1&&(m(0,"span",39),U(),m(1,"svg",43),k(2,"path",44),g()())}function HP(t,e){if(t&1){let n=G();m(0,"div",38),M("click",function(){let i=I(n).$implicit,r=E(3);return T(r.toggleStudentSelection(i))}),O(1,UP,3,0,"span",39),k(2,"img",40),m(3,"p",41),h(4),g(),m(5,"p",42),h(6),g()()}if(t&2){let n=e.$implicit,o=E(3);j("student-card-selected",o.selectedStudents().has(n)),p(),F(o.selectedStudents().has(n)?1:-1),p(),A("src",n.photoUrl,qe)("alt",n.name),p(2),b(n.name),p(2),b(n.class)}}function GP(t,e){t&1&&(m(0,"span",39),U(),m(1,"svg",43),k(2,"path",44),g()())}function qP(t,e){if(t&1){let n=G();m(0,"div",47),M("click",function(){let i=I(n).$implicit,r=E(4);return T(r.selectAuthorizedPerson(i))}),m(1,"button",48),M("click",function(i){let r=I(n).$implicit;return E(4).showPersonDetails(r),T(i.stopPropagation())}),U(),m(2,"svg",49),k(3,"path",50),g()(),O(4,GP,3,0,"span",39),J(),k(5,"img",51),m(6,"p",52),h(7),g(),m(8,"p",53),h(9),g()()}if(t&2){let n=e.$implicit,o=E(4);j("person-card-selected",o.selectedAuthorizedPerson()===n),p(4),F(o.selectedAuthorizedPerson()===n?4:-1),p(),A("src",n.photoUrl,qe)("alt",n.name),p(2),b(n.name),p(2),b(n.relation)}}function $P(t,e){if(t&1&&(m(0,"section",35)(1,"h3",32),h(2),y(3,"translate"),g(),m(4,"div",45),Z(5,qP,10,7,"div",46,lr),g()()),t&2){let n=E(3);p(2),b(C(3,1,"parent.steps.selectPerson")),p(3),K(n.authorizedPersons())}}function zP(t,e){if(t&1){let n=G();m(0,"section",36)(1,"h3",32),h(2),y(3,"translate"),g(),m(4,"input",54),y(5,"translate"),M("ngModelChange",function(i){I(n);let r=E(3);return T(r.updateCarInfo("color",i))}),g(),m(6,"input",55),y(7,"translate"),M("ngModelChange",function(i){I(n);let r=E(3);return T(r.updateCarInfo("plateNumber",i))}),g(),m(8,"textarea",56),y(9,"translate"),M("ngModelChange",function(i){I(n);let r=E(3);return T(r.pickupNotes.set(i))}),g()()}if(t&2){let n=E(3);p(2),b(C(3,7,"parent.steps.vehicleInfo")),p(2),A("ngModel",n.carInfo().color)("placeholder",C(5,9,"parent.placeholders.carColor")),p(2),A("ngModel",n.carInfo().plateNumber)("placeholder",C(7,11,"parent.placeholders.plateNumber")),p(2),A("ngModel",n.pickupNotes())("placeholder",C(9,13,"parent.placeholders.notes"))}}function WP(t,e){if(t&1){let n=G();m(0,"button",57),M("click",function(){I(n);let i=E(3);return T(i.initiatePickupSequence())}),h(1),y(2,"translate"),g()}t&2&&(p(),N(" ",C(2,1,"parent.buttons.notify")," "))}function YP(t,e){if(t&1&&(m(0,"div",28)(1,"section")(2,"h3",32),h(3),y(4,"translate"),g(),m(5,"div",33),Z(6,HP,7,7,"div",34,lr),g()(),O(8,$P,7,3,"section",35),O(9,zP,10,15,"section",36),O(10,WP,3,3,"button",37),g()),t&2){let n=E(2);p(3),b(C(4,4,"parent.steps.selectStudent")),p(3),K(n.students()),p(2),F(n.selectedStudents().size>0?8:-1),p(),F(n.selectedStudents().size>0&&n.selectedAuthorizedPerson()?9:-1),p(),F(n.isRequestValid()?10:-1)}}function JP(t,e){t&1&&(m(0,"div",29),k(1,"div",58),m(2,"p",59),h(3),y(4,"translate"),g()()),t&2&&(p(3),b(C(4,1,"common.processing")))}function jP(t,e){if(t&1&&(m(0,"div",61)(1,"blockquote",63)(2,"p",64),h(3),g(),m(4,"cite",65),h(5,"- Gemini AI"),g()()()),t&2){let n=E(3);p(3),N(' "',n.pickupMessage(),'" ')}}function ZP(t,e){if(t&1&&(m(0,"p",62)(1,"span",66),h(2,"Note:"),g(),h(3),g()),t&2){let n=E(3);p(3),N(" ",n.locationError()," ")}}function KP(t,e){if(t&1){let n=G();m(0,"div",30)(1,"app-pickup-status-card",60),M("arrivalSignaled",function(){I(n);let i=E(2);return T(i.signalArrival())}),g(),O(2,jP,6,1,"div",61),O(3,ZP,4,1,"p",62),g()}if(t&2){let n=E(2);p(),A("pickupCode",n.pickupCode()),p(),F(n.pickupMessage()?2:-1),p(),F(n.locationError()?3:-1)}}function QP(t,e){if(t&1&&(m(0,"div",31),U(),m(1,"svg",67),k(2,"path",68),g(),J(),m(3,"p",69),h(4),g()()),t&2){let n=E(2);p(4),b(n.error())}}function XP(t,e){if(t&1&&O(0,YP,11,6,"div",28)(1,JP,5,3,"div",29)(2,KP,4,3,"div",30)(3,QP,5,1,"div",31),t&2){let n,o=E();F((n=o.pickupStatus())==="idle"?0:n==="loading"?1:n==="success"?2:n==="error"?3:-1)}}function eD(t,e){if(t&1){let n=G();m(0,"button",73),M("click",function(){let i=I(n).$implicit,r=E(2);return T(r.selectAbsenceStudent(i))}),m(1,"p",74),h(2),g(),m(3,"p",75),h(4),g()()}if(t&2){let n=e.$implicit,o=E(2);j("student-absence-card-selected",o.absence.student()===n),p(2),b(n.name),p(2),b(n.class)}}function tD(t,e){if(t&1){let n=G();m(0,"div",72)(1,"input",76),M("ngModelChange",function(i){I(n);let r=E(2);return T(r.absence.date.set(i))}),g(),m(2,"textarea",56),y(3,"translate"),M("ngModelChange",function(i){I(n);let r=E(2);return T(r.absence.reason.set(i))}),g(),m(4,"button",77),M("click",function(){I(n);let i=E(2);return T(i.reportAbsence())}),h(5),y(6,"translate"),g()()}if(t&2){let n=E(2);p(),A("ngModel",n.absence.date()),p(),A("ngModel",n.absence.reason())("placeholder",C(3,7,"parent.placeholders.absenceReason")),p(2),j("btn-disabled",!n.isAbsenceReportValid()),A("disabled",!n.isAbsenceReportValid()),p(),N(" ",C(6,9,"parent.buttons.reportAbsence")," ")}}function nD(t,e){if(t&1&&(m(0,"section",9)(1,"h3",32),h(2),y(3,"translate"),g(),m(4,"div",70),Z(5,eD,5,4,"button",71,lr),g(),O(7,tD,7,11,"div",72),g()),t&2){let n=E();p(2),b(C(3,2,"parent.absence.title")),p(3),K(n.students()),p(2),F(n.absence.student()?7:-1)}}function oD(t,e){t&1&&(m(0,"div",10),k(1,"app-authorized-person-management"),g())}function iD(t,e){if(t&1&&(m(0,"div",89),k(1,"iframe",90),g()),t&2){let n=E().$implicit,o=E(3);p(),A("src",o.getBusMapUrl(n.bus.liveLocation),Nd)}}function rD(t,e){if(t&1&&(m(0,"div",80)(1,"div",81)(2,"div",82),k(3,"img",83),m(4,"div")(5,"p",84),h(6),g(),m(7,"p",85),h(8),g()()(),m(9,"span",86),h(10),y(11,"translate"),g()(),m(12,"div",87)(13,"p",88),h(14),y(15,"translate"),m(16,"span"),h(17),g()(),O(18,iD,2,1,"div",89),g()()),t&2){let n=e.$implicit;p(3),A("src",n.student.photoUrl,qe)("alt",n.student.name),p(3),b(n.student.name),p(2),b(n.bus.busNumber),p(),j("status-en-route",n.bus.status==="en_route"),p(),N(" ",C(11,10,"bus.status."+n.bus.status)," "),p(4),N("",C(15,12,"busManagement.driverName"),": "),p(3),b(n.bus.driverName),p(),F(n.bus.liveLocation?18:-1)}}function sD(t,e){if(t&1&&(m(0,"div",78),Z(1,rD,19,14,"div",80,Mv),g()),t&2){let n=E(2);p(),K(n.studentsOnBus())}}function aD(t,e){t&1&&(m(0,"div",79)(1,"p",91),h(2),y(3,"translate"),g()()),t&2&&(p(2),b(C(3,1,"busTracking.noBuses")))}function lD(t,e){if(t&1&&(m(0,"section",11)(1,"h3",32),h(2),y(3,"translate"),g(),O(4,sD,3,0,"div",78)(5,aD,4,3,"div",79),g()),t&2){let n=E();p(2),b(C(3,2,"busTracking.title")),p(2),F(n.studentsOnBus().length>0?4:5)}}function cD(t,e){if(t&1&&(m(0,"div",98)(1,"h5",99),h(2),g(),m(3,"p",100)(4,"span",101),h(5),y(6,"translate"),g(),h(7),g(),m(8,"p",100)(9,"span",101),h(10),y(11,"translate"),g(),h(12),g(),m(13,"p",100)(14,"span",101),h(15),y(16,"translate"),g(),h(17),g()()),t&2){let n=e.$implicit;p(2),b(n.name),p(3),N("",C(6,8,"parent.activities.supervisor"),":"),p(2),N(" ",n.supervisorName," "),p(3),N("",C(11,10,"parent.activities.time"),":"),p(2),Ce(" ",n.startTime," - ",n.endTime," "),p(3),N("",C(16,12,"parent.activities.location"),":"),p(2),N(" ",n.location," ")}}function dD(t,e){if(t&1&&(m(0,"div",93)(1,"div",94),k(2,"img",95),m(3,"h4",96),h(4),g()(),m(5,"div",97),Z(6,cD,18,14,"div",98,lr),g()()),t&2){let n=e.$implicit;p(2),A("src",n.student.photoUrl,qe)("alt",n.student.name),p(2),b(n.student.name),p(2),K(n.activities)}}function uD(t,e){if(t&1&&(m(0,"div",92),Z(1,dD,8,3,"div",93,Mv),g()),t&2){let n=E(2);p(),K(n.studentActivities())}}function pD(t,e){t&1&&(m(0,"div",79)(1,"p",91),h(2),y(3,"translate"),g()()),t&2&&(p(2),b(C(3,1,"parent.activities.noActivities")))}function fD(t,e){if(t&1&&(m(0,"section",12)(1,"h3",32),h(2),y(3,"translate"),g(),O(4,uD,3,0,"div",92)(5,pD,4,3,"div",79),g()),t&2){let n=E();p(2),b(C(3,2,"parent.activities.title")),p(2),F(n.studentActivities().length>0?4:5)}}function mD(t,e){t&1&&(m(0,"div",10),k(1,"app-carpooling"),g())}function gD(t,e){if(t&1){let n=G();m(0,"div",102),M("click",function(){I(n);let i=E();return T(i.closeDetailsModal())}),m(1,"div",103),M("click",function(i){return I(n),T(i.stopPropagation())}),m(2,"button",104),M("click",function(){I(n);let i=E();return T(i.closeDetailsModal())}),U(),m(3,"svg",105),k(4,"path",106),g()(),J(),m(5,"div",107),k(6,"img",108),m(7,"div",109)(8,"h3",110),h(9),g(),m(10,"p",111),h(11),g()(),m(12,"div",112)(13,"div",113)(14,"span",114),h(15),y(16,"translate"),g(),m(17,"span",115),h(18),g()(),m(19,"div",113)(20,"span",114),h(21),y(22,"translate"),g(),m(23,"span",116),h(24),g()()()()()()}if(t&2){let n=e;p(6),A("src",n.photoUrl,qe)("alt",n.name),p(3),b(n.name),p(2),b(n.relation),p(4),b(C(16,8,"common.phone")),p(3),b(n.phone||"N/A"),p(3),b(C(22,10,"common.idNumber")),p(3),b(n.idNumber)}}function hD(t,e){t&1&&(m(0,"div",119),k(1,"div",121),m(2,"p"),h(3),y(4,"translate"),g()()),t&2&&(p(3),b(C(4,1,"common.processing")))}function vD(t,e){if(t&1&&(h(0),y(1,"translate")),t&2){let n=E(3);Ce(" ",n.locationError()," ",C(1,2,"parent.preflight.locationError")," ")}}function _D(t,e){if(t&1&&(h(0),y(1,"translate")),t&2){let n,o=E(3);N(" ",$i(1,1,"parent.preflight.confirmMessage",ou(4,VP,((n=o.distance())==null?null:n.toFixed(1))||"?",((n=o.eta())==null?null:n.toString())||"?"))," ")}}function yD(t,e){if(t&1){let n=G();m(0,"div",120)(1,"p",122),O(2,vD,2,4)(3,_D,2,7),g(),m(4,"div",123)(5,"button",124),M("click",function(){I(n);let i=E(2);return T(i.cancelPickupSequence())}),h(6),y(7,"translate"),g(),m(8,"button",125),M("click",function(){I(n);let i=E(2);return T(i.confirmAndSendRequest())}),h(9),y(10,"translate"),g()()()}if(t&2){let n=E(2);p(2),F(n.locationError()?2:3),p(4),b(C(7,3,"common.cancel")),p(3),b(C(10,5,"parent.preflight.confirmButton"))}}function CD(t,e){if(t&1&&(m(0,"div",14)(1,"div",117)(2,"h3",118),h(3),y(4,"translate"),g(),O(5,hD,5,3,"div",119)(6,yD,11,7,"div",120),g()()),t&2){let n=E();p(3),b(C(4,2,"parent.preflight.title")),p(2),F(n.preflightCheckStatus()==="calculating"?5:n.preflightCheckStatus()==="confirming"?6:-1)}}var ka=class t{constructor(){this.pickupStateService=w(Ke);this.toastService=w(ue);this.schoolDataService=w(Ee);this.authService=w(de);this.translationService=w(X);this.sanitizer=w(Cu);this.notificationService=w(Xo);this.students=H(()=>{let e=this.authService.currentUser();return e?this.schoolDataService.getStudentsByParentId(e.id):[]});this.authorizedPersons=H(()=>{let e=this.authService.currentUser();return e?this.schoolDataService.getAuthorizedPersonsByParentId(e.id):[]});this.carInfo=R({color:"\u062A\u0648\u064A\u0648\u062A\u0627 \u0644\u0627\u0646\u062F \u0643\u0631\u0648\u0632\u0631 \u0628\u064A\u0636\u0627\u0621",plateNumber:"\u062F \u0628 \u0661\u0662\u0663\u0664\u0665"});this.pickupNotes=R("");this.activeView=R("pickup");this.isMobileMenuOpen=R(!1);this.selectedStudents=R(new Set);this.selectedAuthorizedPerson=R(null);this.pickupStatus=R("idle");this.pickupMessage=R("");this.pickupCode=R("");this.error=R("");this.eta=R(null);this.distance=R(null);this.locationError=R("");this.personForDetails=R(null);this.preflightCheckStatus=R("idle");this.absence={student:R(null),date:R(""),reason:R("")};this.etaUpdateInterval=null;this.GEOFENCE_RADIUS_METERS=500;this.isCheckingArrival=R(!1);this.features=[{id:"pickup",titleKey:"parent.tabs.pickup",descriptionKey:"parent.tabs.pickup.description",iconPath:"M3 4a1 1 0 00-1 1v10a1 1 0 001 1h1.05a2.5 2.5 0 014.9 0H10a1 1 0 001-1V5a1 1 0 00-1-1H3zM6 7h4v2H6V7z"},{id:"absence",titleKey:"parent.tabs.absence",descriptionKey:"parent.tabs.absence.description",iconPath:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0h18"},{id:"management",titleKey:"parent.tabs.management",descriptionKey:"parent.tabs.management.description",iconPath:"M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-4.663v.003zM12 5.25a3 3 0 11-6 0 3 3 0 016 0z"},{id:"bus",titleKey:"parent.tabs.bus",descriptionKey:"parent.tabs.bus.description",iconPath:"M8.25 18.75a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 01-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h1.125c.621 0 1.125-.504 1.125-1.125V14.25m-17.25 4.5v-1.875a.375.375 0 00-.375-.375h-1.5a.375.375 0 00-.375.375v1.875m17.25 0v-1.875a.375.375 0 00-.375-.375h-1.5a.375.375 0 00-.375.375v1.875m-1.5-4.5H5.625c-.621 0-1.125.504-1.125 1.125v3.375c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125v-3.375c0-.621-.504-1.125-1.125-1.125H18.375m-1.5-4.5H5.625m11.25 0v-1.5c0-.621-.504-1.125-1.125-1.125H6.75c-.621 0-1.125.504-1.125 1.125v1.5m11.25 0h-1.5m-9.75 0h9.75"},{id:"activities",titleKey:"parent.tabs.activities",descriptionKey:"parent.tabs.activities.description",iconPath:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"},{id:"carpooling",titleKey:"parent.tabs.carpooling",descriptionKey:"parent.tabs.carpooling.description",iconPath:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm-9 3a2 2 0 11-4 0 2 2 0 014 0zM19 10a2 2 0 11-4 0 2 2 0 014 0z"}];this.submittedRequest=H(()=>{let e=this.pickupCode();return e?this.pickupStateService.getRequestByCode(e):null});this.studentsOnBus=H(()=>{let e=this.authService.currentUser()?.id;return e?this.schoolDataService.getStudentsByParentId(e).filter(n=>n.busId).map(n=>{let o=this.schoolDataService.getBusById(n.busId);return{student:n,bus:o}}).filter(n=>!!n.bus):[]});this.studentActivities=H(()=>{let e=this.students(),n=this.authService.currentUserSchool()?.id;if(!n)return[];let o=this.schoolDataService.getActivitiesBySchool(n),i=this.schoolDataService.getStaffForSchool(n);return e.map(r=>{let s=o.filter(l=>l.studentIds.includes(r.id)).map(l=>{let d=i.find(u=>u.id===l.supervisorId);return z(B({},l),{supervisorName:d?.name??"N/A"})});return{student:r,activities:s}}).filter(r=>r.activities.length>0)});this.isRequestValid=H(()=>this.selectedStudents().size>0&&this.selectedAuthorizedPerson()!==null);this.isAbsenceReportValid=H(()=>this.absence.student()&&this.absence.date());this.selectedStudentNames=H(()=>Array.from(this.selectedStudents()).map(e=>e.name).join(", "));this.ai=Np.googleMapsApiKey?new Jo({apiKey:Np.googleMapsApiKey}):null;We(()=>{let e=this.authService.currentUser(),n=this.authorizedPersons();if(e&&n.length>0){let o=n.find(i=>i.name===e.name);this.selectedAuthorizedPerson.set(o??n[0])}},{allowSignalWrites:!0}),We(()=>{this.submittedRequest()?.status==="completed"&&(this.stopEtaUpdates(),this.setView("pickup"),this.pickupStatus.set("idle"),this.selectedStudents.set(new Set))}),We(()=>{let e=this.notificationService.latestBroadcast();e&&this.toastService.show(`\u{1F4E2} ${e.message}`,"info",1e4)})}ngOnDestroy(){this.stopEtaUpdates()}setView(e){this.activeView.set(e),this.isMobileMenuOpen.set(!1)}toggleStudentSelection(e){this.selectedStudents.update(n=>{let o=new Set(n);return o.has(e)?o.delete(e):o.add(e),o})}selectAuthorizedPerson(e){this.selectedAuthorizedPerson.set(e)}updateCarInfo(e,n){this.carInfo.update(o=>z(B({},o),{[e]:n}))}async initiatePickupSequence(){debugger;this.preflightCheckStatus.set("calculating"),this.resetState(),await this.updateEtaAndDistance(),this.preflightCheckStatus.set("confirming")}cancelPickupSequence(){this.preflightCheckStatus.set("idle")}async confirmAndSendRequest(){this.preflightCheckStatus.set("idle"),this.pickupStatus.set("loading");let e=Array.from(this.selectedStudents()),n=this.selectedAuthorizedPerson();if(!this.ai){this.pickupStatus.set("error"),this.error.set(this.translationService.translate("parent.errors.apiKeyMissing"));return}if(e.length===0||!n){this.pickupStatus.set("idle");return}try{let o=Math.floor(1e3+Math.random()*9e3).toString();this.pickupCode.set(o);let i=e.map(f=>`${f.name} (${f.grade})`).join(", "),r=this.eta(),s=r!==null?`The estimated time of arrival is ${r} minutes.`:"The parent is on their way, with an estimated arrival of 15-20 minutes.",l=this.translationService.language()==="ar"?"Please respond in Arabic.":"Please respond in English.",d=`Generate a brief, reassuring message for school staff about a student pickup.
        The student(s) to be picked up are: ${i}.
        The authorized person is: ${n.name}, who is the ${n.relation}.
        The vehicle is a ${this.carInfo().color} with plate number ${this.carInfo().plateNumber}.
        ${s}
        Any additional notes: ${this.pickupNotes()||"None"}.
        ${l} The message should be polite and clear, around 2-3 sentences.`,u=await this.ai.models.generateContent({model:"gemini-2.5-flash",contents:d});this.pickupMessage.set(u.text.trim()),this.pickupStatus.set("success");for(let f of e)await this.pickupStateService.addRequest({code:o,student:B({},f),authorizedPerson:B({},n),carInfo:B({},this.carInfo()),status:"pending",eta:this.eta(),distance:this.distance(),notes:this.pickupNotes(),schoolId:f.schoolId});this.startEtaUpdates()}catch(o){console.error(o),this.error.set(this.translationService.translate("parent.errors.notificationFailed")),this.pickupStatus.set("error")}}async signalArrival(){if(!this.isCheckingArrival()){this.isCheckingArrival.set(!0),this.locationError.set("");try{let e=this.pickupCode();e&&(await this.pickupStateService.assignPickupSpot(e),await this.pickupStateService.updateRequestEtaAndDistance(e,0,0))}catch(e){this.toastService.show(e.message,"error")}finally{this.isCheckingArrival.set(!1)}}}getGeolocation(){return new Promise((e,n)=>{if(!navigator.geolocation){n(new Error(this.translationService.translate("parent.errors.geoNotSupported")));return}navigator.geolocation.getCurrentPosition(o=>e(o.coords),o=>{let i="";switch(o.code){case o.PERMISSION_DENIED:i=this.translationService.translate("parent.errors.geoPermissionDenied");break;case o.POSITION_UNAVAILABLE:i=this.translationService.translate("parent.errors.geoUnavailable");break;case o.TIMEOUT:i=this.translationService.translate("parent.errors.geoTimeout");break;default:i=this.translationService.translate("parent.errors.geoUnknown");break}n(new Error(i))},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})})}calculateDistance(e,n){let i=(n.lat-e.lat)*(Math.PI/180),r=(n.lon-e.lon)*(Math.PI/180),s=Math.sin(i/2)*Math.sin(i/2)+Math.cos(e.lat*(Math.PI/180))*Math.cos(n.lat*(Math.PI/180))*Math.sin(r/2)*Math.sin(r/2);return 6371*(2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)))}async updateEtaAndDistance(){this.locationError.set("");try{let e=this.authService.currentUserSchool()?.location;if(!e){this.locationError.set(this.translationService.translate("parent.errors.noSchoolLocation")),this.eta.set(15),this.distance.set(10);return}let n=await this.getGeolocation(),o={lat:n.latitude,lon:n.longitude},i=this.calculateDistance(e,o),s=Math.round(i/40*60);this.distance.set(i),this.eta.set(s)}catch(e){this.locationError.set(e.message),this.eta.set(15),this.distance.set(10),console.error("Geolocation error:",e)}}startEtaUpdates(){this.stopEtaUpdates(),this.etaUpdateInterval=setInterval(async()=>{await this.updateEtaAndDistance();let e=this.pickupCode(),n=this.eta(),o=this.distance();e&&n!==null&&o!==null&&this.pickupStateService.updateRequestEtaAndDistance(e,n,o)},3e4)}stopEtaUpdates(){this.etaUpdateInterval&&(clearInterval(this.etaUpdateInterval),this.etaUpdateInterval=null)}resetState(){this.pickupMessage.set(""),this.pickupCode.set(""),this.error.set(""),this.eta.set(null),this.distance.set(null),this.locationError.set("")}selectAbsenceStudent(e){this.absence.student.set(e);let n=new Date().toISOString().split("T")[0];this.absence.date.set(n)}async reportAbsence(){let e={student:this.absence.student(),date:this.absence.date(),reason:this.absence.reason()};!e.student||!e.date||(await this.pickupStateService.reportAbsence({student:e.student,date:e.date,reason:e.reason,reportedByParentId:this.authService.currentUser()?.id,schoolId:this.authService.currentUserSchool()?.id}),this.toastService.show(this.translationService.translate("parent.toast.absenceReported"),"success"),this.absence.student.set(null),this.absence.date.set(""),this.absence.reason.set(""))}showPersonDetails(e){this.personForDetails.set(e)}closeDetailsModal(){this.personForDetails.set(null)}getBusMapUrl(e){let n=window.GOOGLE_MAPS_API_KEY??null;if(!n){let i=`https://www.openstreetmap.org/export/embed.html?bbox=${e.lon-.01}%2C${e.lat-.01}%2C${e.lon+.01}%2C${e.lat+.01}&layer=mapnik&marker=${e.lat}%2C${e.lon}`;return this.sanitizer.bypassSecurityTrustResourceUrl(i)}let o=`https://www.google.com/maps/embed/v1/view?key=${n}&center=${e.lat},${e.lon}&zoom=15`;return this.sanitizer.bypassSecurityTrustResourceUrl(o)}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=ee({type:t,selectors:[["app-parent-portal"]],decls:19,vars:8,consts:[[1,"parent-portal-container"],[1,"mobile-header"],[1,"mobile-menu-toggle",3,"click","title"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"icon-menu"],["stroke-linecap","round","stroke-linejoin","round","d","M4 6h16M4 12h16M4 18h16"],[1,"mobile-header-text"],[1,"mobile-header-title"],[1,"mobile-menu-overlay"],[1,"main-content"],[1,"absence-reporting-section"],[1,"management-component-wrapper"],[1,"bus-tracking-section"],[1,"activity-tracking-section"],[1,"person-details-modal-overlay"],[1,"preflight-overlay"],[1,"mobile-menu-overlay",3,"click"],[1,"mobile-menu-panel",3,"click"],[1,"mobile-menu-header"],[1,"sidebar-title"],[1,"mobile-menu-close",3,"click","title"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"icon-close"],["stroke-linecap","round","stroke-linejoin","round","d","M6 18L18 6M6 6l12 12"],[1,"sidebar-nav"],[1,"menu-item",3,"menu-item-active"],[1,"menu-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"menu-item-icon"],["stroke-linecap","round","stroke-linejoin","round"],[1,"menu-item-label"],[1,"pickup-form-sections"],[1,"loading-state-message"],[1,"pickup-success-content"],[1,"error-display-message"],[1,"form-section-title"],[1,"student-selection-grid"],[1,"student-card",3,"student-card-selected"],[1,"animated-section"],[1,"animated-section","vehicle-info-section"],[1,"btn-primary-full"],[1,"student-card",3,"click"],[1,"selection-badge"],[1,"student-avatar",3,"src","alt"],[1,"student-name"],[1,"student-class-info"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"selection-badge-icon"],["fill-rule","evenodd","d","M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule","evenodd"],[1,"person-selection-grid"],[1,"person-card",3,"person-card-selected"],[1,"person-card",3,"click"],[1,"person-details-button",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"person-details-icon"],["fill-rule","evenodd","d","M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule","evenodd"],[1,"person-avatar",3,"src","alt"],[1,"person-name"],[1,"person-relation"],["type","text","dir","auto",1,"form-input",3,"ngModelChange","ngModel","placeholder"],["type","text","dir","auto",1,"form-input","plate-number-input",3,"ngModelChange","ngModel","placeholder"],["rows","3","dir","auto",1,"form-input","form-textarea",3,"ngModelChange","ngModel","placeholder"],[1,"btn-primary-full",3,"click"],[1,"spinner"],[1,"loading-text"],[3,"arrivalSignaled","pickupCode"],[1,"gemini-message-card"],[1,"location-error-note"],[1,"gemini-quote"],[1,"gemini-quote-text"],[1,"gemini-quote-author"],[1,"location-error-note-label"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"error-icon"],["fill-rule","evenodd","d","M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z","clip-rule","evenodd"],[1,"error-text"],[1,"student-absence-selection-grid"],[1,"student-absence-card",3,"student-absence-card-selected"],[1,"absence-form-details"],[1,"student-absence-card",3,"click"],[1,"student-absence-name"],[1,"student-absence-class-info"],["type","date",1,"form-input",3,"ngModelChange","ngModel"],[1,"btn-primary",3,"click","disabled"],[1,"bus-cards-container"],[1,"placeholder-section"],[1,"bus-card"],[1,"bus-card-header"],[1,"bus-student-info"],[1,"bus-student-avatar",3,"src","alt"],[1,"bus-student-name"],[1,"bus-number"],[1,"bus-status"],[1,"bus-card-body"],[1,"bus-driver-info"],[1,"map-container"],["loading","lazy","referrerpolicy","no-referrer-when-downgrade",1,"map-image",2,"border","0",3,"src"],[1,"placeholder-description"],[1,"activities-container"],[1,"student-activity-group"],[1,"student-header"],[1,"student-avatar-small",3,"src","alt"],[1,"student-activity-name"],[1,"activity-cards-grid"],[1,"activity-card"],[1,"activity-name"],[1,"activity-detail"],[1,"detail-label"],[1,"person-details-modal-overlay",3,"click"],[1,"person-details-modal",3,"click"],[1,"modal-close-button",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"modal-close-icon"],["fill-rule","evenodd","d","M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule","evenodd"],[1,"modal-content"],[1,"modal-person-avatar",3,"src","alt"],[1,"modal-person-info"],[1,"modal-person-name"],[1,"modal-person-relation"],[1,"modal-details-card"],[1,"modal-detail-item"],[1,"modal-detail-label"],[1,"modal-detail-value"],[1,"modal-detail-value","modal-detail-value-mono"],[1,"preflight-modal"],[1,"preflight-title"],[1,"preflight-calculating"],[1,"preflight-confirm"],[1,"preflight-spinner"],[1,"preflight-info"],[1,"preflight-actions"],[1,"btn-preflight-cancel",3,"click"],[1,"btn-preflight-confirm",3,"click"]],template:function(n,o){if(n&1&&(m(0,"main",0)(1,"header",1)(2,"button",2),M("click",function(){return o.isMobileMenuOpen.set(!0)}),U(),m(3,"svg",3),k(4,"path",4),g()(),J(),m(5,"div",5)(6,"h2",6),h(7),y(8,"translate"),g()()(),O(9,BP,12,4,"div",7),m(10,"main",8),O(11,XP,4,1)(12,nD,8,4,"section",9)(13,oD,2,0,"div",10)(14,lD,6,4,"section",11)(15,fD,6,4,"section",12)(16,mD,2,0,"div",10),g(),O(17,gD,25,12,"div",13),O(18,CD,7,4,"div",14),g()),n&2){let i,r;p(2),A("title","Open menu"),p(5),b(C(8,6,"parent.tabs."+o.activeView())),p(2),F(o.isMobileMenuOpen()?9:-1),p(2),F((i=o.activeView())==="pickup"?11:i==="absence"?12:i==="management"?13:i==="bus"?14:i==="activities"?15:i==="carpooling"?16:-1),p(6),F((r=o.personForDetails())?17:-1,r),p(),F(o.preflightCheckStatus()!=="idle"?18:-1)}},dependencies:[Ae,Me,De,Ie,Da,Qo,Na,oe],styles:["@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fade-in-slow{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slide-in-left{0%{transform:translate(-100%)}to{transform:translate(0)}}@keyframes _ngcontent-%COMP%_slide-in-right{0%{transform:translate(100%)}to{transform:translate(0)}}[_nghost-%COMP%]{width:100%;height:100%;display:block}.parent-portal-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%;position:relative}.mobile-header[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.75rem 1rem;background-color:var(--color-slate-900);border-bottom:1px solid var(--color-slate-800)}[dir=ltr][_ngcontent-%COMP%]   .mobile-header[_ngcontent-%COMP%]{justify-content:flex-start;gap:1rem}[dir=rtl][_ngcontent-%COMP%]   .mobile-header[_ngcontent-%COMP%]{justify-content:flex-end;flex-direction:row-reverse;gap:1rem}.mobile-header-text[_ngcontent-%COMP%]{overflow:hidden;flex-grow:1}.mobile-header-title[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:var(--color-white);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mobile-menu-toggle[_ngcontent-%COMP%]{padding:.5rem;background-color:transparent;color:var(--color-slate-300);border:none;border-radius:.5rem;cursor:pointer;transition:background-color .2s}.mobile-menu-toggle[_ngcontent-%COMP%]:hover{background-color:var(--color-slate-800)}.icon-menu[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem}.main-content[_ngcontent-%COMP%]{flex-grow:1;overflow-y:auto;padding:.75rem}@media(min-width:640px){.main-content[_ngcontent-%COMP%]{padding:1rem}}@media(min-width:768px){.main-content[_ngcontent-%COMP%]{padding:1.5rem}}.pickup-success-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem;width:100%;max-width:28rem;margin:0 auto}.gemini-message-card[_ngcontent-%COMP%]{background:linear-gradient(to bottom right,var(--color-cyan-900-50),rgba(15,23,42,.5));padding:1rem;border-radius:1rem;border:1px solid rgba(6,182,212,.3)}.gemini-quote[_ngcontent-%COMP%]{position:relative}.gemini-quote-text[_ngcontent-%COMP%]{font-size:1rem;font-weight:500;color:var(--color-slate-200);line-height:1.625;font-style:italic}.gemini-quote-author[_ngcontent-%COMP%]{text-align:right;font-size:.75rem;color:#06b6d4cc;margin-top:.5rem}.location-error-note[_ngcontent-%COMP%]{font-size:.875rem;color:#fcd34dcc;padding:.5rem 1rem 0}.location-error-note-label[_ngcontent-%COMP%]{font-weight:600}.loading-state-message[_ngcontent-%COMP%]{min-height:400px;display:flex;flex-direction:column;align-items:center;justify-content:center;color:var(--color-slate-400);gap:.75rem}.spinner[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;border:4px solid var(--color-slate-700);border-top-color:var(--color-cyan-400);border-radius:9999px;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.loading-text[_ngcontent-%COMP%]{font-size:1.125rem}.pickup-form-sections[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;max-width:48rem;margin:0 auto}.form-section-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;margin-bottom:.25rem;color:var(--color-slate-200);text-align:start}.student-selection-grid[_ngcontent-%COMP%], .person-selection-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:.5rem}@media(min-width:480px){.student-selection-grid[_ngcontent-%COMP%], .person-selection-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media(min-width:640px){.student-selection-grid[_ngcontent-%COMP%], .person-selection-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}}@media(min-width:1024px){.student-selection-grid[_ngcontent-%COMP%], .person-selection-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(5,1fr)}}.student-card[_ngcontent-%COMP%]{position:relative;text-align:center;word-wrap:break-word;border-radius:.75rem;transition:all .2s ease-in-out;cursor:pointer;border:1px solid;background-color:#1e293b66;border-color:var(--color-slate-700)}.student-card[_ngcontent-%COMP%]:hover{border-color:var(--color-slate-600)}.student-card-selected[_ngcontent-%COMP%]{background-color:#1e293bcc;border-color:var(--color-cyan-500)}.selection-badge[_ngcontent-%COMP%]{position:absolute;top:-.375rem;right:-.375rem;width:1rem;height:1rem;background-color:var(--color-cyan-500);border-radius:9999px;display:flex;align-items:center;justify-content:center;border:2px solid var(--color-slate-950);z-index:10}.selection-badge-icon[_ngcontent-%COMP%]{width:.625rem;height:.625rem;color:var(--color-white)}.student-avatar[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;margin-left:auto;margin-right:auto;border-radius:9999px;object-fit:cover;border:2px solid var(--color-slate-600);margin-bottom:.125rem}.student-name[_ngcontent-%COMP%]{font-weight:600;font-size:.75rem;color:var(--color-white);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.student-class-info[_ngcontent-%COMP%]{color:var(--color-slate-400);font-size:.625rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.animated-section[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in .3s ease-out forwards}.person-card[_ngcontent-%COMP%]{position:relative;padding:.25rem;text-align:center;border-radius:.75rem;transition:all .2s ease-in-out;cursor:pointer;border:2px solid;background-color:#1e293b66;border-color:var(--color-slate-700)}.person-card[_ngcontent-%COMP%]:hover{border-color:var(--color-slate-600)}.person-card-selected[_ngcontent-%COMP%]{background-color:#1e293bcc;border-color:var(--color-cyan-500)}.person-details-button[_ngcontent-%COMP%]{position:absolute;top:.375rem;left:.375rem;padding:.25rem;background-color:#02061780;border-radius:9999px;color:var(--color-slate-400);transition-property:background-color,color;transition-duration:.3s;z-index:10;border:none;cursor:pointer}.person-details-button[_ngcontent-%COMP%]:hover{background-color:var(--color-slate-900);color:var(--color-cyan-300)}.person-details-icon[_ngcontent-%COMP%]{height:1rem;width:1rem}.person-avatar[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;margin-left:auto;margin-right:auto;border-radius:9999px;object-fit:cover;border:2px solid var(--color-slate-600);margin-bottom:.125rem}.person-name[_ngcontent-%COMP%]{font-weight:600;font-size:.75rem;color:var(--color-white);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.person-relation[_ngcontent-%COMP%]{color:var(--color-slate-400);font-size:.625rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.vehicle-info-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.form-input[_ngcontent-%COMP%]{width:90%;background-color:var(--color-slate-800);border:1px solid var(--color-slate-700);border-radius:.75rem;padding:.75rem;outline:none;transition:all .2s ease-in-out}.form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-cyan-500);box-shadow:0 0 0 2px var(--color-cyan-500)}.plate-number-input[_ngcontent-%COMP%]{text-align:right}.form-textarea[_ngcontent-%COMP%]{resize:vertical}.btn-primary-full[_ngcontent-%COMP%]{width:100%;background-color:var(--color-cyan-500);color:var(--color-white);font-weight:700;padding:1rem;border-radius:.75rem;border:none;cursor:pointer;transition:background-color .2s;margin-top:.75rem}.btn-primary-full[_ngcontent-%COMP%]:hover{background-color:var(--color-cyan-600)}.error-display-message[_ngcontent-%COMP%]{margin-top:1.5rem;display:flex;align-items:center;justify-content:center;gap:.75rem;color:var(--color-red-400)}.error-icon[_ngcontent-%COMP%]{width:1.25rem;height:1.25rem}.error-text[_ngcontent-%COMP%]{font-weight:700}.absence-reporting-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem;padding:1rem}.student-absence-selection-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:1rem}@media(min-width:640px){.student-absence-selection-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}.student-absence-card[_ngcontent-%COMP%]{padding:1rem;background-color:#1e293b99;border:2px solid;border-radius:.75rem;text-align:left;transition:all .3s ease-in-out;outline:none;cursor:pointer;border-color:var(--color-slate-700)}.student-absence-card-selected[_ngcontent-%COMP%]{border-color:var(--color-cyan-500)}.student-absence-name[_ngcontent-%COMP%]{font-weight:700;font-size:1.125rem;color:var(--color-white)}.student-absence-class-info[_ngcontent-%COMP%]{color:var(--color-slate-400)}.absence-form-details[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in .3s ease-out forwards;display:flex;flex-direction:column;gap:1rem}.management-component-wrapper[_ngcontent-%COMP%]{padding:.5rem}@media(min-width:640px){.management-component-wrapper[_ngcontent-%COMP%]{padding:1rem}}.person-details-modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#000c;display:flex;align-items:center;justify-content:center;z-index:50;animation:_ngcontent-%COMP%_fade-in .3s ease-out forwards;padding:1rem}.person-details-modal[_ngcontent-%COMP%]{background-color:var(--color-slate-900);border-radius:1rem;box-shadow:0 25px 50px -12px #00000040;padding:1.5rem;color:var(--color-white);width:100%;max-width:28rem;border:1px solid var(--color-slate-700);position:relative}.modal-close-button[_ngcontent-%COMP%]{position:absolute;top:.75rem;right:.75rem;padding:.375rem;background-color:var(--color-slate-700);border-radius:9999px;transition-property:background-color;transition-duration:.3s;z-index:10;border:none;cursor:pointer}.modal-close-button[_ngcontent-%COMP%]:hover{background-color:var(--color-slate-600)}.modal-close-icon[_ngcontent-%COMP%]{height:1.125rem;width:1.125rem;color:var(--color-white)}.modal-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1rem;padding-top:1rem}.modal-person-avatar[_ngcontent-%COMP%]{width:8rem;height:8rem;border-radius:9999px;object-fit:cover;border:4px solid var(--color-slate-700)}.modal-person-info[_ngcontent-%COMP%]{text-align:center}.modal-person-name[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:var(--color-white)}.modal-person-relation[_ngcontent-%COMP%]{font-size:1.125rem;color:var(--color-cyan-400)}.modal-details-card[_ngcontent-%COMP%]{width:100%;background-color:var(--color-slate-800);border-radius:.5rem;padding:1rem;display:flex;flex-direction:column;gap:.75rem;border:1px solid var(--color-slate-700)}.modal-detail-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:.875rem}.modal-detail-label[_ngcontent-%COMP%]{color:var(--color-slate-400)}.modal-detail-value[_ngcontent-%COMP%]{font-weight:600}.modal-detail-value-mono[_ngcontent-%COMP%]{font-family:monospace}.preflight-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#000c;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);display:flex;align-items:center;justify-content:center;z-index:50;animation:_ngcontent-%COMP%_fade-in .3s ease-out;padding:1rem}.preflight-modal[_ngcontent-%COMP%]{background:linear-gradient(145deg,var(--color-slate-800),#151f32);border-radius:1rem;border:1px solid var(--color-slate-700);padding:1.5rem;box-shadow:0 10px 25px #0000004d;width:100%;max-width:24rem;text-align:center}.preflight-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:var(--color-cyan-400);margin-bottom:1rem}.preflight-calculating[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1rem;padding:1rem 0;color:var(--color-slate-300)}.preflight-spinner[_ngcontent-%COMP%]{width:2rem;height:2rem;border:3px solid var(--color-slate-600);border-top-color:var(--color-cyan-400);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.preflight-confirm[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in .3s ease-out}.preflight-info[_ngcontent-%COMP%]{color:var(--color-slate-300);margin:1.5rem 0;font-size:1rem;line-height:1.5}.preflight-actions[_ngcontent-%COMP%]{display:flex;gap:1rem}.btn-preflight-cancel[_ngcontent-%COMP%], .btn-preflight-confirm[_ngcontent-%COMP%]{flex:1;padding:.75rem 1rem;border-radius:.5rem;font-weight:600;border:none;cursor:pointer;transition:all .2s}.btn-preflight-cancel[_ngcontent-%COMP%]{background-color:var(--color-slate-600);color:var(--color-slate-300)}.btn-preflight-cancel[_ngcontent-%COMP%]:hover{background-color:var(--color-slate-500)}.btn-preflight-confirm[_ngcontent-%COMP%]{background-color:var(--color-cyan-500);color:var(--color-white)}.btn-preflight-confirm[_ngcontent-%COMP%]:hover{background-color:var(--color-cyan-600)}.bus-cards-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:1.5rem}@media(min-width:768px){.bus-cards-container[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}.bus-card[_ngcontent-%COMP%]{background-color:var(--color-slate-800);border-radius:.75rem;border:1px solid var(--color-slate-700);overflow:hidden}.bus-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem;background-color:#1e293b80}.bus-student-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.bus-student-avatar[_ngcontent-%COMP%]{width:3rem;height:3rem;border-radius:9999px;object-fit:cover;border:2px solid var(--color-slate-600)}.bus-student-name[_ngcontent-%COMP%]{font-weight:600;color:var(--color-white)}.bus-number[_ngcontent-%COMP%]{color:var(--color-slate-400);font-size:.875rem}.bus-status[_ngcontent-%COMP%]{padding:.25rem .75rem;font-weight:600;font-size:.75rem;border-radius:9999px;background-color:var(--color-slate-700);color:var(--color-slate-300)}.status-en-route[_ngcontent-%COMP%]{background-color:var(--color-green-500-20);color:var(--color-green-400)}.bus-card-body[_ngcontent-%COMP%]{padding:1rem;display:flex;flex-direction:column;gap:1rem}.bus-driver-info[_ngcontent-%COMP%]{color:var(--color-slate-400)}.bus-driver-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600;color:var(--color-slate-200)}.map-container[_ngcontent-%COMP%]{border-radius:.5rem;overflow:hidden;border:1px solid var(--color-slate-700)}.map-image[_ngcontent-%COMP%]{width:100%;height:auto;display:block}.activities-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}.student-activity-group[_ngcontent-%COMP%]{background-color:#1e293b4d;border:1px solid var(--color-slate-800);border-radius:1rem;padding:1rem}.student-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;margin-bottom:1rem}.student-avatar-small[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;border-radius:9999px;object-fit:cover}.student-activity-name[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:var(--color-white)}.activity-cards-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(16rem,1fr));gap:1rem}.activity-card[_ngcontent-%COMP%]{background-color:var(--color-slate-800);border:1px solid var(--color-slate-700);border-radius:.5rem;padding:1rem}.activity-name[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:var(--color-cyan-400);margin-bottom:.75rem}.activity-detail[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-slate-300);margin-bottom:.25rem}.activity-detail[_ngcontent-%COMP%]   .detail-label[_ngcontent-%COMP%]{color:var(--color-slate-500)}.placeholder-section[_ngcontent-%COMP%]{text-align:center;padding:2rem}.placeholder-description[_ngcontent-%COMP%]{color:var(--color-slate-400);margin-top:.5rem;margin-bottom:2rem;max-width:25rem;margin-left:auto;margin-right:auto}.bus-icon-placeholder[_ngcontent-%COMP%]{color:var(--color-slate-700);width:4rem;height:4rem;margin:0 auto}"],changeDetection:0})}};var bD=["codeInput"];function SD(t,e){if(t&1){let n=G();x(0,"div",6),ve(1,"div",7),P(),x(2,"button",8),ke("click",function(){I(n);let i=E(2);return T(i.stopScanner())}),U(),x(3,"svg",9),ve(4,"path",10),P(),h(5),y(6,"translate"),P()}t&2&&(p(5),N(" ",C(6,1,"guard.stopScan")," "))}function ED(t,e){if(t&1){let n=G();x(0,"p",11),h(1),y(2,"translate"),P(),x(3,"div",12)(4,"input",13,0),ke("input",function(i){I(n);let r=E(2);return T(r.onCodeInput(i))}),P()(),x(6,"button",14),ke("click",function(){I(n);let i=E(2);return T(i.verifyCode())}),h(7),y(8,"translate"),P(),x(9,"div",15),ve(10,"div",16),x(11,"span",17),h(12),y(13,"translate"),P(),ve(14,"div",16),P(),x(15,"button",18),ke("click",function(){I(n);let i=E(2);return T(i.startScanner())}),U(),x(16,"svg",19),ve(17,"path",20),P(),h(18),y(19,"translate"),P(),J(),x(20,"button",21),ke("click",function(){I(n);let i=E(2);return T(i.simulateScan())}),h(21),y(22,"translate"),P()}if(t&2){let n=E(2);p(),N(" ",C(2,10,"guard.enterCode")," "),p(3),j("animate-shake",n.isInvalid()),p(2),j("btn-disabled",n.code().length<4),ht("disabled",n.code().length<4),p(),N(" ",C(8,12,"guard.verify")," "),p(5),b(C(13,14,"common.or")),p(6),N(" ",C(19,16,"guard.scanQR")," "),p(3),N(" ",C(22,18,"guard.simulateScan")," ")}}function MD(t,e){if(t&1&&(x(0,"p",5),h(1),P()),t&2){let n=E(2);p(),b(n.error())}}function wD(t,e){if(t&1&&(x(0,"div",2)(1,"h2",4),h(2),y(3,"translate"),P(),O(4,SD,7,3)(5,ED,23,20),O(6,MD,2,1,"p",5),P()),t&2){let n=E();p(2),b(C(3,3,"guard.title")),p(2),F(n.scannerActive()?4:5),p(2),F(n.error()?6:-1)}}function xD(t,e){if(t&1&&(x(0,"div")(1,"h4",36),h(2),y(3,"translate"),P(),x(4,"div",43)(5,"div",44)(6,"div",45)(7,"span",46),h(8),y(9,"translate"),P(),x(10,"span",47),h(11),P()(),x(12,"div",48)(13,"span",46),h(14),y(15,"translate"),P(),x(16,"span",49),h(17),P()()()()()),t&2){E();let n=po(0);p(2),N("",C(3,5,"guard.pickupLocation"),":"),p(6),b(C(9,7,"common.zone")),p(3),b(n.assignedZone),p(3),b(C(15,9,"common.spot")),p(3),b(n.assignedSpot)}}function ID(t,e){if(t&1&&(ve(0,"div",34),x(1,"div")(2,"h4",36),h(3),y(4,"translate"),P(),x(5,"div",37)(6,"p",50),h(7),P()()()),t&2){E();let n=po(0);p(3),N("",C(4,2,"common.notes"),":"),p(4),b(n.notes)}}function TD(t,e){if(t&1){let n=G();uo(0),x(1,"div",3)(2,"div",22)(3,"h3",23),h(4),y(5,"translate"),P()(),x(6,"div",24)(7,"div",25),ve(8,"img",26),x(9,"div",27),U(),x(10,"svg",28),ve(11,"path",29),P()()(),J(),x(12,"div",30)(13,"p",31),h(14),y(15,"translate"),P(),x(16,"p",32),h(17),P(),x(18,"p",33),h(19),P()()(),ve(20,"div",34),x(21,"div",35),O(22,xD,18,11,"div"),x(23,"div")(24,"h4",36),h(25),y(26,"translate"),P(),x(27,"div",37)(28,"p",38),h(29),P(),x(30,"p",39),h(31),P()()(),x(32,"div")(33,"h4",36),h(34),y(35,"translate"),P(),x(36,"div",37)(37,"p",38),h(38),P(),x(39,"p",40),h(40),P()()()(),O(41,ID,8,4),x(42,"div",41)(43,"button",42),ke("click",function(){I(n);let i=E();return T(i.confirmPickup())}),h(44),y(45,"translate"),P()()()}if(t&2){let n=Ho(E().verifiedRequest());p(4),b(C(5,17,"guard.success")),p(4),ht("src",n.authorizedPerson.photoUrl,qe)("alt",n.authorizedPerson.name),p(6),N("",C(15,19,"guard.authorizedPerson"),":"),p(3),b(n.authorizedPerson.name),p(2),b(n.authorizedPerson.relation),p(3),F(n.assignedZone?22:-1),p(3),N("",C(26,21,"guard.studentInfo"),":"),p(4),b(n.student.name),p(2),Ce("",n.student.grade," - ",n.student.class),p(3),N("",C(35,23,"guard.vehicleInfo"),":"),p(4),b(n.carInfo.color),p(2),b(n.carInfo.plateNumber),p(),F(n.notes?41:-1),p(3),N(" ",C(45,25,"guard.confirm")," ")}}var Ra=class t{constructor(){this.pickupStateService=w(Ke);this.translationService=w(X);this.code=R("");this.verifiedRequest=R(null);this.error=R("");this.isInvalid=R(!1);this.scannerActive=R(!1);this.scanner=null;this.QR_READER_ELEMENT_ID="qr-reader";We(e=>{this.scannerActive()&&(setTimeout(()=>this.waitForScannerLibraryAndInitialize(),0),e(()=>{this.scanner?.isScanning&&this.scanner.stop().catch(n=>{console.error("Failed to stop html5-qrcode scanner:",n)}),this.scanner=null}))})}onCodeInput(e){let n=e.target,o=n.value.replace(/[^0-9]/g,"");this.code.set(o),n.value=o}verifyCode(){this.error.set(""),this.isInvalid.set(!1);let e=this.pickupStateService.getRequestByCode(this.code());e?(this.verifiedRequest.set(e),this.scannerActive()&&this.stopScanner()):(this.error.set(this.translationService.translate("guard.errors.invalidCode")),this.isInvalid.set(!0),setTimeout(()=>this.isInvalid.set(!1),820))}async confirmPickup(){let e=this.verifiedRequest();e&&(await this.pickupStateService.updateRequestStatus(e.code,"completed"),this.reset())}simulateScan(){let e=this.pickupStateService.activeRequests().find(n=>n.status==="ready");e?(this.code.set(e.code),this.codeInput&&(this.codeInput.nativeElement.value=e.code),this.verifyCode()):this.error.set(this.translationService.translate("guard.errors.noReadyRequests"))}startScanner(){this.error.set(""),this.scannerActive.set(!0)}stopScanner(){this.scannerActive.set(!1)}waitForScannerLibraryAndInitialize(e=50,n=100){typeof Html5Qrcode<"u"?this.initializeScanner():e>0?setTimeout(()=>this.waitForScannerLibraryAndInitialize(e-1,n),n):(this.error.set(this.translationService.translate("guard.errors.scannerFailed")),this.scannerActive.set(!1))}async initializeScanner(){if(this.scanner||!document.getElementById(this.QR_READER_ELEMENT_ID))return;this.scanner=new Html5Qrcode(this.QR_READER_ELEMENT_ID,!1);let e=i=>{i&&(this.code.set(i),this.verifyCode())},n=i=>{},o={fps:10,qrbox:{width:250,height:250}};try{await this.scanner.start({facingMode:{exact:"environment"}},o,e,n)}catch(i){console.warn("Could not get 'environment' camera, trying default.",i);try{await this.scanner.start({},o,e,n)}catch(r){console.error("Error starting any camera:",r),r?.name==="NotAllowedError"?this.error.set(this.translationService.translate("guard.errors.permissionDenied")):r?.name==="NotFoundError"||r.message&&r.message.includes("not found")?this.error.set(this.translationService.translate("guard.errors.noCamera")):this.error.set(this.translationService.translate("guard.errors.scannerFailed")),this.scannerActive.set(!1)}}}ngOnDestroy(){this.scannerActive.set(!1)}reset(){this.code.set(""),this.verifiedRequest.set(null),this.error.set(""),this.isInvalid.set(!1),this.stopScanner()}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=ee({type:t,selectors:[["app-guard-view"]],viewQuery:function(n,o){if(n&1&&Lt(bD,5),n&2){let i;Bt(i=Ut())&&(o.codeInput=i.first)}},decls:3,vars:1,consts:[["codeInput",""],[1,"guard-view-container"],[1,"input-section"],[1,"pickup-details-card"],[1,"section-title"],[1,"error-message"],[1,"qr-scanner-frame"],["id","qr-reader"],[1,"btn-stop-scanner",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"icon-small"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule","evenodd"],[1,"section-description"],[1,"code-input-wrapper"],["type","tel","inputmode","numeric","pattern","[0-9]*","maxlength","4","placeholder","----",1,"code-input",3,"input"],[1,"btn-verify",3,"click","disabled"],[1,"divider-wrapper"],[1,"divider-line"],[1,"divider-text"],[1,"btn-scan-qr",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"icon-large"],["stroke-linecap","round","stroke-linejoin","round","d","M12 4v1m6 11h-1m-1-6v1m-1 6h.01M6 12a2 2 0 11-4 0 2 2 0 014 0zm0 0a2 2 0 104 0 2 2 0 00-4 0zm0 0h6m-6 6a2 2 0 100-4 2 2 0 010 4zm0 0a2 2 0 110 4 2 2 0 010-4zm0 0v-6m6 0a2 2 0 10-4 0 2 2 0 014 0zm0 0a2 2 0 114 0 2 2 0 01-4 0zm0 0h-6m6 0V6a2 2 0 114 0 2 2 0 01-4 0z"],[1,"btn-simulate-scan",3,"click"],[1,"card-header"],[1,"card-title-success"],[1,"person-avatar-section"],[1,"relative"],[1,"person-avatar-large",3,"src","alt"],[1,"status-badge-success"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"icon-medium"],["stroke-linecap","round","stroke-linejoin","round","d","M5 13l4 4L19 7"],[1,"person-details-summary"],[1,"detail-label"],[1,"person-name-large"],[1,"person-relation-large"],[1,"divider-line-large"],[1,"details-group"],[1,"detail-label-uppercase"],[1,"detail-box"],[1,"detail-value-large"],[1,"detail-value-small"],[1,"detail-value-mono"],[1,"confirm-button-wrapper"],[1,"btn-confirm-pickup",3,"click"],[1,"guard-spot-wrapper"],[1,"pickup-spot-display"],[1,"pickup-spot-zone"],[1,"pickup-spot-label"],[1,"pickup-spot-value-zone"],[1,"pickup-spot-number"],[1,"pickup-spot-value-number"],[1,"notes-text"]],template:function(n,o){n&1&&(x(0,"div",1),O(1,wD,7,5,"div",2)(2,TD,46,27,"div",3),P()),n&2&&(p(),F(o.verifiedRequest()?2:1))},dependencies:[oe],styles:["@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_shake{10%,90%{transform:translate3d(-1px,0,0)}20%,80%{transform:translate3d(2px,0,0)}30%,50%,70%{transform:translate3d(-4px,0,0)}40%,60%{transform:translate3d(4px,0,0)}}.guard-view-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:1rem;animation:_ngcontent-%COMP%_fade-in .5s ease-out forwards;width:100%;height:100%}.input-section[_ngcontent-%COMP%]{max-width:18rem;margin-inline:auto;display:flex;flex-direction:column;align-items:center;gap:1rem;width:100%}.section-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;margin-bottom:.5rem;color:var(--color-slate-100)}.qr-scanner-frame[_ngcontent-%COMP%]{width:100%;max-width:18rem;background-color:var(--color-slate-900);padding:.5rem;border-radius:1rem;border:2px dashed var(--color-slate-600);margin-bottom:1rem;aspect-ratio:1 / 1;position:relative;overflow:hidden}#qr-reader[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:.75rem;overflow:hidden;border:none!important}#qr-reader[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%!important;height:100%!important;object-fit:cover!important}.btn-stop-scanner[_ngcontent-%COMP%]{max-width:18rem;display:flex;align-items:center;justify-content:center;gap:.5rem;padding:.75rem 1rem;background-color:#dc2626cc;color:var(--color-white);border-radius:.75rem;transition-property:background-color;transition-duration:.3s;font-weight:600;border:none;cursor:pointer;margin-inline:auto;width:100%}.btn-stop-scanner[_ngcontent-%COMP%]:hover{background-color:var(--color-red-600)}.section-description[_ngcontent-%COMP%]{color:var(--color-slate-400);margin-bottom:1.5rem;text-align:center}.code-input-wrapper[_ngcontent-%COMP%]{max-width:18rem;display:flex;align-items:center;gap:.5rem;margin-bottom:.5rem;margin-inline:auto;width:100%}.code-input[_ngcontent-%COMP%]{width:100%;background-color:var(--color-slate-800);border:2px solid var(--color-slate-700);border-radius:.75rem;text-align:center;font-family:monospace;padding:1rem;outline:none;transition:all .2s ease-in-out;font-size:2.25rem;letter-spacing:.5em;text-indent:.25em}.code-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-cyan-500);box-shadow:0 0 0 2px var(--color-cyan-500)}@media(min-width:640px){.code-input[_ngcontent-%COMP%]{font-size:3rem;letter-spacing:.6em;text-indent:.3em}}.btn-verify[_ngcontent-%COMP%]{max-width:18rem;background-color:var(--color-cyan-500);color:var(--color-white);font-weight:700;padding:1rem 2rem;border-radius:.75rem;transition-property:all;transition-duration:.3s;transform:scale(1);box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d;box-shadow:0 0 0 0 var(--color-cyan-500-20);margin-bottom:1rem;font-size:1.125rem;border:none;cursor:pointer;margin-inline:auto;width:100%}.btn-verify[_ngcontent-%COMP%]:hover{background-color:var(--color-cyan-600);transform:scale(1.05)}.btn-verify.btn-disabled[_ngcontent-%COMP%], .btn-verify[_ngcontent-%COMP%]:disabled{background-color:var(--color-slate-700);color:var(--color-slate-500);cursor:not-allowed;transform:none;box-shadow:none}.divider-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;padding-top:.5rem;padding-bottom:.5rem;align-items:center;width:100%}.divider-line[_ngcontent-%COMP%]{flex-grow:1;border-top:1px solid var(--color-slate-700)}.divider-text[_ngcontent-%COMP%]{flex-shrink:0;margin-left:1rem;margin-right:1rem;color:var(--color-slate-500);font-size:.875rem}.btn-scan-qr[_ngcontent-%COMP%]{max-width:18rem;display:flex;align-items:center;justify-content:center;gap:.75rem;margin-top:.75rem;padding:.75rem 1rem;background-color:#1e293bcc;border:1px solid var(--color-slate-700);color:var(--color-slate-300);border-radius:.75rem;transition-property:background-color;transition-duration:.3s;font-weight:600;border:none;cursor:pointer;margin-inline:auto;width:100%}.btn-scan-qr[_ngcontent-%COMP%]:hover{background-color:var(--color-slate-800)}.icon-large[_ngcontent-%COMP%]{height:1.25rem;width:1.25rem;color:var(--color-cyan-400)}.icon-small[_ngcontent-%COMP%]{height:1.125rem;width:1.125rem}.btn-simulate-scan[_ngcontent-%COMP%]{max-width:18rem;margin-top:1.5rem;font-size:.75rem;color:var(--color-slate-500);transition-property:color;transition-duration:.3s;border:none;background:none;cursor:pointer;margin-inline:auto;width:100%}.btn-simulate-scan[_ngcontent-%COMP%]:hover{color:var(--color-cyan-400)}.error-message[_ngcontent-%COMP%]{color:var(--color-red-400);text-align:center;margin-top:1rem;font-weight:600}.pickup-details-card[_ngcontent-%COMP%]{max-width:20rem;background-color:var(--color-slate-900);border-radius:1rem;padding:1rem;animation:_ngcontent-%COMP%_fade-in .5s ease-out forwards;border:2px solid rgba(34,197,94,.5);box-shadow:0 25px 50px -12px #00000040,0 0 #22c55e1a;margin-inline:auto;display:flex;flex-direction:column;align-items:center}.card-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem}.card-title-success[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:var(--color-green-400)}.person-avatar-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1rem}.person-avatar-large[_ngcontent-%COMP%]{width:10rem;height:10rem;border-radius:9999px;object-fit:cover;border:4px solid var(--color-slate-700);box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d}.status-badge-success[_ngcontent-%COMP%]{position:absolute;bottom:-.5rem;right:-.5rem;background-color:var(--color-green-500);padding:.5rem;border-radius:9999px;border:4px solid var(--color-slate-900)}.icon-medium[_ngcontent-%COMP%]{height:1.25rem;width:1.25rem;color:var(--color-white)}.person-details-summary[_ngcontent-%COMP%]{text-align:center;margin-top:.5rem}.person-name-large[_ngcontent-%COMP%]{font-size:1.875rem;font-weight:700;color:var(--color-white)}.person-relation-large[_ngcontent-%COMP%]{font-size:1rem;color:var(--color-cyan-400)}.divider-line-large[_ngcontent-%COMP%]{border-top:1px solid var(--color-slate-700);margin-top:1.5rem;margin-bottom:1.5rem;width:100%}.details-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;text-align:center;width:100%}.detail-label-uppercase[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;text-transform:uppercase;color:var(--color-slate-500);margin-bottom:.25rem}.detail-box[_ngcontent-%COMP%]{background-color:var(--color-slate-800);padding:.75rem;border-radius:.5rem;text-align:center}.detail-value-large[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:700;color:var(--color-white)}.detail-value-small[_ngcontent-%COMP%]{color:var(--color-slate-400);font-size:.875rem}.detail-value-mono[_ngcontent-%COMP%]{font-family:monospace;color:var(--color-slate-400);font-size:.875rem}.notes-text[_ngcontent-%COMP%]{color:var(--color-slate-300);font-style:italic;text-align:center}.confirm-button-wrapper[_ngcontent-%COMP%]{margin-top:2rem;display:flex;justify-content:center;width:100%}.btn-confirm-pickup[_ngcontent-%COMP%]{max-width:24rem;background-color:var(--color-green-600);color:var(--color-white);font-weight:700;padding:1rem 2rem;border-radius:.75rem;transition-property:background-color;transition-duration:.3s;font-size:1.125rem;border:none;cursor:pointer;width:100%}.btn-confirm-pickup[_ngcontent-%COMP%]:hover{background-color:var(--color-green-700)}.guard-spot-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:.25rem}.animate-shake[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_shake .82s cubic-bezier(.36,.07,.19,.97) both}"],changeDetection:0})}};var PD=(t,e)=>e.id;function DD(t,e){if(t&1){let n=G();x(0,"div",2)(1,"div",3)(2,"p",4),h(3),P()(),x(4,"button",5),ke("click",function(){let i=I(n).$implicit,r=E();return T(r.removeToast(i.id))}),U(),x(5,"svg",6),ve(6,"path",7),P()()()}if(t&2){let n=e.$implicit;j("toast-success",n.type==="success")("toast-error",n.type==="error")("toast-info",n.type==="info")("toast-warn",n.type==="warn"),p(3),b(n.message)}}var Oa=class t{constructor(){this.toastService=w(ue);this.translationService=w(X);this.toasts=this.toastService.toasts}removeToast(e){this.toastService.remove(e)}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=ee({type:t,selectors:[["app-toast"]],decls:3,vars:0,consts:[[1,"toast-container"],[1,"toast-item","animate-fade-in-right",3,"toast-success","toast-error","toast-info","toast-warn"],[1,"toast-item","animate-fade-in-right"],[1,"toast-message-content"],[1,"toast-message-text"],[1,"toast-close-button",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"toast-close-icon"],["stroke-linecap","round","stroke-linejoin","round","d","M6 18L18 6M6 6l12 12"]],template:function(n,o){n&1&&(x(0,"div",0),Z(1,DD,7,9,"div",1,PD),P()),n&2&&(p(),K(o.toasts()))},styles:["@keyframes _ngcontent-%COMP%_fade-in-right{0%{opacity:0;transform:translate(100%)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_fade-out-right{0%{opacity:1;transform:translate(0)}to{opacity:0;transform:translate(100%)}}.animate-fade-in-right[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in-right .3s ease-out forwards}.animate-fade-out-right[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-out-right .3s ease-in forwards}.toast-container[_ngcontent-%COMP%]{position:fixed;bottom:1rem;right:1rem;z-index:50;width:100%;max-width:20rem;display:flex;flex-direction:column;gap:.75rem}.toast-item[_ngcontent-%COMP%]{position:relative;padding:1rem;border-radius:.5rem;box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d;display:flex;align-items:center;gap:1rem;color:var(--color-white)}.toast-success[_ngcontent-%COMP%]{background-color:var(--color-green-700)}.toast-error[_ngcontent-%COMP%]{background-color:var(--color-red-700)}.toast-info[_ngcontent-%COMP%]{background-color:var(--color-blue-700)}.toast-warn[_ngcontent-%COMP%]{background-color:var(--color-amber-700)}.toast-message-content[_ngcontent-%COMP%]{flex:1}.toast-message-text[_ngcontent-%COMP%]{font-weight:600}.toast-close-button[_ngcontent-%COMP%]{position:absolute;top:.5rem;right:.5rem;padding:.25rem;border-radius:9999px;color:var(--color-white);transition-property:background-color;transition-duration:.3s;border:none;background-color:transparent;cursor:pointer}.toast-close-button[_ngcontent-%COMP%]:hover{background-color:#fff3}.toast-close-icon[_ngcontent-%COMP%]{height:1rem;width:1rem}"],changeDetection:0})}};var wv=(t,e)=>e.code;function AD(t,e){if(t&1&&(x(0,"div",19)(1,"div",27)(2,"span",28),h(3),y(4,"translate"),P(),x(5,"span",29),h(6),P()(),x(7,"div",30)(8,"span",28),h(9),y(10,"translate"),P(),x(11,"span",31),h(12),P()()()),t&2){let n=E().$implicit;p(3),b(C(4,4,"common.zone")),p(3),b(n.assignedZone),p(3),b(C(10,6,"common.spot")),p(3),b(n.assignedSpot)}}function ND(t,e){if(t&1){let n=G();x(0,"button",32),ke("click",function(){I(n);let i=E().$implicit,r=E(2);return T(r.acknowledgeRequest(i.code))}),h(1),y(2,"translate"),P()}t&2&&(p(),N(" ",C(2,1,"teacher.buttons.acknowledge")," "))}function kD(t,e){if(t&1){let n=G();x(0,"button",33),ke("click",function(){I(n);let i=E().$implicit,r=E(2);return T(r.markAsReady(i.code))}),h(1),y(2,"translate"),P()}t&2&&(p(),N(" ",C(2,1,"teacher.portal.markReady")," "))}function RD(t,e){if(t&1&&(x(0,"div",13)(1,"div",14),ve(2,"img",15),x(3,"div",16)(4,"div",17)(5,"p",18),h(6),P(),O(7,AD,13,8,"div",19),P(),x(8,"p",20),h(9),y(10,"translate"),x(11,"span",21),h(12),P()()()(),ve(13,"div",22),x(14,"div",23)(15,"span",24),h(16),y(17,"translate"),P(),O(18,ND,3,3,"button",25)(19,kD,3,3,"button",26),P()()),t&2){let n=e.$implicit;j("card-ready-border",n.status==="ready")("card-arrived-border",n.status==="arrived"),p(2),ht("src",n.student.photoUrl,qe)("alt",n.student.name),p(4),b(n.student.name),p(),F(n.assignedZone?7:-1),p(2),N(" ",C(10,20,"teacher.portal.pickupBy"),": "),p(3),b(n.authorizedPerson.name),p(3),j("status-pending",n.status==="pending")("status-acknowledged",n.status==="acknowledged")("status-arrived",n.status==="arrived")("status-ready",n.status==="ready"),p(),N(" ",C(17,22,"statuses."+n.status)," "),p(2),F(n.status==="pending"?18:n.status==="acknowledged"||n.status==="arrived"?19:-1)}}function OD(t,e){if(t&1&&(x(0,"div",19)(1,"div",27)(2,"span",28),h(3),y(4,"translate"),P(),x(5,"span",29),h(6),P()(),x(7,"div",30)(8,"span",28),h(9),y(10,"translate"),P(),x(11,"span",31),h(12),P()()()),t&2){let n=E().$implicit;p(3),b(C(4,4,"common.zone")),p(3),b(n.assignedZone),p(3),b(C(10,6,"common.spot")),p(3),b(n.assignedSpot)}}function FD(t,e){if(t&1){let n=G();x(0,"button",32),ke("click",function(){I(n);let i=E().$implicit,r=E(2);return T(r.acknowledgeRequest(i.code))}),h(1),y(2,"translate"),P()}t&2&&(p(),N(" ",C(2,1,"teacher.buttons.acknowledge")," "))}function VD(t,e){if(t&1){let n=G();x(0,"button",33),ke("click",function(){I(n);let i=E().$implicit,r=E(2);return T(r.markAsReady(i.code))}),h(1),y(2,"translate"),P()}t&2&&(p(),N(" ",C(2,1,"teacher.portal.markReady")," "))}function LD(t,e){t&1&&(x(0,"div",42),U(),x(1,"svg",43),ve(2,"path",44),P(),J(),x(3,"span"),h(4),y(5,"translate"),P()()),t&2&&(p(4),b(C(5,1,"teacher.portal.ready")))}function BD(t,e){if(t&1&&(x(0,"tr",34)(1,"td",35)(2,"div",36),ve(3,"img",37),x(4,"div")(5,"div",17)(6,"p",38),h(7),P(),O(8,OD,13,8,"div",19),P(),x(9,"p",39),h(10),y(11,"translate"),x(12,"span",21),h(13),P()()()()(),x(14,"td",35)(15,"span",24),h(16),y(17,"translate"),P()(),x(18,"td",40)(19,"div",41),O(20,FD,3,3,"button",25)(21,VD,3,3,"button",26)(22,LD,6,3,"div",42),P()()()),t&2){let n=e.$implicit;j("table-row-ready",n.status==="ready")("table-row-arrived",n.status==="arrived"),p(3),ht("src",n.student.photoUrl,qe)("alt",n.student.name),p(4),b(n.student.name),p(),F(n.assignedZone?8:-1),p(2),N(" ",C(11,20,"teacher.portal.pickupBy"),": "),p(3),b(n.authorizedPerson.name),p(2),j("status-pending",n.status==="pending")("status-acknowledged",n.status==="acknowledged")("status-arrived",n.status==="arrived")("status-ready",n.status==="ready"),p(),N(" ",C(17,22,"statuses."+n.status)," "),p(4),F(n.status==="pending"?20:n.status==="acknowledged"||n.status==="arrived"?21:n.status==="ready"?22:-1)}}function UD(t,e){if(t&1&&(x(0,"div",5),Z(1,RD,20,24,"div",6,wv),P(),x(3,"div",7)(4,"table",8)(5,"thead",9)(6,"tr")(7,"th",10),h(8),y(9,"translate"),P(),x(10,"th",10),h(11),y(12,"translate"),P(),x(13,"th",11),h(14),y(15,"translate"),P()()(),x(16,"tbody"),Z(17,BD,23,24,"tr",12,wv),P()()()),t&2){let n=E();p(),K(n.activeRequestsForMyClass()),p(7),b(C(9,3,"common.student")),p(3),b(C(12,5,"common.status")),p(3),b(C(15,7,"common.actions")),p(3),K(n.activeRequestsForMyClass())}}function HD(t,e){t&1&&(x(0,"div",4)(1,"p",45),h(2),y(3,"translate"),P()()),t&2&&(p(2),b(C(3,1,"teacher.portal.noRequests")))}var xv={arrived:1,ready:2,acknowledged:3,pending:4,completed:5},Fa=class t{constructor(){this.translationService=w(X);this.pickupStateService=w(Ke);this.authService=w(de);this.schoolDataService=w(Ee);this.myClass=H(()=>{let e=this.authService.currentUser();return!e||!e.classId?null:this.schoolDataService.getClassById(e.classId)});this.myClassName=H(()=>this.myClass()?.name??"...");this.activeRequests=H(()=>this.pickupStateService.activeRequests());this.activeRequestsForMyClass=H(()=>{let e=this.myClass();return e?this.activeRequests().filter(n=>n.student.classId===e.id).slice().sort((n,o)=>xv[n.status]-xv[o.status]):[]})}async acknowledgeRequest(e){await this.pickupStateService.updateRequestStatus(e,"acknowledged")}async markAsReady(e){await this.pickupStateService.updateRequestStatus(e,"ready")}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=ee({type:t,selectors:[["app-teacher-dashboard"]],decls:10,vars:9,consts:[[1,"teacher-dashboard-container"],[1,"dashboard-header"],[1,"section-title"],[1,"active-requests-badge"],[1,"no-requests-message"],[1,"mobile-cards-grid"],[1,"request-card-item",3,"card-ready-border","card-arrived-border"],[1,"data-table-container"],[1,"w-full","text-sm","text-left","text-slate-400"],[1,"table-header"],["scope","col",1,"table-th"],["scope","col",1,"table-th","table-th-actions"],[1,"table-row",3,"table-row-ready","table-row-arrived"],[1,"request-card-item"],[1,"flex","items-center","gap-4"],[1,"w-14","h-14","rounded-full","object-cover","border-2","border-slate-600",3,"src","alt"],[1,"student-info"],[1,"student-name-row"],[1,"text-lg","font-bold","text-white"],[1,"pickup-spot-display","pickup-spot-display-small"],[1,"text-sm","text-slate-400"],[1,"font-semibold","text-slate-300"],[1,"border-t","border-slate-700"],[1,"card-actions"],[1,"status-badge"],[1,"btn-secondary"],[1,"btn-primary"],[1,"pickup-spot-zone"],[1,"pickup-spot-label"],[1,"pickup-spot-value-zone"],[1,"pickup-spot-number"],[1,"pickup-spot-value-number"],[1,"btn-secondary",3,"click"],[1,"btn-primary",3,"click"],[1,"table-row"],[1,"px-6","py-4","whitespace-nowrap"],[1,"table-cell-content"],[1,"w-12","h-12","rounded-full","object-cover","border-2","border-slate-600",3,"src","alt"],[1,"text-base","font-bold","text-white"],[1,"table-sub-text"],[1,"px-6","py-4","text-right"],[1,"action-buttons-group"],[1,"ready-status-text"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule","evenodd"],[1,"text-lg"]],template:function(n,o){n&1&&(x(0,"div",0)(1,"div",1)(2,"h2",2),h(3),y(4,"translate"),P(),x(5,"span",3),h(6),y(7,"translate"),P()(),O(8,UD,19,9)(9,HD,4,3,"div",4),P()),n&2&&(p(3),Ce("",C(4,5,"teacher.portal.title"),": ",o.myClassName()),p(3),Ce(" ",o.activeRequestsForMyClass().length," ",C(7,7,"teacher.portal.activeRequests")," "),p(2),F(o.activeRequestsForMyClass().length>0?8:9))},dependencies:[oe],styles:["@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_pulse-border{0%{border-color:var(--color-amber-700)}50%{border-color:var(--color-amber-300)}to{border-color:var(--color-amber-700)}}.teacher-dashboard-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in .5s ease-out forwards;width:100%}.dashboard-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;margin-bottom:1.5rem}@media(min-width:640px){.dashboard-header[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-between;align-items:center}}.section-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:var(--color-white)}.active-requests-badge[_ngcontent-%COMP%]{padding:.5rem 1rem;font-size:1rem;font-weight:600;color:var(--color-cyan-300);background-color:var(--color-slate-800);border-radius:.75rem;border:1px solid var(--color-slate-700);white-space:nowrap}.mobile-cards-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:1rem}@media(min-width:640px){.mobile-cards-grid[_ngcontent-%COMP%]{display:none}}.request-card-item[_ngcontent-%COMP%]{background:linear-gradient(145deg,var(--color-slate-800),#151f32);border-radius:.75rem;border:1px solid var(--color-slate-700);padding:1rem;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f;display:flex;flex-direction:column;gap:.75rem;transition:border-color .3s;border-left-width:4px}.card-ready-border[_ngcontent-%COMP%]{border-left-color:var(--color-green-500)}.card-arrived-border[_ngcontent-%COMP%]{border-left-color:var(--color-amber-500);animation:_ngcontent-%COMP%_pulse-border 2s infinite}.student-info[_ngcontent-%COMP%]{flex:1}.card-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.data-table-container[_ngcontent-%COMP%]{display:none;background-color:var(--color-slate-900);border-radius:.75rem;border:1px solid var(--color-slate-800);overflow:hidden}@media(min-width:640px){.data-table-container[_ngcontent-%COMP%]{display:block}}.w-full[_ngcontent-%COMP%]{width:100%}.text-sm[_ngcontent-%COMP%]{font-size:.875rem}.text-left[_ngcontent-%COMP%]{text-align:left}.text-slate-400[_ngcontent-%COMP%]{color:var(--color-slate-400)}.data-table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{border-collapse:collapse}.table-header[_ngcontent-%COMP%]{background-color:var(--color-slate-800)}.table-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.75rem 1.5rem;font-size:.75rem;font-weight:600;color:var(--color-slate-300);text-transform:uppercase;letter-spacing:.05em}.table-th-actions[_ngcontent-%COMP%]{text-align:right}.table-row[_ngcontent-%COMP%]{border-bottom:1px solid var(--color-slate-800);transition:background-color .2s ease-in-out;border-left:4px solid transparent}.table-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.table-row[_ngcontent-%COMP%]:hover{background-color:var(--color-slate-800)}.table-row-ready[_ngcontent-%COMP%]{border-left-color:var(--color-green-500)}.table-row-arrived[_ngcontent-%COMP%]{border-left-color:var(--color-amber-500);animation:_ngcontent-%COMP%_pulse-border 2s infinite}.table-row-ready[_ngcontent-%COMP%]:hover, .table-row-arrived[_ngcontent-%COMP%]:hover{background-color:var(--color-slate-800)}.table-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem 1.5rem;vertical-align:middle}.table-cell-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.table-sub-text[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-slate-500)}.student-name-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.flex[_ngcontent-%COMP%]{display:flex}.items-center[_ngcontent-%COMP%]{align-items:center}.gap-4[_ngcontent-%COMP%]{gap:1rem}.w-12[_ngcontent-%COMP%]{width:3rem}.h-12[_ngcontent-%COMP%]{height:3rem}.w-14[_ngcontent-%COMP%]{width:3.5rem}.h-14[_ngcontent-%COMP%]{height:3.5rem}.rounded-full[_ngcontent-%COMP%]{border-radius:9999px}.object-cover[_ngcontent-%COMP%]{object-fit:cover}.border-2[_ngcontent-%COMP%]{border-width:2px}.border-slate-600[_ngcontent-%COMP%]{border-color:var(--color-slate-600)}.text-lg[_ngcontent-%COMP%]{font-size:1.125rem}.text-base[_ngcontent-%COMP%]{font-size:1rem}.font-bold[_ngcontent-%COMP%]{font-weight:700}.text-white[_ngcontent-%COMP%]{color:var(--color-white)}.font-semibold[_ngcontent-%COMP%]{font-weight:600}.text-slate-300[_ngcontent-%COMP%]{color:var(--color-slate-300)}.border-t[_ngcontent-%COMP%]{border-top-width:1px}.border-slate-700[_ngcontent-%COMP%]{border-color:var(--color-slate-700)}.ready-status-text[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;color:var(--color-green-400);font-weight:600;justify-content:flex-end}.completed-status-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;color:var(--color-slate-500);font-weight:600;padding:.625rem 1rem;justify-content:flex-end}.h-5[_ngcontent-%COMP%]{height:1.125rem}.w-5[_ngcontent-%COMP%]{width:1.125rem}.no-requests-message[_ngcontent-%COMP%]{text-align:center;color:var(--color-slate-500);padding:4rem;background-color:var(--color-slate-800);border-radius:.75rem}.action-buttons-group[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.75rem}.btn-primary[_ngcontent-%COMP%]{background-color:var(--color-cyan-500);color:var(--color-white);font-weight:600;padding:.625rem 1rem;border-radius:.5rem;border:none;cursor:pointer;transition:background-color .2s}.btn-primary[_ngcontent-%COMP%]:hover{background-color:var(--color-cyan-600)}.btn-secondary[_ngcontent-%COMP%]{background-color:var(--color-slate-600);color:var(--color-slate-300);font-weight:600;padding:.625rem 1rem;border-radius:.5rem;border:none;cursor:pointer;transition:background-color .2s}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:var(--color-slate-500)}.status-badge[_ngcontent-%COMP%]{padding:.25rem .75rem;font-weight:600;font-size:.75rem;border-radius:9999px;display:inline-block}.status-pending[_ngcontent-%COMP%]{background-color:var(--color-amber-500-30);color:var(--color-amber-300)}.status-acknowledged[_ngcontent-%COMP%]{background-color:var(--color-sky-500-20);color:var(--color-sky-300)}.status-arrived[_ngcontent-%COMP%]{background-color:var(--color-amber-500-30);color:var(--color-amber-300)}.status-ready[_ngcontent-%COMP%]{background-color:var(--color-green-500-20);color:var(--color-green-400)}.status-completed[_ngcontent-%COMP%]{background-color:var(--color-slate-700);color:var(--color-slate-300)}"],changeDetection:0})}};var Iv=(t,e)=>e.code;function GD(t,e){if(t&1&&(x(0,"div",9),U(),x(1,"svg",11),ve(2,"path",12),P(),J(),x(3,"p"),h(4),P()()),t&2){let n=e.$implicit;p(4),b(n)}}function qD(t,e){if(t&1&&Z(0,GD,5,1,"div",9,Hi),t&2){let n=E();K(n.insights())}}function $D(t,e){t&1&&(x(0,"div",9)(1,"div",13),ve(2,"div",14),x(3,"span"),h(4),y(5,"translate"),P()()()),t&2&&(p(4),b(C(5,1,"common.processing")))}function zD(t,e){if(t&1&&(x(0,"div",29)(1,"div",37)(2,"span",38),h(3),y(4,"translate"),P(),x(5,"span",39),h(6),P()(),x(7,"div",40)(8,"span",38),h(9),y(10,"translate"),P(),x(11,"span",41),h(12),P()()()),t&2){let n=E().$implicit;p(3),b(C(4,4,"common.zone")),p(3),b(n.assignedZone),p(3),b(C(10,6,"common.spot")),p(3),b(n.assignedSpot)}}function WD(t,e){if(t&1){let n=G();x(0,"button",42),ke("click",function(){I(n);let i=E().$implicit,r=E(2);return T(r.acknowledgeRequest(i.code))}),h(1),y(2,"translate"),P()}t&2&&(p(),N(" ",C(2,1,"teacher.buttons.acknowledge")," "))}function YD(t,e){if(t&1){let n=G();x(0,"button",43),ke("click",function(){I(n);let i=E().$implicit,r=E(2);return T(r.markAsReady(i.code))}),h(1),y(2,"translate"),P()}t&2&&(p(),N(" ",C(2,1,"teacher.portal.markReady")," "))}function JD(t,e){if(t&1&&(x(0,"div",23)(1,"div",24),ve(2,"img",25),x(3,"div",26)(4,"div",27)(5,"p",28),h(6),P(),O(7,zD,13,8,"div",29),P(),x(8,"p",30),h(9),P(),x(10,"p",30),h(11),y(12,"translate"),x(13,"span",31),h(14),P()()()(),ve(15,"div",32),x(16,"div",33)(17,"span",34),h(18),y(19,"translate"),P(),O(20,WD,3,3,"button",35)(21,YD,3,3,"button",36),P()()),t&2){let n=e.$implicit;j("card-ready-border",n.status==="ready")("card-arrived-border",n.status==="arrived"),p(2),ht("src",n.student.photoUrl,qe)("alt",n.student.name),p(4),b(n.student.name),p(),F(n.assignedZone?7:-1),p(2),b(n.student.class),p(2),N(" ",C(12,21,"teacher.portal.pickupBy"),": "),p(3),b(n.authorizedPerson.name),p(3),j("status-pending",n.status==="pending")("status-acknowledged",n.status==="acknowledged")("status-arrived",n.status==="arrived")("status-ready",n.status==="ready"),p(),N(" ",C(19,23,"statuses."+n.status)," "),p(2),F(n.status==="pending"?20:n.status==="acknowledged"||n.status==="arrived"?21:-1)}}function jD(t,e){if(t&1&&(x(0,"div",29)(1,"div",37)(2,"span",38),h(3),y(4,"translate"),P(),x(5,"span",39),h(6),P()(),x(7,"div",40)(8,"span",38),h(9),y(10,"translate"),P(),x(11,"span",41),h(12),P()()()),t&2){let n=E().$implicit;p(3),b(C(4,4,"common.zone")),p(3),b(n.assignedZone),p(3),b(C(10,6,"common.spot")),p(3),b(n.assignedSpot)}}function ZD(t,e){if(t&1){let n=G();x(0,"button",42),ke("click",function(){I(n);let i=E().$implicit,r=E(2);return T(r.acknowledgeRequest(i.code))}),h(1),y(2,"translate"),P()}t&2&&(p(),N(" ",C(2,1,"teacher.buttons.acknowledge")," "))}function KD(t,e){if(t&1){let n=G();x(0,"button",43),ke("click",function(){I(n);let i=E().$implicit,r=E(2);return T(r.markAsReady(i.code))}),h(1),y(2,"translate"),P()}t&2&&(p(),N(" ",C(2,1,"teacher.portal.markReady")," "))}function QD(t,e){t&1&&(x(0,"div",52),U(),x(1,"svg",53),ve(2,"path",54),P(),J(),x(3,"span"),h(4),y(5,"translate"),P()()),t&2&&(p(4),b(C(5,1,"teacher.portal.ready")))}function XD(t,e){if(t&1&&(x(0,"tr",44)(1,"td",45)(2,"div",46),ve(3,"img",47),x(4,"div")(5,"div",27)(6,"p",48),h(7),P(),O(8,jD,13,8,"div",29),P(),x(9,"p",49),h(10),P(),x(11,"p",49),h(12),y(13,"translate"),x(14,"span",31),h(15),P()()()()(),x(16,"td",45)(17,"span",34),h(18),y(19,"translate"),P()(),x(20,"td",50)(21,"div",51),O(22,ZD,3,3,"button",35)(23,KD,3,3,"button",36)(24,QD,6,3,"div",52),P()()()),t&2){let n=e.$implicit;j("table-row-ready",n.status==="ready")("table-row-arrived",n.status==="arrived"),p(3),ht("src",n.student.photoUrl,qe)("alt",n.student.name),p(4),b(n.student.name),p(),F(n.assignedZone?8:-1),p(2),b(n.student.class),p(2),N(" ",C(13,21,"teacher.portal.pickupBy"),": "),p(3),b(n.authorizedPerson.name),p(2),j("status-pending",n.status==="pending")("status-acknowledged",n.status==="acknowledged")("status-arrived",n.status==="arrived")("status-ready",n.status==="ready"),p(),N(" ",C(19,23,"statuses."+n.status)," "),p(4),F(n.status==="pending"?22:n.status==="acknowledged"||n.status==="arrived"?23:n.status==="ready"?24:-1)}}function e2(t,e){if(t&1&&(x(0,"div",15),Z(1,JD,22,25,"div",16,Iv),P(),x(3,"div",17)(4,"table",18)(5,"thead",19)(6,"tr")(7,"th",20),h(8),y(9,"translate"),P(),x(10,"th",20),h(11),y(12,"translate"),P(),x(13,"th",21),h(14),y(15,"translate"),P()()(),x(16,"tbody"),Z(17,XD,25,25,"tr",22,Iv),P()()()),t&2){let n=E();p(),K(n.activeRequests()),p(7),b(C(9,3,"common.student")),p(3),b(C(12,5,"common.status")),p(3),b(C(15,7,"common.actions")),p(3),K(n.activeRequests())}}function t2(t,e){t&1&&(x(0,"div",10)(1,"p",55),h(2),y(3,"translate"),P()()),t&2&&(p(2),b(C(3,1,"schoolSupervisor.portal.noRequests")))}var Tv={arrived:1,ready:2,acknowledged:3,pending:4,completed:5},Va=class t{constructor(){this.translationService=w(X);this.pickupStateService=w(Ke);this.authService=w(de);this.ai=typeof process<"u"&&process.env.API_KEY?new Jo({apiKey:process.env.API_KEY}):null;this.insights=R([]);this.insightGenerationInProgress=R(!1);this.activeRequests=H(()=>this.pickupStateService.activeRequests().slice().sort((e,n)=>Tv[e.status]-Tv[n.status]));We(()=>{this.activeRequests(),this.generateInsights()},{allowSignalWrites:!0})}async acknowledgeRequest(e){await this.pickupStateService.updateRequestStatus(e,"acknowledged")}async markAsReady(e){await this.pickupStateService.updateRequestStatus(e,"ready")}async generateInsights(){if(!(!this.ai||this.insightGenerationInProgress())){this.insightGenerationInProgress.set(!0),this.insights.set([]);try{let e=this.authService.currentUserSchool(),n=this.activeRequests().filter(u=>u.assignedZone).length,o=e?.pickupZones?.reduce((u,f)=>u+f.spots,0)??0,i=o>0?n/o*100:0,r=this.activeRequests().filter(u=>u.status==="arrived"&&!u.assignedZone).length,s=`You are a school operations analyst. Here is a summary of the student pickup situation. Provide 2-3 brief, actionable insights. Insights should be in ${this.translationService.language()==="ar"?"Arabic":"English"}.

      Data:
      - Pickup Zone Capacity: ${i.toFixed(0)}% full (${n} of ${o} spots occupied).
      - Active waiting cars (arrived, no spot): ${r}.
      - Yesterday's average pickup time: 12 minutes.
      - Today's average pickup time so far: 9 minutes.
      
      Example insights:
      - "Average pickup time is 3 minutes faster than yesterday. Great work!"
      - "Alert: Pickup Zones are at 90% capacity. Prepare for overflow."
      - "There are 5 parents waiting for a spot. Expedite current pickups."
      
      Analyze the current data and provide insights based *only* on the provided data.`,d=(await this.ai.models.generateContent({model:"gemini-2.5-flash",contents:s,config:{responseMimeType:"application/json",responseSchema:{type:Ht.OBJECT,properties:{insights:{type:Ht.ARRAY,items:{type:Ht.STRING}}}}}})).text.trim();if(d){let u=JSON.parse(d);this.insights.set(u.insights||[])}}catch(e){console.error("Error generating insights:",e)}finally{this.insightGenerationInProgress.set(!1)}}}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=ee({type:t,selectors:[["app-school-supervisor"]],decls:22,vars:15,consts:[[1,"supervisor-dashboard-container"],[1,"dashboard-header"],[1,"section-title"],[1,"section-description"],[1,"header-actions-group"],[1,"active-requests-badge"],[1,"insights-section"],[1,"insights-title"],[1,"insights-grid"],[1,"insight-card"],[1,"no-requests-message"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"insight-icon"],["fill-rule","evenodd","d","M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule","evenodd"],[1,"insight-loading"],[1,"insight-spinner"],[1,"mobile-cards-grid"],[1,"request-card-item",3,"card-ready-border","card-arrived-border"],[1,"data-table-container"],[1,"w-full","text-sm","text-left","text-slate-400"],[1,"table-header"],["scope","col",1,"table-th"],["scope","col",1,"table-th","table-th-actions"],[1,"table-row",3,"table-row-ready","table-row-arrived"],[1,"request-card-item"],[1,"flex","items-center","gap-4"],[1,"w-14","h-14","rounded-full","object-cover","border-2","border-slate-600",3,"src","alt"],[1,"student-info"],[1,"student-name-row"],[1,"text-lg","font-bold","text-white"],[1,"pickup-spot-display","pickup-spot-display-small"],[1,"text-sm","text-slate-400"],[1,"font-semibold","text-slate-300"],[1,"border-t","border-slate-700"],[1,"card-actions"],[1,"status-badge"],[1,"btn-secondary"],[1,"btn-primary"],[1,"pickup-spot-zone"],[1,"pickup-spot-label"],[1,"pickup-spot-value-zone"],[1,"pickup-spot-number"],[1,"pickup-spot-value-number"],[1,"btn-secondary",3,"click"],[1,"btn-primary",3,"click"],[1,"table-row"],[1,"px-6","py-4","whitespace-nowrap"],[1,"table-cell-content"],[1,"w-12","h-12","rounded-full","object-cover","border-2","border-slate-600",3,"src","alt"],[1,"text-base","font-bold","text-white"],[1,"table-sub-text"],[1,"px-6","py-4","text-right"],[1,"action-buttons-group"],[1,"ready-status-text"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule","evenodd"],[1,"text-lg"]],template:function(n,o){n&1&&(x(0,"div",0)(1,"header",1)(2,"div")(3,"h2",2),h(4),y(5,"translate"),P(),x(6,"p",3),h(7),y(8,"translate"),P()(),x(9,"div",4)(10,"span",5),h(11),y(12,"translate"),P()()(),x(13,"section",6)(14,"h3",7),h(15),y(16,"translate"),P(),x(17,"div",8),O(18,qD,2,0)(19,$D,6,3,"div",9),P()(),O(20,e2,19,9)(21,t2,4,3,"div",10),P()),n&2&&(p(4),b(C(5,7,"schoolSupervisor.liveMonitor.title")),p(3),b(C(8,9,"schoolSupervisor.portal.monitor")),p(4),Ce(" ",o.activeRequests().length," ",C(12,11,"schoolSupervisor.portal.activeRequests")," "),p(4),b(C(16,13,"schoolSupervisor.insights.title")),p(3),F(o.insights().length>0?18:19),p(2),F(o.activeRequests().length>0?20:21))},dependencies:[oe],styles:["@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_pulse-border{0%{border-color:var(--color-amber-700)}50%{border-color:var(--color-amber-300)}to{border-color:var(--color-amber-700)}}.supervisor-dashboard-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in .5s ease-out forwards;width:100%}.dashboard-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;margin-bottom:1.5rem}@media(min-width:640px){.dashboard-header[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-between;align-items:center}}.section-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:var(--color-white)}.section-description[_ngcontent-%COMP%]{color:var(--color-slate-400);margin-top:.25rem}.header-actions-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.active-requests-badge[_ngcontent-%COMP%]{padding:.5rem 1rem;font-size:1rem;font-weight:600;color:var(--color-cyan-300);background-color:var(--color-slate-800);border-radius:.75rem;border:1px solid var(--color-slate-700);white-space:nowrap}.insights-section[_ngcontent-%COMP%]{margin-bottom:2rem}.insights-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:var(--color-cyan-400);margin-bottom:1rem}.insights-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:1rem}@media(min-width:768px){.insights-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(20rem,1fr))}}.insight-card[_ngcontent-%COMP%]{background:linear-gradient(to right,var(--color-slate-800),var(--color-slate-900));border-left:4px solid var(--color-cyan-500);padding:1rem 1.25rem;border-radius:.5rem;color:var(--color-slate-300);display:flex;align-items:center;gap:1rem;box-shadow:0 4px 6px -1px #0000001a}.insight-icon[_ngcontent-%COMP%]{flex-shrink:0;color:var(--color-cyan-400);width:1.5rem;height:1.5rem}.insight-loading[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;color:var(--color-slate-500)}.insight-spinner[_ngcontent-%COMP%]{width:1rem;height:1rem;border:2px solid currentColor;border-top-color:transparent;border-radius:50%;animation:_ngcontent-%COMP%_insight-spin .8s linear infinite}@keyframes _ngcontent-%COMP%_insight-spin{to{transform:rotate(360deg)}}.mobile-cards-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:1rem}@media(min-width:640px){.mobile-cards-grid[_ngcontent-%COMP%]{display:none}}.request-card-item[_ngcontent-%COMP%]{background:linear-gradient(145deg,var(--color-slate-800),#151f32);border-radius:.75rem;border:1px solid var(--color-slate-700);padding:1rem;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f;display:flex;flex-direction:column;gap:.75rem;transition:border-color .3s;border-left-width:4px}.card-ready-border[_ngcontent-%COMP%]{border-left-color:var(--color-green-500)}.card-arrived-border[_ngcontent-%COMP%]{border-left-color:var(--color-amber-500);animation:_ngcontent-%COMP%_pulse-border 2s infinite}.student-info[_ngcontent-%COMP%]{flex:1}.card-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.data-table-container[_ngcontent-%COMP%]{display:none;background-color:var(--color-slate-900);border-radius:.75rem;border:1px solid var(--color-slate-800);overflow:hidden}@media(min-width:640px){.data-table-container[_ngcontent-%COMP%]{display:block}}.w-full[_ngcontent-%COMP%]{width:100%}.text-sm[_ngcontent-%COMP%]{font-size:.875rem}.text-left[_ngcontent-%COMP%]{text-align:left}.text-slate-400[_ngcontent-%COMP%]{color:var(--color-slate-400)}.data-table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{border-collapse:collapse}.table-header[_ngcontent-%COMP%]{background-color:var(--color-slate-800)}.table-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.75rem 1.5rem;font-size:.75rem;font-weight:600;color:var(--color-slate-300);text-transform:uppercase;letter-spacing:.05em}.table-th-actions[_ngcontent-%COMP%]{text-align:right}.table-row[_ngcontent-%COMP%]{border-bottom:1px solid var(--color-slate-800);transition:background-color .2s ease-in-out;border-left:4px solid transparent}.table-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.table-row[_ngcontent-%COMP%]:hover{background-color:var(--color-slate-800)}.table-row-ready[_ngcontent-%COMP%]{border-left-color:var(--color-green-500)}.table-row-arrived[_ngcontent-%COMP%]{border-left-color:var(--color-amber-500);animation:_ngcontent-%COMP%_pulse-border 2s infinite}.table-row-ready[_ngcontent-%COMP%]:hover, .table-row-arrived[_ngcontent-%COMP%]:hover{background-color:var(--color-slate-800)}.table-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem 1.5rem;vertical-align:middle}.table-cell-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.table-sub-text[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-slate-500)}.student-name-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.flex[_ngcontent-%COMP%]{display:flex}.items-center[_ngcontent-%COMP%]{align-items:center}.gap-4[_ngcontent-%COMP%]{gap:1rem}.w-12[_ngcontent-%COMP%]{width:3rem}.h-12[_ngcontent-%COMP%]{height:3rem}.w-14[_ngcontent-%COMP%]{width:3.5rem}.h-14[_ngcontent-%COMP%]{height:3.5rem}.rounded-full[_ngcontent-%COMP%]{border-radius:9999px}.object-cover[_ngcontent-%COMP%]{object-fit:cover}.border-2[_ngcontent-%COMP%]{border-width:2px}.border-slate-600[_ngcontent-%COMP%]{border-color:var(--color-slate-600)}.text-lg[_ngcontent-%COMP%]{font-size:1.125rem}.text-base[_ngcontent-%COMP%]{font-size:1rem}.font-bold[_ngcontent-%COMP%]{font-weight:700}.text-white[_ngcontent-%COMP%]{color:var(--color-white)}.font-semibold[_ngcontent-%COMP%]{font-weight:600}.text-slate-300[_ngcontent-%COMP%]{color:var(--color-slate-300)}.border-t[_ngcontent-%COMP%]{border-top-width:1px}.border-slate-700[_ngcontent-%COMP%]{border-color:var(--color-slate-700)}.ready-status-text[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;color:var(--color-green-400);font-weight:600;justify-content:flex-end}.h-5[_ngcontent-%COMP%]{height:1.125rem}.w-5[_ngcontent-%COMP%]{width:1.125rem}.no-requests-message[_ngcontent-%COMP%]{text-align:center;color:var(--color-slate-500);padding:4rem;background-color:var(--color-slate-800);border-radius:.75rem}.action-buttons-group[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.75rem}.btn-primary[_ngcontent-%COMP%]{background-color:var(--color-cyan-500);color:var(--color-white);font-weight:600;padding:.625rem 1rem;border-radius:.5rem;border:none;cursor:pointer;transition:background-color .2s}.btn-primary[_ngcontent-%COMP%]:hover{background-color:var(--color-cyan-600)}.btn-secondary[_ngcontent-%COMP%]{background-color:var(--color-slate-600);color:var(--color-slate-300);font-weight:600;padding:.625rem 1rem;border-radius:.5rem;border:none;cursor:pointer;transition:background-color .2s}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:var(--color-slate-500)}.status-badge[_ngcontent-%COMP%]{padding:.25rem .75rem;font-weight:600;font-size:.75rem;border-radius:9999px;display:inline-block}.status-pending[_ngcontent-%COMP%]{background-color:var(--color-amber-500-30);color:var(--color-amber-300)}.status-acknowledged[_ngcontent-%COMP%]{background-color:var(--color-sky-500-20);color:var(--color-sky-300)}.status-arrived[_ngcontent-%COMP%]{background-color:var(--color-amber-500-30);color:var(--color-amber-300)}.status-ready[_ngcontent-%COMP%]{background-color:var(--color-green-500-20);color:var(--color-green-400)}.status-completed[_ngcontent-%COMP%]{background-color:var(--color-slate-700);color:var(--color-slate-300)}"],changeDetection:0})}};var kp=(t,e)=>e.id;function n2(t,e){t&1&&(h(0),y(1,"translate")),t&2&&N(" ",C(1,1,"school-admin.staff.editTitle")," ")}function o2(t,e){t&1&&(h(0),y(1,"translate")),t&2&&N(" ",C(1,1,"school-admin.staff.addTitle")," ")}function i2(t,e){if(t&1&&(m(0,"option",22),h(1),g()),t&2){let n=e.$implicit;A("value",n.id),p(),b(n.name)}}function r2(t,e){if(t&1){let n=G();m(0,"div",15)(1,"label",7),h(2),y(3,"translate"),g(),m(4,"select",21),M("ngModelChange",function(i){I(n);let r=E();return T(r.updateStaffForm("classId",i))}),m(5,"option",11),h(6),y(7,"translate"),g(),Z(8,i2,2,2,"option",22,kp),g()()}if(t&2){let n=E();p(2),b(C(3,3,"school-admin.staff.class")),p(2),A("ngModel",n.staffForm().classId),p(2),b(C(7,5,"school-admin.staff.selectClass")),p(2),K(n.classes())}}function s2(t,e){t&1&&(h(0),y(1,"translate")),t&2&&N(" ",C(1,1,"common.saveChanges")," ")}function a2(t,e){t&1&&(h(0),y(1,"translate")),t&2&&N(" ",C(1,1,"school-admin.staff.addButton")," ")}function l2(t,e){if(t&1){let n=G();m(0,"button",23),M("click",function(){I(n);let i=E();return T(i.cancelEdit())}),h(1),y(2,"translate"),g()}t&2&&(p(),N(" ",C(2,1,"common.cancel")," "))}function c2(t,e){if(t&1){let n=G();m(0,"div",25)(1,"div",32)(2,"div")(3,"h4",33),h(4),g(),m(5,"p",34),h(6),g()(),m(7,"span",35),h(8),y(9,"translate"),g()(),k(10,"div",36),m(11,"div",37)(12,"button",38),y(13,"translate"),M("click",function(){let i=I(n).$implicit,r=E(2);return T(r.startEdit(i))}),U(),m(14,"svg",39),k(15,"path",40)(16,"path",41),g()(),J(),m(17,"button",42),y(18,"translate"),M("click",function(){let i=I(n).$implicit,r=E(2);return T(r.deleteStaff(i))}),U(),m(19,"svg",39),k(20,"path",43),g()()()()}if(t&2){let n=e.$implicit;p(4),b(n.name),p(2),b(n.phone),p(),j("status-guard",n.role==="guard")("status-teacher",n.role==="teacher")("status-supervisor",n.role==="school-supervisor"),p(),N(" ",C(9,11,"roles."+n.role+".title")," "),p(4),A("title",C(13,13,"common.edit")),p(5),A("title",C(18,15,"common.delete"))}}function d2(t,e){if(t&1){let n=G();m(0,"tr",31)(1,"td",44),h(2),g(),m(3,"td",45),h(4),g(),m(5,"td",45)(6,"span",35),h(7),y(8,"translate"),g()(),m(9,"td",46)(10,"div",47)(11,"button",38),y(12,"translate"),M("click",function(){let i=I(n).$implicit,r=E(2);return T(r.startEdit(i))}),U(),m(13,"svg",39),k(14,"path",40)(15,"path",41),g()(),J(),m(16,"button",42),y(17,"translate"),M("click",function(){let i=I(n).$implicit,r=E(2);return T(r.deleteStaff(i))}),U(),m(18,"svg",39),k(19,"path",43),g()()()()()}if(t&2){let n=e.$implicit;p(2),b(n.name),p(2),b(n.phone),p(2),j("status-guard",n.role==="guard")("status-teacher",n.role==="teacher")("status-supervisor",n.role==="school-supervisor"),p(),N(" ",C(8,11,"roles."+n.role+".title")," "),p(4),A("title",C(12,13,"common.edit")),p(5),A("title",C(17,15,"common.delete"))}}function u2(t,e){if(t&1&&(m(0,"div",24),Z(1,c2,21,17,"div",25,kp),g(),m(3,"div",26)(4,"table",27)(5,"thead",28)(6,"tr")(7,"th",29),h(8),y(9,"translate"),g(),m(10,"th",29),h(11),y(12,"translate"),g(),m(13,"th",29),h(14),y(15,"translate"),g(),m(16,"th",30),h(17),y(18,"translate"),g()()(),m(19,"tbody"),Z(20,d2,20,17,"tr",31,kp),g()()()),t&2){let n=E();p(),K(n.staff()),p(7),b(C(9,4,"school-admin.staff.name")),p(3),b(C(12,6,"school-admin.staff.phone")),p(3),b(C(15,8,"school-admin.staff.role")),p(3),b(C(18,10,"common.actions")),p(3),K(n.staff())}}function p2(t,e){t&1&&(m(0,"div",20)(1,"p"),h(2),y(3,"translate"),g()()),t&2&&(p(2),b(C(3,1,"school-admin.staff.noStaff")))}var La=class t{constructor(){this.translationService=w(X);this.dataService=w(Ee);this.toastService=w(ue);this.authService=w(de);this.staffForm=R(xp);this.editingStaff=R(null);this.isStaffFormValid=H(()=>{let e=this.staffForm();return!(!e.name||!e.role||e.role==="teacher"&&!e.classId)});this.staff=H(()=>{let e=this.authService.currentUserSchool()?.id;return e?this.dataService.getStaffForSchool(e):[]});this.classes=H(()=>{let e=this.authService.currentUserSchool()?.id;return e?this.dataService.getClassesBySchool(e):[]})}updateStaffForm(e,n){this.staffForm.update(o=>z(B({},o),{[e]:n}))}startEdit(e){this.editingStaff.set(e),this.staffForm.set({name:e.name,phone:e.phone||"",role:e.role,classId:e.classId||""})}cancelEdit(){this.editingStaff.set(null),this.staffForm.set(xp)}async saveStaff(){let e=this.authService.currentUserSchool()?.id;if(!this.isStaffFormValid()||!e)return;let n=this.editingStaff(),o=this.staffForm();if(n){let i=z(B({},n),{name:o.name,phone:o.phone,role:o.role,classId:o.role==="teacher"?o.classId:void 0});await this.dataService.updateUser(i),this.toastService.show(this.translationService.translate("school-admin.staff.toast.staffUpdated"),"success")}else await this.dataService.addUser({name:o.name,phone:o.phone,role:o.role,classId:o.role==="teacher"?o.classId:void 0,schoolId:e,email:`${o.name.split(" ")[0].toLowerCase()}@school.com`,password:"password"}),this.toastService.show(this.translationService.translate("school-admin.staff.toast.staffAdded"),"success");this.cancelEdit()}async deleteStaff(e){confirm(this.translationService.translate("school-admin.staff.deleteConfirmation"))&&(await this.dataService.deleteUserAndAssociatedData(e.id),this.toastService.show(this.translationService.translate("school-admin.staff.toast.staffDeleted"),"success"))}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=ee({type:t,selectors:[["app-staff-management"]],decls:52,vars:41,consts:[[1,"staff-management-container"],[1,"section-title"],[1,"section-description"],[1,"form-and-list-grid"],[1,"add-edit-form-card"],[1,"form-card-title"],[1,"form-spacing",3,"submit"],[1,"form-label"],["type","text","name","staffName","required","",1,"form-input",3,"ngModelChange","ngModel"],["type","tel","name","staffPhone",1,"form-input",3,"ngModelChange","ngModel"],["name","staffRole","required","",1,"form-select",3,"ngModelChange","ngModel"],["value","","disabled",""],["value","guard"],["value","teacher"],["value","school-supervisor"],[1,"animated-form-field"],[1,"form-buttons-padding"],["type","submit",1,"btn-primary",3,"disabled"],["type","button",1,"btn-secondary"],[1,"staff-list-wrapper"],[1,"no-staff-message"],["name","staffClass","required","",1,"form-select",3,"ngModelChange","ngModel"],[3,"value"],["type","button",1,"btn-secondary",3,"click"],[1,"staff-cards-mobile"],[1,"staff-card"],[1,"data-table-container"],[1,"data-table"],[1,"table-header"],["scope","col",1,"table-th"],["scope","col",1,"table-th","table-th-actions"],[1,"table-row"],[1,"staff-card-header"],[1,"staff-name"],[1,"staff-phone"],[1,"status-badge"],[1,"card-divider"],[1,"card-actions"],[1,"action-button","edit-button",3,"click","title"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"icon-small"],["d","M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"],["fill-rule","evenodd","d","M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z","clip-rule","evenodd"],[1,"action-button","delete-button",3,"click","title"],["fill-rule","evenodd","d","M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule","evenodd"],[1,"table-td-primary"],[1,"table-td"],[1,"table-td","table-td-actions"],[1,"action-buttons-group"]],template:function(n,o){n&1&&(m(0,"div",0)(1,"h2",1),h(2),y(3,"translate"),g(),m(4,"p",2),h(5),y(6,"translate"),g(),m(7,"div",3)(8,"div",4)(9,"h3",5),O(10,n2,2,3)(11,o2,2,3),g(),m(12,"form",6),M("submit",function(){return o.saveStaff()}),m(13,"div")(14,"label",7),h(15),y(16,"translate"),g(),m(17,"input",8),M("ngModelChange",function(r){return o.updateStaffForm("name",r)}),g()(),m(18,"div")(19,"label",7),h(20),y(21,"translate"),g(),m(22,"input",9),M("ngModelChange",function(r){return o.updateStaffForm("phone",r)}),g()(),m(23,"div")(24,"label",7),h(25),y(26,"translate"),g(),m(27,"select",10),M("ngModelChange",function(r){return o.updateStaffForm("role",r)}),m(28,"option",11),h(29),y(30,"translate"),g(),m(31,"option",12),h(32),y(33,"translate"),g(),m(34,"option",13),h(35),y(36,"translate"),g(),m(37,"option",14),h(38),y(39,"translate"),g()()(),O(40,r2,10,7,"div",15),m(41,"div",16)(42,"button",17),O(43,s2,2,3)(44,a2,2,3),g(),O(45,l2,3,3,"button",18),g()()(),m(46,"div",19)(47,"h3",5),h(48),y(49,"translate"),g(),O(50,u2,22,12)(51,p2,4,3,"div",20),g()()()),n&2&&(p(2),b(C(3,21,"school-admin.staff.title")),p(3),b(C(6,23,"school-admin.staff.addTitle")),p(5),F(o.editingStaff()?10:11),p(5),b(C(16,25,"school-admin.staff.name")),p(2),A("ngModel",o.staffForm().name),p(3),b(C(21,27,"school-admin.staff.phone")),p(2),A("ngModel",o.staffForm().phone),p(3),b(C(26,29,"school-admin.staff.role")),p(2),A("ngModel",o.staffForm().role),p(2),b(C(30,31,"school-admin.staff.selectRole")),p(3),b(C(33,33,"roles.guard.title")),p(3),b(C(36,35,"roles.teacher.title")),p(3),b(C(39,37,"roles.school-supervisor.title")),p(2),F(o.staffForm().role==="teacher"?40:-1),p(2),j("btn-disabled",!o.isStaffFormValid()),A("disabled",!o.isStaffFormValid()),p(),F(o.editingStaff()?43:44),p(2),F(o.editingStaff()?45:-1),p(3),b(C(49,39,"school-admin.staff.existing")),p(2),F(o.staff().length>0?50:51))},dependencies:[Ae,Ve,rn,sn,Me,Et,De,Fe,Be,Ie,Re,oe],styles:["@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.staff-management-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in .5s ease-out forwards;width:100%}.section-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:var(--color-cyan-400)}.section-description[_ngcontent-%COMP%]{color:var(--color-slate-400);margin-top:.25rem;margin-bottom:1.5rem}.form-and-list-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:2rem}@media(min-width:1024px){.form-and-list-grid[_ngcontent-%COMP%]{grid-template-columns:1fr 2fr}}.add-edit-form-card[_ngcontent-%COMP%]{background-color:#1e293b80;padding:1.5rem;border-radius:.75rem;border:1px solid var(--color-slate-700);height:fit-content}.form-card-title[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;margin-bottom:1.5rem}.form-spacing[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.form-label[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:500;color:var(--color-slate-300);margin-bottom:.5rem}.form-input[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{width:90%;background-color:var(--color-slate-800);border:1px solid var(--color-slate-700);border-radius:.5rem;padding:.75rem;outline:none;transition:all .2s ease-in-out}.form-input[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{border-color:var(--color-cyan-500);background-color:var(--color-slate-900);box-shadow:0 0 0 3px #06b6d44d}.animated-form-field[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in .3s ease-out forwards}.form-buttons-padding[_ngcontent-%COMP%]{padding-top:.5rem;display:flex;flex-direction:column;gap:.5rem}.staff-cards-mobile[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:1rem}@media(min-width:640px){.staff-cards-mobile[_ngcontent-%COMP%]{display:none}}.staff-card[_ngcontent-%COMP%]{background:linear-gradient(145deg,var(--color-slate-800),#151f32);border-radius:.75rem;border:1px solid var(--color-slate-700);padding:1rem;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}.staff-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:1rem}.staff-name[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:var(--color-white)}.staff-phone[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-slate-400)}.card-divider[_ngcontent-%COMP%]{border-top:1px solid var(--color-slate-700);margin:.75rem 0}.card-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.75rem}.data-table-container[_ngcontent-%COMP%]{display:none;background-color:var(--color-slate-900);border-radius:.75rem;border:1px solid var(--color-slate-800);overflow:hidden}@media(min-width:640px){.data-table-container[_ngcontent-%COMP%]{display:block}}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table-header[_ngcontent-%COMP%]{background-color:var(--color-slate-800)}.table-th[_ngcontent-%COMP%]{padding:.75rem 1.5rem;font-size:.75rem;font-weight:600;color:var(--color-slate-300);text-transform:uppercase;letter-spacing:.05em;text-align:left}.table-row[_ngcontent-%COMP%]{border-bottom:1px solid var(--color-slate-800);transition:background-color .2s ease-in-out}.table-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.table-row[_ngcontent-%COMP%]:hover{background-color:var(--color-slate-800)}.table-td[_ngcontent-%COMP%]{padding:1rem 1.5rem;font-size:.875rem;color:var(--color-slate-400);vertical-align:middle}.table-td-primary[_ngcontent-%COMP%]{color:var(--color-white);font-weight:500}.table-th-actions[_ngcontent-%COMP%], .table-td-actions[_ngcontent-%COMP%]{text-align:right}.status-badge[_ngcontent-%COMP%]{padding:.25rem .75rem;font-weight:600;font-size:.75rem;border-radius:9999px;display:inline-block}.status-guard[_ngcontent-%COMP%]{background-color:var(--color-sky-500-20);color:var(--color-sky-300)}.status-teacher[_ngcontent-%COMP%]{background-color:var(--color-teal-500-20);color:var(--color-teal-300)}.status-supervisor[_ngcontent-%COMP%]{background-color:var(--color-indigo-500-20);color:var(--color-indigo-300)}.no-staff-message[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:var(--color-slate-500);background-color:var(--color-slate-800);border-radius:.5rem}.action-button[_ngcontent-%COMP%]{padding:.5rem;background-color:transparent;border:1px solid var(--color-slate-700);border-radius:.5rem;transition:all .2s ease-in-out;cursor:pointer;display:flex;align-items:center;justify-content:center}.action-button[_ngcontent-%COMP%]:hover{background-color:var(--color-slate-700);border-color:var(--color-slate-600)}.action-button.edit-button[_ngcontent-%COMP%]{color:var(--color-cyan-400)}.icon-small[_ngcontent-%COMP%]{height:1.125rem;width:1.125rem}.btn-primary[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background-color:var(--color-cyan-500);color:var(--color-white);font-weight:600;border-radius:.5rem;border:none;cursor:pointer;transition:background-color .2s}.btn-primary[_ngcontent-%COMP%]:hover{background-color:var(--color-cyan-600)}.btn-primary.btn-disabled[_ngcontent-%COMP%], .btn-primary[_ngcontent-%COMP%]:disabled{background-color:var(--color-slate-600);cursor:not-allowed;opacity:.7}.btn-secondary[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background-color:var(--color-slate-600);color:var(--color-slate-300);font-weight:600;border-radius:.5rem;border:none;cursor:pointer;transition:background-color .2s}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:var(--color-slate-500)}"],changeDetection:0})}};var Rp=(t,e)=>e.id;function f2(t,e){t&1&&(h(0),y(1,"translate")),t&2&&N(" ",C(1,1,"school-admin.students.editTitle")," ")}function m2(t,e){t&1&&(h(0),y(1,"translate")),t&2&&N(" ",C(1,1,"school-admin.students.addTitle")," ")}function g2(t,e){if(t&1&&(m(0,"option",12),h(1),g()),t&2){let n=e.$implicit;A("value",n.id),p(),b(n.name)}}function h2(t,e){t&1&&(h(0),y(1,"translate")),t&2&&N(" ",C(1,1,"common.saveChanges")," ")}function v2(t,e){t&1&&(h(0),y(1,"translate")),t&2&&N(" ",C(1,1,"school-admin.students.addButton")," ")}function _2(t,e){if(t&1){let n=G();m(0,"button",18),M("click",function(){I(n);let i=E();return T(i.cancelEdit())}),h(1),y(2,"translate"),g()}t&2&&(p(),N(" ",C(2,1,"common.cancel")," "))}function y2(t,e){if(t&1){let n=G();m(0,"div",20)(1,"div")(2,"h4",27),h(3),g(),m(4,"p",28),h(5),g()(),k(6,"div",29),m(7,"div",30)(8,"button",31),M("click",function(){let i=I(n).$implicit,r=E(2);return T(r.sendInvite(i.parentPhone))}),h(9),y(10,"translate"),g(),m(11,"button",32),y(12,"translate"),M("click",function(){let i=I(n).$implicit,r=E(2);return T(r.startEdit(i))}),U(),m(13,"svg",33),k(14,"path",34)(15,"path",35),g()(),J(),m(16,"button",36),y(17,"translate"),M("click",function(){let i=I(n).$implicit,r=E(2);return T(r.deleteStudent(i))}),U(),m(18,"svg",33),k(19,"path",37),g()()()()}if(t&2){let n=e.$implicit;p(3),b(n.name),p(2),Ce("",n.class," | Parent: ",n.parentPhone),p(4),N(" ",C(10,6,"school-admin.students.invite")," "),p(2),A("title",C(12,8,"common.edit")),p(5),A("title",C(17,10,"common.delete"))}}function C2(t,e){if(t&1){let n=G();m(0,"tr",26)(1,"td",38),h(2),g(),m(3,"td",39),h(4),g(),m(5,"td",39),h(6),g(),m(7,"td",40)(8,"div",41)(9,"button",42),M("click",function(){let i=I(n).$implicit,r=E(2);return T(r.sendInvite(i.parentPhone))}),h(10),y(11,"translate"),g(),m(12,"button",32),y(13,"translate"),M("click",function(){let i=I(n).$implicit,r=E(2);return T(r.startEdit(i))}),U(),m(14,"svg",33),k(15,"path",34)(16,"path",35),g()(),J(),m(17,"button",36),y(18,"translate"),M("click",function(){let i=I(n).$implicit,r=E(2);return T(r.deleteStudent(i))}),U(),m(19,"svg",33),k(20,"path",37),g()()()()()}if(t&2){let n=e.$implicit;p(2),b(n.name),p(2),b(n.class),p(2),b(n.parentPhone),p(4),N(" ",C(11,6,"school-admin.students.invite")," "),p(2),A("title",C(13,8,"common.edit")),p(5),A("title",C(18,10,"common.delete"))}}function b2(t,e){if(t&1&&(m(0,"div",19),Z(1,y2,20,12,"div",20,Rp),g(),m(3,"div",21)(4,"table",22)(5,"thead",23)(6,"tr")(7,"th",24),h(8),y(9,"translate"),g(),m(10,"th",24),h(11),y(12,"translate"),g(),m(13,"th",24),h(14),y(15,"translate"),g(),m(16,"th",25),h(17),y(18,"translate"),g()()(),m(19,"tbody"),Z(20,C2,21,12,"tr",26,Rp),g()()()),t&2){let n=E();p(),K(n.students()),p(7),b(C(9,4,"school-admin.students.name")),p(3),b(C(12,6,"school-admin.students.class")),p(3),b(C(15,8,"school-admin.students.parentPhone")),p(3),b(C(18,10,"common.actions")),p(3),K(n.students())}}function S2(t,e){t&1&&(m(0,"div",17)(1,"p"),h(2),y(3,"translate"),g()()),t&2&&(p(2),b(C(3,1,"school-admin.students.noStudents")))}var Ba=class t{constructor(){this.translationService=w(X);this.dataService=w(Ee);this.toastService=w(ue);this.authService=w(de);this.studentForm=R(Ip);this.editingStudent=R(null);this.isStudentFormValid=H(()=>{let e=this.studentForm();return e.name&&e.parentPhone&&e.classId});this.students=H(()=>{let e=this.authService.currentUserSchool()?.id;return e?this.dataService.getStudentsBySchool(e):[]});this.classes=H(()=>{let e=this.authService.currentUserSchool()?.id;return e?this.dataService.getClassesBySchool(e):[]})}updateStudentForm(e,n){this.studentForm.update(o=>z(B({},o),{[e]:n}))}startEdit(e){this.editingStudent.set(e),this.studentForm.set({name:e.name,parentPhone:e.parentPhone||"",classId:e.classId})}cancelEdit(){this.editingStudent.set(null),this.studentForm.set(Ip)}async saveStudent(){let e=this.authService.currentUserSchool()?.id;if(!this.isStudentFormValid()||!e)return;let n=this.editingStudent(),o=this.studentForm(),i=this.dataService.getClassById(o.classId);if(!i){this.toastService.show("Selected class not found.","error");return}let r=i.name.match(/Grade \d+/),s=r?r[0]:"N/A";if(n){let l=z(B({},n),{name:o.name,parentPhone:o.parentPhone,classId:o.classId,class:i.name,grade:s});await this.dataService.updateStudent(l),this.toastService.show(this.translationService.translate("school-admin.students.toast.studentUpdated"),"success")}else{let l=this.dataService.users().find(d=>d.role==="parent"&&d.phone===o.parentPhone);if(!l){let d={name:`Parent (${o.name})`,email:`${o.parentPhone}@school-pickup.app`,phone:o.parentPhone,role:"parent",schoolId:e,password:"password"};await this.dataService.addUser(d),l=this.dataService.users().find(u=>u.role==="parent"&&u.phone===o.parentPhone)}if(!l){this.toastService.show("Failed to find or create a parent account.","error");return}await this.dataService.addStudent({name:o.name,parentPhone:o.parentPhone,classId:o.classId,class:i.name,grade:s,schoolId:e,parentId:l.id,photoUrl:`https://picsum.photos/seed/${o.name}/50/50`}),this.toastService.show(this.translationService.translate("school-admin.students.toast.studentAdded"),"success")}this.cancelEdit()}sendInvite(e){let n=this.translationService.translate("school-admin.students.toast.inviteSent",{phone:e});this.toastService.show(n,"info")}async deleteStudent(e){confirm(this.translationService.translate("school-admin.students.deleteConfirmation"))&&(await this.dataService.deleteStudent(e.id),this.toastService.show(this.translationService.translate("school-admin.students.toast.studentDeleted"),"success"))}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=ee({type:t,selectors:[["app-student-management"]],decls:44,vars:31,consts:[[1,"student-management-container"],[1,"section-title"],[1,"section-description"],[1,"form-and-list-grid"],[1,"add-edit-form-card"],[1,"form-card-title"],[1,"form-spacing",3,"submit"],[1,"form-label"],["type","text","name","studentName","required","",1,"form-input",3,"ngModelChange","ngModel"],["type","tel","name","parentPhone","required","",1,"form-input",3,"ngModelChange","ngModel"],["name","studentClass","required","",1,"form-select",3,"ngModelChange","ngModel"],["value","","disabled",""],[3,"value"],[1,"form-buttons-padding"],["type","submit",1,"btn-primary",3,"disabled"],["type","button",1,"btn-secondary"],[1,"student-list-wrapper"],[1,"no-students-message"],["type","button",1,"btn-secondary",3,"click"],[1,"student-cards-mobile"],[1,"student-card"],[1,"data-table-container"],[1,"data-table"],[1,"table-header"],["scope","col",1,"table-th"],["scope","col",1,"table-th","table-th-actions"],[1,"table-row"],[1,"student-name"],[1,"student-class-info"],[1,"card-divider"],[1,"card-actions"],[1,"btn-invite",3,"click"],[1,"action-button","edit-button",3,"click","title"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"icon-small"],["d","M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"],["fill-rule","evenodd","d","M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z","clip-rule","evenodd"],[1,"action-button","delete-button",3,"click","title"],["fill-rule","evenodd","d","M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule","evenodd"],[1,"table-td-primary"],[1,"table-td"],[1,"table-td","table-td-actions"],[1,"action-buttons-group"],[1,"btn-invite-small",3,"click"]],template:function(n,o){n&1&&(m(0,"div",0)(1,"h2",1),h(2),y(3,"translate"),g(),m(4,"p",2),h(5),y(6,"translate"),g(),m(7,"div",3)(8,"div",4)(9,"h3",5),O(10,f2,2,3)(11,m2,2,3),g(),m(12,"form",6),M("submit",function(){return o.saveStudent()}),m(13,"div")(14,"label",7),h(15),y(16,"translate"),g(),m(17,"input",8),M("ngModelChange",function(r){return o.updateStudentForm("name",r)}),g()(),m(18,"div")(19,"label",7),h(20),y(21,"translate"),g(),m(22,"input",9),M("ngModelChange",function(r){return o.updateStudentForm("parentPhone",r)}),g()(),m(23,"div")(24,"label",7),h(25),y(26,"translate"),g(),m(27,"select",10),M("ngModelChange",function(r){return o.updateStudentForm("classId",r)}),m(28,"option",11),h(29),y(30,"translate"),g(),Z(31,g2,2,2,"option",12,Rp),g()(),m(33,"div",13)(34,"button",14),O(35,h2,2,3)(36,v2,2,3),g(),O(37,_2,3,3,"button",15),g()()(),m(38,"div",16)(39,"h3",5),h(40),y(41,"translate"),g(),O(42,b2,22,12)(43,S2,4,3,"div",17),g()()()),n&2&&(p(2),b(C(3,17,"school-admin.students.title")),p(3),b(C(6,19,"school-admin.students.addTitle")),p(5),F(o.editingStudent()?10:11),p(5),b(C(16,21,"school-admin.students.name")),p(2),A("ngModel",o.studentForm().name),p(3),b(C(21,23,"school-admin.students.parentPhone")),p(2),A("ngModel",o.studentForm().parentPhone),p(3),b(C(26,25,"school-admin.students.class")),p(2),A("ngModel",o.studentForm().classId),p(2),b(C(30,27,"school-admin.students.selectClass")),p(2),K(o.classes()),p(3),j("btn-disabled",!o.isStudentFormValid()),A("disabled",!o.isStudentFormValid()),p(),F(o.editingStudent()?35:36),p(2),F(o.editingStudent()?37:-1),p(3),b(C(41,29,"school-admin.students.existing")),p(2),F(o.students().length>0?42:43))},dependencies:[Ae,Ve,rn,sn,Me,Et,De,Fe,Be,Ie,Re,oe],styles:["@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.student-management-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in .5s ease-out forwards;width:100%}.section-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:var(--color-cyan-400)}.section-description[_ngcontent-%COMP%]{color:var(--color-slate-400);margin-top:.25rem;margin-bottom:1.5rem}.form-and-list-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:2rem}@media(min-width:1024px){.form-and-list-grid[_ngcontent-%COMP%]{grid-template-columns:1fr 2fr}}.add-edit-form-card[_ngcontent-%COMP%]{background-color:#1e293b80;padding:1.5rem;border-radius:.75rem;border:1px solid var(--color-slate-700);height:fit-content}.form-card-title[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;margin-bottom:1.5rem}.form-spacing[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.form-label[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:500;color:var(--color-slate-300);margin-bottom:.5rem}.form-input[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{width:90%;background-color:var(--color-slate-800);border:1px solid var(--color-slate-700);border-radius:.5rem;padding:.75rem;outline:none;transition:all .2s ease-in-out}.form-input[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{border-color:var(--color-cyan-500);background-color:var(--color-slate-900);box-shadow:0 0 0 3px #06b6d44d}.form-buttons-padding[_ngcontent-%COMP%]{padding-top:.5rem;display:flex;flex-direction:column;gap:.5rem}.student-cards-mobile[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:1rem}@media(min-width:640px){.student-cards-mobile[_ngcontent-%COMP%]{display:none}}.student-card[_ngcontent-%COMP%]{background:linear-gradient(145deg,var(--color-slate-800),#151f32);border-radius:.75rem;border:1px solid var(--color-slate-700);padding:1rem;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}.student-name[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:var(--color-white)}.student-class-info[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-slate-400)}.card-divider[_ngcontent-%COMP%]{border-top:1px solid var(--color-slate-700);margin:.75rem 0}.card-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.75rem}.btn-invite[_ngcontent-%COMP%]{background-color:var(--color-green-500);color:var(--color-white);font-weight:600;padding:.5rem 1rem;border-radius:.5rem;border:none;cursor:pointer;transition:background-color .2s}.btn-invite[_ngcontent-%COMP%]:hover{background-color:var(--color-green-600)}.data-table-container[_ngcontent-%COMP%]{display:none;background-color:var(--color-slate-900);border-radius:.75rem;border:1px solid var(--color-slate-800);overflow:hidden}@media(min-width:640px){.data-table-container[_ngcontent-%COMP%]{display:block}}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table-header[_ngcontent-%COMP%]{background-color:var(--color-slate-800)}.table-th[_ngcontent-%COMP%]{padding:.75rem 1.5rem;font-size:.75rem;font-weight:600;color:var(--color-slate-300);text-transform:uppercase;letter-spacing:.05em;text-align:left}.table-row[_ngcontent-%COMP%]{border-bottom:1px solid var(--color-slate-800);transition:background-color .2s ease-in-out}.table-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.table-row[_ngcontent-%COMP%]:hover{background-color:var(--color-slate-800)}.table-td[_ngcontent-%COMP%]{padding:1rem 1.5rem;font-size:.875rem;color:var(--color-slate-400);vertical-align:middle}.table-td-primary[_ngcontent-%COMP%]{color:var(--color-white);font-weight:500}.table-th-actions[_ngcontent-%COMP%], .table-td-actions[_ngcontent-%COMP%]{text-align:right}.action-buttons-group[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.75rem}.btn-invite-small[_ngcontent-%COMP%]{background-color:var(--color-green-500);color:var(--color-white);font-weight:600;padding:.375rem .75rem;border-radius:.5rem;border:none;cursor:pointer;transition:background-color .2s;font-size:.875rem}.btn-invite-small[_ngcontent-%COMP%]:hover{background-color:var(--color-green-600)}.no-students-message[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:var(--color-slate-500);background-color:var(--color-slate-800);border-radius:.5rem}.action-button[_ngcontent-%COMP%]{padding:.5rem;background-color:transparent;border:1px solid var(--color-slate-700);border-radius:.5rem;transition:all .2s ease-in-out;cursor:pointer;display:flex;align-items:center;justify-content:center}.action-button[_ngcontent-%COMP%]:hover{background-color:var(--color-slate-700);border-color:var(--color-slate-600)}.action-button.edit-button[_ngcontent-%COMP%]{color:var(--color-cyan-400)}.action-button.delete-button[_ngcontent-%COMP%]{color:var(--color-white)}.icon-small[_ngcontent-%COMP%]{height:1.125rem;width:1.125rem}.btn-primary[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background-color:var(--color-cyan-500);color:var(--color-white);font-weight:600;border-radius:.5rem;border:none;cursor:pointer;transition:background-color .2s}.btn-primary[_ngcontent-%COMP%]:hover{background-color:var(--color-cyan-600)}.btn-primary.btn-disabled[_ngcontent-%COMP%], .btn-primary[_ngcontent-%COMP%]:disabled{background-color:var(--color-slate-600);cursor:not-allowed;opacity:.7}.btn-secondary[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background-color:var(--color-slate-600);color:var(--color-slate-300);font-weight:600;border-radius:.5rem;border:none;cursor:pointer;transition:background-color .2s}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:var(--color-slate-500)}"],changeDetection:0})}};var E2=(t,e)=>e.id;function M2(t,e){if(t&1){let n=G();m(0,"tr",17)(1,"td",18),h(2),g(),m(3,"td",19)(4,"button",20),y(5,"translate"),M("click",function(){let i=I(n).$implicit,r=E(2);return T(r.deleteClass(i))}),U(),m(6,"svg",21),k(7,"path",22),g()()()()}if(t&2){let n=e.$implicit;p(2),b(n.name),p(2),A("title",C(5,2,"common.delete"))}}function w2(t,e){if(t&1&&(m(0,"div",11)(1,"table",13)(2,"thead",14)(3,"tr")(4,"th",15),h(5),y(6,"translate"),g(),m(7,"th",16),h(8),y(9,"translate"),g()()(),m(10,"tbody"),Z(11,M2,8,4,"tr",17,E2),g()()()),t&2){let n=E();p(5),b(C(6,2,"school-admin.classes.name")),p(3),b(C(9,4,"common.actions")),p(3),K(n.classes())}}function x2(t,e){t&1&&(m(0,"div",12)(1,"p"),h(2),y(3,"translate"),g()()),t&2&&(p(2),b(C(3,1,"school-admin.classes.noClasses")))}var Ua=class t{constructor(){this.translationService=w(X);this.dataService=w(Ee);this.toastService=w(ue);this.authService=w(de);this.newClassName=R("");this.classes=H(()=>{let e=this.authService.currentUserSchool()?.id;return e?this.dataService.getClassesBySchool(e):[]})}async addClass(){let e=this.authService.currentUserSchool()?.id,n=this.newClassName();n&&e&&(await this.dataService.addClass(n,e),this.toastService.show(this.translationService.translate("school-admin.classes.toast.classAdded"),"success"),this.newClassName.set(""))}async deleteClass(e){confirm(this.translationService.translate("school-admin.classes.deleteConfirmation"))&&(await this.dataService.deleteClass(e.id),this.toastService.show(this.translationService.translate("school-admin.classes.toast.classDeleted"),"success"))}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=ee({type:t,selectors:[["app-class-management"]],decls:27,vars:23,consts:[[1,"class-management-container"],[1,"section-title"],[1,"section-description"],[1,"form-and-list-grid"],[1,"add-class-form-card"],[1,"form-card-title"],[1,"form-spacing",3,"submit"],[1,"form-label"],["type","text","name","className","required","",1,"form-input",3,"ngModelChange","ngModel"],["type","submit",1,"btn-primary",3,"disabled"],[1,"classes-list-wrapper"],[1,"classes-table-container"],[1,"no-classes-message"],[1,"data-table"],[1,"table-header"],["scope","col",1,"table-th"],["scope","col",1,"table-th","table-th-actions"],[1,"table-row"],[1,"table-td-primary"],[1,"table-td","table-td-actions"],[1,"action-button","delete-button",3,"click","title"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"icon-small"],["fill-rule","evenodd","d","M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule","evenodd"]],template:function(n,o){n&1&&(m(0,"div",0)(1,"h2",1),h(2),y(3,"translate"),g(),m(4,"p",2),h(5),y(6,"translate"),g(),m(7,"div",3)(8,"div",4)(9,"h3",5),h(10),y(11,"translate"),g(),m(12,"form",6),M("submit",function(){return o.addClass()}),m(13,"div")(14,"label",7),h(15),y(16,"translate"),g(),m(17,"input",8),M("ngModelChange",function(r){return o.newClassName.set(r)}),g()(),m(18,"button",9),h(19),y(20,"translate"),g()()(),m(21,"div",10)(22,"h3",5),h(23),y(24,"translate"),g(),O(25,w2,13,6,"div",11)(26,x2,4,3,"div",12),g()()()),n&2&&(p(2),b(C(3,11,"school-admin.classes.title")),p(3),b(C(6,13,"school-admin.classes.addTitle")),p(5),b(C(11,15,"school-admin.classes.addTitle")),p(5),b(C(16,17,"school-admin.classes.name")),p(2),A("ngModel",o.newClassName()),p(),j("btn-disabled",!o.newClassName()),A("disabled",!o.newClassName()),p(),N(" ",C(20,19,"school-admin.classes.addButton")," "),p(4),b(C(24,21,"school-admin.classes.existing")),p(2),F(o.classes().length>0?25:26))},dependencies:[Ae,Ve,Me,De,Fe,Be,Ie,Re,oe],styles:["@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.class-management-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in .5s ease-out forwards;width:100%}.section-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:var(--color-cyan-400)}.section-description[_ngcontent-%COMP%]{color:var(--color-slate-400);margin-top:.25rem;margin-bottom:1.5rem}.form-and-list-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:2rem}@media(min-width:1024px){.form-and-list-grid[_ngcontent-%COMP%]{grid-template-columns:1fr 2fr}}.add-class-form-card[_ngcontent-%COMP%]{background-color:#1e293b80;padding:1.5rem;border-radius:.75rem;border:1px solid var(--color-slate-700);height:fit-content}.form-card-title[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;margin-bottom:1.5rem}.form-spacing[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.form-label[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:500;color:var(--color-slate-300);margin-bottom:.5rem}.form-input[_ngcontent-%COMP%]{width:90%;background-color:var(--color-slate-800);border:1px solid var(--color-slate-700);border-radius:.5rem;padding:.75rem;outline:none;transition:all .2s ease-in-out}.form-input[_ngcontent-%COMP%]:focus{border-color:var(--color-cyan-500);background-color:var(--color-slate-900);box-shadow:0 0 0 3px #06b6d44d}.classes-table-container[_ngcontent-%COMP%]{background-color:var(--color-slate-900);border-radius:.75rem;border:1px solid var(--color-slate-800);overflow:hidden}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table-header[_ngcontent-%COMP%]{background-color:var(--color-slate-800)}.table-th[_ngcontent-%COMP%]{padding:.75rem 1.5rem;font-size:.75rem;font-weight:600;color:var(--color-slate-300);text-transform:uppercase;letter-spacing:.05em;text-align:left}.table-row[_ngcontent-%COMP%]{border-bottom:1px solid var(--color-slate-800);transition:background-color .2s ease-in-out}.table-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.table-row[_ngcontent-%COMP%]:hover{background-color:var(--color-slate-800)}.table-td-primary[_ngcontent-%COMP%]{padding:1rem 1.5rem;font-size:.875rem;color:var(--color-white);font-weight:500;vertical-align:middle}.table-th-actions[_ngcontent-%COMP%], .table-td-actions[_ngcontent-%COMP%]{text-align:right}.no-classes-message[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:var(--color-slate-500);background-color:var(--color-slate-800);border-radius:.5rem}.btn-primary[_ngcontent-%COMP%]{width:100%;padding:.75rem 1.5rem;background-color:var(--color-cyan-500);color:var(--color-white);font-weight:600;border-radius:.5rem;border:none;cursor:pointer;transition:background-color .2s}.btn-primary[_ngcontent-%COMP%]:hover{background-color:var(--color-cyan-600)}.btn-primary.btn-disabled[_ngcontent-%COMP%], .btn-primary[_ngcontent-%COMP%]:disabled{background-color:var(--color-slate-600);cursor:not-allowed;opacity:.7}.action-button[_ngcontent-%COMP%]{padding:.5rem;background-color:transparent;border:1px solid var(--color-slate-700);border-radius:.5rem;transition:all .2s ease-in-out;cursor:pointer;display:flex;align-items:center;justify-content:center}.action-button[_ngcontent-%COMP%]:hover{background-color:var(--color-slate-700);border-color:var(--color-slate-600)}.action-button.delete-button[_ngcontent-%COMP%]{color:var(--color-red-400)}.icon-small[_ngcontent-%COMP%]{height:1.125rem;width:1.125rem}"],changeDetection:0})}};var I2=["mapContainer"],T2=["searchBox"],P2=(t,e)=>e.name;function D2(t,e){t&1&&(m(0,"div",25),k(1,"div",28),m(2,"span"),h(3),y(4,"translate"),g()()),t&2&&(p(3),b(C(4,1,"common.processing")))}function A2(t,e){t&1&&(m(0,"span"),h(1),y(2,"translate"),g()),t&2&&(p(),b(C(2,1,"school-admin.settings.centerButton")))}function N2(t,e){if(t&1&&(m(0,"p",27),h(1),g()),t&2){let n=E(2);p(),b(n.locationError())}}function k2(t,e){if(t&1){let n=G();m(0,"div",5),k(1,"div",19,0)(3,"div",20,1),m(5,"p",21),h(6),y(7,"translate"),g(),k(8,"div",22),m(9,"div",23)(10,"button",24),M("click",function(){I(n);let i=E();return T(i.centerOnMyLocation())}),O(11,D2,5,3,"div",25)(12,A2,3,3,"span"),g(),m(13,"button",26),M("click",function(){I(n);let i=E();return T(i.saveLocation())}),m(14,"span"),h(15),y(16,"translate"),g()()(),O(17,N2,2,1,"p",27),g()}if(t&2){let n=E();p(6),b(C(7,10,"school-admin.settings.markerInstruction")),p(4),j("btn-disabled",n.isLoadingGeolocation()),A("disabled",n.isLoadingGeolocation()),p(),F(n.isLoadingGeolocation()?11:12),p(2),j("btn-disabled",n.isSaveDisabled()),A("disabled",n.isSaveDisabled()),p(2),b(C(16,12,"school-admin.settings.saveButton")),p(2),F(n.locationError()?17:-1)}}function R2(t,e){t&1&&(m(0,"div",6)(1,"div",29),U(),m(2,"svg",30),k(3,"path",31),g(),J(),m(4,"h3",32),h(5),y(6,"translate"),g()(),m(7,"p",33),h(8),y(9,"translate"),g()()),t&2&&(p(5),b(C(6,2,"school-admin.settings.mapsNotConfigured.title")),p(3),N(" ",C(9,4,"school-admin.settings.mapsNotConfigured.description")," "))}function O2(t,e){if(t&1){let n=G();m(0,"tr",35)(1,"td",36),h(2),y(3,"translate"),g(),m(4,"td",37),h(5),y(6,"translate"),g(),m(7,"td",38)(8,"button",39),y(9,"translate"),M("click",function(){let i=I(n).$implicit,r=E(2);return T(r.deleteZone(i.name))}),U(),m(10,"svg",40),k(11,"path",41),g()()()()}if(t&2){let n=e.$implicit;p(2),Ce("",C(3,5,"schoolSupervisor.liveMonitor.zone")," ",n.name),p(3),Ce("",n.spots," ",C(6,7,"common.spot"),"s"),p(3),A("title",C(9,9,"common.delete"))}}function F2(t,e){if(t&1&&(m(0,"div",17)(1,"table",34)(2,"tbody"),Z(3,O2,12,11,"tr",35,P2),g()()()),t&2){let n=E();p(3),K(n.pickupZones())}}function V2(t,e){t&1&&(m(0,"div",18)(1,"p"),h(2),y(3,"translate"),g()()),t&2&&(p(2),b(C(3,1,"school-admin.settings.pickupZones.noZones")))}var Ha=class t{constructor(){this.translationService=w(X);this.toastService=w(ue);this.authService=w(de);this.dataService=w(Ee);this.isMapsConfigured=R(!0);this.mapAuthFailed=R(!1);this.isLoadingGeolocation=R(!1);this.locationError=R("");this.map=null;this.marker=null;this.selectedLocation=R(null);this.newZoneName=R("");this.newZoneSpots=R(5);this.currentSchool=H(()=>this.authService.currentUserSchool());this.pickupZones=H(()=>this.currentSchool()?.pickupZones??[]);this.isZoneFormValid=H(()=>this.newZoneName().trim()!==""&&this.newZoneSpots()>0);this.schoolLocation=H(()=>this.authService.currentUserSchool()?.location);this.isSaveDisabled=H(()=>{let e=this.selectedLocation(),n=this.schoolLocation();return e?n?e.lat===n.lat&&e.lon===n.lon:!1:!0})}async addZone(){if(!this.isZoneFormValid())return;let e=this.currentSchool();if(!e)return;let n={name:this.newZoneName().trim().toUpperCase(),spots:this.newZoneSpots()},o=[...this.pickupZones(),n];await this.dataService.updateSchoolPickupZones(e.id,o),this.toastService.show(this.translationService.translate("school-admin.settings.pickupZones.toast.zoneAdded"),"success"),this.newZoneName.set(""),this.newZoneSpots.set(5)}async deleteZone(e){if(!confirm(this.translationService.translate("school-admin.settings.pickupZones.deleteConfirmation")))return;let n=this.currentSchool();if(!n)return;let o=this.pickupZones().filter(i=>i.name!==e);await this.dataService.updateSchoolPickupZones(n.id,o),this.toastService.show(this.translationService.translate("school-admin.settings.pickupZones.toast.zoneDeleted"),"success")}ngAfterViewInit(){setTimeout(()=>this.initMap(),0)}ngOnDestroy(){this.map&&this.map.remove()}initMap(){if(!this.mapContainer||!this.searchBox)return;let e=this.authService.currentUserSchool()?.location??{lat:24.7136,lon:46.6753};this.selectedLocation.set(e),this.map=L.map(this.mapContainer.nativeElement).setView([e.lat,e.lon],15),L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(this.map),this.marker=L.marker([e.lat,e.lon],{draggable:!0}).addTo(this.map),this.marker.on("dragend",o=>{let i=o.target.getLatLng();this.selectedLocation.set({lat:i.lat,lon:i.lng})});let n=new GeoSearch.GeoSearchControl({provider:new GeoSearch.OpenStreetMapProvider,style:"bar",showMarker:!1,searchLabel:this.translationService.translate("school-admin.settings.searchPlaceholder")});this.map.addControl(n),this.map.on("geosearch/showlocation",o=>{let{x:i,y:r}=o.location,s={lat:r,lng:i};this.marker&&this.marker.setLatLng(s),this.map.panTo(s),this.selectedLocation.set({lat:r,lon:i})})}async centerOnMyLocation(){this.isLoadingGeolocation.set(!0),this.locationError.set("");try{let e=await this.getGeolocation(),n={lat:e.latitude,lon:e.longitude};this.map?.setView(n,16),this.marker?.setLatLng(n),this.selectedLocation.set(n)}catch(e){this.locationError.set(e.message)}finally{this.isLoadingGeolocation.set(!1)}}async saveLocation(){let e=this.authService.currentUserSchool()?.id,n=this.selectedLocation();!e||!n||(await this.dataService.updateSchoolLocation(e,n.lat,n.lon),this.toastService.show(this.translationService.translate("school-admin.settings.toast.locationSet"),"success"))}getGeolocation(){return new Promise((e,n)=>{if(!navigator.geolocation){n(new Error(this.translationService.translate("parent.errors.geoNotSupported")));return}navigator.geolocation.getCurrentPosition(o=>e(o.coords),o=>{let i="";switch(o.code){case o.PERMISSION_DENIED:i=this.translationService.translate("parent.errors.geoPermissionDenied");break;case o.POSITION_UNAVAILABLE:i=this.translationService.translate("parent.errors.geoUnavailable");break;case o.TIMEOUT:i=this.translationService.translate("parent.errors.geoTimeout");break;default:i=this.translationService.translate("parent.errors.geoUnknown");break}n(new Error(i))})})}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=ee({type:t,selectors:[["app-school-settings"]],viewQuery:function(n,o){if(n&1&&(Lt(I2,5),Lt(T2,5)),n&2){let i;Bt(i=Ut())&&(o.mapContainer=i.first),Bt(i=Ut())&&(o.searchBox=i.first)}},decls:41,vars:34,consts:[["searchBox",""],["mapContainer",""],[1,"school-settings-container"],[1,"section-title"],[1,"section-description"],[1,"form-card"],[1,"maps-not-configured-card"],[1,"card-divider-page"],[1,"form-and-list-grid"],[1,"add-zone-form-card"],[1,"form-card-title"],[1,"form-spacing",3,"submit"],[1,"form-label"],["type","text","name","zoneName","required","",1,"form-input",3,"ngModelChange","ngModel"],["type","number","name","spotCount","required","","min","1",1,"form-input",3,"ngModelChange","ngModel"],["type","submit",1,"btn-primary",3,"disabled"],[1,"zones-list-wrapper"],[1,"zones-table-container"],[1,"no-zones-message"],[2,"display","none"],[1,"map-container-host"],[1,"marker-instruction"],[1,"card-divider"],[1,"btn-group"],[1,"btn-geolocation",3,"click","disabled"],[1,"loading-state-content"],[1,"btn-save-location",3,"click","disabled"],[1,"error-message"],[1,"loading-spinner"],[1,"card-header-icon-group"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"card-icon"],["stroke-linecap","round","stroke-linejoin","round","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"card-title"],[1,"card-description"],[1,"data-table"],[1,"table-row"],[1,"table-td-primary"],[1,"table-td"],[1,"table-td","table-td-actions"],[1,"action-button","delete-button",3,"click","title"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"icon-small"],["fill-rule","evenodd","d","M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule","evenodd"]],template:function(n,o){n&1&&(m(0,"div",2)(1,"h2",3),h(2),y(3,"translate"),g(),m(4,"p",4),h(5),y(6,"translate"),g(),O(7,k2,18,14,"div",5)(8,R2,10,6,"div",6),k(9,"div",7),m(10,"h3",3),h(11),y(12,"translate"),g(),m(13,"p",4),h(14),y(15,"translate"),g(),m(16,"div",8)(17,"div",9)(18,"h4",10),h(19),y(20,"translate"),g(),m(21,"form",11),M("submit",function(){return o.addZone()}),m(22,"div")(23,"label",12),h(24),y(25,"translate"),g(),m(26,"input",13),M("ngModelChange",function(r){return o.newZoneName.set(r)}),g()(),m(27,"div")(28,"label",12),h(29),y(30,"translate"),g(),m(31,"input",14),M("ngModelChange",function(r){return o.newZoneSpots.set(r)}),g()(),m(32,"button",15),h(33),y(34,"translate"),g()()(),m(35,"div",16)(36,"h4",10),h(37),y(38,"translate"),g(),O(39,F2,5,0,"div",17)(40,V2,4,3,"div",18),g()()()),n&2&&(p(2),b(C(3,16,"school-admin.settings.title")),p(3),b(C(6,18,"school-admin.settings.location")),p(2),F(o.isMapsConfigured()&&!o.mapAuthFailed()?7:8),p(4),b(C(12,20,"school-admin.settings.pickupZones.title")),p(3),b(C(15,22,"school-admin.settings.pickupZones.description")),p(5),b(C(20,24,"school-admin.settings.pickupZones.addZone")),p(5),b(C(25,26,"school-admin.settings.pickupZones.zoneName")),p(2),A("ngModel",o.newZoneName()),p(3),b(C(30,28,"school-admin.settings.pickupZones.spotCount")),p(2),A("ngModel",o.newZoneSpots()),p(),j("btn-disabled",!o.isZoneFormValid()),A("disabled",!o.isZoneFormValid()),p(),N(" ",C(34,30,"school-admin.settings.pickupZones.addButton")," "),p(4),b(C(38,32,"school-admin.settings.pickupZones.existing")),p(2),F(o.pickupZones().length>0?39:40))},dependencies:[Ae,Ve,Me,Iu,De,Fe,Be,Tu,Ie,Re,oe],styles:["@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.school-settings-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in .5s ease-out forwards;width:100%}.section-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:var(--color-cyan-400);margin-bottom:.25rem}.section-description[_ngcontent-%COMP%]{color:var(--color-slate-400);margin-bottom:1.5rem}.form-card[_ngcontent-%COMP%]{background-color:#1e293b80;padding:1.5rem;border-radius:.5rem;border:1px solid var(--color-slate-700);display:flex;flex-direction:column;gap:1rem}.form-input[_ngcontent-%COMP%]{width:90%;background-color:var(--color-slate-700);border:1px solid var(--color-slate-600);border-radius:.5rem;padding:.75rem;outline:none;transition:all .2s ease-in-out}.form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-cyan-500);box-shadow:0 0 0 2px var(--color-cyan-500)}.map-container-host[_ngcontent-%COMP%]{width:100%;height:18rem;background-color:var(--color-slate-900);border-radius:.5rem;border:1px solid var(--color-slate-700)}.marker-instruction[_ngcontent-%COMP%]{text-align:center;font-size:.875rem;color:var(--color-slate-500)}.card-divider[_ngcontent-%COMP%]{border-top:1px solid var(--color-slate-700)}.card-divider-page[_ngcontent-%COMP%]{border-top:1px solid var(--color-slate-700);margin:2rem 0}.btn-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;gap:1rem}@media(min-width:640px){.btn-group[_ngcontent-%COMP%]{flex-direction:row}}.btn-geolocation[_ngcontent-%COMP%]{width:100%;flex-grow:1;background-color:var(--color-slate-700);color:var(--color-white);font-weight:700;padding:.75rem 1.5rem;border-radius:.5rem;transition:all .3s ease-in-out;border:none;cursor:pointer}@media(min-width:640px){.btn-geolocation[_ngcontent-%COMP%]{width:auto}}.btn-geolocation[_ngcontent-%COMP%]:hover{background-color:var(--color-slate-600)}.btn-save-location[_ngcontent-%COMP%]{width:100%;flex-grow:1;background-color:var(--color-cyan-500);color:var(--color-white);font-weight:700;padding:.75rem 2rem;border-radius:.5rem;transition:all .3s ease-in-out;transform:scale(1);box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d;box-shadow:0 0 0 0 var(--color-cyan-500-20);border:none;cursor:pointer}@media(min-width:640px){.btn-save-location[_ngcontent-%COMP%]{width:auto}}.btn-save-location[_ngcontent-%COMP%]:hover{background-color:var(--color-cyan-600);transform:scale(1.05)}.btn-disabled[_ngcontent-%COMP%], .btn-geolocation[_ngcontent-%COMP%]:disabled, .btn-save-location[_ngcontent-%COMP%]:disabled{background-color:var(--color-slate-600);cursor:not-allowed;opacity:.7;transform:none;box-shadow:none}.loading-state-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem}.loading-spinner[_ngcontent-%COMP%]{width:1.25rem;height:1.25rem;border:2px solid var(--color-slate-400);border-top-color:var(--color-white);border-radius:9999px;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.error-message[_ngcontent-%COMP%]{color:var(--color-red-400);text-align:center;margin-top:.5rem;font-weight:600}.maps-not-configured-card[_ngcontent-%COMP%]{background-color:var(--color-amber-900-40);padding:1.5rem;border-radius:.5rem;border:1px solid var(--color-amber-500-30);text-align:center}.card-header-icon-group[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:.75rem;color:var(--color-amber-300)}.card-icon[_ngcontent-%COMP%]{height:1.5rem;width:1.5rem}.card-title[_ngcontent-%COMP%]{font-weight:700;font-size:1.125rem}.card-description[_ngcontent-%COMP%]{color:var(--color-amber-400-80);margin-top:.5rem;font-size:.875rem}.form-and-list-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:2rem}@media(min-width:1024px){.form-and-list-grid[_ngcontent-%COMP%]{grid-template-columns:1fr 2fr}}.add-zone-form-card[_ngcontent-%COMP%], .zones-list-wrapper[_ngcontent-%COMP%]{background-color:#1e293b80;padding:1.5rem;border-radius:.75rem;border:1px solid var(--color-slate-700);height:fit-content}.form-card-title[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;margin-bottom:1.5rem}.form-spacing[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.form-label[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:500;color:var(--color-slate-300);margin-bottom:.5rem}.btn-primary[_ngcontent-%COMP%]{width:100%;padding:.75rem 1.5rem;background-color:var(--color-cyan-500);color:var(--color-white);font-weight:600;border-radius:.5rem;border:none;cursor:pointer;transition:background-color .2s}.btn-primary[_ngcontent-%COMP%]:hover{background-color:var(--color-cyan-600)}.btn-primary.btn-disabled[_ngcontent-%COMP%], .btn-primary[_ngcontent-%COMP%]:disabled{background-color:var(--color-slate-600);cursor:not-allowed;opacity:.7}.zones-table-container[_ngcontent-%COMP%]{overflow:hidden}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table-row[_ngcontent-%COMP%]{border-bottom:1px solid var(--color-slate-800)}.table-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.table-td[_ngcontent-%COMP%]{padding:1rem 0;font-size:.875rem;color:var(--color-slate-400);vertical-align:middle}.table-td-primary[_ngcontent-%COMP%]{color:var(--color-white);font-weight:500}.table-td-actions[_ngcontent-%COMP%]{text-align:right}.action-button[_ngcontent-%COMP%]{padding:.5rem;background-color:transparent;border:1px solid var(--color-slate-700);border-radius:.5rem;transition:all .2s ease-in-out;cursor:pointer;display:flex;align-items:center;justify-content:center}.action-button[_ngcontent-%COMP%]:hover{background-color:var(--color-slate-700);border-color:var(--color-slate-600)}.action-button.delete-button[_ngcontent-%COMP%]{color:var(--color-red-400)}.icon-small[_ngcontent-%COMP%]{height:1.125rem;width:1.125rem}.no-zones-message[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:var(--color-slate-500)}"],changeDetection:0})}};var L2=["barChartContainer"],B2=["donutChartContainer"];function U2(t,e){t&1&&(x(0,"div",14),h(1),y(2,"translate"),P()),t&2&&(p(),b(C(2,1,"analytics.noData")))}function H2(t,e){t&1&&(x(0,"div",14),h(1),y(2,"translate"),P()),t&2&&(p(),b(C(2,1,"analytics.noData")))}var Ga=class t{constructor(){this.pickupStateService=w(Ke);this.authService=w(de);this.translationService=w(X);this.viewInitialized=R(!1);this.allSchoolRequests=H(()=>{let e=this.authService.currentUserSchool()?.id,n=this.pickupStateService.allRequests();return e?n.filter(o=>o.schoolId===e):[]});this.completedToday=H(()=>{let e=new Date().toISOString().slice(0,10);return this.allSchoolRequests().filter(n=>n.status==="completed"&&n.completed_at?.startsWith(e))});this.activeToday=H(()=>this.pickupStateService.activeRequests());this.absencesToday=H(()=>{let e=new Date;e.setHours(0,0,0,0);let n=e.toISOString().split("T")[0];return this.pickupStateService.schoolAbsenceReports().filter(o=>o.date===n)});this.totalPickups=H(()=>this.completedToday().length);this.totalAbsences=H(()=>this.absencesToday().length);this.avgPickupTime=H(()=>{let e=this.completedToday();if(e.length===0)return 0;let n=e.reduce((o,i)=>{if(i.created_at&&i.completed_at){let r=new Date(i.created_at).getTime(),s=new Date(i.completed_at).getTime();return o+(s-r)/6e4}return o},0);return Math.round(n/e.length)});this.peakHour=H(()=>{let e=this.completedToday();if(e.length===0)return"N/A";let o=e.map(d=>new Date(d.completed_at).getHours()).reduce((d,u)=>{let f=String(u);return d[f]=(d[f]||0)+1,d},{}),i=Object.entries(o).sort((d,u)=>Number(u[1])-Number(d[1]))[0],r=parseInt(i[0],10),s=r>=12?"PM":"AM";return`${r%12||12} ${s}`});this.pickupsByHourData=H(()=>{let e=Array.from({length:10},(n,o)=>({hour:8+o,count:0}));return this.completedToday().forEach(n=>{let o=new Date(n.completed_at).getHours(),i=e.find(r=>r.hour===o);i&&i.count++}),e.map(n=>{let o=n.hour>=12?"PM":"AM";return{label:`${n.hour%12||12}${o}`,value:n.count}})});this.statusDistributionData=H(()=>{let e=this.activeToday().reduce((n,o)=>(n[o.status]=(n[o.status]||0)+1,n),{});return Object.entries(e).map(([n,o])=>({label:this.translationService.translate(`statuses.${n}`),value:o}))});We(()=>{this.viewInitialized()&&this.drawCharts()})}ngAfterViewInit(){this.viewInitialized.set(!0),this.setupResizeObserver()}ngOnDestroy(){this.resizeObserver?.disconnect()}setupResizeObserver(){this.resizeObserver=new ResizeObserver(()=>{this.drawCharts()}),this.barChartContainer&&this.resizeObserver.observe(this.barChartContainer.nativeElement),this.donutChartContainer&&this.resizeObserver.observe(this.donutChartContainer.nativeElement)}drawCharts(){this.totalPickups()>0&&this.drawBarChart(this.pickupsByHourData()),this.activeToday().length>0&&this.drawDonutChart(this.statusDistributionData())}drawBarChart(e){let n=this.barChartContainer.nativeElement;d3.select(n).select("svg").remove();let o={top:20,right:20,bottom:30,left:40},i=n.clientWidth-o.left-o.right,r=n.clientHeight-o.top-o.bottom,s=d3.select(n).append("svg").attr("width","100%").attr("height","100%").attr("viewBox",`0 0 ${n.clientWidth} ${n.clientHeight}`).append("g").attr("transform",`translate(${o.left},${o.top})`),l=d3.scaleBand().range([0,i]).padding(.4).domain(e.map(f=>f.label)),d=d3.scaleLinear().range([r,0]).domain([0,d3.max(e,f=>f.value)||10]),u=d3.select("body").append("div").attr("class","bar-tooltip");s.selectAll(".bar").data(e).enter().append("rect").attr("class","bar").attr("x",f=>l(f.label)).attr("width",l.bandwidth()).attr("y",f=>d(f.value)).attr("height",f=>r-d(f.value)).attr("fill","var(--color-cyan-500)").attr("rx",4).on("mouseover",(f,v)=>{u.style("opacity",1).html(`${v.label}: ${v.value} pickups`)}).on("mousemove",f=>{u.style("left",`${f.pageX+10}px`).style("top",`${f.pageY-28}px`)}).on("mouseout",()=>{u.style("opacity",0)}),s.append("g").attr("transform",`translate(0,${r})`).call(d3.axisBottom(l)),s.append("g").call(d3.axisLeft(d).ticks(5))}drawDonutChart(e){let n=this.donutChartContainer.nativeElement;d3.select(n).select("svg").remove();let o=n.clientWidth,i=n.clientHeight,r=Math.min(o,i)/2-20,s=d3.select(n).append("svg").attr("width","100%").attr("height","100%").attr("viewBox",`0 0 ${o} ${i}`).append("g").attr("transform",`translate(${o/2},${i/2})`),l=d3.scaleOrdinal().domain(e.map(_=>_.label)).range(["var(--color-amber-400)","var(--color-sky-400)","var(--color-green-400)"]),u=d3.pie().value(_=>_.value)(e),f=d3.arc().innerRadius(r*.5).outerRadius(r*.8),v=d3.select("body").append("div").attr("class","donut-tooltip");s.selectAll("path").data(u).enter().append("path").attr("d",f).attr("fill",_=>l(_.data.label)).attr("stroke","var(--color-slate-800)").style("stroke-width","2px").on("mouseover",(_,S)=>{v.style("opacity",1).html(`${S.data.label}: ${S.data.value}`)}).on("mousemove",_=>{v.style("left",`${_.pageX+10}px`).style("top",`${_.pageY-28}px`)}).on("mouseout",()=>{v.style("opacity",0)})}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=ee({type:t,selectors:[["app-analytics-dashboard"]],viewQuery:function(n,o){if(n&1&&(Lt(L2,5),Lt(B2,5)),n&2){let i;Bt(i=Ut())&&(o.barChartContainer=i.first),Bt(i=Ut())&&(o.donutChartContainer=i.first)}},decls:51,vars:33,consts:[["barChartContainer",""],["donutChartContainer",""],[1,"analytics-container"],[1,"section-title"],[1,"section-description"],[1,"stats-grid"],[1,"stat-card"],[1,"stat-label"],[1,"stat-value"],[1,"stat-unit"],[1,"charts-grid"],[1,"chart-card"],[1,"chart-title"],[1,"chart-container","bar-chart-container"],[1,"no-data-message"],[1,"chart-container","donut-chart-container"]],template:function(n,o){n&1&&(x(0,"div",2)(1,"header")(2,"h2",3),h(3),y(4,"translate"),P(),x(5,"p",4),h(6),y(7,"translate"),P()(),x(8,"div",5)(9,"div",6)(10,"p",7),h(11),y(12,"translate"),P(),x(13,"p",8),h(14),P()(),x(15,"div",6)(16,"p",7),h(17),y(18,"translate"),P(),x(19,"p",8),h(20),x(21,"span",9),h(22),y(23,"translate"),P()()(),x(24,"div",6)(25,"p",7),h(26),y(27,"translate"),P(),x(28,"p",8),h(29),P()(),x(30,"div",6)(31,"p",7),h(32),y(33,"translate"),P(),x(34,"p",8),h(35),P()()(),x(36,"div",10)(37,"div",11)(38,"h3",12),h(39),y(40,"translate"),P(),x(41,"div",13,0),O(43,U2,3,3,"div",14),P()(),x(44,"div",11)(45,"h3",12),h(46),y(47,"translate"),P(),x(48,"div",15,1),O(50,H2,3,3,"div",14),P()()()()),n&2&&(p(3),b(C(4,15,"analytics.title")),p(3),b(C(7,17,"analytics.description")),p(5),b(C(12,19,"analytics.totalPickups")),p(3),b(o.totalPickups()),p(3),b(C(18,21,"analytics.avgTime")),p(3),N(" ",o.avgPickupTime()," "),p(2),b(C(23,23,"analytics.minutes")),p(4),b(C(27,25,"analytics.peakHour")),p(3),b(o.peakHour()),p(3),b(C(33,27,"analytics.absencesToday")),p(3),b(o.totalAbsences()),p(4),b(C(40,29,"analytics.pickupsByHour")),p(4),F(o.totalPickups()===0?43:-1),p(3),b(C(47,31,"analytics.statusDistribution")),p(4),F(o.activeToday().length===0?50:-1))},dependencies:[oe],styles:["@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.analytics-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in .5s ease-out forwards;width:100%}.section-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:var(--color-white)}.section-description[_ngcontent-%COMP%]{color:var(--color-slate-400);margin-top:.25rem;margin-bottom:1.5rem}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem;margin-bottom:2rem}@media(min-width:1024px){.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}}.stat-card[_ngcontent-%COMP%]{background-color:var(--color-slate-800);border:1px solid var(--color-slate-700);border-radius:.75rem;padding:1rem 1.5rem;display:flex;flex-direction:column;justify-content:space-between}.stat-label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--color-slate-400);margin-bottom:.5rem}.stat-value[_ngcontent-%COMP%]{font-size:2.25rem;font-weight:800;color:var(--color-white);line-height:1}.stat-unit[_ngcontent-%COMP%]{font-size:1rem;font-weight:500;color:var(--color-slate-500);margin-left:.25rem}.charts-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:2rem}@media(min-width:1024px){.charts-grid[_ngcontent-%COMP%]{grid-template-columns:2fr 1fr}}.chart-card[_ngcontent-%COMP%]{background-color:var(--color-slate-800);border:1px solid var(--color-slate-700);border-radius:.75rem;padding:1.5rem}.chart-title[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:var(--color-slate-200);margin-bottom:1.5rem}.chart-container[_ngcontent-%COMP%]{width:100%;height:20rem}.bar-chart-container[_ngcontent-%COMP%]   :is(text[_ngcontent-%COMP%]), .donut-chart-container[_ngcontent-%COMP%]   :is(text[_ngcontent-%COMP%]){font-family:Inter,sans-serif;fill:var(--color-slate-400)}.bar-chart-container[_ngcontent-%COMP%]   :is(.domain[_ngcontent-%COMP%]), .bar-chart-container[_ngcontent-%COMP%]   :is(.tick[_ngcontent-%COMP%]   line[_ngcontent-%COMP%]){stroke:var(--color-slate-600)}.bar-tooltip[_ngcontent-%COMP%], .donut-tooltip[_ngcontent-%COMP%]{position:absolute;background-color:var(--color-slate-950);color:var(--color-white);padding:.5rem .75rem;border-radius:.5rem;border:1px solid var(--color-slate-700);font-size:.875rem;pointer-events:none;opacity:0;transition:opacity .2s}.no-data-message[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%;color:var(--color-slate-500);font-style:italic}"],changeDetection:0})}};var Op=(t,e)=>e.id;function G2(t,e){t&1&&(h(0),y(1,"translate")),t&2&&N(" ",C(1,1,"busManagement.editTitle")," ")}function q2(t,e){t&1&&(h(0),y(1,"translate")),t&2&&N(" ",C(1,1,"busManagement.addTitle")," ")}function $2(t,e){t&1&&(h(0),y(1,"translate")),t&2&&N(" ",C(1,1,"common.saveChanges")," ")}function z2(t,e){t&1&&(h(0),y(1,"translate")),t&2&&N(" ",C(1,1,"busManagement.addButton")," ")}function W2(t,e){if(t&1){let n=G();m(0,"button",16),M("click",function(){I(n);let i=E();return T(i.cancelEdit())}),h(1),y(2,"translate"),g()}t&2&&(p(),N(" ",C(2,1,"common.cancel")," "))}function Y2(t,e){if(t&1){let n=G();m(0,"div",18)(1,"div",25)(2,"h4",26),h(3),g(),m(4,"p",27),h(5),g()(),k(6,"div",28),m(7,"div",29)(8,"span",30),h(9),y(10,"translate"),g(),m(11,"span",31),h(12),g()(),k(13,"div",28),m(14,"div",32)(15,"button",33),y(16,"translate"),M("click",function(){let i=I(n).$implicit,r=E(2);return T(r.openStudentAssignmentModal(i))}),U(),m(17,"svg",34),k(18,"path",35),g()(),J(),m(19,"button",36),y(20,"translate"),M("click",function(){let i=I(n).$implicit,r=E(2);return T(r.startEdit(i))}),U(),m(21,"svg",34),k(22,"path",37)(23,"path",38),g()(),J(),m(24,"button",39),y(25,"translate"),M("click",function(){let i=I(n).$implicit,r=E(2);return T(r.deleteBus(i))}),U(),m(26,"svg",34),k(27,"path",40),g()()()()}if(t&2){let n=e.$implicit;p(3),b(n.busNumber),p(2),b(n.driverName),p(4),N("",C(10,7,"busManagement.assignedStudents"),":"),p(3),b(n.studentIds.length),p(3),A("title",C(16,9,"busManagement.assignStudents")),p(4),A("title",C(20,11,"common.edit")),p(5),A("title",C(25,13,"common.delete"))}}function J2(t,e){if(t&1){let n=G();m(0,"tr",24)(1,"td",41),h(2),g(),m(3,"td",42),h(4),g(),m(5,"td",42),h(6),g(),m(7,"td",43)(8,"div",44)(9,"button",33),y(10,"translate"),M("click",function(){let i=I(n).$implicit,r=E(2);return T(r.openStudentAssignmentModal(i))}),U(),m(11,"svg",34),k(12,"path",35),g()(),J(),m(13,"button",36),y(14,"translate"),M("click",function(){let i=I(n).$implicit,r=E(2);return T(r.startEdit(i))}),U(),m(15,"svg",34),k(16,"path",37)(17,"path",38),g()(),J(),m(18,"button",39),y(19,"translate"),M("click",function(){let i=I(n).$implicit,r=E(2);return T(r.deleteBus(i))}),U(),m(20,"svg",34),k(21,"path",40),g()()()()()}if(t&2){let n=e.$implicit;p(2),b(n.busNumber),p(2),b(n.driverName),p(2),b(n.studentIds.length),p(3),A("title",C(10,6,"busManagement.assignStudents")),p(4),A("title",C(14,8,"common.edit")),p(5),A("title",C(19,10,"common.delete"))}}function j2(t,e){if(t&1&&(m(0,"div",17),Z(1,Y2,28,15,"div",18,Op),g(),m(3,"div",19)(4,"table",20)(5,"thead",21)(6,"tr")(7,"th",22),h(8),y(9,"translate"),g(),m(10,"th",22),h(11),y(12,"translate"),g(),m(13,"th",22),h(14),y(15,"translate"),g(),m(16,"th",23),h(17),y(18,"translate"),g()()(),m(19,"tbody"),Z(20,J2,22,12,"tr",24,Op),g()()()),t&2){let n=E();p(),K(n.buses()),p(7),b(C(9,4,"busManagement.busNumber")),p(3),b(C(12,6,"busManagement.driverName")),p(3),b(C(15,8,"busManagement.assignedStudents")),p(3),b(C(18,10,"common.actions")),p(3),K(n.buses())}}function Z2(t,e){t&1&&(m(0,"div",14)(1,"p"),h(2),y(3,"translate"),g()()),t&2&&(p(2),b(C(3,1,"busManagement.noBuses")))}function K2(t,e){if(t&1){let n=G();m(0,"label",52)(1,"input",56),M("change",function(){let i=I(n).$implicit,r=E(2);return T(r.toggleStudentSelection(i.id))}),g(),h(2),g()}if(t&2){let n=e.$implicit,o=E(2);p(),A("checked",o.selectedStudentsForAssignment().has(n.id)),p(),Ce(" ",n.name," (",n.class,") ")}}function Q2(t,e){if(t&1){let n=G();m(0,"div",45),M("click",function(){I(n);let i=E();return T(i.closeStudentAssignmentModal())}),m(1,"div",46),M("click",function(i){return I(n),T(i.stopPropagation())}),m(2,"h3",47),h(3),y(4,"translate"),g(),m(5,"div",48)(6,"div",49)(7,"h4",50),h(8),y(9,"translate"),g(),m(10,"div",51),Z(11,K2,3,3,"label",52,Op),g()()(),m(13,"div",53)(14,"button",54),M("click",function(){I(n);let i=E();return T(i.closeStudentAssignmentModal())}),h(15),y(16,"translate"),g(),m(17,"button",55),M("click",function(){I(n);let i=E();return T(i.saveStudentAssignments())}),h(18),y(19,"translate"),g()()()()}if(t&2){let n=E();p(3),Ce("",C(4,5,"busManagement.assignStudentsTo")," ",e.busNumber),p(5),b(C(9,7,"busManagement.availableStudents")),p(3),K(n.studentsForAssignmentModal().available),p(4),b(C(16,9,"common.cancel")),p(3),b(C(19,11,"common.saveChanges"))}}var qa=class t{constructor(){this.translationService=w(X);this.dataService=w(Ee);this.toastService=w(ue);this.authService=w(de);this.busForm=R(Pp);this.editingBus=R(null);this.assigningStudentsToBus=R(null);this.selectedStudentsForAssignment=R(new Set);this.isBusFormValid=H(()=>this.busForm().busNumber&&this.busForm().driverName);this.schoolId=H(()=>this.authService.currentUserSchool()?.id);this.buses=H(()=>{let e=this.schoolId();return e?this.dataService.getBusesBySchool(e):[]});this.studentsForAssignmentModal=H(()=>{let e=this.assigningStudentsToBus(),n=this.schoolId();if(!e||!n)return{assigned:[],available:[]};let o=this.dataService.getStudentsBySchool(n),i=o.filter(s=>e.studentIds.includes(s.id)),r=o.filter(s=>!s.busId||s.busId===e.id);return{assigned:i,available:r}})}startEdit(e){this.editingBus.set(e),this.busForm.set({busNumber:e.busNumber,driverName:e.driverName})}cancelEdit(){this.editingBus.set(null),this.busForm.set(Pp)}async saveBus(){if(!this.isBusFormValid()||!this.schoolId())return;let e=this.busForm(),n=this.editingBus();if(n){let o=B(B({},n),e);await this.dataService.updateBus(o),this.toastService.show("Bus updated successfully!","success")}else await this.dataService.addBus(B({schoolId:this.schoolId()},e)),this.toastService.show("Bus added successfully!","success");this.cancelEdit()}async deleteBus(e){confirm("Are you sure you want to delete this bus? Students will be unassigned.")&&(await this.dataService.deleteBus(e.id),this.toastService.show("Bus deleted successfully!","success"))}openStudentAssignmentModal(e){this.assigningStudentsToBus.set(e),this.selectedStudentsForAssignment.set(new Set(e.studentIds))}closeStudentAssignmentModal(){this.assigningStudentsToBus.set(null),this.selectedStudentsForAssignment.set(new Set)}toggleStudentSelection(e){this.selectedStudentsForAssignment.update(n=>{let o=new Set(n);return o.has(e)?o.delete(e):o.add(e),o})}async saveStudentAssignments(){let e=this.assigningStudentsToBus();if(!e)return;let n=[...this.selectedStudentsForAssignment()];await this.dataService.updateBusAssignments(e.id,n),this.toastService.show("Bus assignments updated!","success"),this.closeStudentAssignmentModal()}updateBusForm(e,n){this.busForm.update(o=>z(B({},o),{[e]:n}))}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=ee({type:t,selectors:[["app-bus-management"]],decls:35,vars:25,consts:[[1,"bus-management-container"],[1,"section-title"],[1,"section-description"],[1,"form-and-list-grid"],[1,"add-edit-form-card"],[1,"form-card-title"],[1,"form-spacing",3,"submit"],[1,"form-label"],["type","text","name","busNumber","required","",1,"form-input",3,"ngModelChange","ngModel"],["type","text","name","driverName","required","",1,"form-input",3,"ngModelChange","ngModel"],[1,"form-buttons-padding"],["type","submit",1,"btn-primary",3,"disabled"],["type","button",1,"btn-secondary"],[1,"bus-list-wrapper"],[1,"no-data-message"],[1,"modal-overlay"],["type","button",1,"btn-secondary",3,"click"],[1,"item-cards-mobile"],[1,"item-card"],[1,"data-table-container"],[1,"data-table"],[1,"table-header"],["scope","col",1,"table-th"],["scope","col",1,"table-th","table-th-actions"],[1,"table-row"],[1,"item-card-header"],[1,"item-name"],[1,"item-subtitle"],[1,"card-divider"],[1,"item-details"],[1,"detail-label"],[1,"detail-value"],[1,"card-actions"],[1,"action-button","assign-button",3,"click","title"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"icon-small"],["d","M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"],[1,"action-button","edit-button",3,"click","title"],["d","M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"],["fill-rule","evenodd","d","M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z","clip-rule","evenodd"],[1,"action-button","delete-button",3,"click","title"],["fill-rule","evenodd","d","M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule","evenodd"],[1,"table-td-primary"],[1,"table-td"],[1,"table-td","table-td-actions"],[1,"action-buttons-group"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-title"],[1,"student-assignment-grid"],[1,"student-list-container"],[1,"list-title"],[1,"student-list"],[1,"student-list-item"],[1,"modal-actions"],[1,"btn-secondary",3,"click"],[1,"btn-primary",3,"click"],["type","checkbox",1,"student-checkbox",3,"change","checked"]],template:function(n,o){if(n&1&&(m(0,"div",0)(1,"h2",1),h(2),y(3,"translate"),g(),m(4,"p",2),h(5),y(6,"translate"),g(),m(7,"div",3)(8,"div",4)(9,"h3",5),O(10,G2,2,3)(11,q2,2,3),g(),m(12,"form",6),M("submit",function(){return o.saveBus()}),m(13,"div")(14,"label",7),h(15),y(16,"translate"),g(),m(17,"input",8),M("ngModelChange",function(r){return o.updateBusForm("busNumber",r)}),g()(),m(18,"div")(19,"label",7),h(20),y(21,"translate"),g(),m(22,"input",9),M("ngModelChange",function(r){return o.updateBusForm("driverName",r)}),g()(),m(23,"div",10)(24,"button",11),O(25,$2,2,3)(26,z2,2,3),g(),O(27,W2,3,3,"button",12),g()()(),m(28,"div",13)(29,"h3",5),h(30),y(31,"translate"),g(),O(32,j2,22,12)(33,Z2,4,3,"div",14),g()(),O(34,Q2,20,13,"div",15),g()),n&2){let i;p(2),b(C(3,15,"school-admin.tabs.buses")),p(3),b(C(6,17,"busManagement.description")),p(5),F(o.editingBus()?10:11),p(5),b(C(16,19,"busManagement.busNumber")),p(2),A("ngModel",o.busForm().busNumber),p(3),b(C(21,21,"busManagement.driverName")),p(2),A("ngModel",o.busForm().driverName),p(2),j("btn-disabled",!o.isBusFormValid()),A("disabled",!o.isBusFormValid()),p(),F(o.editingBus()?25:26),p(2),F(o.editingBus()?27:-1),p(3),b(C(31,23,"busManagement.existing")),p(2),F(o.buses().length>0?32:33),p(2),F((i=o.assigningStudentsToBus())?34:-1,i)}},dependencies:[Ae,Ve,Me,De,Fe,Be,Ie,Re,oe],styles:["@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.bus-management-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in .5s ease-out forwards;width:100%}.section-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:var(--color-cyan-400)}.section-description[_ngcontent-%COMP%]{color:var(--color-slate-400);margin-top:.25rem;margin-bottom:1.5rem}.form-and-list-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:2rem}@media(min-width:1024px){.form-and-list-grid[_ngcontent-%COMP%]{grid-template-columns:1fr 2fr;align-items:start}}.add-edit-form-card[_ngcontent-%COMP%]{background-color:#1e293b80;padding:1.5rem;border-radius:.75rem;border:1px solid var(--color-slate-700);height:fit-content}.form-card-title[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;margin-bottom:1.5rem}.form-spacing[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.form-label[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:500;color:var(--color-slate-300);margin-bottom:.5rem}.form-input[_ngcontent-%COMP%]{width:90%;background-color:var(--color-slate-800);border:1px solid var(--color-slate-700);border-radius:.5rem;padding:.75rem;outline:none;transition:all .2s ease-in-out}.form-input[_ngcontent-%COMP%]:focus{border-color:var(--color-cyan-500);background-color:var(--color-slate-900);box-shadow:0 0 0 3px #06b6d44d}.form-buttons-padding[_ngcontent-%COMP%]{padding-top:.5rem;display:flex;flex-direction:column;gap:.5rem}.item-cards-mobile[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:1rem}@media(min-width:768px){.item-cards-mobile[_ngcontent-%COMP%]{display:none}}.item-card[_ngcontent-%COMP%]{background:linear-gradient(145deg,var(--color-slate-800),#151f32);border-radius:.75rem;border:1px solid var(--color-slate-700);padding:1rem;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}.item-card-header[_ngcontent-%COMP%]{margin-bottom:.75rem}.item-name[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:var(--color-white)}.item-subtitle[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-slate-400)}.card-divider[_ngcontent-%COMP%]{border-top:1px solid var(--color-slate-700);margin:.75rem 0}.item-details[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:.875rem}.detail-label[_ngcontent-%COMP%]{color:var(--color-slate-500);font-weight:500}.detail-value[_ngcontent-%COMP%]{color:var(--color-slate-300);font-weight:600;background-color:var(--color-slate-700);padding:.125rem .5rem;border-radius:9999px;font-size:.75rem}.card-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.75rem}.data-table-container[_ngcontent-%COMP%]{display:none;background-color:var(--color-slate-900);border-radius:.75rem;border:1px solid var(--color-slate-800);overflow:hidden}@media(min-width:768px){.data-table-container[_ngcontent-%COMP%]{display:block}}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table-header[_ngcontent-%COMP%]{background-color:var(--color-slate-800)}.table-th[_ngcontent-%COMP%]{padding:.75rem 1.5rem;font-size:.75rem;font-weight:600;color:var(--color-slate-300);text-transform:uppercase;letter-spacing:.05em;text-align:left}.table-row[_ngcontent-%COMP%]{border-bottom:1px solid var(--color-slate-800);transition:background-color .2s ease-in-out}.table-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.table-row[_ngcontent-%COMP%]:hover{background-color:var(--color-slate-800)}.table-td[_ngcontent-%COMP%]{padding:1rem 1.5rem;font-size:.875rem;color:var(--color-slate-400);vertical-align:middle}.table-td-primary[_ngcontent-%COMP%]{color:var(--color-white);font-weight:500}.table-th-actions[_ngcontent-%COMP%], .table-td-actions[_ngcontent-%COMP%]{text-align:right}.action-buttons-group[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.5rem}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#000000b3;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);display:flex;align-items:center;justify-content:center;z-index:50;animation:_ngcontent-%COMP%_fade-in .3s ease-out}.modal-content[_ngcontent-%COMP%]{background-color:var(--color-slate-900);border:1px solid var(--color-slate-700);border-radius:1rem;padding:1.5rem;box-shadow:0 10px 25px #0000004d;width:90%;max-width:40rem;max-height:90vh;display:flex;flex-direction:column}.modal-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:var(--color-cyan-400);margin-bottom:1.5rem}.student-assignment-grid[_ngcontent-%COMP%]{flex-grow:1;overflow-y:auto}.list-title[_ngcontent-%COMP%]{font-weight:600;color:var(--color-slate-300);margin-bottom:.75rem}.student-list[_ngcontent-%COMP%]{background-color:var(--color-slate-800);border-radius:.5rem;padding:.5rem;max-height:40vh;overflow-y:auto}.student-list-item[_ngcontent-%COMP%]{display:block;padding:.75rem;border-radius:.25rem;cursor:pointer;transition:background-color .2s}.student-list-item[_ngcontent-%COMP%]:hover{background-color:var(--color-slate-700)}.student-checkbox[_ngcontent-%COMP%]{margin-right:.75rem;accent-color:var(--color-cyan-500)}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;margin-top:1.5rem;padding-top:1.5rem;border-top:1px solid var(--color-slate-700)}.no-data-message[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:var(--color-slate-500);background-color:var(--color-slate-800);border-radius:.5rem}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{padding:.625rem 1.25rem;font-weight:600;border-radius:.5rem;border:none;cursor:pointer;transition:background-color .2s}.btn-primary[_ngcontent-%COMP%]{background-color:var(--color-cyan-500);color:var(--color-white)}.btn-primary[_ngcontent-%COMP%]:hover{background-color:var(--color-cyan-600)}.btn-primary.btn-disabled[_ngcontent-%COMP%], .btn-primary[_ngcontent-%COMP%]:disabled{background-color:var(--color-slate-600);cursor:not-allowed;opacity:.7}.btn-secondary[_ngcontent-%COMP%]{background-color:var(--color-slate-600);color:var(--color-slate-300)}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:var(--color-slate-500)}.action-button[_ngcontent-%COMP%]{padding:.5rem;background-color:transparent;border:1px solid var(--color-slate-700);border-radius:.5rem;transition:all .2s ease-in-out;cursor:pointer;display:flex}.action-button[_ngcontent-%COMP%]:hover{background-color:var(--color-slate-700);border-color:var(--color-slate-600)}.action-button.edit-button[_ngcontent-%COMP%]{color:var(--color-cyan-400)}.action-button.delete-button[_ngcontent-%COMP%]{color:var(--color-red-400)}.action-button.assign-button[_ngcontent-%COMP%]{color:var(--color-green-400)}.icon-small[_ngcontent-%COMP%]{height:1.125rem;width:1.125rem}"],changeDetection:0})}};var $a=(t,e)=>e.id;function X2(t,e){t&1&&(h(0),y(1,"translate")),t&2&&N(" ",C(1,1,"activityManagement.editTitle")," ")}function eA(t,e){t&1&&(h(0),y(1,"translate")),t&2&&N(" ",C(1,1,"activityManagement.addTitle")," ")}function tA(t,e){if(t&1&&(m(0,"option",11),h(1),g()),t&2){let n=e.$implicit;A("value",n.id),p(),b(n.name)}}function nA(t,e){t&1&&(h(0),y(1,"translate")),t&2&&N(" ",C(1,1,"common.saveChanges")," ")}function oA(t,e){t&1&&(h(0),y(1,"translate")),t&2&&N(" ",C(1,1,"activityManagement.addButton")," ")}function iA(t,e){if(t&1){let n=G();m(0,"button",22),M("click",function(){I(n);let i=E();return T(i.cancelEdit())}),h(1),y(2,"translate"),g()}t&2&&(p(),N(" ",C(2,1,"common.cancel")," "))}function rA(t,e){if(t&1){let n=G();m(0,"div",24)(1,"div",31)(2,"h4",32),h(3),g(),m(4,"p",33),h(5),g(),m(6,"p",33),h(7),g()(),k(8,"div",34),m(9,"div",35)(10,"span",36),h(11),y(12,"translate"),g(),m(13,"span",37),h(14),g()(),k(15,"div",34),m(16,"div",38)(17,"button",39),y(18,"translate"),M("click",function(){let i=I(n).$implicit,r=E(2);return T(r.openStudentAssignmentModal(i))}),U(),m(19,"svg",40),k(20,"path",41),g()(),J(),m(21,"button",42),y(22,"translate"),M("click",function(){let i=I(n).$implicit,r=E(2);return T(r.startEdit(i))}),U(),m(23,"svg",40),k(24,"path",43)(25,"path",44),g()(),J(),m(26,"button",45),y(27,"translate"),M("click",function(){let i=I(n).$implicit,r=E(2);return T(r.deleteActivity(i))}),U(),m(28,"svg",40),k(29,"path",46),g()()()()}if(t&2){let n=e.$implicit,o=E(2);p(3),b(n.name),p(2),b(o.getSupervisorName(n.supervisorId)),p(2),qi("",n.location," | ",n.startTime," - ",n.endTime),p(4),N("",C(12,10,"activityManagement.assignedStudents"),":"),p(3),b(n.studentIds.length),p(3),A("title",C(18,12,"activityManagement.assignStudents")),p(4),A("title",C(22,14,"common.edit")),p(5),A("title",C(27,16,"common.delete"))}}function sA(t,e){if(t&1){let n=G();m(0,"tr",30)(1,"td",47),h(2),m(3,"div",48),h(4),g()(),m(5,"td",49),h(6),g(),m(7,"td",49),h(8),g(),m(9,"td",50)(10,"div",51)(11,"button",39),y(12,"translate"),M("click",function(){let i=I(n).$implicit,r=E(2);return T(r.openStudentAssignmentModal(i))}),U(),m(13,"svg",40),k(14,"path",41),g()(),J(),m(15,"button",42),y(16,"translate"),M("click",function(){let i=I(n).$implicit,r=E(2);return T(r.startEdit(i))}),U(),m(17,"svg",40),k(18,"path",43)(19,"path",44),g()(),J(),m(20,"button",45),y(21,"translate"),M("click",function(){let i=I(n).$implicit,r=E(2);return T(r.deleteActivity(i))}),U(),m(22,"svg",40),k(23,"path",46),g()()()()()}if(t&2){let n=e.$implicit,o=E(2);p(2),N(" ",n.name," "),p(2),qi("",n.location," | ",n.startTime," - ",n.endTime),p(2),b(o.getSupervisorName(n.supervisorId)),p(2),b(n.studentIds.length),p(3),A("title",C(12,9,"activityManagement.assignStudents")),p(4),A("title",C(16,11,"common.edit")),p(5),A("title",C(21,13,"common.delete"))}}function aA(t,e){if(t&1&&(m(0,"div",23),Z(1,rA,30,18,"div",24,$a),g(),m(3,"div",25)(4,"table",26)(5,"thead",27)(6,"tr")(7,"th",28),h(8),y(9,"translate"),g(),m(10,"th",28),h(11),y(12,"translate"),g(),m(13,"th",28),h(14),y(15,"translate"),g(),m(16,"th",29),h(17),y(18,"translate"),g()()(),m(19,"tbody"),Z(20,sA,24,15,"tr",30,$a),g()()()),t&2){let n=E();p(),K(n.activities()),p(7),b(C(9,4,"activityManagement.name")),p(3),b(C(12,6,"activityManagement.supervisor")),p(3),b(C(15,8,"activityManagement.assignedStudents")),p(3),b(C(18,10,"common.actions")),p(3),K(n.activities())}}function lA(t,e){t&1&&(m(0,"div",20)(1,"p"),h(2),y(3,"translate"),g()()),t&2&&(p(2),b(C(3,1,"activityManagement.noActivities")))}function cA(t,e){if(t&1){let n=G();m(0,"label",59)(1,"input",63),M("change",function(){let i=I(n).$implicit,r=E(2);return T(r.toggleStudentSelection(i.id))}),g(),h(2),g()}if(t&2){let n=e.$implicit,o=E(2);p(),A("checked",o.selectedStudentsForAssignment().has(n.id)),p(),Ce(" ",n.name," (",n.class,") ")}}function dA(t,e){if(t&1){let n=G();m(0,"div",52),M("click",function(){I(n);let i=E();return T(i.closeStudentAssignmentModal())}),m(1,"div",53),M("click",function(i){return I(n),T(i.stopPropagation())}),m(2,"h3",54),h(3),y(4,"translate"),g(),m(5,"div",55)(6,"div",56)(7,"h4",57),h(8),y(9,"translate"),g(),m(10,"div",58),Z(11,cA,3,3,"label",59,$a),g()()(),m(13,"div",60)(14,"button",61),M("click",function(){I(n);let i=E();return T(i.closeStudentAssignmentModal())}),h(15),y(16,"translate"),g(),m(17,"button",62),M("click",function(){I(n);let i=E();return T(i.saveStudentAssignments())}),h(18),y(19,"translate"),g()()()()}if(t&2){let n=E();p(3),Ce("",C(4,5,"activityManagement.assignStudentsTo")," ",e.name),p(5),b(C(9,7,"activityManagement.availableStudents")),p(3),K(n.studentsForAssignmentModal()),p(4),b(C(16,9,"common.cancel")),p(3),b(C(19,11,"common.saveChanges"))}}var za=class t{constructor(){this.translationService=w(X);this.dataService=w(Ee);this.toastService=w(ue);this.authService=w(de);this.activityForm=R(Dp);this.editingActivity=R(null);this.assigningStudentsToActivity=R(null);this.selectedStudentsForAssignment=R(new Set);this.isActivityFormValid=H(()=>{let e=this.activityForm();return e.name&&e.supervisorId&&e.startTime&&e.endTime&&e.location});this.schoolId=H(()=>this.authService.currentUserSchool()?.id);this.activities=H(()=>{let e=this.schoolId();return e?this.dataService.getActivitiesBySchool(e):[]});this.teachers=H(()=>{let e=this.schoolId();return e?this.dataService.getStaffForSchool(e).filter(n=>n.role==="teacher"):[]});this.studentsForAssignmentModal=H(()=>{let e=this.assigningStudentsToActivity(),n=this.schoolId();if(!e||!n)return[];let o=this.dataService.getStudentsBySchool(n),i=new Set(this.activities().flatMap(s=>s.id!==e.id?s.studentIds:[]));return o.filter(s=>!i.has(s.id))})}getSupervisorName(e){return this.dataService.users().find(o=>o.id===e)?.name??"N/A"}startEdit(e){this.editingActivity.set(e),this.activityForm.set({name:e.name,supervisorId:e.supervisorId,startTime:e.startTime,endTime:e.endTime,location:e.location})}cancelEdit(){this.editingActivity.set(null),this.activityForm.set(Dp)}async saveActivity(){if(!this.isActivityFormValid()||!this.schoolId())return;let e=this.activityForm(),n=this.editingActivity();if(n){let o=B(B({},n),e);await this.dataService.updateActivity(o),this.toastService.show(this.translationService.translate("activityManagement.toast.updated"),"success")}else await this.dataService.addActivity(B({schoolId:this.schoolId()},e)),this.toastService.show(this.translationService.translate("activityManagement.toast.added"),"success");this.cancelEdit()}async deleteActivity(e){confirm(this.translationService.translate("activityManagement.deleteConfirmation"))&&(await this.dataService.deleteActivity(e.id),this.toastService.show(this.translationService.translate("activityManagement.toast.deleted"),"success"))}openStudentAssignmentModal(e){this.assigningStudentsToActivity.set(e),this.selectedStudentsForAssignment.set(new Set(e.studentIds))}closeStudentAssignmentModal(){this.assigningStudentsToActivity.set(null),this.selectedStudentsForAssignment.set(new Set)}toggleStudentSelection(e){this.selectedStudentsForAssignment.update(n=>{let o=new Set(n);return o.has(e)?o.delete(e):o.add(e),o})}async saveStudentAssignments(){let e=this.assigningStudentsToActivity();if(!e)return;let n=[...this.selectedStudentsForAssignment()];await this.dataService.updateActivityAssignments(e.id,n),this.toastService.show(this.translationService.translate("activityManagement.toast.assignmentsUpdated"),"success"),this.closeStudentAssignmentModal()}updateActivityForm(e,n){this.activityForm.update(o=>z(B({},o),{[e]:n}))}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=ee({type:t,selectors:[["app-activity-management"]],decls:56,vars:40,consts:[[1,"activity-management-container"],[1,"section-title"],[1,"section-description"],[1,"form-and-list-grid"],[1,"add-edit-form-card"],[1,"form-card-title"],[1,"form-spacing",3,"submit"],[1,"form-label"],["type","text","name","activityName","required","",1,"form-input",3,"ngModelChange","ngModel"],["name","supervisorId","required","",1,"form-select",3,"ngModelChange","ngModel"],["value","","disabled",""],[3,"value"],[1,"time-grid"],["type","time","name","startTime","required","",1,"form-input",3,"ngModelChange","ngModel"],["type","time","name","endTime","required","",1,"form-input",3,"ngModelChange","ngModel"],["type","text","name","location","required","",1,"form-input",3,"ngModelChange","ngModel"],[1,"form-buttons-padding"],["type","submit",1,"btn-primary",3,"disabled"],["type","button",1,"btn-secondary"],[1,"list-wrapper"],[1,"no-data-message"],[1,"modal-overlay"],["type","button",1,"btn-secondary",3,"click"],[1,"item-cards-mobile"],[1,"item-card"],[1,"data-table-container"],[1,"data-table"],[1,"table-header"],["scope","col",1,"table-th"],["scope","col",1,"table-th","table-th-actions"],[1,"table-row"],[1,"item-card-header"],[1,"item-name"],[1,"item-subtitle"],[1,"card-divider"],[1,"item-details"],[1,"detail-label"],[1,"detail-value"],[1,"card-actions"],[1,"action-button","assign-button",3,"click","title"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"icon-small"],["d","M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"],[1,"action-button","edit-button",3,"click","title"],["d","M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"],["fill-rule","evenodd","d","M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z","clip-rule","evenodd"],[1,"action-button","delete-button",3,"click","title"],["fill-rule","evenodd","d","M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule","evenodd"],[1,"table-td-primary"],[1,"table-td-subtitle"],[1,"table-td"],[1,"table-td","table-td-actions"],[1,"action-buttons-group"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-title"],[1,"student-assignment-grid"],[1,"student-list-container"],[1,"list-title"],[1,"student-list"],[1,"student-list-item"],[1,"modal-actions"],[1,"btn-secondary",3,"click"],[1,"btn-primary",3,"click"],["type","checkbox",1,"student-checkbox",3,"change","checked"]],template:function(n,o){if(n&1&&(m(0,"div",0)(1,"h2",1),h(2),y(3,"translate"),g(),m(4,"p",2),h(5),y(6,"translate"),g(),m(7,"div",3)(8,"div",4)(9,"h3",5),O(10,X2,2,3)(11,eA,2,3),g(),m(12,"form",6),M("submit",function(){return o.saveActivity()}),m(13,"div")(14,"label",7),h(15),y(16,"translate"),g(),m(17,"input",8),M("ngModelChange",function(r){return o.updateActivityForm("name",r)}),g()(),m(18,"div")(19,"label",7),h(20),y(21,"translate"),g(),m(22,"select",9),M("ngModelChange",function(r){return o.updateActivityForm("supervisorId",r)}),m(23,"option",10),h(24),y(25,"translate"),g(),Z(26,tA,2,2,"option",11,$a),g()(),m(28,"div",12)(29,"div")(30,"label",7),h(31),y(32,"translate"),g(),m(33,"input",13),M("ngModelChange",function(r){return o.updateActivityForm("startTime",r)}),g()(),m(34,"div")(35,"label",7),h(36),y(37,"translate"),g(),m(38,"input",14),M("ngModelChange",function(r){return o.updateActivityForm("endTime",r)}),g()()(),m(39,"div")(40,"label",7),h(41),y(42,"translate"),g(),m(43,"input",15),M("ngModelChange",function(r){return o.updateActivityForm("location",r)}),g()(),m(44,"div",16)(45,"button",17),O(46,nA,2,3)(47,oA,2,3),g(),O(48,iA,3,3,"button",18),g()()(),m(49,"div",19)(50,"h3",5),h(51),y(52,"translate"),g(),O(53,aA,22,12)(54,lA,4,3,"div",20),g()(),O(55,dA,20,13,"div",21),g()),n&2){let i;p(2),b(C(3,22,"school-admin.tabs.activities")),p(3),b(C(6,24,"activityManagement.description")),p(5),F(o.editingActivity()?10:11),p(5),b(C(16,26,"activityManagement.name")),p(2),A("ngModel",o.activityForm().name),p(3),b(C(21,28,"activityManagement.supervisor")),p(2),A("ngModel",o.activityForm().supervisorId),p(2),b(C(25,30,"activityManagement.selectSupervisor")),p(2),K(o.teachers()),p(5),b(C(32,32,"activityManagement.startTime")),p(2),A("ngModel",o.activityForm().startTime),p(3),b(C(37,34,"activityManagement.endTime")),p(2),A("ngModel",o.activityForm().endTime),p(3),b(C(42,36,"activityManagement.location")),p(2),A("ngModel",o.activityForm().location),p(2),j("btn-disabled",!o.isActivityFormValid()),A("disabled",!o.isActivityFormValid()),p(),F(o.editingActivity()?46:47),p(2),F(o.editingActivity()?48:-1),p(3),b(C(52,38,"activityManagement.existing")),p(2),F(o.activities().length>0?53:54),p(2),F((i=o.assigningStudentsToActivity())?55:-1,i)}},dependencies:[Ae,Ve,rn,sn,Me,Et,De,Fe,Be,Ie,Re,oe],styles:["@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.activity-management-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in .5s ease-out forwards;width:100%}.section-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:var(--color-cyan-400)}.section-description[_ngcontent-%COMP%]{color:var(--color-slate-400);margin-top:.25rem;margin-bottom:1.5rem}.form-and-list-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:2rem}@media(min-width:1024px){.form-and-list-grid[_ngcontent-%COMP%]{grid-template-columns:1fr 2fr;align-items:start}}.add-edit-form-card[_ngcontent-%COMP%]{background-color:#1e293b80;padding:1.5rem;border-radius:.75rem;border:1px solid var(--color-slate-700);height:fit-content}.form-card-title[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;margin-bottom:1.5rem}.form-spacing[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.time-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem}.form-label[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:500;color:var(--color-slate-300);margin-bottom:.5rem}.form-input[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{width:90%;background-color:var(--color-slate-800);border:1px solid var(--color-slate-700);border-radius:.5rem;padding:.75rem;outline:none;transition:all .2s ease-in-out}.form-input[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{border-color:var(--color-cyan-500);background-color:var(--color-slate-900);box-shadow:0 0 0 3px #06b6d44d}.form-buttons-padding[_ngcontent-%COMP%]{padding-top:.5rem;display:flex;flex-direction:column;gap:.5rem}.item-cards-mobile[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:1rem}@media(min-width:768px){.item-cards-mobile[_ngcontent-%COMP%]{display:none}}.item-card[_ngcontent-%COMP%]{background:linear-gradient(145deg,var(--color-slate-800),#151f32);border-radius:.75rem;border:1px solid var(--color-slate-700);padding:1rem;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}.item-card-header[_ngcontent-%COMP%]{margin-bottom:.75rem}.item-name[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:var(--color-white)}.item-subtitle[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-slate-400)}.card-divider[_ngcontent-%COMP%]{border-top:1px solid var(--color-slate-700);margin:.75rem 0}.item-details[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:.875rem}.detail-label[_ngcontent-%COMP%]{color:var(--color-slate-500);font-weight:500}.detail-value[_ngcontent-%COMP%]{color:var(--color-slate-300);font-weight:600;background-color:var(--color-slate-700);padding:.125rem .5rem;border-radius:9999px;font-size:.75rem}.card-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.75rem}.data-table-container[_ngcontent-%COMP%]{display:none;background-color:var(--color-slate-900);border-radius:.75rem;border:1px solid var(--color-slate-800);overflow:hidden}@media(min-width:768px){.data-table-container[_ngcontent-%COMP%]{display:block}}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table-header[_ngcontent-%COMP%]{background-color:var(--color-slate-800)}.table-th[_ngcontent-%COMP%]{padding:.75rem 1.5rem;font-size:.75rem;font-weight:600;color:var(--color-slate-300);text-transform:uppercase;letter-spacing:.05em;text-align:left}.table-row[_ngcontent-%COMP%]{border-bottom:1px solid var(--color-slate-800);transition:background-color .2s ease-in-out}.table-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.table-row[_ngcontent-%COMP%]:hover{background-color:var(--color-slate-800)}.table-td[_ngcontent-%COMP%]{padding:1rem 1.5rem;font-size:.875rem;color:var(--color-slate-400);vertical-align:middle}.table-td-primary[_ngcontent-%COMP%]{color:var(--color-white);font-weight:500}.table-td-subtitle[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-slate-500)}.table-th-actions[_ngcontent-%COMP%], .table-td-actions[_ngcontent-%COMP%]{text-align:right}.action-buttons-group[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.5rem}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#000000b3;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);display:flex;align-items:center;justify-content:center;z-index:50;animation:_ngcontent-%COMP%_fade-in .3s ease-out}.modal-content[_ngcontent-%COMP%]{background-color:var(--color-slate-900);border:1px solid var(--color-slate-700);border-radius:1rem;padding:1.5rem;box-shadow:0 10px 25px #0000004d;width:90%;max-width:40rem;max-height:90vh;display:flex;flex-direction:column}.modal-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:var(--color-cyan-400);margin-bottom:1.5rem}.student-assignment-grid[_ngcontent-%COMP%]{flex-grow:1;overflow-y:auto}.list-title[_ngcontent-%COMP%]{font-weight:600;color:var(--color-slate-300);margin-bottom:.75rem}.student-list[_ngcontent-%COMP%]{background-color:var(--color-slate-800);border-radius:.5rem;padding:.5rem;max-height:40vh;overflow-y:auto}.student-list-item[_ngcontent-%COMP%]{display:block;padding:.75rem;border-radius:.25rem;cursor:pointer;transition:background-color .2s}.student-list-item[_ngcontent-%COMP%]:hover{background-color:var(--color-slate-700)}.student-checkbox[_ngcontent-%COMP%]{margin-right:.75rem;accent-color:var(--color-cyan-500)}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;margin-top:1.5rem;padding-top:1.5rem;border-top:1px solid var(--color-slate-700)}.no-data-message[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:var(--color-slate-500);background-color:var(--color-slate-800);border-radius:.5rem}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{padding:.625rem 1.25rem;font-weight:600;border-radius:.5rem;border:none;cursor:pointer;transition:background-color .2s}.btn-primary[_ngcontent-%COMP%]{background-color:var(--color-cyan-500);color:var(--color-white)}.btn-primary[_ngcontent-%COMP%]:hover{background-color:var(--color-cyan-600)}.btn-primary.btn-disabled[_ngcontent-%COMP%], .btn-primary[_ngcontent-%COMP%]:disabled{background-color:var(--color-slate-600);cursor:not-allowed;opacity:.7}.btn-secondary[_ngcontent-%COMP%]{background-color:var(--color-slate-600);color:var(--color-slate-300)}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:var(--color-slate-500)}.action-button[_ngcontent-%COMP%]{padding:.5rem;background-color:transparent;border:1px solid var(--color-slate-700);border-radius:.5rem;transition:all .2s ease-in-out;cursor:pointer;display:flex}.action-button[_ngcontent-%COMP%]:hover{background-color:var(--color-slate-700);border-color:var(--color-slate-600)}.action-button.edit-button[_ngcontent-%COMP%]{color:var(--color-cyan-400)}.action-button.delete-button[_ngcontent-%COMP%]{color:var(--color-red-400)}.action-button.assign-button[_ngcontent-%COMP%]{color:var(--color-green-400)}.icon-small[_ngcontent-%COMP%]{height:1.125rem;width:1.125rem}"],changeDetection:0})}};var Wa=class t{constructor(){this.translationService=w(X);this.toastService=w(ue);this.notificationService=w(Xo);this.message=R("")}sendMessage(){this.message().trim()&&(this.notificationService.sendBroadcast(this.message().trim()),this.toastService.show(this.translationService.translate("broadcast.toast.sent"),"success"),this.message.set(""))}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=ee({type:t,selectors:[["app-broadcast"]],decls:14,vars:16,consts:[[1,"broadcast-container"],[1,"section-title"],[1,"section-description"],[1,"form-card"],[3,"submit"],["rows","5","name","broadcastMessage",1,"broadcast-textarea",3,"ngModelChange","ngModel","placeholder"],["type","submit",1,"btn-send",3,"disabled"]],template:function(n,o){n&1&&(m(0,"div",0)(1,"h2",1),h(2),y(3,"translate"),g(),m(4,"p",2),h(5),y(6,"translate"),g(),m(7,"div",3)(8,"form",4),M("submit",function(){return o.sendMessage()}),m(9,"textarea",5),y(10,"translate"),M("ngModelChange",function(r){return o.message.set(r)}),g(),m(11,"button",6),h(12),y(13,"translate"),g()()()()),n&2&&(p(2),b(C(3,8,"broadcast.title")),p(3),b(C(6,10,"broadcast.description")),p(4),A("ngModel",o.message())("placeholder",C(10,12,"broadcast.placeholder")),p(2),j("btn-disabled",!o.message().trim()),A("disabled",!o.message().trim()),p(),N(" ",C(13,14,"broadcast.sendButton")," "))},dependencies:[Ae,Ve,Me,De,Fe,Ie,Re,oe],styles:["@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.broadcast-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in .5s ease-out forwards;max-width:48rem;margin:0 auto}.section-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:var(--color-cyan-400)}.section-description[_ngcontent-%COMP%]{color:var(--color-slate-400);margin-top:.25rem;margin-bottom:1.5rem}.form-card[_ngcontent-%COMP%]{background-color:#1e293b80;padding:1.5rem;border-radius:.75rem;border:1px solid var(--color-slate-700)}.broadcast-textarea[_ngcontent-%COMP%]{width:100%;background-color:var(--color-slate-800);border:1px solid var(--color-slate-700);border-radius:.5rem;padding:.75rem;outline:none;transition:all .2s ease-in-out;resize:vertical;margin-bottom:1rem}.broadcast-textarea[_ngcontent-%COMP%]:focus{border-color:var(--color-cyan-500);background-color:var(--color-slate-900);box-shadow:0 0 0 3px #06b6d44d}.btn-send[_ngcontent-%COMP%]{width:100%;padding:.75rem 1.5rem;background-color:var(--color-cyan-500);color:var(--color-white);font-weight:600;border-radius:.5rem;border:none;cursor:pointer;transition:background-color .2s}.btn-send[_ngcontent-%COMP%]:hover{background-color:var(--color-cyan-600)}.btn-send.btn-disabled[_ngcontent-%COMP%], .btn-send[_ngcontent-%COMP%]:disabled{background-color:var(--color-slate-600);cursor:not-allowed;opacity:.7}"],changeDetection:0})}};var uA=(t,e)=>e.id,Pv=(t,e)=>e.code;function pA(t,e){t&1&&(m(0,"p",7),h(1),g()),t&2&&(p(),b(e.name))}function fA(t,e){if(t&1){let n=G();m(0,"button",20),M("click",function(){let i=I(n).$implicit,r=E(2);return T(r.setView(i.id))}),U(),m(1,"svg",21),k(2,"path",22),g(),J(),m(3,"span",23),h(4),y(5,"translate"),g()()}if(t&2){let n=e.$implicit,o=E(2);j("menu-item-active",o.activeView()===n.id),p(2),St("d",n.iconPath),p(2),b(C(5,4,n.labelKey))}}function mA(t,e){if(t&1){let n=G();m(0,"div",11),M("click",function(){I(n);let i=E();return T(i.isMobileMenuOpen.set(!1))}),m(1,"aside",12),M("click",function(i){return I(n),T(i.stopPropagation())}),m(2,"header",13)(3,"h2",14),h(4),y(5,"translate"),g(),m(6,"button",15),M("click",function(){I(n);let i=E();return T(i.isMobileMenuOpen.set(!1))}),U(),m(7,"svg",16),k(8,"path",17),g()()(),J(),m(9,"nav",18),Z(10,fA,6,6,"button",19,uA),g()()()}if(t&2){let n=E();p(4),b(C(5,2,"school-admin.title")),p(2),A("title","Close menu"),p(4),K(n.adminTabs)}}function gA(t,e){if(t&1&&(m(0,"div",44)(1,"div",51)(2,"span",52),h(3),y(4,"translate"),g(),m(5,"span",53),h(6),g()(),m(7,"div",54)(8,"span",52),h(9),y(10,"translate"),g(),m(11,"span",55),h(12),g()()()),t&2){let n=E().$implicit;p(3),b(C(4,4,"common.zone")),p(3),b(n.assignedZone),p(3),b(C(10,6,"common.spot")),p(3),b(n.assignedSpot)}}function hA(t,e){if(t&1&&(m(0,"div",40)(1,"div",41)(2,"div")(3,"div",42)(4,"p",43),h(5),g(),O(6,gA,13,8,"div",44),g(),m(7,"p",45),h(8),g()(),m(9,"span",46),h(10),y(11,"translate"),g()(),k(12,"div",47),m(13,"div",48)(14,"p")(15,"span",49),h(16),y(17,"translate"),g(),m(18,"span",50),h(19),g()(),m(20,"p")(21,"span",49),h(22,"ETA:"),g(),m(23,"span",50),h(24),g()(),m(25,"p")(26,"span",49),h(27),y(28,"translate"),g(),m(29,"span",50),h(30),g()()()()),t&2){let n=e.$implicit;j("card-arrived-border",n.status==="arrived"),p(5),b(n.student.name),p(),F(n.assignedZone?6:-1),p(2),b(n.student.grade),p(),j("status-pending",n.status==="pending")("status-acknowledged",n.status==="acknowledged")("status-arrived",n.status==="arrived")("status-ready",n.status==="ready")("status-completed",n.status==="completed"),p(),N(" ",C(11,21,"statuses."+n.status)," "),p(6),N("",C(17,23,"common.pickupPerson"),":"),p(3),b(n.authorizedPerson.name),p(5),N("~",n.eta??"N/A"," min"),p(3),N("",C(28,25,"common.distance"),":"),p(3),b(n.distance?n.distance.toFixed(1)+" km":"N/A")}}function vA(t,e){if(t&1&&(m(0,"div",44)(1,"div",51)(2,"span",52),h(3),y(4,"translate"),g(),m(5,"span",53),h(6),g()(),m(7,"div",54)(8,"span",52),h(9),y(10,"translate"),g(),m(11,"span",55),h(12),g()()()),t&2){let n=E().$implicit;p(3),b(C(4,4,"common.zone")),p(3),b(n.assignedZone),p(3),b(C(10,6,"common.spot")),p(3),b(n.assignedSpot)}}function _A(t,e){if(t&1&&(m(0,"tr",56)(1,"td",57)(2,"div",42),h(3),m(4,"span",58),h(5),g(),O(6,vA,13,8,"div",44),g()(),m(7,"td",59),h(8),g(),m(9,"td",59),h(10),g(),m(11,"td",59),h(12),g(),m(13,"td",59)(14,"span",46),h(15),y(16,"translate"),g()()()),t&2){let n=e.$implicit;j("table-row-arrived",n.status==="arrived"),p(3),N(" ",n.student.name," "),p(2),N("(",n.student.grade,")"),p(),F(n.assignedZone?6:-1),p(2),b(n.authorizedPerson.name),p(2),N("~",n.eta??"N/A"," min"),p(2),b(n.distance?n.distance.toFixed(1)+" km":"N/A"),p(2),j("status-pending",n.status==="pending")("status-acknowledged",n.status==="acknowledged")("status-arrived",n.status==="arrived")("status-ready",n.status==="ready")("status-completed",n.status==="completed"),p(),N(" ",C(16,19,"statuses."+n.status)," ")}}function yA(t,e){if(t&1&&(m(0,"div",33),Z(1,hA,31,27,"div",34,Pv),g(),m(3,"div",35)(4,"table",36)(5,"thead",37)(6,"tr")(7,"th",38),h(8),y(9,"translate"),g(),m(10,"th",38),h(11),y(12,"translate"),g(),m(13,"th",38),h(14,"ETA"),g(),m(15,"th",38),h(16),y(17,"translate"),g(),m(18,"th",38),h(19),y(20,"translate"),g()()(),m(21,"tbody"),Z(22,_A,17,21,"tr",39,Pv),g()()()),t&2){let n=E(2);p(),K(n.activeRequests()),p(7),b(C(9,4,"common.student")),p(3),b(C(12,6,"common.pickupPerson")),p(5),b(C(17,8,"common.distance")),p(3),b(C(20,10,"common.status")),p(3),K(n.activeRequests())}}function CA(t,e){t&1&&(m(0,"div",32)(1,"p",60),h(2),y(3,"translate"),g()()),t&2&&(p(2),b(C(3,1,"school-admin.portal.noRequests")))}function bA(t,e){if(t&1){let n=G();m(0,"div",10)(1,"header",24)(2,"div")(3,"h2",25),h(4),y(5,"translate"),g(),m(6,"p",26),h(7),y(8,"translate"),g()(),m(9,"div",27)(10,"div",28)(11,"div",29),h(12),g(),m(13,"div",30),h(14),y(15,"translate"),g()(),m(16,"button",31),M("click",function(){I(n);let i=E();return T(i.resetDay())}),h(17),y(18,"translate"),g()()(),O(19,yA,24,12)(20,CA,4,3,"div",32),g()}if(t&2){let n=E();p(4),b(C(5,6,"school-admin.portal.title")),p(3),b(C(8,8,"school-admin.portal.monitor")),p(5),b(n.activeRequests().length),p(2),b(C(15,10,"school-admin.portal.activeRequests")),p(3),N(" ",C(18,12,"school-admin.portal.resetDay")," "),p(2),F(n.activeRequests().length>0?19:20)}}function SA(t,e){t&1&&k(0,"app-staff-management")}function EA(t,e){t&1&&k(0,"app-student-management")}function MA(t,e){t&1&&k(0,"app-class-management")}function wA(t,e){t&1&&k(0,"app-school-settings")}function xA(t,e){t&1&&k(0,"app-analytics-dashboard")}function IA(t,e){t&1&&k(0,"app-bus-management")}function TA(t,e){t&1&&k(0,"app-activity-management")}function PA(t,e){t&1&&k(0,"app-broadcast")}var Dv={arrived:1,ready:2,acknowledged:3,pending:4,completed:5},Ya=class t{constructor(){this.translationService=w(X);this.pickupStateService=w(Ke);this.toastService=w(ue);this.authService=w(de);this.activeRequests=H(()=>this.pickupStateService.activeRequests().slice().sort((e,n)=>Dv[e.status]-Dv[n.status]));this.activeView=R("monitor");this.isMobileMenuOpen=R(!1);this.adminTabs=[{id:"monitor",labelKey:"school-admin.tabs.monitor",iconPath:"M15 12a3 3 0 11-6 0 3 3 0 016 0z M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},{id:"staff",labelKey:"school-admin.tabs.staff",iconPath:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"},{id:"students",labelKey:"school-admin.tabs.students",iconPath:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21v-2a6 6 0 00-5.656-5.958"},{id:"classes",labelKey:"school-admin.tabs.classes",iconPath:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"},{id:"buses",labelKey:"school-admin.tabs.buses",iconPath:"M8.25 18.75a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 01-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h1.125c.621 0 1.125-.504 1.125-1.125V14.25m-17.25 4.5v-1.875a.375.375 0 00-.375-.375h-1.5a.375.375 0 00-.375.375v1.875m17.25 0v-1.875a.375.375 0 00-.375-.375h-1.5a.375.375 0 00-.375.375v1.875m-1.5-4.5H5.625c-.621 0-1.125.504-1.125 1.125v3.375c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125v-3.375c0-.621-.504-1.125-1.125-1.125H18.375m-1.5-4.5H5.625m11.25 0v-1.5c0-.621-.504-1.125-1.125-1.125H6.75c-.621 0-1.125.504-1.125 1.125v1.5m11.25 0h-1.5m-9.75 0h9.75"},{id:"activities",labelKey:"school-admin.tabs.activities",iconPath:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"},{id:"analytics",labelKey:"school-admin.tabs.analytics",iconPath:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"},{id:"broadcast",labelKey:"school-admin.tabs.broadcast",iconPath:"M2 5a2 2 0 012-2h12a2 2 0 012 2v8a2 2 0 01-2 2h-2.293l-2.853 2.854a.5.5 0 01-.854 0L9.293 17H4a2 2 0 01-2-2V5z"},{id:"settings",labelKey:"school-admin.tabs.settings",iconPath:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z M15 12a3 3 0 11-6 0 3 3 0 016 0z"}]}setView(e){this.activeView.set(e),this.isMobileMenuOpen.set(!1)}async resetDay(){confirm(this.translationService.translate("school-admin.portal.resetConfirmation"))&&(await this.pickupStateService.clearAllRequests(),this.toastService.show(this.translationService.translate("school-admin.toast.dayReset"),"success"))}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=ee({type:t,selectors:[["app-school-admin-dashboard"]],decls:21,vars:7,consts:[[1,"admin-dashboard-container"],[1,"mobile-header"],[1,"mobile-menu-toggle",3,"click","title"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"icon-menu"],["stroke-linecap","round","stroke-linejoin","round","d","M4 6h16M4 12h16M4 18h16"],[1,"mobile-header-text"],[1,"mobile-header-title"],[1,"mobile-header-school"],[1,"mobile-menu-overlay"],[1,"main-content"],[1,"monitor-view-section"],[1,"mobile-menu-overlay",3,"click"],[1,"mobile-menu-panel",3,"click"],[1,"mobile-menu-header"],[1,"sidebar-title"],[1,"mobile-menu-close",3,"click","title"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"icon-close"],["stroke-linecap","round","stroke-linejoin","round","d","M6 18L18 6M6 6l12 12"],[1,"sidebar-nav"],[1,"menu-item",3,"menu-item-active"],[1,"menu-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"menu-item-icon"],["stroke-linecap","round","stroke-linejoin","round"],[1,"menu-item-label"],[1,"monitor-header"],[1,"section-title-large"],[1,"section-description"],[1,"header-actions-group"],[1,"active-requests-summary"],[1,"summary-count"],[1,"summary-label"],[1,"btn-reset-day",3,"click"],[1,"no-requests-message"],[1,"request-cards-mobile"],[1,"request-card",3,"card-arrived-border"],[1,"data-table-container"],[1,"data-table"],[1,"table-header"],["scope","col",1,"table-th"],[1,"table-row",3,"table-row-arrived"],[1,"request-card"],[1,"request-card-header"],[1,"student-name-row"],[1,"request-student-name"],[1,"pickup-spot-display","pickup-spot-display-small"],[1,"request-student-grade"],[1,"status-badge"],[1,"card-divider"],[1,"request-details"],[1,"detail-label"],[1,"detail-value"],[1,"pickup-spot-zone"],[1,"pickup-spot-label"],[1,"pickup-spot-value-zone"],[1,"pickup-spot-number"],[1,"pickup-spot-value-number"],[1,"table-row"],[1,"table-td","table-td-primary"],[1,"text-slate-500"],[1,"table-td"],[1,"no-requests-text"]],template:function(n,o){if(n&1&&(m(0,"div",0)(1,"header",1)(2,"button",2),M("click",function(){return o.isMobileMenuOpen.set(!0)}),U(),m(3,"svg",3),k(4,"path",4),g()(),J(),m(5,"div",5)(6,"h2",6),h(7),y(8,"translate"),g(),O(9,pA,2,1,"p",7),g()(),O(10,mA,12,4,"div",8),m(11,"main",9),O(12,bA,21,14,"div",10)(13,SA,1,0,"app-staff-management")(14,EA,1,0,"app-student-management")(15,MA,1,0,"app-class-management")(16,wA,1,0,"app-school-settings")(17,xA,1,0,"app-analytics-dashboard")(18,IA,1,0,"app-bus-management")(19,TA,1,0,"app-activity-management")(20,PA,1,0,"app-broadcast"),g()()),n&2){let i,r;p(2),A("title","Open menu"),p(5),b(C(8,5,"school-admin.tabs."+o.activeView())),p(2),F((i=o.authService.currentUserSchool())?9:-1,i),p(),F(o.isMobileMenuOpen()?10:-1),p(2),F((r=o.activeView())==="monitor"?12:r==="staff"?13:r==="students"?14:r==="classes"?15:r==="settings"?16:r==="analytics"?17:r==="buses"?18:r==="activities"?19:r==="broadcast"?20:-1)}},dependencies:[La,Ba,Ua,Ha,Ga,qa,za,Wa,oe],styles:["@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slide-in-left{0%{transform:translate(-100%)}to{transform:translate(0)}}@keyframes _ngcontent-%COMP%_slide-in-right{0%{transform:translate(100%)}to{transform:translate(0)}}@keyframes _ngcontent-%COMP%_pulse-border{0%{border-color:var(--color-amber-700)}50%{border-color:var(--color-amber-300)}to{border-color:var(--color-amber-700)}}[_nghost-%COMP%]{width:100%;height:100%;display:block}.admin-dashboard-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}.mobile-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.75rem 1rem;background-color:var(--color-slate-900);border-bottom:1px solid var(--color-slate-800)}.mobile-header-text[_ngcontent-%COMP%]{overflow:hidden}.mobile-header-title[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:var(--color-white);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mobile-header-school[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-slate-400);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mobile-menu-toggle[_ngcontent-%COMP%]{padding:.5rem;background-color:transparent;color:var(--color-slate-300);border:none;border-radius:.5rem;cursor:pointer;transition:background-color .2s}.mobile-menu-toggle[_ngcontent-%COMP%]:hover{background-color:var(--color-slate-800)}.icon-menu[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem}.main-content[_ngcontent-%COMP%]{flex-grow:1;overflow-y:auto;padding:1rem}@media(min-width:640px){.main-content[_ngcontent-%COMP%]{padding:1rem}}@media(min-width:768px){.main-content[_ngcontent-%COMP%]{padding:1.5rem}}.monitor-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;margin-bottom:1.5rem}@media(min-width:640px){.monitor-header[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-between;align-items:center}}.section-title-large[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:var(--color-white)}.section-description[_ngcontent-%COMP%]{color:var(--color-slate-400);margin-top:.25rem}.header-actions-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.active-requests-summary[_ngcontent-%COMP%]{text-align:center;padding:.5rem 1rem;background-color:var(--color-slate-800);color:var(--color-cyan-300);border-radius:.75rem;border:1px solid var(--color-slate-700)}.summary-count[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700}.summary-label[_ngcontent-%COMP%]{font-size:.75rem;text-transform:uppercase}.btn-reset-day[_ngcontent-%COMP%]{padding:.75rem 1rem;background-color:var(--color-slate-800);color:var(--color-red-400);border-radius:.75rem;transition:all .3s;font-weight:600;border:1px solid var(--color-slate-700);cursor:pointer}.btn-reset-day[_ngcontent-%COMP%]:hover{background-color:#ef44441a;border-color:#ef44444d}.request-cards-mobile[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:1rem}@media(min-width:640px){.request-cards-mobile[_ngcontent-%COMP%]{display:none}}.request-card[_ngcontent-%COMP%]{background:linear-gradient(145deg,var(--color-slate-800),#151f32);border-radius:.75rem;border:1px solid var(--color-slate-700);padding:1rem;box-shadow:0 4px 6px -1px #0000001a;border-left-width:4px}.card-arrived-border[_ngcontent-%COMP%]{border-left-color:var(--color-amber-500);animation:_ngcontent-%COMP%_pulse-border 2s infinite}.request-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:1rem}.request-student-name[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:var(--color-white)}.request-student-grade[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-slate-400)}.card-divider[_ngcontent-%COMP%]{border-top:1px solid var(--color-slate-700);margin:.75rem 0}.request-details[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-slate-300);display:flex;flex-direction:column;gap:.25rem}.detail-label[_ngcontent-%COMP%]{color:var(--color-slate-500)}.detail-value[_ngcontent-%COMP%]{font-weight:600}.data-table-container[_ngcontent-%COMP%]{display:none;background-color:var(--color-slate-900);border-radius:.75rem;border:1px solid var(--color-slate-800);overflow:hidden}@media(min-width:640px){.data-table-container[_ngcontent-%COMP%]{display:block}}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table-header[_ngcontent-%COMP%]{background-color:var(--color-slate-800)}.table-th[_ngcontent-%COMP%]{padding:.75rem 1.5rem;font-size:.75rem;font-weight:600;color:var(--color-slate-300);text-transform:uppercase;letter-spacing:.05em;text-align:start}.table-row[_ngcontent-%COMP%]{border-bottom:1px solid var(--color-slate-800);transition:background-color .2s;border-left:4px solid transparent}.table-row-arrived[_ngcontent-%COMP%]{border-left-color:var(--color-amber-500);animation:_ngcontent-%COMP%_pulse-border 2s infinite}.table-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.table-row[_ngcontent-%COMP%]:hover{background-color:var(--color-slate-800)}.table-td[_ngcontent-%COMP%]{padding:1rem 1.5rem;font-size:.875rem;color:var(--color-slate-400);vertical-align:middle}.table-td-primary[_ngcontent-%COMP%]{color:var(--color-white);font-weight:500}.student-name-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.text-slate-500[_ngcontent-%COMP%]{color:var(--color-slate-500)}.status-badge[_ngcontent-%COMP%]{padding:.25rem .75rem;font-weight:600;font-size:.75rem;border-radius:9999px;display:inline-block}.status-pending[_ngcontent-%COMP%]{background-color:var(--color-amber-500-30);color:var(--color-amber-300)}.status-acknowledged[_ngcontent-%COMP%]{background-color:var(--color-sky-500-20);color:var(--color-sky-300)}.status-arrived[_ngcontent-%COMP%]{background-color:var(--color-amber-500-30);color:var(--color-amber-300)}.status-ready[_ngcontent-%COMP%]{background-color:var(--color-green-500-20);color:var(--color-green-400)}.status-completed[_ngcontent-%COMP%]{background-color:var(--color-slate-700);color:var(--color-slate-300)}.no-requests-message[_ngcontent-%COMP%]{text-align:center;color:var(--color-slate-500);padding:4rem;background-color:var(--color-slate-800);border-radius:.75rem}.no-requests-text[_ngcontent-%COMP%]{font-size:1.125rem}"],changeDetection:0})}};var Av=(t,e)=>e.school.id;function DA(t,e){t&1&&(h(0),y(1,"translate")),t&2&&N(" ",C(1,1,"schoolManagement.editTitle")," ")}function AA(t,e){t&1&&(h(0),y(1,"translate")),t&2&&N(" ",C(1,1,"schoolManagement.addTitle")," ")}function NA(t,e){t&1&&(m(0,"span",13),h(1),y(2,"translate"),g()),t&2&&(p(),N("(",C(2,1,"common.optionalLeaveBlank"),")"))}function kA(t,e){t&1&&(m(0,"p",16),h(1),y(2,"translate"),g()),t&2&&(p(),b(C(2,1,"common.errors.passwordsDoNotMatch")))}function RA(t,e){t&1&&(h(0),y(1,"translate")),t&2&&N(" ",C(1,1,"common.saveChanges")," ")}function OA(t,e){t&1&&(h(0),y(1,"translate")),t&2&&N(" ",C(1,1,"schoolManagement.createButton")," ")}function FA(t,e){if(t&1){let n=G();m(0,"div",1)(1,"h3",6),O(2,DA,2,3)(3,AA,2,3),g(),m(4,"form",7),M("submit",function(){I(n);let i=E();return T(i.saveSchool())}),m(5,"div")(6,"label",8),h(7),y(8,"translate"),g(),m(9,"input",9),M("ngModelChange",function(i){I(n);let r=E();return T(r.updateSchoolForm("name",i))}),g()(),m(10,"div")(11,"label",8),h(12),y(13,"translate"),g(),m(14,"input",10),M("ngModelChange",function(i){I(n);let r=E();return T(r.updateSchoolForm("adminName",i))}),g()(),m(15,"div")(16,"label",8),h(17),y(18,"translate"),g(),m(19,"input",11),M("ngModelChange",function(i){I(n);let r=E();return T(r.updateSchoolForm("adminEmail",i))}),g()(),m(20,"div",12)(21,"div")(22,"label",8),h(23),y(24,"translate"),O(25,NA,3,3,"span",13),g(),m(26,"input",14),M("ngModelChange",function(i){I(n);let r=E();return T(r.updateSchoolForm("adminPassword",i))}),g()(),m(27,"div")(28,"label",8),h(29),y(30,"translate"),g(),m(31,"input",15),M("ngModelChange",function(i){I(n);let r=E();return T(r.updateSchoolForm("adminPasswordConfirm",i))}),g()()(),O(32,kA,3,3,"p",16),m(33,"div",17)(34,"button",18),M("click",function(){I(n);let i=E();return T(i.cancelForm())}),h(35),y(36,"translate"),g(),m(37,"button",19),O(38,RA,2,3)(39,OA,2,3),g()()()()}if(t&2){let n=E();p(2),F(n.formMode()==="edit"?2:3),p(5),b(C(8,20,"schoolManagement.schoolName")),p(2),A("ngModel",n.schoolForm().name),p(3),b(C(13,22,"schoolManagement.adminName")),p(2),A("ngModel",n.schoolForm().adminName),p(3),b(C(18,24,"schoolManagement.adminEmail")),p(2),A("ngModel",n.schoolForm().adminEmail),p(4),N(" ",C(24,26,"common.password")," "),p(2),F(n.formMode()==="edit"?25:-1),p(),A("ngModel",n.schoolForm().adminPassword)("required",n.formMode()==="add"),p(3),b(C(30,28,"common.confirmPassword")),p(2),A("ngModel",n.schoolForm().adminPasswordConfirm)("required",!!n.schoolForm().adminPassword),p(),F(n.passwordsDoNotMatch()?32:-1),p(3),N(" ",C(36,30,"common.cancel")," "),p(2),j("btn-disabled",!n.isFormValid()),A("disabled",!n.isFormValid()),p(),F(n.formMode()==="edit"?38:39)}}function VA(t,e){if(t&1){let n=G();m(0,"button",20),M("click",function(){I(n);let i=E();return T(i.showAddForm())}),U(),m(1,"svg",21),k(2,"path",22),g(),J(),m(3,"span"),h(4),y(5,"translate"),g()()}t&2&&(p(4),b(C(5,1,"schoolManagement.addSchool")))}function LA(t,e){if(t&1){let n=G();m(0,"div",24)(1,"div")(2,"p",31),h(3),g()(),k(4,"div",32),m(5,"div",33)(6,"p")(7,"span",34),h(8),y(9,"translate"),g(),m(10,"span",35),h(11),g()(),m(12,"p")(13,"span",34),h(14),y(15,"translate"),g(),m(16,"span",35),h(17),g()()(),k(18,"div",32),m(19,"div",36)(20,"button",37),y(21,"translate"),M("click",function(){let i=I(n).$implicit,r=E(2);return T(r.startEdit(i))}),U(),m(22,"svg",21),k(23,"path",38)(24,"path",39),g()(),J(),m(25,"button",40),y(26,"translate"),M("click",function(){let i=I(n).$implicit,r=E(2);return T(r.deleteSchool(i))}),U(),m(27,"svg",21),k(28,"path",41),g()()()()}if(t&2){let n=e.$implicit;p(3),b(n.school.name),p(5),N("",C(9,7,"schoolManagement.adminName"),":"),p(3),b(n.admin.name),p(3),N("",C(15,9,"schoolManagement.adminEmail"),":"),p(3),b(n.admin.email),p(3),A("title",C(21,11,"common.edit")),p(5),A("title",C(26,13,"common.delete"))}}function BA(t,e){if(t&1){let n=G();m(0,"tr",30)(1,"td",42),h(2),g(),m(3,"td",43),h(4),g(),m(5,"td",43),h(6),g(),m(7,"td",44)(8,"div",45)(9,"button",37),y(10,"translate"),M("click",function(){let i=I(n).$implicit,r=E(2);return T(r.startEdit(i))}),U(),m(11,"svg",21),k(12,"path",38)(13,"path",39),g()(),J(),m(14,"button",40),y(15,"translate"),M("click",function(){let i=I(n).$implicit,r=E(2);return T(r.deleteSchool(i))}),U(),m(16,"svg",21),k(17,"path",41),g()()()()()}if(t&2){let n=e.$implicit;p(2),b(n.school.name),p(2),b(n.admin.name),p(2),b(n.admin.email),p(3),A("title",C(10,5,"common.edit")),p(5),A("title",C(15,7,"common.delete"))}}function UA(t,e){if(t&1&&(m(0,"div",23),Z(1,LA,29,15,"div",24,Av),g(),m(3,"div",25)(4,"table",26)(5,"thead",27)(6,"tr")(7,"th",28),h(8),y(9,"translate"),g(),m(10,"th",28),h(11),y(12,"translate"),g(),m(13,"th",28),h(14),y(15,"translate"),g(),m(16,"th",29),h(17),y(18,"translate"),g()()(),m(19,"tbody"),Z(20,BA,18,9,"tr",30,Av),g()()()),t&2){let n=E();p(),K(n.schoolsWithAdmins()),p(7),b(C(9,4,"schoolManagement.schoolName")),p(3),b(C(12,6,"schoolManagement.adminName")),p(3),b(C(15,8,"schoolManagement.adminEmail")),p(3),b(C(18,10,"common.actions")),p(3),K(n.schoolsWithAdmins())}}function HA(t,e){t&1&&(m(0,"div",5)(1,"p"),h(2),y(3,"translate"),g()()),t&2&&(p(2),b(C(3,1,"schoolManagement.noSchools")))}var Ja=class t{constructor(){this.translationService=w(X);this.dataService=w(Ee);this.toastService=w(ue);this.schoolForm=R(Pa);this.editingSchool=R(null);this.formMode=R("hidden");this.schoolsWithAdmins=H(()=>this.dataService.schools().map(e=>({school:e,admin:this.dataService.getAdminForSchool(e.id)})).filter(e=>e.admin!==void 0));this.passwordsDoNotMatch=H(()=>{let e=this.schoolForm();return e.adminPassword&&e.adminPassword!==e.adminPasswordConfirm});this.isFormValid=H(()=>{let e=this.schoolForm();return!(!e.name||!e.adminName||!e.adminEmail||this.formMode()==="add"&&!e.adminPassword||e.adminPassword!==e.adminPasswordConfirm)})}showAddForm(){this.formMode.set("add"),this.editingSchool.set(null),this.schoolForm.set(Pa)}startEdit(e){this.formMode.set("edit"),this.editingSchool.set(e),this.schoolForm.set({name:e.school.name,adminName:e.admin.name,adminEmail:e.admin.email,adminPassword:"",adminPasswordConfirm:""})}cancelForm(){this.formMode.set("hidden"),this.editingSchool.set(null),this.schoolForm.set(Pa)}async saveSchool(){if(!this.isFormValid())return;let e=this.schoolForm(),n=this.editingSchool();this.formMode()==="edit"&&n?(await this.dataService.updateSchoolAndAdmin(n.school.id,e.name,n.admin.id,e.adminName,e.adminEmail,e.adminPassword),this.toastService.show(this.translationService.translate("schoolManagement.toast.schoolUpdated"),"success")):(await this.dataService.addSchool(e.name,e.adminName,e.adminEmail,e.adminPassword),this.toastService.show(this.translationService.translate("schoolManagement.toast.schoolAdded"),"success")),this.cancelForm()}async deleteSchool(e){let n=this.translationService.translate("schoolManagement.deleteConfirmationText"),o=this.translationService.translate("schoolManagement.deleteConfirmationTitle");confirm(`${o}

${n}`)&&(await this.dataService.deleteSchoolAndAdmin(e.school.id),this.toastService.show(this.translationService.translate("schoolManagement.toast.schoolDeleted"),"success"))}updateSchoolForm(e,n){this.schoolForm.update(o=>z(B({},o),{[e]:n}))}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=ee({type:t,selectors:[["app-school-management"]],decls:9,vars:6,consts:[[1,"school-management-container"],[1,"add-edit-form-card"],[1,"main-actions-header"],[1,"section-title"],[1,"btn-add-school"],[1,"no-schools-message"],[1,"form-card-title"],[1,"form-spacing",3,"submit"],[1,"form-label"],["type","text","name","schoolName","required","",1,"form-input",3,"ngModelChange","ngModel"],["type","text","name","adminName","required","",1,"form-input",3,"ngModelChange","ngModel"],["type","email","name","adminEmail","required","",1,"form-input",3,"ngModelChange","ngModel"],[1,"form-grid"],[1,"form-label-optional"],["type","password","name","adminPassword",1,"form-input",3,"ngModelChange","ngModel","required"],["type","password","name","adminPasswordConfirm",1,"form-input",3,"ngModelChange","ngModel","required"],[1,"form-error-message"],[1,"form-buttons-group"],["type","button",1,"btn-secondary",3,"click"],["type","submit",1,"btn-primary",3,"disabled"],[1,"btn-add-school",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"icon-small"],["fill-rule","evenodd","d","M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule","evenodd"],[1,"school-cards-mobile"],[1,"school-card"],[1,"data-table-container"],[1,"data-table"],[1,"table-header"],["scope","col",1,"table-th"],["scope","col",1,"table-th","table-th-actions"],[1,"table-row"],[1,"school-name"],[1,"card-divider"],[1,"school-details"],[1,"detail-label"],[1,"detail-value"],[1,"card-actions"],[1,"action-button","edit-button",3,"click","title"],["d","M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"],["fill-rule","evenodd","d","M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z","clip-rule","evenodd"],[1,"action-button","delete-button",3,"click","title"],["fill-rule","evenodd","d","M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule","evenodd"],[1,"table-td","table-td-primary"],[1,"table-td"],[1,"table-td","table-td-actions"],[1,"action-buttons-group"]],template:function(n,o){n&1&&(m(0,"div",0),O(1,FA,40,32,"div",1),m(2,"div",2)(3,"h2",3),h(4),y(5,"translate"),g(),O(6,VA,6,3,"button",4),g(),O(7,UA,22,12)(8,HA,4,3,"div",5),g()),n&2&&(p(),F(o.formMode()!=="hidden"?1:-1),p(3),b(C(5,4,"schoolManagement.existingSchools")),p(2),F(o.formMode()==="hidden"?6:-1),p(),F(o.schoolsWithAdmins().length>0?7:8))},dependencies:[Ae,Ve,Me,De,Fe,Be,Ie,Re,oe],styles:["@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.school-management-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in .5s ease-out forwards;width:100%}.add-edit-form-card[_ngcontent-%COMP%]{background-color:#1e293b80;padding:1.5rem;border-radius:.75rem;border:1px solid var(--color-slate-700);margin-bottom:2rem;animation:_ngcontent-%COMP%_fade-in .5s ease-out forwards}.form-card-title[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;margin-bottom:1.5rem}.form-spacing[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.form-label[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:500;color:var(--color-slate-300);margin-bottom:.5rem}.form-input[_ngcontent-%COMP%]{width:90%;background-color:var(--color-slate-800);border:1px solid var(--color-slate-700);border-radius:.5rem;padding:.75rem;outline:none;transition:all .2s ease-in-out}.form-input[_ngcontent-%COMP%]:focus{border-color:var(--color-cyan-500);background-color:var(--color-slate-900);box-shadow:0 0 0 3px #06b6d44d}.form-buttons-group[_ngcontent-%COMP%]{padding-top:.5rem;display:flex;justify-content:flex-end;gap:1rem}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:1rem}@media(min-width:640px){.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}}.form-label-optional[_ngcontent-%COMP%]{font-weight:400;font-size:.75rem;color:var(--color-slate-400)}.form-error-message[_ngcontent-%COMP%]{color:var(--color-red-400);font-size:.875rem;margin-top:-.5rem}.main-actions-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem}.section-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:var(--color-cyan-400)}.btn-add-school[_ngcontent-%COMP%]{background-color:var(--color-cyan-500);color:var(--color-white);font-weight:600;padding:.625rem 1rem;border-radius:.5rem;transition-property:background-color;transition-duration:.3s;display:flex;align-items:center;gap:.5rem;border:none;cursor:pointer}.btn-add-school[_ngcontent-%COMP%]:hover{background-color:var(--color-cyan-600)}.school-cards-mobile[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:1rem}@media(min-width:640px){.school-cards-mobile[_ngcontent-%COMP%]{display:none}}.school-card[_ngcontent-%COMP%]{background:linear-gradient(145deg,var(--color-slate-800),#151f32);border-radius:.75rem;border:1px solid var(--color-slate-700);padding:1rem;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}.school-name[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:var(--color-white)}.card-divider[_ngcontent-%COMP%]{border-top:1px solid var(--color-slate-700);margin:.75rem 0}.school-details[_ngcontent-%COMP%]   .detail-label[_ngcontent-%COMP%]{color:var(--color-slate-500)}.school-details[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{color:var(--color-slate-300)}.card-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.75rem;margin-top:.5rem}.data-table-container[_ngcontent-%COMP%]{display:none;background-color:var(--color-slate-900);border-radius:.75rem;border:1px solid var(--color-slate-800);overflow:hidden}@media(min-width:640px){.data-table-container[_ngcontent-%COMP%]{display:block}}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table-header[_ngcontent-%COMP%]{background-color:var(--color-slate-800)}.table-th[_ngcontent-%COMP%]{padding:.75rem 1.5rem;font-size:.75rem;font-weight:600;color:var(--color-slate-300);text-transform:uppercase;letter-spacing:.05em;text-align:left}.table-row[_ngcontent-%COMP%]{border-bottom:1px solid var(--color-slate-800);transition:background-color .2s ease-in-out}.table-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.table-row[_ngcontent-%COMP%]:hover{background-color:var(--color-slate-800)}.table-td[_ngcontent-%COMP%]{padding:1rem 1.5rem;font-size:.875rem;color:var(--color-slate-400);vertical-align:middle}.table-td-primary[_ngcontent-%COMP%]{color:var(--color-white);font-weight:500}.table-th-actions[_ngcontent-%COMP%], .table-td-actions[_ngcontent-%COMP%]{text-align:right}.action-buttons-group[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.5rem}.icon-small[_ngcontent-%COMP%]{height:1.125rem;width:1.125rem}.action-button[_ngcontent-%COMP%]{padding:.5rem;background-color:transparent;border:1px solid var(--color-slate-700);border-radius:.5rem;transition:all .2s ease-in-out;cursor:pointer;display:flex;align-items:center;justify-content:center}.action-button[_ngcontent-%COMP%]:hover{background-color:var(--color-slate-700);border-color:var(--color-slate-600)}.action-button.edit-button[_ngcontent-%COMP%]{color:var(--color-cyan-400)}.action-button.delete-button[_ngcontent-%COMP%]{color:var(--color-red-400)}.no-schools-message[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:var(--color-slate-500);background-color:var(--color-slate-800);border-radius:.5rem}.btn-primary[_ngcontent-%COMP%]{padding:.625rem 1.25rem;background-color:var(--color-cyan-500);color:var(--color-white);font-weight:600;border-radius:.5rem;border:none;cursor:pointer;transition:background-color .2s}.btn-primary[_ngcontent-%COMP%]:hover{background-color:var(--color-cyan-600)}.btn-primary.btn-disabled[_ngcontent-%COMP%], .btn-primary[_ngcontent-%COMP%]:disabled{background-color:var(--color-slate-600);cursor:not-allowed;opacity:.7}.btn-secondary[_ngcontent-%COMP%]{padding:.625rem 1.25rem;background-color:var(--color-slate-600);color:var(--color-slate-300);font-weight:600;border-radius:.5rem;border:none;cursor:pointer;transition:background-color .2s}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:var(--color-slate-500)}"],changeDetection:0})}};var ja=(t,e)=>e.id;function GA(t,e){if(t&1&&(m(0,"option",15),h(1),g()),t&2){let n=e.$implicit,o=E(2);A("value",n),p(),b(o.getRoleTranslation(n))}}function qA(t,e){if(t&1&&(m(0,"option",15),h(1),g()),t&2){let n=e.$implicit;A("value",n.id),p(),b(n.name)}}function $A(t,e){if(t&1){let n=G();m(0,"div")(1,"label",10),h(2),y(3,"translate"),g(),m(4,"select",20),M("ngModelChange",function(i){I(n);let r=E(2);return T(r.updateEditForm("schoolId",i))}),m(5,"option",14),h(6),y(7,"translate"),g(),Z(8,qA,2,2,"option",15,ja),g()()}if(t&2){let n=E(2);p(2),b(C(3,3,"common.school")),p(2),A("ngModel",n.editForm().schoolId),p(2),b(C(7,5,"common.selectSchool")),p(2),K(n.schools())}}function zA(t,e){if(t&1&&(m(0,"option",15),h(1),g()),t&2){let n=e.$implicit;A("value",n.id),p(),b(n.name)}}function WA(t,e){if(t&1){let n=G();m(0,"div",16)(1,"label",10),h(2),y(3,"translate"),g(),m(4,"select",21),M("ngModelChange",function(i){I(n);let r=E(2);return T(r.updateEditForm("classId",i))}),m(5,"option",14),h(6),y(7,"translate"),g(),Z(8,zA,2,2,"option",15,ja),g()()}if(t&2){let n=E(2);p(2),b(C(3,4,"school-admin.staff.class")),p(2),A("ngModel",n.editForm().classId)("disabled",!n.editForm().schoolId),p(2),b(C(7,6,"school-admin.staff.selectClass")),p(2),K(n.classesForSelectedSchool())}}function YA(t,e){if(t&1){let n=G();m(0,"div",1)(1,"h3",7),h(2),y(3,"translate"),g(),m(4,"form",8),M("submit",function(){I(n);let i=E();return T(i.saveUser())}),m(5,"div",9)(6,"div")(7,"label",10),h(8),y(9,"translate"),g(),m(10,"input",11),M("ngModelChange",function(i){I(n);let r=E();return T(r.updateEditForm("name",i))}),g()(),m(11,"div")(12,"label",10),h(13),y(14,"translate"),g(),m(15,"input",12),M("ngModelChange",function(i){I(n);let r=E();return T(r.updateEditForm("email",i))}),g()()(),m(16,"div",9)(17,"div")(18,"label",10),h(19),y(20,"translate"),g(),m(21,"select",13),M("ngModelChange",function(i){I(n);let r=E();return T(r.updateEditForm("role",i))}),m(22,"option",14),h(23),y(24,"translate"),g(),Z(25,GA,2,2,"option",15,Hi),g()(),O(27,$A,10,7,"div"),g(),O(28,WA,10,8,"div",16),m(29,"div",17)(30,"button",18),M("click",function(){I(n);let i=E();return T(i.cancelEdit())}),h(31),y(32,"translate"),g(),m(33,"button",19),h(34),y(35,"translate"),g()()()()}if(t&2){let n,o=E();p(2),Ce("",C(3,16,"super-admin.accountManagement.editTitle"),": ",(n=o.editingUser())==null?null:n.name),p(6),b(C(9,18,"schoolManagement.adminName")),p(2),A("ngModel",o.editForm().name),p(3),b(C(14,20,"common.email")),p(2),A("ngModel",o.editForm().email),p(4),b(C(20,22,"school-admin.staff.role")),p(2),A("ngModel",o.editForm().role),p(2),b(C(24,24,"school-admin.staff.selectRole")),p(2),K(o.userRoles),p(2),F(o.editForm().role!=="super-admin"?27:-1),p(),F(o.editForm().role==="teacher"?28:-1),p(3),N(" ",C(32,26,"common.cancel")," "),p(2),j("btn-disabled",!o.isEditFormValid()),A("disabled",!o.isEditFormValid()),p(),N(" ",C(35,28,"common.saveChanges")," ")}}function JA(t,e){if(t&1){let n=G();m(0,"div",23)(1,"div",30)(2,"div")(3,"p",31),h(4),g(),m(5,"p",32),h(6),g()(),m(7,"span",33),h(8),g()(),k(9,"div",34),m(10,"div",35)(11,"p")(12,"span",36),h(13),y(14,"translate"),g(),m(15,"span",37),h(16),g()()(),k(17,"div",34),m(18,"div",38)(19,"button",39),y(20,"translate"),M("click",function(){let i=I(n).$implicit,r=E(2);return T(r.startEdit(i))}),U(),m(21,"svg",40),k(22,"path",41)(23,"path",42),g()(),J(),m(24,"button",43),y(25,"translate"),M("click",function(){let i=I(n).$implicit,r=E(2);return T(r.deleteUser(i))}),U(),m(26,"svg",40),k(27,"path",44),g()()()()}if(t&2){let n=e.$implicit,o=E(2);p(4),b(n.name),p(2),b(n.email),p(2),N(" ",o.getRoleTranslation(n.role)," "),p(5),N("",C(14,7,"common.school"),":"),p(3),b(n.schoolName),p(3),A("title",C(20,9,"common.edit")),p(5),A("title",C(25,11,"common.delete"))}}function jA(t,e){if(t&1){let n=G();m(0,"tr",29)(1,"td",45),h(2),g(),m(3,"td",46),h(4),g(),m(5,"td",46),h(6),g(),m(7,"td",46),h(8),g(),m(9,"td",47)(10,"div",48)(11,"button",39),y(12,"translate"),M("click",function(){let i=I(n).$implicit,r=E(2);return T(r.startEdit(i))}),U(),m(13,"svg",40),k(14,"path",41)(15,"path",42),g()(),J(),m(16,"button",43),y(17,"translate"),M("click",function(){let i=I(n).$implicit,r=E(2);return T(r.deleteUser(i))}),U(),m(18,"svg",40),k(19,"path",44),g()()()()()}if(t&2){let n=e.$implicit,o=E(2);p(2),b(n.name),p(2),b(n.email),p(2),b(o.getRoleTranslation(n.role)),p(2),b(n.schoolName),p(3),A("title",C(12,6,"common.edit")),p(5),A("title",C(17,8,"common.delete"))}}function ZA(t,e){if(t&1&&(m(0,"div",22),Z(1,JA,28,13,"div",23,ja),g(),m(3,"div",24)(4,"table",25)(5,"thead",26)(6,"tr")(7,"th",27),h(8),y(9,"translate"),g(),m(10,"th",27),h(11),y(12,"translate"),g(),m(13,"th",27),h(14),y(15,"translate"),g(),m(16,"th",27),h(17),y(18,"translate"),g(),m(19,"th",28),h(20),y(21,"translate"),g()()(),m(22,"tbody"),Z(23,jA,20,10,"tr",29,ja),g()()()),t&2){let n=E();p(),K(n.filteredUsers()),p(7),b(C(9,5,"schoolManagement.adminName")),p(3),b(C(12,7,"common.email")),p(3),b(C(15,9,"school-admin.staff.role")),p(3),b(C(18,11,"common.school")),p(3),b(C(21,13,"common.actions")),p(3),K(n.filteredUsers())}}function KA(t,e){t&1&&(m(0,"div",6)(1,"p"),h(2),y(3,"translate"),g()()),t&2&&(p(2),b(C(3,1,"super-admin.accountManagement.noUsersFound")))}var Za=class t{constructor(){this.translationService=w(X);this.dataService=w(Ee);this.toastService=w(ue);this.searchTerm=R("");this.editingUser=R(null);this.editForm=R(Tp);this.allUsers=H(()=>this.dataService.users().map(e=>{let n=e.schoolId?this.dataService.getSchoolById(e.schoolId):null;return z(B({},e),{schoolName:n?.name??"N/A"})}));this.filteredUsers=H(()=>{let e=this.searchTerm().toLowerCase();return e?this.allUsers().filter(n=>n.name.toLowerCase().includes(e)||n.email.toLowerCase().includes(e)||n.schoolName.toLowerCase().includes(e)):this.allUsers()});this.schools=H(()=>this.dataService.schools());this.classesForSelectedSchool=H(()=>{let e=this.editForm().schoolId;return e?this.dataService.getClassesBySchool(e):[]});this.isEditFormValid=H(()=>{let e=this.editForm();return!(!e.name||!e.email||!e.role||e.role!=="super-admin"&&!e.schoolId||e.role==="teacher"&&!e.classId)});this.userRoles=["parent","guard","teacher","school-supervisor","school-admin","super-admin"]}startEdit(e){this.editingUser.set(e),this.editForm.set({id:e.id,name:e.name,email:e.email,role:e.role,schoolId:e.schoolId||"",classId:e.classId||""})}cancelEdit(){this.editingUser.set(null),this.editForm.set(Tp)}async saveUser(){let e=this.editingUser();if(!this.isEditFormValid()||!e)return;let n=this.editForm(),o=this.dataService.users().find(r=>r.id===e.id);if(!o)return;let i=z(B({},o),{id:e.id,name:n.name,email:n.email,role:n.role,schoolId:n.role!=="super-admin"?n.schoolId:void 0,classId:n.role==="teacher"?n.classId:void 0});await this.dataService.updateUser(i),this.toastService.show(this.translationService.translate("super-admin.accountManagement.toast.userUpdated"),"success"),this.cancelEdit()}updateEditForm(e,n){this.editForm.update(o=>{let i=z(B({},o),{[e]:n});return e==="role"&&n!=="teacher"&&(i.classId=""),e==="schoolId"&&(i.classId=""),i})}async deleteUser(e){let n=e.role==="school-admin",o=this.translationService.translate("super-admin.accountManagement.deleteConfirmationText");n&&(o+=`

`+this.translationService.translate("super-admin.accountManagement.deleteAdminWarning")),confirm(this.translationService.translate("super-admin.accountManagement.deleteConfirmationTitle")+`

`+o)&&(await this.dataService.deleteUserAndAssociatedData(e.id),this.toastService.show(this.translationService.translate("super-admin.accountManagement.toast.userDeleted"),"success"))}getRoleTranslation(e){return this.translationService.translate(`roles.${e}.title`)}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=ee({type:t,selectors:[["app-account-management"]],decls:13,vars:12,consts:[[1,"account-management-container"],[1,"edit-form-card"],[1,"section-title"],[1,"section-description"],[1,"search-bar-wrapper"],["type","text",1,"search-input",3,"ngModelChange","ngModel","placeholder"],[1,"no-results-message"],[1,"edit-form-title"],[1,"form-layout",3,"submit"],[1,"form-grid"],[1,"form-label"],["type","text","name","userName","required","",1,"form-input",3,"ngModelChange","ngModel"],["type","email","name","userEmail","required","",1,"form-input",3,"ngModelChange","ngModel"],["name","userRole","required","",1,"form-select",3,"ngModelChange","ngModel"],["value","","disabled",""],[3,"value"],[1,"animated-form-field"],[1,"form-actions"],["type","button",1,"btn-secondary",3,"click"],["type","submit",1,"btn-primary",3,"disabled"],["name","userSchool",1,"form-select",3,"ngModelChange","ngModel"],["name","userClass","required","",1,"form-select",3,"ngModelChange","ngModel","disabled"],[1,"user-cards-mobile"],[1,"user-card"],[1,"user-table-desktop"],[1,"data-table"],[1,"table-header"],["scope","col",1,"table-th"],["scope","col",1,"table-th","text-align-right"],[1,"table-row"],[1,"user-card-header"],[1,"user-name"],[1,"user-email"],[1,"user-role-badge"],[1,"card-divider"],[1,"user-details"],[1,"detail-label"],[1,"detail-value"],[1,"card-actions"],[1,"action-button","edit-button",3,"click","title"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"icon-small"],["d","M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"],["fill-rule","evenodd","d","M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z","clip-rule","evenodd"],[1,"action-button","delete-button",3,"click","title"],["fill-rule","evenodd","d","M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule","evenodd"],[1,"table-td-primary"],[1,"table-td"],[1,"table-td","text-align-right"],[1,"action-buttons-group"]],template:function(n,o){n&1&&(m(0,"div",0),O(1,YA,36,30,"div",1),m(2,"h2",2),h(3),y(4,"translate"),g(),m(5,"p",3),h(6),y(7,"translate"),g(),m(8,"div",4)(9,"input",5),y(10,"translate"),M("ngModelChange",function(r){return o.searchTerm.set(r)}),g()(),O(11,ZA,25,15)(12,KA,4,3,"div",6),g()),n&2&&(p(),F(o.editingUser()?1:-1),p(2),b(C(4,6,"super-admin.accountManagement.title")),p(3),b(C(7,8,"super-admin.accountManagement.description")),p(3),A("ngModel",o.searchTerm())("placeholder",C(10,10,"super-admin.accountManagement.searchPlaceholder")),p(2),F(o.filteredUsers().length>0?11:12))},dependencies:[Ae,Ve,rn,sn,Me,Et,De,Fe,Be,Ie,Re,oe],styles:["@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.account-management-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in .5s ease-out forwards}.edit-form-card[_ngcontent-%COMP%]{background-color:#1e293b80;padding:1.5rem;border-radius:.75rem;border:1px solid var(--color-slate-700);margin-bottom:2rem;animation:_ngcontent-%COMP%_fade-in .5s ease-out forwards}.edit-form-title[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;margin-bottom:1.5rem}.form-layout[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:1rem}@media(min-width:640px){.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}}.form-label[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:500;color:var(--color-slate-300);margin-bottom:.5rem}.form-input[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{width:90%;background-color:var(--color-slate-800);border:1px solid var(--color-slate-700);border-radius:.5rem;padding:.75rem;outline:none;transition:all .2s ease-in-out}.form-input[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{border-color:var(--color-cyan-500);background-color:var(--color-slate-900);box-shadow:0 0 0 3px #06b6d44d}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;margin-top:1rem}.animated-form-field[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in .3s ease-out forwards}.section-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:var(--color-cyan-400)}.section-description[_ngcontent-%COMP%]{color:var(--color-slate-400);margin-top:.25rem;margin-bottom:1.5rem}.search-bar-wrapper[_ngcontent-%COMP%]{margin-bottom:1.5rem}.search-input[_ngcontent-%COMP%]{width:100%;max-width:24rem;background-color:var(--color-slate-800);border:1px solid var(--color-slate-700);border-radius:.5rem;padding:.75rem 1rem;outline:none;transition:all .2s ease-in-out}.search-input[_ngcontent-%COMP%]:focus{border-color:var(--color-cyan-500);background-color:var(--color-slate-900);box-shadow:0 0 0 3px #06b6d44d}.user-cards-mobile[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:1rem}@media(min-width:640px){.user-cards-mobile[_ngcontent-%COMP%]{display:none}}.user-card[_ngcontent-%COMP%]{background:linear-gradient(145deg,var(--color-slate-800),#151f32);border-radius:.75rem;border:1px solid var(--color-slate-700);padding:1rem;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}.user-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:1rem}.user-name[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:var(--color-white)}.user-email[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-slate-400)}.user-role-badge[_ngcontent-%COMP%]{background-color:var(--color-cyan-500-20);color:var(--color-cyan-300);padding:.25rem .75rem;border-radius:9999px;font-size:.75rem;font-weight:500;white-space:nowrap}.card-divider[_ngcontent-%COMP%]{border-top:1px solid var(--color-slate-700);margin:.75rem 0}.user-details[_ngcontent-%COMP%]   .detail-label[_ngcontent-%COMP%]{color:var(--color-slate-500)}.user-details[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{color:var(--color-slate-300)}.card-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.75rem}.user-table-desktop[_ngcontent-%COMP%]{display:none;background-color:var(--color-slate-900);border-radius:.75rem;border:1px solid var(--color-slate-800);overflow:hidden}@media(min-width:640px){.user-table-desktop[_ngcontent-%COMP%]{display:block}}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table-header[_ngcontent-%COMP%]{background-color:var(--color-slate-800)}.table-th[_ngcontent-%COMP%]{padding:.75rem 1.5rem;font-size:.75rem;font-weight:600;color:var(--color-slate-300);text-transform:uppercase;letter-spacing:.05em;text-align:left}.table-row[_ngcontent-%COMP%]{border-bottom:1px solid var(--color-slate-800);transition:background-color .2s ease-in-out}.table-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.table-row[_ngcontent-%COMP%]:hover{background-color:var(--color-slate-800)}.table-td[_ngcontent-%COMP%]{padding:1rem 1.5rem;font-size:.875rem;color:var(--color-slate-400);vertical-align:middle}.table-td-primary[_ngcontent-%COMP%]{color:var(--color-white);font-weight:500}.text-align-right[_ngcontent-%COMP%]{text-align:right}.action-buttons-group[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.5rem}.action-button[_ngcontent-%COMP%]{padding:.5rem;background-color:transparent;border:1px solid var(--color-slate-700);border-radius:.5rem;transition:all .2s ease-in-out;cursor:pointer;display:flex;align-items:center;justify-content:center}.action-button[_ngcontent-%COMP%]:hover{background-color:var(--color-slate-700);border-color:var(--color-slate-600)}.action-button.edit-button[_ngcontent-%COMP%]{color:var(--color-cyan-400)}.action-button.delete-button[_ngcontent-%COMP%]{color:var(--color-red-400)}.icon-small[_ngcontent-%COMP%]{height:1.125rem;width:1.125rem}.no-results-message[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:var(--color-slate-500);background-color:var(--color-slate-800);border-radius:.5rem}.btn-primary[_ngcontent-%COMP%]{padding:.625rem 1.25rem;background-color:var(--color-cyan-500);color:var(--color-white);font-weight:600;border-radius:.5rem;border:none;cursor:pointer;transition:background-color .2s}.btn-primary[_ngcontent-%COMP%]:hover{background-color:var(--color-cyan-600)}.btn-primary.btn-disabled[_ngcontent-%COMP%], .btn-primary[_ngcontent-%COMP%]:disabled{background-color:var(--color-slate-600);cursor:not-allowed;opacity:.7}.btn-secondary[_ngcontent-%COMP%]{padding:.625rem 1.25rem;background-color:var(--color-slate-600);color:var(--color-slate-300);font-weight:600;border-radius:.5rem;border:none;cursor:pointer;transition:background-color .2s}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:var(--color-slate-500)}"],changeDetection:0})}};function QA(t,e){t&1&&k(0,"app-school-management")}function XA(t,e){t&1&&k(0,"app-account-management")}var Ka=class t{constructor(){this.translationService=w(X);this.activeView=R("schools")}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=ee({type:t,selectors:[["app-super-admin-dashboard"]],decls:18,vars:15,consts:[[1,"dashboard-container-admin"],[1,"tab-nav-wrapper-admin"],["aria-label","Tabs",1,"tab-nav-admin"],[1,"tab-button-admin",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"tab-icon-admin"],["stroke-linecap","round","stroke-linejoin","round","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],["stroke-linecap","round","stroke-linejoin","round","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"dashboard-content-area-admin"]],template:function(n,o){if(n&1&&(m(0,"div",0)(1,"div",1)(2,"nav",2)(3,"button",3),M("click",function(){return o.activeView.set("schools")}),U(),m(4,"svg",4),k(5,"path",5),g(),J(),m(6,"span"),h(7),y(8,"translate"),g()(),m(9,"button",3),M("click",function(){return o.activeView.set("accounts")}),U(),m(10,"svg",4),k(11,"path",6),g(),J(),m(12,"span"),h(13),y(14,"translate"),g()()()(),m(15,"div",7),O(16,QA,1,0,"app-school-management")(17,XA,1,0,"app-account-management"),g()()),n&2){let i;p(3),j("tab-button-admin-active",o.activeView()==="schools")("tab-button-admin-inactive",o.activeView()!=="schools"),p(4),b(C(8,11,"super-admin.tabs.schools")),p(2),j("tab-button-admin-active",o.activeView()==="accounts")("tab-button-admin-inactive",o.activeView()!=="accounts"),p(4),b(C(14,13,"super-admin.tabs.accounts")),p(3),F((i=o.activeView())==="schools"?16:i==="accounts"?17:-1)}},dependencies:[Ja,Za,oe],styles:["@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.dashboard-container-admin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in .5s ease-out forwards;width:100%}.tab-nav-wrapper-admin[_ngcontent-%COMP%]{background-color:#0f172ab3;-webkit-backdrop-filter:blur(1rem);backdrop-filter:blur(1rem);border:1px solid rgba(51,65,85,.8);border-radius:1rem;box-shadow:0 25px 50px -12px #00000040;margin-bottom:1.5rem}.tab-nav-admin[_ngcontent-%COMP%]{display:flex;padding:.5rem}.tab-button-admin[_ngcontent-%COMP%]{width:50%;padding:.75rem .25rem;text-align:center;font-weight:500;font-size:.875rem;transition-property:background-color,color;transition-duration:.3s;border-radius:.5rem;display:flex;align-items:center;justify-content:center;gap:.5rem;border:none;background-color:transparent;cursor:pointer}.tab-button-admin-active[_ngcontent-%COMP%]{background-color:var(--color-slate-800);color:var(--color-cyan-400)}.tab-button-admin-inactive[_ngcontent-%COMP%]{color:var(--color-slate-400)}.tab-button-admin[_ngcontent-%COMP%]:hover{background-color:#1e293b99}.dashboard-content-area-admin[_ngcontent-%COMP%]{margin-top:1rem}.tab-icon-admin[_ngcontent-%COMP%]{height:1.125rem;width:1.125rem}"],changeDetection:0})}};var eN=(t,e)=>e.id;function tN(t,e){if(t&1){let n=G();m(0,"div",1)(1,"h2",2),h(2),y(3,"translate"),g(),m(4,"app-pickup-status-card",3),M("arrivalSignaled",function(){I(n);let i=E();return T(i.signalArrival())}),g()()}t&2&&(p(2),b(C(3,2,"driverDashboard.pickupInProgress")),p(2),A("pickupCode",e.code))}function nN(t,e){if(t&1&&(m(0,"div",11),k(1,"img",20),m(2,"p",21),h(3),g(),m(4,"p",22),h(5),g()()),t&2){let n=e.$implicit;p(),A("src",n.photoUrl,qe)("alt",n.name),p(2),b(n.name),p(2),b(n.class)}}function oN(t,e){if(t&1){let n=G();m(0,"div",7)(1,"section")(2,"h3",9),h(3),y(4,"translate"),g(),m(5,"div",10),Z(6,nN,6,4,"div",11,eN),g()(),m(8,"section")(9,"h3",9),h(10),y(11,"translate"),g(),m(12,"div",12)(13,"input",13),y(14,"translate"),M("ngModelChange",function(i){I(n);let r=E(2);return T(r.updateCarInfo("color",i))}),g(),m(15,"input",14),y(16,"translate"),M("ngModelChange",function(i){I(n);let r=E(2);return T(r.updateCarInfo("plateNumber",i))}),g(),m(17,"textarea",15),y(18,"translate"),M("ngModelChange",function(i){I(n);let r=E(2);return T(r.pickupNotes.set(i))}),g()()(),m(19,"button",16),M("click",function(){I(n);let i=E(2);return T(i.requestPickup())}),m(20,"div",17),U(),m(21,"svg",18),k(22,"path",19),g(),J(),m(23,"span"),h(24),y(25,"translate"),g()()()()}if(t&2){let n=E(2);p(3),b(C(4,10,"driverDashboard.assignedStudents")),p(3),K(n.assignedStudents()),p(4),b(C(11,12,"parent.steps.vehicleInfo")),p(3),A("ngModel",n.carInfo().color)("placeholder",C(14,14,"parent.placeholders.carColor")),p(2),A("ngModel",n.carInfo().plateNumber)("placeholder",C(16,16,"parent.placeholders.plateNumber")),p(2),A("ngModel",n.pickupNotes())("placeholder",C(18,18,"parent.placeholders.notes")),p(2),A("disabled",!n.isRequestValid()),p(5),b(C(25,20,"driverDashboard.startPickup"))}}function iN(t,e){t&1&&(m(0,"div",8)(1,"p",23),h(2),y(3,"translate"),g()()),t&2&&(p(2),b(C(3,1,"driverDashboard.noAssignments")))}function rN(t,e){if(t&1&&(m(0,"header",4)(1,"h1",5),h(2),y(3,"translate"),g(),m(4,"p",6),h(5),y(6,"translate"),g()(),O(7,oN,26,22,"div",7)(8,iN,4,3,"div",8)),t&2){let n=E();p(2),b(C(3,3,"driverDashboard.title")),p(3),b(C(6,5,"driverDashboard.welcome")),p(2),F(n.assignedStudents().length>0?7:8)}}var Qa=class t{constructor(){this.authService=w(de);this.dataService=w(Ee);this.pickupStateService=w(Ke);this.translationService=w(X);this.toastService=w(ue);this.currentUser=this.authService.currentUser;this.carInfo=R({color:"",plateNumber:""});this.pickupNotes=R("");this.assignedStudents=H(()=>{let e=this.currentUser();return!e||!e.employerId?[]:this.dataService.getStudentsByParentId(e.employerId)});this.activeRequestForDriver=H(()=>{let e=this.currentUser();return e?this.pickupStateService.activeRequests().find(n=>n.initiatedByDriverId===e.id)??null:null});this.isRequestValid=H(()=>this.carInfo().color.trim()!==""&&this.carInfo().plateNumber.trim()!=="")}updateCarInfo(e,n){this.carInfo.update(o=>z(B({},o),{[e]:n}))}async requestPickup(){let e=this.currentUser(),n=this.assignedStudents(),o=this.authService.currentUserSchool();if(!e||n.length===0||!o){this.toastService.show("Error: Missing required information to start pickup.","error");return}let i={id:e.id,parentId:e.employerId,name:e.name,relation:"Driver",photoUrl:"https://picsum.photos/seed/Driver/50/50",idNumber:"N/A",phone:e.phone},r=Math.floor(1e3+Math.random()*9e3).toString();try{for(let s of n)await this.pickupStateService.addRequest({code:r,student:s,authorizedPerson:i,carInfo:this.carInfo(),status:"pending",eta:20,distance:10,notes:this.pickupNotes(),schoolId:o.id,initiatedByDriverId:e.id});this.toastService.show("Pickup requested successfully!","success")}catch(s){console.error(s),this.toastService.show("Failed to create pickup request.","error")}}async signalArrival(){let e=this.activeRequestForDriver();e&&(await this.pickupStateService.assignPickupSpot(e.code),await this.pickupStateService.updateRequestEtaAndDistance(e.code,0,0))}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=ee({type:t,selectors:[["app-driver-dashboard"]],decls:3,vars:1,consts:[[1,"driver-dashboard-container"],[1,"pickup-in-progress-container"],[1,"pickup-in-progress-title"],[3,"arrivalSignaled","pickupCode"],[1,"dashboard-header"],[1,"welcome-title"],[1,"welcome-subtitle"],[1,"start-pickup-container"],[1,"no-assignments-message"],[1,"form-section-title"],[1,"student-list-grid"],[1,"student-card"],[1,"vehicle-info-section"],["type","text","dir","auto",1,"form-input",3,"ngModelChange","ngModel","placeholder"],["type","text","dir","auto",1,"form-input","plate-number-input",3,"ngModelChange","ngModel","placeholder"],["rows","3","dir","auto",1,"form-input","form-textarea",3,"ngModelChange","ngModel","placeholder"],[1,"btn-start-pickup",3,"click","disabled"],[1,"btn-content"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"btn-start-pickup-icon"],["d","M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.428A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"],[1,"student-avatar",3,"src","alt"],[1,"student-name"],[1,"student-class-info"],[1,"no-assignments-text"]],template:function(n,o){if(n&1&&(m(0,"div",0),O(1,tN,5,4,"div",1)(2,rN,9,7),g()),n&2){let i;p(),F((i=o.activeRequestForDriver())?1:2,i)}},dependencies:[Ae,Me,De,Ie,Qo,oe],styles:["@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.driver-dashboard-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in .5s ease-out forwards;width:100%;max-width:42rem;margin:0 auto}.dashboard-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.welcome-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:var(--color-white)}.welcome-subtitle[_ngcontent-%COMP%]{color:var(--color-slate-400);margin-top:.25rem}.pickup-in-progress-container[_ngcontent-%COMP%]{max-width:28rem;margin:0 auto}.pickup-in-progress-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:var(--color-cyan-400);text-align:center;margin-bottom:1.5rem}.start-pickup-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}.form-section-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:var(--color-slate-200);margin-bottom:1rem;padding-bottom:.5rem;border-bottom:1px solid var(--color-slate-700)}.student-list-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(10rem,1fr));gap:1rem}.student-card[_ngcontent-%COMP%]{background-color:var(--color-slate-800);border:1px solid var(--color-slate-700);border-radius:.75rem;padding:1rem;text-align:center}.student-avatar[_ngcontent-%COMP%]{width:4rem;height:4rem;margin:0 auto .75rem;border-radius:9999px;object-fit:cover;border:2px solid var(--color-slate-600)}.student-name[_ngcontent-%COMP%]{font-weight:600;color:var(--color-white)}.student-class-info[_ngcontent-%COMP%]{color:var(--color-slate-400);font-size:.875rem}.vehicle-info-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.form-input[_ngcontent-%COMP%]{width:90%;background-color:var(--color-slate-800);border:1px solid var(--color-slate-700);border-radius:.75rem;padding:1rem;outline:none;transition:all .2s ease-in-out}.form-input[_ngcontent-%COMP%]:focus{border-color:var(--color-cyan-500);box-shadow:0 0 0 2px var(--color-cyan-500)}.plate-number-input[_ngcontent-%COMP%]{text-align:right}.form-textarea[_ngcontent-%COMP%]{resize:vertical}.btn-start-pickup[_ngcontent-%COMP%]{width:100%;background-image:linear-gradient(to right,var(--color-cyan-500) 0%,var(--color-cyan-400) 51%,var(--color-cyan-500) 100%);background-size:200% auto;color:var(--color-white);font-weight:700;font-size:1.125rem;padding:1rem 1.5rem;border-radius:.75rem;border:none;cursor:pointer;box-shadow:0 4px 14px #06b6d463;transition:all .3s ease-in-out}.btn-start-pickup[_ngcontent-%COMP%]:hover{background-position:right center;transform:translateY(-2px);box-shadow:0 6px 20px #06b6d43b}.btn-start-pickup[_ngcontent-%COMP%]:disabled{background-image:none;background-color:var(--color-slate-600);cursor:not-allowed;opacity:.7;transform:none;box-shadow:none}.btn-start-pickup-icon[_ngcontent-%COMP%]{width:1.25rem;height:1.25rem}.btn-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.75rem}.no-assignments-message[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:var(--color-slate-500);background-color:var(--color-slate-800);border-radius:.75rem}.no-assignments-text[_ngcontent-%COMP%]{font-size:1.125rem}"],changeDetection:0})}};var sN=t=>({name:t});function aN(t,e){if(t&1){let n=G();x(0,"div",1)(1,"h2",2),h(2),y(3,"translate"),P(),x(4,"p",3),h(5),y(6,"translate"),P(),x(7,"div",4)(8,"p",5),h(9),y(10,"translate"),P(),x(11,"p",6),h(12),P(),x(13,"p",7),h(14),y(15,"translate"),P()(),x(16,"p",8),h(17),y(18,"translate"),P(),x(19,"button",9),ke("click",function(){I(n);let i=E();return T(i.proceedToDashboard())}),h(20),y(21,"translate"),P()()}if(t&2){let n=e,o=E();p(2),b(C(3,7,"roleSelection.title")),p(3),b($i(6,9,"roleSelection.welcome",nu(20,sN,n.name))),p(4),b(C(10,12,"roleSelection.yourRoleIs")),p(3),b(o.translatedRole()),p(2),b(C(15,14,"roles."+n.role+".description")),p(3),b(C(18,16,"roleSelection.info")),p(3),N(" ",C(21,18,"roleSelection.proceedButton")," ")}}var Xa=class t{constructor(){this.authService=w(de);this.translationService=w(X);this.currentUser=this.authService.currentUser;this.translatedRole=H(()=>{let e=this.currentUser();return e?this.translationService.translate(`roles.${e.role}.title`):""})}proceedToDashboard(){this.authService.completeRoleSelection()}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=ee({type:t,selectors:[["app-role-selection"]],decls:2,vars:1,consts:[[1,"role-selection-container"],[1,"role-selection-card"],[1,"role-selection-title"],[1,"role-selection-welcome"],[1,"role-display-box"],[1,"role-label"],[1,"role-name"],[1,"role-description"],[1,"role-selection-info"],[1,"btn-proceed-dashboard",3,"click"]],template:function(n,o){if(n&1&&(x(0,"div",0),O(1,aN,22,22,"div",1),P()),n&2){let i;p(),F((i=o.currentUser())?1:-1,i)}},dependencies:[oe],styles:["@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.role-selection-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;animation:_ngcontent-%COMP%_fade-in .5s ease-out forwards;width:100%}.role-selection-card[_ngcontent-%COMP%]{width:100%;max-width:28rem;padding:2.5rem 1.5rem;text-align:center;color:var(--color-white);box-sizing:border-box}@media(min-width:640px){.role-selection-card[_ngcontent-%COMP%]{background-color:#0f172a99;-webkit-backdrop-filter:blur(1.5rem);backdrop-filter:blur(1.5rem);padding:3rem 2.5rem;border-radius:1.5rem;border:1px solid var(--color-slate-700);box-shadow:0 25px 50px -12px #0006}}.role-selection-title[_ngcontent-%COMP%]{font-size:1.875rem;font-weight:700;color:var(--color-cyan-400);margin-bottom:1rem}.role-selection-welcome[_ngcontent-%COMP%]{font-size:1.125rem;color:var(--color-slate-300);margin-bottom:1.5rem}.role-display-box[_ngcontent-%COMP%]{background-color:var(--color-slate-800);border:1px solid var(--color-slate-700);border-radius:.75rem;padding:1.5rem;margin-bottom:1.5rem;background-image:radial-gradient(circle at top left,rgba(6,182,212,.1),transparent 30%);box-shadow:inset 0 2px 4px #0003}.role-label[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-slate-400);text-transform:uppercase;font-weight:500;margin-bottom:.25rem}.role-name[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:800;color:var(--color-green-400);margin-bottom:.5rem}.role-description[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-slate-400);line-height:1.5}.role-selection-info[_ngcontent-%COMP%]{font-size:.875rem;color:var(--color-slate-500);margin-top:1rem;margin-bottom:1.5rem}.btn-proceed-dashboard[_ngcontent-%COMP%]{width:100%;background-image:linear-gradient(to right,var(--color-cyan-500) 0%,var(--color-cyan-400) 51%,var(--color-cyan-500) 100%);background-size:200% auto;color:var(--color-white);font-weight:700;font-size:1rem;padding:.875rem 1.5rem;border-radius:.5rem;border:none;cursor:pointer;box-shadow:0 4px 14px #06b6d463;transition:background-position .3s ease-in-out,transform .2s ease-in-out,box-shadow .2s ease-in-out}.btn-proceed-dashboard[_ngcontent-%COMP%]:hover{background-position:right center;transform:translateY(-2px);box-shadow:0 6px 20px #06b6d43b}"],changeDetection:0})}};var ei=class t{constructor(e){this.theme=R("dark");this.renderer=e.createRenderer(null,null),We(()=>{this.renderer.setAttribute(document.documentElement,"data-theme",this.theme())})}toggleTheme(){this.theme.update(e=>e==="light"?"dark":"light")}setTheme(e){this.theme.set(e)}static{this.\u0275fac=function(n){return new(n||t)(ye(pn))}}static{this.\u0275prov=fe({token:t,factory:t.\u0275fac,providedIn:"root"})}};function lN(t,e){t&1&&(U(),x(0,"svg",1),ve(1,"path",2),P())}function cN(t,e){t&1&&(U(),x(0,"svg",1),ve(1,"path",3),P())}var el=class t{constructor(){this.themeService=w(ei);this.theme=this.themeService.theme}toggleTheme(){this.themeService.toggleTheme()}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=ee({type:t,selectors:[["app-theme-toggle"]],decls:3,vars:2,consts:[[1,"theme-toggle-button",3,"click","title"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor"],["fill-rule","evenodd","d","M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.707.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm-.707 7.072l.707-.707a1 1 0 10-1.414-1.414l-.707.707a1 1 0 101.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 100 2h1z","clip-rule","evenodd"],["d","M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"]],template:function(n,o){n&1&&(x(0,"button",0),ke("click",function(){return o.toggleTheme()}),O(1,lN,2,0,":svg:svg",1)(2,cN,2,0,":svg:svg",1),P()),n&2&&(ht("title","Switch to "+(o.theme()==="dark"?"light":"dark")+" mode"),p(),F(o.theme()==="dark"?1:2))},styles:[".theme-toggle-button[_ngcontent-%COMP%]{padding:.625rem;background-color:var(--color-slate-800);color:var(--color-slate-400);border:1px solid var(--color-slate-700);border-radius:9999px;cursor:pointer;transition:all .2s ease-in-out;display:flex;align-items:center;justify-content:center}.theme-toggle-button[_ngcontent-%COMP%]:hover{background-color:var(--color-slate-700);color:var(--color-cyan-300)}.theme-toggle-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1.125rem;height:1.125rem}"],changeDetection:0})}};function dN(t,e){t&1&&(m(0,"div",1),k(1,"app-splash-screen"),g())}function uN(t,e){if(t&1){let n=G();m(0,"div",2)(1,"div",3)(2,"div",4),k(3,"app-theme-toggle"),m(4,"button",5),M("click",function(){I(n);let i=E(2);return T(i.toggleLanguage())}),h(5),g()(),k(6,"app-login"),g()()}if(t&2){let n=E(2);p(),St("dir",n.translationService.language()==="ar"?"rtl":"ltr"),p(4),N(" ",n.translationService.language()==="en"?"\u0627\u0644\u0639\u0631\u0628\u064A\u0629":"English"," ")}}function pN(t,e){if(t&1&&(m(0,"div",6)(1,"div",3),k(2,"app-role-selection"),g()()),t&2){let n=E(3);p(),St("dir",n.translationService.language()==="ar"?"rtl":"ltr")}}function fN(t,e){if(t&1&&h(0),t&2){E();let n=po(0);N(" - ",n.name," ")}}function mN(t,e){t&1&&k(0,"app-parent-portal")}function gN(t,e){t&1&&k(0,"app-driver-dashboard")}function hN(t,e){t&1&&k(0,"app-guard-view")}function vN(t,e){t&1&&k(0,"app-teacher-dashboard")}function _N(t,e){t&1&&k(0,"app-school-supervisor")}function yN(t,e){t&1&&k(0,"app-school-admin-dashboard")}function CN(t,e){t&1&&k(0,"app-super-admin-dashboard")}function bN(t,e){if(t&1){let n=G();uo(0),m(1,"div",7)(2,"header",8)(3,"div",9)(4,"div",10)(5,"h1",11),h(6),y(7,"translate"),g(),m(8,"p",12),h(9),y(10,"translate"),O(11,fN,1,1),g()(),m(12,"div",13),k(13,"app-theme-toggle"),m(14,"button",14),M("click",function(){I(n);let i=E(3);return T(i.toggleLanguage())}),h(15),g(),m(16,"button",15),M("click",function(){I(n);let i=E(3);return T(i.logout())}),U(),m(17,"svg",16),k(18,"path",17),g()()()()(),J(),m(19,"main",18),O(20,mN,1,0,"app-parent-portal")(21,gN,1,0,"app-driver-dashboard")(22,hN,1,0,"app-guard-view")(23,vN,1,0,"app-teacher-dashboard")(24,_N,1,0,"app-school-supervisor")(25,yN,1,0,"app-school-admin-dashboard")(26,CN,1,0,"app-super-admin-dashboard"),g()()}if(t&2){let n;E(2);let o=po(0),i=E(),r=Ho(i.authService.currentUserSchool());p(6),b(C(7,7,"roles."+o.role+".title")),p(3),Ce("",C(10,9,"header.welcome"),", ",o.name," "),p(2),F(r?11:-1),p(4),N(" ",i.translationService.language()==="en"?"\u0627\u0644\u0639\u0631\u0628\u064A\u0629":"English"," "),p(5),F((n=o.role)==="parent"?20:n==="driver"?21:n==="guard"?22:n==="teacher"?23:n==="school-supervisor"?24:n==="school-admin"?25:n==="super-admin"?26:-1)}}function SN(t,e){if(t&1&&O(0,pN,3,1,"div",6)(1,bN,27,11,"div",7),t&2){let n=E(2);F(n.authService.hasSelectedRole()?1:0)}}function EN(t,e){if(t&1&&(uo(0),O(1,uN,7,2,"div",2)(2,SN,2,1)),t&2){let n=Ho(E().authService.currentUser());p(),F(n?2:1)}}var tl=class t{constructor(){this.authService=w(de);this.translationService=w(X);this.renderer=w(kn);this.themeService=w(ei);this.bootstrapping=R(!0);We(()=>{let e=this.translationService.language();this.renderer.setAttribute(document.documentElement,"lang",e),this.renderer.setAttribute(document.documentElement,"dir",e==="ar"?"rtl":"ltr")})}ngOnInit(){setTimeout(()=>{this.bootstrapping.set(!1)},1500)}logout(){this.authService.logout()}toggleLanguage(){let e=this.translationService.language();this.translationService.setLanguage(e==="en"?"ar":"en")}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=ee({type:t,selectors:[["app-root"]],decls:4,vars:1,consts:[[1,"app-container"],[1,"splash-screen-wrapper-global"],[1,"login-wrapper-global"],[1,"login-card-global"],[1,"login-header-actions"],[1,"language-toggle-button-login",3,"click"],[1,"role-selection-wrapper-global"],[1,"dashboard-container"],[1,"dashboard-header-sticky"],[1,"dashboard-header-content"],[1,"header-info"],[1,"header-title"],[1,"header-subtitle"],[1,"header-actions"],[1,"language-toggle-button-header",3,"click"],[1,"logout-button",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor"],["fill-rule","evenodd","d","M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z","clip-rule","evenodd"],[1,"dashboard-main-content"]],template:function(n,o){n&1&&(k(0,"app-toast"),m(1,"div",0),O(2,dN,2,0,"div",1)(3,EN,3,2),g()),n&2&&(p(2),F(o.bootstrapping()?2:3))},dependencies:[Qs,da,ka,Ra,Oa,Fa,Va,Ya,Ka,Qa,Xa,el,oe],styles:[`[_nghost-%COMP%]{display:flex;justify-content:center;align-items:flex-start;min-height:100vh;width:100%}.app-container[_ngcontent-%COMP%]{width:100%;min-height:100vh;background-image:radial-gradient(circle at 20% 20%,rgba(10,161,161,.1),transparent 30%),radial-gradient(circle at 80% 70%,rgba(100,10,161,.1),transparent 30%);position:relative;overflow:hidden}.app-container[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background-image:url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 800"><g fill-opacity="0.2"><circle fill="%23083344" cx="400" cy="400" r="600"/><circle fill="%23020617" cx="400" cy="400" r="500"/><circle fill="%230f172a" cx="400" cy="400" r="300"/><circle fill="%231e293b" cx="400" cy="400" r="200"/><circle fill="%23334155" cx="400" cy="400" r="100"/></g></svg>');background-size:cover;opacity:.05;z-index:-1}.splash-screen-wrapper-global[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;min-height:100vh}.login-wrapper-global[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;width:100%;min-height:100vh}.login-card-global[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#0f172acc;color:var(--color-white);position:relative;display:flex;flex-direction:column;justify-content:center;overflow-y:auto}.role-selection-wrapper-global[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;width:100%;min-height:100vh}@media(min-width:640px){[_nghost-%COMP%]{padding-top:2rem;padding-bottom:2rem;align-items:center}.login-wrapper-global[_ngcontent-%COMP%], .role-selection-wrapper-global[_ngcontent-%COMP%]{min-height:auto;padding:0}.login-card-global[_ngcontent-%COMP%]{max-width:28rem;height:auto;background-color:#0f172a99;-webkit-backdrop-filter:blur(1.5rem);backdrop-filter:blur(1.5rem);border-radius:1.5rem;box-shadow:0 25px 50px -12px #0006;border:1px solid var(--color-slate-700);overflow:hidden;overflow-y:visible}}.login-header-actions[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem;z-index:10;display:flex;gap:.5rem;align-items:center}.language-toggle-button-login[_ngcontent-%COMP%]{padding:.375rem .75rem;background-color:var(--color-slate-800);border:1px solid var(--color-slate-700);color:var(--color-cyan-400);border-radius:.5rem;transition-property:background-color,color;transition-duration:.3s;font-size:.875rem;font-weight:600;cursor:pointer}.language-toggle-button-login[_ngcontent-%COMP%]:hover{background-color:var(--color-slate-700)}.dashboard-container[_ngcontent-%COMP%]{width:100%;max-width:70rem;margin-left:auto;margin-right:auto;display:flex;flex-direction:column;min-height:100vh}.dashboard-header-sticky[_ngcontent-%COMP%]{position:sticky;top:1rem;z-index:40;margin-left:1rem;margin-right:1rem;margin-top:1rem}.dashboard-header-content[_ngcontent-%COMP%]{background-color:#0f172ab3;-webkit-backdrop-filter:blur(1rem);backdrop-filter:blur(1rem);border:1px solid var(--color-slate-800);border-radius:1rem;box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d;padding:1rem 1.5rem;display:flex;justify-content:space-between;align-items:center}.header-info[_ngcontent-%COMP%]{flex:1;overflow:hidden}.header-title[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:700;color:var(--color-cyan-400);text-transform:capitalize;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.header-subtitle[_ngcontent-%COMP%]{font-size:.75rem;color:var(--color-slate-400);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-top:.25rem}.header-actions[_ngcontent-%COMP%]{flex-shrink:0;display:flex;align-items:center;gap:.75rem}.language-toggle-button-header[_ngcontent-%COMP%]{padding:.5rem .75rem;background-color:var(--color-slate-800);border:1px solid var(--color-slate-700);color:var(--color-cyan-300);border-radius:.5rem;font-size:.75rem;font-weight:600;cursor:pointer;transition:background-color .2s}.language-toggle-button-header[_ngcontent-%COMP%]:hover{background-color:var(--color-slate-700)}.logout-button[_ngcontent-%COMP%]{padding:.625rem;background-color:var(--color-slate-800);color:var(--color-red-400);border-radius:9999px;transition-property:background-color,color;transition-duration:.3s;border:1px solid var(--color-slate-700);cursor:pointer;display:flex;align-items:center;justify-content:center}.logout-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:1.125rem;width:1.125rem}.logout-button[_ngcontent-%COMP%]:hover{background-color:#ef44441a;border-color:#ef44444d}.dashboard-main-content[_ngcontent-%COMP%]{flex-grow:1;padding:1rem}@media(min-width:640px){.dashboard-main-content[_ngcontent-%COMP%]{padding:1.5rem}}`],changeDetection:0})}};yu(tl,{providers:[iu()]}).catch(t=>console.error(t));
